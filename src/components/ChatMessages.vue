<template>
    <div class="w-100 align-self-stretch my-auto --bg-info">
        <div class="d-flex flex-column --align-items-start">
            <ChatMessageItem v-for="(message, messageIndex) in messages"
                             v-bind:message="message" v-bind:next="getNext(messageIndex)"
                             v-bind:companion="companion" v-bind:self-person="selfPerson"
                             v-bind:key="messageIndex">
            </ChatMessageItem>
            <div v-if="companion.isType">
                <ChatMessageItem v-bind:message="typingMessage" v-bind:companion="companion" v-bind:next="null" v-bind:self-person="selfPerson"></ChatMessageItem>
            </div>
        </div>
    </div>
</template>

<script>
import moment from 'moment';
import ChatMessageItem from './ChatMessageItem.vue';

export default {
name: 'ChatMessages',
props: {
    messages : Array,
    companion: Object,
    selfPerson: Object
},
components: {ChatMessageItem},
data() {
    return {
        typingMessage : {
            message: 'Печатает...',
            dtLabel : moment().format(`YYYY-MM-DD HH:mm:ss`)+'',
            isMine: false,
            isRead: false,
            isEdited: false
        },
        previousMsg : null
    }
},

methods: {
    getNext(currIndex) {
        return (currIndex>=0  ||  currIndex < this.messages.length) ? this.messages[currIndex+1] : null;
    }
},

mounted() {
},

}
</script>
