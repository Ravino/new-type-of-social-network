<template>
    <header id="authHeader" class="fixed-top">
        <nav class="auth-navbar navbar navbar-expand-lg container container-wide mx-auto">
        <div class="w-100 ">
            <div class="row w-100 px-0 mr-0">
                <div class="d-flex align-items-center col-sm-1 col-md-1 col-lg-1 col-xl-1 py-lg-0 p-xl-0">
                    <router-link to="/profile" tag="a" class="navbar-brand w-100 d-block text-center mx-auto h-auto my-0">
                        <svg class="page-logo w-75" viewBox="0 0 1101 446" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path class="page-logo-bg" d="M16.9363 104.685C19.7716 46.0686 68.1225 0 126.808 0L1100.67 0L1084.86 341.094C1082.14 399.801 1033.75 446 974.981 446L0.426514 446L16.9363 104.685Z" />
                            <path d="M242.42 91C256.233 91 268.937 93.3433 280.53 98.03C292.123 102.717 302.237 109.253 310.87 117.64C319.503 125.78 326.163 135.647 330.85 147.24C335.783 158.587 338.25 171.043 338.25 184.61C338.25 198.177 335.783 210.757 330.85 222.35C326.163 233.697 319.503 243.563 310.87 251.95C302.237 260.337 292.123 266.873 280.53 271.56C268.937 276.247 256.233 278.59 242.42 278.59H203.57V350H132.16V91H242.42ZM233.91 216.06C243.283 216.06 250.807 213.223 256.48 207.55C262.153 201.63 264.99 193.983 264.99 184.61C264.99 175.483 262.153 167.96 256.48 162.04C250.807 156.12 243.283 153.16 233.91 153.16H203.57V216.06H233.91ZM534.917 284.51V350H370.637V91H442.787V284.51H534.917ZM567.199 91H639.349V350H567.199V91ZM878.019 283.4V350H673.039V335.2L768.869 157.6H679.329V91H873.579V107.28L778.119 283.4H878.019ZM912.629 91H984.779V350H912.629V91Z" fill="white"/>
                        </svg>
                    </router-link>
                </div>

                <div class="col-sm-4 col-md-6 col-lg-4 d-sm-none d-md-block d-lg-block d-xl-block pl-0">
                    <form class="form-inline mt-3 mt-md-3">
                        <input id="topSearch" ref="topSearch"  class="top-search form-control form-control rounded-pill w-100"
                               type="text"
                               placeholder="Поиск"
                               aria-label="Поиск" />
                        <button class="d-none btn btn-outline-success" type="submit">Search</button>
                    </form>
                </div>

                <div id="playerWrapper" class="plz-top-player col-lg-3 col-xl-3 d-sm-none d-md-none d-lg-block d-xl-block text-center mt-1">
                    <div class="btn-block d-inline-block mt-3 ">
                        <a class="btn btn-link btn-sm" href="#prev" title="предыдущий трэк">
                            <i class="fas fa-step-backward"></i>
                        </a>
                        <a class="btn btn-link btn-sm" href="#play" title="начать воспроизведение">
                            <i class="far fa-play-circle fa-2x"></i>
                        </a>
                        <a class="btn btn-link btn-sm" href="#next" title="начать воспроизведение">
                            <i class="fas fa-step-forward"></i>
                        </a>
                        <a class="btn btn-link btn-song btn-sm" href="#track" title="MASE - Psychoi">
                            <span class="singer">MASE</span> - <span class="song">Psychoi</span>
                        </a>
                    </div>
                </div>

                <div id="watcherWrapper" class="plz-top-watcher col-sm-4 col-md-4 col-lg-2 w-auto ml-auto text-center">
                    <div class="--btn-block mt-3 d-inline-block">
                        <a class="btn btn-link my-auto text-body btn-sm" href="#likes" title="Оценки">
                            <svg class="icon icon-bell" enable-background="new 0 0 443.295 443.295" viewBox="0 0 443.295 443.295"  xmlns="http://www.w3.org/2000/svg"><path d="m367.117 319.43c-4.613-11.499-6.94-23.62-6.94-36.012v-89.476c0-62.068-41.31-114.116-97.677-131.676-3.35-19.579-20.331-34.56-40.852-34.56s-37.502 14.981-40.852 34.56c-56.367 17.56-97.677 69.608-97.677 131.676v89.476c0 12.392-2.327 24.513-6.94 36.012l-19.779 49.459c-1.705 4.275-1.177 9.091 1.393 12.906 2.584 3.815 6.872 6.088 11.472 6.088h105.306c9.822 16.694 27.341 27.706 47.077 27.706s37.255-11.012 47.077-27.706h105.305c4.6 0 8.888-2.273 11.472-6.088 2.57-3.815 3.098-8.631 1.393-12.906.001 0-19.778-49.459-19.778-49.459zm-277.397 40.747 12.189-30.466c5.912-14.773 8.915-30.357 8.915-46.294v-89.476c0-61.121 49.716-110.824 110.824-110.824s110.823 49.703 110.823 110.824v89.476c0 15.936 3.003 31.521 8.915 46.294l12.189 30.466z"/><path d="m26.096 117.344c-17.073 31.981-26.096 68.047-26.096 104.303s9.023 72.322 26.096 104.303l24.432-13.041c-15.138-28.382-22.822-59.091-22.822-91.262 0-32.17 7.684-62.879 22.822-91.262 0 0-24.432-13.041-24.432-13.041z"/><path d="m417.199 117.344-24.432 13.041c15.138 28.382 22.822 59.091 22.822 91.262 0 32.17-7.684 62.879-22.822 91.262l24.432 13.041c17.073-31.981 26.096-68.047 26.096-104.303 0-36.255-9.023-72.322-26.096-104.303z"/></svg>
                        </a>

                        <router-link to="/chats-list" tag="a" class="btn btn-link my-auto text-body btn-sm">
                            <svg class="icon icon-message"  viewBox="0 0 387 387"  xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M174.249 0.540985C148.138 3.20295 126.815 9.42485 103.999 21.0387C89.6043 28.3666 78.6544 35.7055 66.304 46.3028C47.4596 62.4731 32.4252 81.6353 21.0373 103.998C6.62394 132.303 0.00949097 159.668 0.00949097 190.997C0.00949097 226.275 8.98792 258.667 27.3113 289.496C42.2922 314.7 64.3405 337.107 90.0098 353.214C96.6692 357.392 110.944 364.668 118.866 367.922C141.835 377.355 165.577 381.984 190.998 381.984C208.113 381.984 222.411 380.19 239.248 375.932C249.17 373.423 264.229 367.888 272.86 363.577C282.428 358.798 283.566 358.841 303.248 364.728C380.066 387.702 378.171 387.161 380.785 386.866C385.173 386.372 387.36 383.434 386.827 378.748C386.671 377.371 384.423 369.157 381.833 360.495C370.508 322.627 362.278 294.933 361.181 290.999C359.215 283.946 359.675 280.579 363.702 272.585C369.424 261.225 374.756 245.485 377.961 230.497C383.418 204.969 383.418 177.025 377.961 151.498C374.257 134.173 369.363 120.501 360.96 103.998C349.572 81.6353 334.537 62.4731 315.693 46.3028C303.343 35.7055 292.393 28.3666 277.998 21.0387C255.315 9.49185 234.894 3.47544 209.096 0.737482C201.699 -0.0475064 181.157 -0.163505 174.249 0.540985ZM205.348 43.7603C221.997 45.1833 228.549 46.7143 243.248 52.6142C257.067 58.1611 269.734 64.9815 278.571 71.6324C288.045 78.7628 299.071 89.5547 307.808 100.249C313.934 107.746 321.672 120.722 326.147 130.998C334.918 151.141 336.622 157.627 338.23 176.989C339.192 188.58 339.192 193.415 338.23 205.005C336.556 225.168 334.506 232.509 324.161 255.401C320.368 263.795 318.747 268.618 317.241 275.996C315.647 283.802 316.66 290.613 322.286 309.909C324.781 318.465 324.955 321.26 323.108 323.106C321.262 324.953 318.467 324.779 309.911 322.284C290.615 316.658 283.804 315.645 275.998 317.239C268.592 318.751 263.786 320.37 255.308 324.211C233.001 334.316 226.828 336.078 206.998 338C194.694 339.193 188.435 339.241 176.649 338.234C160 336.811 153.448 335.28 138.749 329.38C124.93 323.833 112.263 317.013 103.426 310.362C93.9613 303.239 82.2169 291.744 73.7369 281.303C68.0855 274.344 60.1955 260.976 55.8496 250.996C47.0786 230.854 45.3746 224.368 43.7672 205.005C42.8047 193.415 42.8047 188.58 43.7672 176.989C45.3746 157.627 47.0786 151.141 55.8496 130.998C60.3245 120.722 68.0635 107.746 74.1889 100.249C82.9258 89.5547 93.9518 78.7628 103.426 71.6324C118.397 60.3646 145.55 48.2313 161.957 45.4778C175.908 43.1364 191.042 42.5374 205.348 43.7603Z" />
                            </svg>
                        </router-link>

                        <router-link to="/friends-list" tag="a" class="btn btn-link my-auto text-body btn-sm">
                            <svg class="icon icon-friend" viewBox="0 0 518 483"  xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M311.25 0.781503C292.456 3.3305 272.273 11.9745 257.647 23.739C252.843 27.603 244.393 36.142 243.674 37.859C241.676 42.629 243.528 44.719 253.083 48.4755C256.75 49.917 263.165 52.8765 267.339 55.0525C278.223 60.7275 279.386 60.749 288.052 55.441C297.526 49.6385 308.294 45.2125 317.604 43.294C322.507 42.284 329.455 42.279 334.396 43.2825C339.928 44.4065 349.508 47.6765 354.838 50.2615C361.156 53.325 369.634 59.0995 373.345 62.8655C379.483 69.095 385.483 79.609 389.4 91.003C392.375 99.657 393.222 103.941 393.159 110C393.044 121.038 387.329 136.838 378.894 149.436C374.272 156.341 370.163 159.827 353.5 170.986C345.113 176.602 337.205 182.174 335.929 183.367C332.463 186.605 331.444 189.438 330.931 197.25C330.697 200.825 330.054 206.271 329.503 209.352C328.324 215.937 328.232 219.889 329.202 222.211C330.766 225.953 336.134 230.39 341.501 232.376C343.014 232.936 350.777 235.318 358.751 237.671C381.235 244.303 390.426 247.697 403.071 254.036C418.537 261.789 435.34 273.326 444.514 282.49C454.269 292.234 465.452 310.019 470.715 324.159C474.012 333.017 475.206 338.202 475.229 343.76C475.249 348.43 475.139 348.996 473.615 352.092C472.716 353.919 471.187 356.11 470.218 356.961C463.854 362.548 445.359 367.108 422.25 368.788C415.05 369.311 412.233 371.058 411.656 375.356C411.517 376.397 411.884 380.104 412.473 383.591C413.062 387.079 413.715 393.266 413.924 397.341C414.621 410.898 415.999 411.784 434.014 410.267C463.432 407.79 481.137 403.003 494.991 393.78C499.86 390.539 505.495 385.118 508.432 380.849C511.284 376.703 514.474 369.387 516.104 363.25C517.687 357.29 517.698 357.168 517.708 345C517.717 333.1 517.671 332.532 516.107 325.113C510.983 300.799 499.546 279.21 480.869 258.601C460.924 236.593 434.658 218.733 404.301 206.538C395.962 203.188 394 201.776 394 199.124C394 198.195 394.256 196.943 394.568 196.342C394.88 195.741 398.501 191.905 402.614 187.816C413.354 177.14 419.306 168.82 425.564 155.738C436.161 133.585 438.711 107.871 432.702 83.75C428.741 67.8505 421.286 52.7255 411.519 40.7735C407.261 35.5625 397.975 26.427 393.332 22.882C377.556 10.835 359.383 3.25 340.349 0.769003C333.114 -0.173997 318.246 -0.167497 311.25 0.781503ZM178.25 71.7815C159.462 74.3295 139.359 82.937 124.647 94.731C119.736 98.6685 109.584 109.016 105.988 113.75C93.404 130.315 86.176 148.567 83.7135 170C80.603 197.074 89.75 227.527 107.527 249.283C109.22 251.354 113.607 256.019 117.279 259.65C128.39 270.637 128.175 272.124 114.69 277.541C98.688 283.969 80.8945 293.619 68.8095 302.422C38.2765 324.664 17.1615 351.645 6.9235 381.5C-0.818997 404.079 -0.985998 428.396 6.4925 444.354C16.672 466.077 39.3045 477.105 81.75 481.025C94.9995 482.248 108.552 482.638 135.625 482.574C172.136 482.489 214.478 482.491 250.875 482.578C291.893 482.677 310.351 481.425 330.741 477.165C351.143 472.903 367.207 463.803 375.432 451.849C378.284 447.703 381.473 440.387 383.103 434.25C384.687 428.29 384.697 428.168 384.707 416C384.717 404.1 384.671 403.532 383.108 396.113C377.984 371.799 366.546 350.21 347.869 329.601C327.924 307.593 301.658 289.733 271.301 277.538C262.962 274.188 261 272.776 261 270.124C261 269.195 261.256 267.943 261.568 267.342C261.88 266.742 265.501 262.904 269.614 258.815C280.354 248.139 286.306 239.82 292.564 226.738C303.161 204.585 305.711 178.871 299.702 154.75C295.741 138.851 288.286 123.725 278.519 111.773C274.261 106.562 264.975 97.427 260.332 93.882C244.556 81.835 226.383 74.25 207.35 71.769C200.115 70.826 185.246 70.8325 178.25 71.7815ZM201.396 114.283C206.928 115.407 216.508 118.676 221.838 121.261C228.155 124.325 236.635 130.099 240.346 133.865C246.484 140.095 252.483 150.609 256.4 162.003C259.375 170.657 260.222 174.941 260.159 181C260.044 192.038 254.329 207.838 245.894 220.436C241.264 227.353 237.188 230.802 220 242.346C211.337 248.165 202.9 254.085 201.25 255.501C195.94 260.06 193.189 260.896 189.605 259.039C188.585 258.51 186.4 256.918 184.75 255.501C183.1 254.085 174.663 248.165 166 242.346C148.272 230.439 144.622 227.291 139.512 219.5C131.559 207.373 125.769 190.877 125.824 180.5C125.896 166.728 135.653 144.061 146.005 133.615C153.86 125.689 170.577 117.261 184.262 114.329C188.894 113.337 196.633 113.316 201.396 114.283ZM196.15 295.812C197.03 296.259 198.65 297.349 199.75 298.234C204.924 302.399 206.121 302.88 225.751 308.671C248.235 315.303 257.426 318.697 270.071 325.035C285.537 332.788 302.34 344.326 311.514 353.49C321.269 363.234 332.452 381.019 337.715 395.159C341.012 404.017 342.206 409.202 342.229 414.76C342.249 419.43 342.139 419.996 340.615 423.092C339.716 424.919 338.187 427.11 337.218 427.961C330.572 433.796 313.258 437.918 286.25 440.095C275.903 440.929 119.309 441.286 107 440.504C81.173 438.862 61.8705 435.39 53.25 430.835C42.692 425.256 41.236 415.661 48.0015 396.25C52.8975 382.203 64.5065 363.602 74.8045 353.305C83.0575 345.052 101.282 332.415 114.608 325.706C127.99 318.969 138.267 315.176 163.176 307.783C178.54 303.222 181.165 302.166 185.5 298.79C190.552 294.856 192.947 294.186 196.15 295.812Z" />
                            </svg>
                        </router-link>
                    </div>
                </div>

                <div class="col-sm-2 col-md-1 col-lg-2 px-0 profile-menu">
                    <router-link to="/account" tag="a" class="profile-menu-link">
                        <span>{{userName}}</span>
                    </router-link>

                    <router-link to="/profile" tag="a" class="profile-menu-link">
                        <img :src="userPic" :alt="userName" :class="{ 'default-avatar': isDefaultAvatar }" />
                    </router-link>
                    <i class="profile-menu-opener fa fas fa-chevron-down" aria-hidden="true" @click.stop="goLogout()"></i>
                </div>
            </div>
        </div>
    </nav>
    </header>
</template>

<script>
export default {
name: 'AuthNavBar',
props: {
    isAuth: Boolean,
    userData : Object,
},
data () {
    return {
        tmpUserName : `---`,
        tmpUserPicture : `images/noavatar-256.png`,
        // userData : null,
        isDefaultAvatar: true,
    }
},

methods: {
    goLogout(){
        this.$router.push({path: '/login'});
    }
},

computed : {
    userName() {
        let retName = this.tmpUserName;

        if (this.userData  &&  this.userData.profile  &&  this.userData.profile  &&  this.userData.profile.firstName) {
            retName = this.userData.profile.firstName;
        }

        return retName;
    },

    userPic() {
        let retPath = this.tmpUserPicture;

        if (this.userData  &&  this.userData.user_pic) {
            retPath = this.userData.user_pic;
            this.isDefaultAvatar = false;
        }

        return retPath;
    }
},

}
</script>
