(function(t){function e(e){for(var s,r,o=e[0],l=e[1],c=e[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&m.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],s=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var s={},a={app:0},n=[];function r(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=s,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(i,s,function(e){return t[e]}.bind(null,s));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push(["1112","chunk-vendors"]),i()})({0:function(t,e){},"00e9":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-message",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -45 512 511"}},[i("path",{attrs:{d:"m407 .5h-302c-57.898438 0-105 47.101562-105 105v162.171875c0 46.199219 30.332031 86.4375 74.285156 99.316406l50.710938 50.714844c2.816406 2.8125 6.628906 4.394531 10.609375 4.394531 3.976562 0 7.792969-1.582031 10.605469-4.394531l46.519531-46.523437h214.269531c57.898438 0 105-47.101563 105-105v-160.679688c0-57.898438-47.101562-105-105-105zm75 265.679688c0 41.355468-33.644531 75-75 75h-220.480469c-3.976562 0-7.792969 1.582031-10.605469 4.394531l-40.308593 40.308593-42.929688-42.929687c-1.925781-1.925781-4.339843-3.292969-6.984375-3.949219-32.789062-8.160156-55.691406-37.492187-55.691406-71.332031v-162.171875c0-41.355469 33.644531-75 75-75h302c41.355469 0 75 33.644531 75 75zm0 0"}}),i("path",{attrs:{d:"m351.242188 144.328125h-190.484376c-8.285156 0-15 6.71875-15 15 0 8.285156 6.714844 15 15 15h190.484376c8.285156 0 15-6.714844 15-15 0-8.28125-6.714844-15-15-15zm0 0"}}),i("path",{attrs:{d:"m351.242188 197.351562h-190.484376c-8.285156 0-15 6.714844-15 15 0 8.285157 6.714844 15 15 15h190.484376c8.285156 0 15-6.714843 15-15 0-8.285156-6.714844-15-15-15zm0 0"}})])},a=[],n={name:"IconMessage"},r=n,o=i("2877"),l=Object(o["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},"059c":function(t,e,i){t.exports=i.p+"img/icon-recoverPass.2c39904f.png"},"060e":function(t,e,i){"use strict";var s=i("afdf"),a=i.n(s);a.a},"06bf":function(t,e,i){},"07d8":function(t,e,i){},"093c":function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));i("bf19");var s=i("d4ec"),a=i("bee2"),n=i("262e"),r=i("2caf"),o=i("1066"),l=function(t){Object(n["a"])(i,t);var e=Object(r["a"])(i);function i(){return Object(s["a"])(this,i),e.apply(this,arguments)}return i}(o["a"]),c=function(){function t(e){Object(s["a"])(this,t),this._id=null,this._originalName=null,this._url=null,this._path=null,this._mimeType=null,this._image=null,this._size=null,this._id=e.id,this._originalName=e.originalName,this._url=e.url,this._path=e.path,this._mimeType=e.mimeType,this._size=e.size,this._image=e.image?new l(e.image):null}return Object(a["a"])(t,[{key:"id",get:function(){return this._id}},{key:"originalName",get:function(){return this._originalName}},{key:"url",get:function(){return this._url}},{key:"path",get:function(){return this._path}},{key:"mimeType",get:function(){return this._mimeType}},{key:"size",get:function(){return this._size}},{key:"image",get:function(){return this._image}}]),Object(a["a"])(t,[{key:"toJSON",value:function(){return{id:this.id,originalName:this.originalName,url:this.url,path:this.path,mimeType:this.mimeType,size:this.size,image:this.image?this.image.toJSON():null}}}]),t}()},1066:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("bf19");var s=i("d4ec"),a=i("bee2"),n=i("212f"),r=function(){function t(e){Object(s["a"])(this,t),this._original=null,this._normal=null,this._medium=null,this._thumb=null,this._original=e.original?new n["a"](e.original):null,this._normal=e.normal?new n["a"](e.normal):null,this._medium=e.medium?new n["a"](e.medium):null,this._thumb=e.thumb?new n["a"](e.thumb):null}return Object(a["a"])(t,[{key:"toJSON",value:function(){return{original:this._original?this._original.toJSON():null,normal:this._normal?this._normal.toJSON():null,medium:this._medium?this._medium.toJSON():null,thumb:this._thumb?this._thumb.toJSON():null}}},{key:"original",get:function(){return this._original}},{key:"normal",get:function(){return this._normal}},{key:"medium",get:function(){return this._medium}},{key:"thumb",get:function(){return this._thumb}}]),t}()},1112:function(t,e,i){"use strict";i.r(e);var s=i("2b0e"),a=i("8c4f"),n=i("1dce"),r=i.n(n),o=i("3dd7"),l=i.n(o),c=i("8e5f"),u=i.n(c),d=i("d740"),m=i.n(d);s["default"].prototype.$defaultAvatarPath="/images/noavatar-256.png",s["default"].prototype.$isAuth=!1,s["default"].prototype.$auth=null,s["default"].prototype.$lastSearch="",s["default"].prototype.$lastCommunitiesSearch={popular:"",my:"",owner:""},s["default"].prototype.$api=null,s["default"].prototype.$alert=function(t,e,i){this.$root.$emit("alertModal",{message:t||"",clazz:"",timeOut:i||0})},s["default"].prototype.$notify=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$root.$emit("NewAppNotification",{type:"app.notification",message:t||"",clazz:""})},s["default"].prototype.$friendsKeyUpdater=0,s["default"].prototype.$favoritesKeyUpdater=0,s["default"].prototype.$dialogsKeyUpdater=0,s["default"].prototype.$invitationsKeyUpdater=0,s["default"].prototype.$notificationsKeyUpdater=0,s["default"].prototype.$messagesKeyUpdater=0,s["default"].prototype.$communitiesKeyUpdater=0,s["default"].prototype.$messagesList=null,s["default"].prototype.$isXS=function(){return window.innerWidth<=575},s["default"].prototype.$isSM=function(){return window.innerWidth>=576&&window.innerWidth<=767},s["default"].prototype.$isMD=function(){return window.innerWidth>=768&&window.innerWidth<=991},s["default"].prototype.$isLG=function(){return window.innerWidth>=992&&window.innerWidth<=1199},s["default"].prototype.$isXL=function(){return window.innerWidth>=1200},s["default"].prototype.$log=function(){"production"!=="production".toLowerCase()&&window&&console&&console.log&&console.log.apply(window,arguments)},s["default"].prototype.$info=function(){"production"!=="production".toLowerCase()&&window&&console&&console.info&&console.log.apply(window,arguments)},s["default"].prototype.$warn=function(){"production"!=="production".toLowerCase()&&window&&console&&console.warn&&console.log.apply(window,arguments)},s["default"].prototype.$dir=function(){"production"!=="production".toLowerCase()&&window&&console&&console.dir&&console.log.apply(window,arguments)},s["default"].prototype.$trace=function(){"production"!=="production".toLowerCase()&&window&&console&&console.trace&&console.log.apply(window,arguments)},s["default"].prototype.$error=function(){"production"!=="production".toLowerCase()&&window&&console&&console.error&&console.log.apply(window,arguments)};i("b0c0"),i("96cf");var p=i("1da1"),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-10 offset-1"},[i("div",{staticClass:"jumbotron"},[i("router-link",{staticClass:"btn btn-link btn-block",attrs:{tag:"a",to:"/login"}},[t._v(" Авторизация ")]),i("h5",{staticClass:"alert alert-warning"},[t._v("Home page should be here…")])],1)])])},f=[],v={name:"HomePage",data:function(){return{}},methods:{}},g=v,b=i("2877"),C=Object(b["a"])(g,h,f,!1,null,null,null),y=C.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-lg-5 d-flex px-0 mb-3 mb-lg-0"},[i("LoginForm",{ref:"loginForm"})],1),i("div",{staticClass:"col-12 col-lg-7 pr-0 pl-0 pl-lg-3 pb-0"},[i("LastEntries",{on:{logInWithEntryItem:t.logInWithEntryItem}}),t.checkIsTarga()?t._e():i("PliziMobile")],1)])},x=[],k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-login-form bg-white-br20 mr-0 pt-3",attrs:{id:"loginForm"}},[i("div",{staticClass:"card-body"},[i("form",{attrs:{id:"loginFormForm",novalidate:"novalidate"}},[i("div",{staticClass:"form-group",class:{"has-error":t.$v.model.email.$error,"has-success":!t.$v.model.email.$invalid,"has-error":t.isServerError}},[i("label",{staticClass:"d-none",attrs:{for:"userEmail"}},[t._v("Ваш E-mail")]),i("i",{staticClass:"icon icon-letter"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.email,expression:"model.email"}],ref:"email",staticClass:"lr-input lr-input-email form-control",class:{"--is-invalid":t.$v.model.email.$error,"--is-valid":!t.$v.model.email.$invalid},attrs:{type:"text",id:"userEmail",placeholder:"Ваш E-mail"},domProps:{value:t.model.email},on:{blur:function(e){return t.$v.model.email.$touch()},keydown:function(e){return t.loginKeyDownCheck(e)},input:[function(e){e.target.composing||t.$set(t.model,"email",e.target.value)},function(e){return t.onInput("email")}]}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.$v.model.email.$error,expression:"$v.model.email.$error"}],staticClass:"invalid-feedback"},[t.$v.model.email.required?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите свой е-мейл")]),t.$v.model.email.email?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите корректный е-мейл")])])]),i("div",{staticClass:"form-group",class:{"has-error":t.$v.model.password.$error,"has-success":!t.$v.model.password.$invalid}},[i("label",{staticClass:"d-none",attrs:{for:"password"}},[t._v("Пароль")]),i("i",{staticClass:"icon icon-user"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.password,expression:"model.password"}],ref:"password",staticClass:"lr-input lr-input-password form-control",class:{"--is-invalid":t.$v.model.password.$error,"--is-valid":!t.$v.model.password.$invalid},attrs:{type:"password",id:"password",placeholder:"Пароль"},domProps:{value:t.model.password},on:{blur:function(e){return t.$v.model.password.$touch()},keydown:function(e){return t.loginKeyDownCheck(e)},input:function(e){e.target.composing||t.$set(t.model,"password",e.target.value)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.$v.model.password.$error,expression:"$v.model.password.$error"}],staticClass:"invalid-feedback"},[t.$v.model.password.required?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите свой пароль")]),t.$v.model.password.minLength?t._e():i("p",{staticClass:"text-danger"},[t._v("Пароль не может быть короче "),i("b",[t._v("четырёх")]),t._v(" символов")]),t.$v.model.password.maxLength?t._e():i("p",{staticClass:"text-danger"},[t._v("Слишком длинный пароль")])])]),t.isServerError?i("div",{staticClass:"form-group has-error"},[i("p",{staticClass:"text-danger text-center"},[t._v("Неверный пароль или имя пользователя")])]):t._e(),i("div",{staticClass:"form-group"},[i("button",{staticClass:"btn-login btn plz-btn plz-btn-primary",attrs:{id:"btnLogin",type:"button",disabled:t.$v.$invalid},on:{click:function(e){return t.initLogin()}}},[t._v("Войти ")]),i("button",{staticClass:"btn-registration btn plz-btn plz-btn-outline",attrs:{id:"btnRegistration",type:"button"},on:{click:function(e){return t.openRegistrationModal()}}},[t._v(" Регистрация ")]),i("button",{staticClass:"btn-recover-pas btn plz-btn btn-link mt-3 ",attrs:{id:"btnRecoverPass",type:"button"},on:{click:function(e){return t.openRecoverPassModal()}}},[t._v(" Восстановить пароль ")])]),i("LoginSocialLinks")],1)]),t.isRegistrationModalShow?i("RegistrationModal",{attrs:{"reg-modal-visible":t.isRegistrationModalShow},on:{successRegistration:t.successRegistration}}):t._e(),t.isRecoverPassModalShow?i("RecoverPassModal",{attrs:{"reg-modal-visible":t.isRecoverPassModalShow}}):t._e()],1)},_=[],M=(i("498a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal show",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"Modal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideRegistrationModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body"},[t.isSuccessRegistration?i("div",{staticClass:"successRegistration"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 text-center"},[i("h3",{staticClass:"mb-3"},[t._v("Вы успешно зарегистрированы")]),t._m(0),i("p",{staticClass:"mb-4"},[t._v(" Мы выслали Вам письмо на Ваш "),i("b",{staticStyle:{color:"blue"}},[t._v(t._s(t.user.email))]),t._v("."),i("br"),t._v(" Для завершения регистрации Вам нужно подтвердить почтовый адрес. ")]),i("button",{staticClass:"btn plz-btn plz-btn-primary",on:{click:t.hideRegistrationModal}},[t._v(" Закрыть ")])])])]):i("RegistrationForm",{on:{successRegistration:t.successRegistration}})],1)])])])}),I=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mb-3"},[i("i",{staticClass:"far fa-thumbs-up"})])}],P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-registration-form-wrapper",attrs:{id:""}},[t._m(0),i("div",{staticClass:"symbol-registration"}),i("form",{attrs:{id:"registrationForm",novalidate:"novalidate"}},[i("div",{staticClass:"form-group",class:{"has-error":!!t.firstNameError,"has-success":t.isSuccessFirstName}},[i("i",{staticClass:"icon icon-user"}),i("label",{staticClass:"d-none",attrs:{for:"firstName"}},[t._v("Ваше имя")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.firstName,expression:"model.firstName"}],ref:"firstName",staticClass:"lr-input form-control",class:{"is-invalid":!!t.firstNameError,"is-valid":t.isSuccessFirstName},attrs:{id:"firstName",type:"text",placeholder:"Ваше имя"},domProps:{value:t.model.firstName},on:{input:[function(e){e.target.composing||t.$set(t.model,"firstName",e.target.value)},function(e){return t.onInput("firstName")}],blur:function(e){return t.$v.model.firstName.$touch()},keydown:function(e){return t.registrationKeyDownCheck(e)}}}),i("div",{staticClass:"invalid-feedback"},[i("p",{staticClass:"text-danger"},[t._v(t._s(t.firstNameError))])])]),i("div",{staticClass:"form-group",class:{"has-error":!!t.lastNameError,"has-success":t.isSuccessLastName}},[i("i",{staticClass:"icon icon-user"}),i("label",{staticClass:"d-none",attrs:{for:"lastName"}},[t._v("Ваша фамилия")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.lastName,expression:"model.lastName"}],ref:"lastName",staticClass:"lr-input form-control",class:{"is-invalid":!!t.lastNameError,"is-valid":t.isSuccessLastName},attrs:{id:"lastName",type:"text",placeholder:"Ваша фамилия"},domProps:{value:t.model.lastName},on:{input:[function(e){e.target.composing||t.$set(t.model,"lastName",e.target.value)},function(e){return t.onInput("lastName")}],blur:function(e){return t.$v.model.lastName.$touch()},keydown:function(e){return t.registrationKeyDownCheck(e)}}}),i("div",{staticClass:"invalid-feedback"},[i("p",{staticClass:"text-danger"},[t._v(t._s(t.lastNameError))])])]),i("div",{staticClass:"form-group",class:{"has-error":!!t.emailError,"has-success":t.isSuccessEmail}},[i("i",{staticClass:"icon icon-letter"}),i("label",{staticClass:"d-none",attrs:{for:"userEmail"}},[t._v("Ваш E-mail")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.email,expression:"model.email"}],ref:"userEmail",staticClass:"lr-input form-control",class:{"is-invalid":!!t.emailError,"is-valid":t.isSuccessEmail},attrs:{id:"userEmail",type:"text",placeholder:"Ваш E-mail"},domProps:{value:t.model.email},on:{input:[function(e){e.target.composing||t.$set(t.model,"email",e.target.value)},function(e){return t.onInput("email")}],blur:function(e){return t.$v.model.email.$touch()},keydown:function(e){return t.registrationKeyDownCheck(e)}}}),i("div",{staticClass:"invalid-feedback"},[i("p",{staticClass:"text-danger"},[t._v(t._s(t.emailError))])])]),t._e(),t._e(),i("div",{staticClass:"form-group"},[i("button",{staticClass:"btn plz-btn plz-btn-primary text-center",class:{disabled:t.isLoad},attrs:{id:"btnRegistration",type:"button",disabled:t.$v.$invalid||t.isLoad},on:{click:function(e){return t.startRegistration()}}},[t.isLoad?[i("SmallSpinner",{attrs:{clazz:"text-white"}})]:[t._v(" Регистрация ")]],2),t.isServerError&&t.serverErrorText?i("p",{staticClass:"text-danger text-center mt-3"},[t._v(" "+t._s(t.serverErrorText)+" ")]):t._e()])])])},S=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-center"},[i("h5",[t._v("Быстрая регистрация")])])}],L=(i("a15b"),i("4fad"),i("3835")),R=i("b5ae"),N=(i("ac1f"),i("466d"),i("5319"),i("1276"),i("c1df")),A=i.n(N);function F(t){return t+""===""||/^[a-zа-яёїіи+\-\s]{1,100}$/i.test(t)}function z(t){return t+""===""||/^[a-z][a-z\-\_\d]*$/i.test(t)}function E(t){return t+""===""||/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)?/gi.test(t)}function j(t){return!/\s/.test(t)}function D(t){var e=A()(t,"YYYY-MM-DD",!0),i=A()(),s=A()("1950-01-01");return!(!e||!e.isValid())&&(e<=i&&e>=s)}function O(t){var e=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|www.youtube(?:-nocookie)?\.com\S*?[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,i=t.trim().match(e);return!(!i||!i.length)}var T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("DatePicker",{attrs:{"input-props":t.inputProps},on:{input:function(e){return t.$emit("input",t.date)}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.inputProps,a=e.inputEvents;e.isDragging;return i("input",t._g(t._b({class:t.clazz},"input",s,!1),a))}}]),model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})},H=[],U=i("86e3"),V=i.n(U),B=i("404b"),Y=i.n(B),q={name:"PickerDate",components:{Calendar:V.a,DatePicker:Y.a},props:{value:Date|String,inputProps:Object,clazz:String},data:function(){return{date:this.value}}},K=q,G=Object(b["a"])(K,T,H,!1,null,"0d3720e4",null),W=G.exports,J=i("ca63"),Z={name:"RegistrationForm",components:{PickerDate:W,SmallSpinner:J["a"]},computed:{isSuccessFirstName:function(){return(!this.$v.model.firstName.$invalid||!this.serverRegMessages.firstName)&&!!this.model.firstName},firstNameError:function(){if(this.$v.model.firstName.$error){if(!this.$v.model.firstName.required)return"Укажите как Вас зовут.";if(!this.$v.model.firstName.minLength)return"Врядли у Вас такое короткое имя?";if(!this.$v.model.firstName.maxLength)return"Слишком длинное имя.";if(!this.$v.model.firstName.isCorrectHumanName)return"Только буквы в имени.";if(!this.$v.model.firstName.notHaveSpace)return"Не должно быть пробелов."}else if(this.serverRegMessages.firstName)return this.serverRegMessages.firstName;return null},isSuccessLastName:function(){return(!this.$v.model.lastName.$invalid||!this.serverRegMessages.lastName)&&!!this.model.lastName},lastNameError:function(){if(this.$v.model.lastName.$error){if(!this.$v.model.lastName.required)return"Укажите свою фамилию.";if(!this.$v.model.lastName.minLength)return"Врядли у Вас такая короткая фамилия.";if(!this.$v.model.lastName.maxLength)return"Слишком длинная фамилия.";if(!this.$v.model.lastName.isCorrectHumanName)return"Только буквы в фамилии.";if(!this.$v.model.lastName.notHaveSpace)return"Не должно быть пробелов."}else if(this.serverRegMessages.lastName)return this.serverRegMessages.lastName;return null},isSuccessEmail:function(){return(!this.$v.model.email.$invalid||!this.serverRegMessages.email)&&!!this.model.email},emailError:function(){if(this.$v.model.email.$error){if(!this.$v.model.email.required)return"Укажите свой е-мейл.";if(!this.$v.model.email.email)return"Укажите корректный е-мейл.";if(!this.$v.model.email.isDuplicateEmail)return this.serverRegMessages.email}else if(this.serverRegMessages.email)return this.serverRegMessages.email;return null},isSuccessBirthday:function(){return(!this.$v.model.birthday.$invalid||!this.serverRegMessages.birthday)&&!!this.model.birthday},birthdayError:function(){if(this.$v.model.birthday.$error){if(!this.$v.model.birthday.isValidBirthday)return"Укажите корректную дату."}else if(this.serverRegMessages.birthday)return this.serverRegMessages.birthday;return null}},data:function(){return{model:{firstName:"",lastName:"",email:"",birthday:""},isServerError:!1,serverErrorText:null,duplicateEmail:"",serverRegMessages:{firstName:"",lastName:"",email:"",birthday:"",other:""},isLoad:!1,pickerDateInputPros:{placeholder:"Дата рождения"}}},validations:function(){var t=this;return{model:{firstName:{required:R["required"],minLength:Object(R["minLength"])(2),maxLength:Object(R["maxLength"])(50),isCorrectHumanName:F,notHaveSpace:j},lastName:{required:R["required"],minLength:Object(R["minLength"])(2),maxLength:Object(R["maxLength"])(50),isCorrectHumanName:F,notHaveSpace:j},email:{required:R["required"],email:R["email"],isDuplicateEmail:function(e){return e+""===""||e!==t.duplicateEmail}},birthday:{isValidBirthday:function(t){return!t||D(t)}}}}},methods:{processServerErrors:function(t,e){this.isServerError=!0,t.data&&t.data.errors&&(t.data.errors.firstName&&(this.serverRegMessages.firstName=t.data.errors.firstName.join("<br />")),t.data.errors.lastName&&(this.serverRegMessages.lastName=t.data.errors.lastName.join("<br />")),t.data.errors.email&&(this.duplicateEmail=e.email.trim(),this.serverRegMessages.email=t.data.errors.email.join("<br />"),this.$refs.userEmail.focus()),t.data.errors.birthday&&(this.serverRegMessages.birthday=t.data.errors.birthday.join("<br />")))},registrationKeyDownCheck:function(t){if(13===t.keyCode)return this.startRegistration()},onInput:function(t){this.serverRegMessages[t]=null,this.$v.model[t].$touch()},getFormData:function(){var t=this.model.birthday;if(t instanceof Date)if(D(this.model.birthday)){var e=t.getDate(),i=t.getMonth()+1,s=t.getFullYear();e<10&&(e="0"+e),i<10&&(i="0"+i),t=s+"-"+i+"-"+e}else t="Invalid date";return{email:this.model.email.trim(),firstName:this.model.firstName.trim(),lastName:this.model.lastName.trim(),birthday:t}},startRegistration:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s,a,n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t.isLoad=!0,t.$v.$touch(),t.isServerError=!1,t.serverErrorText=null,i=0,s=Object.entries(t.serverRegMessages);i<s.length;i++)a=Object(L["a"])(s[i],2),n=a[0],a[1],t.serverRegMessages[n]="";return r=t.getFormData(),o=null,e.prev=7,e.next=10,t.$root.$api.register(r);case 10:o=e.sent,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](7),t.isLoad=!1,422===e.t0.status?t.processServerErrors(e.t0,r):e.t0.status>=500?(t.isServerError=!0,t.serverErrorText="Извините у нас возникла ошибка, попробуйте позже ещё раз."):window.console.warn(e.t0.message);case 17:o&&201===o.status&&(t.isLoad=!1,t.$emit("successRegistration",t.model));case 18:case"end":return e.stop()}}),e,null,[[7,13]])})))()}},mounted:function(){var t=this;setTimeout((function(){t.$refs.firstName.focus()}),100)}},X=Z,Q=Object(b["a"])(X,P,S,!1,null,null,null),tt=Q.exports,et={name:"RegistrationModal",props:{regModalVisible:Boolean},components:{RegistrationForm:tt},data:function(){return{isSuccessRegistration:!1}},methods:{fillUserCredentialsInLoginForm:function(t){this.$emit("successRegistration",t)},hideRegistrationModal:function(){this.$root.$emit("hideRegistrationModal",{}),this.user&&this.fillUserCredentialsInLoginForm(this.user)},successRegistration:function(t){var e=this;this.isSuccessRegistration=!0,this.user=t,setTimeout((function(){e.hideRegistrationModal()}),6e4)}}},it=et,st=(i("53a1"),Object(b["a"])(it,M,I,!1,null,null,null)),at=st.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal show recover-pass-modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"Modal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideRecoverPassModal(e)}}},[s("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[s("div",{staticClass:"modal-content bg-white-br20"},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"plz-recover-pass-form-wrapper text-center",attrs:{id:""}},[t._m(0),s("img",{staticClass:"mb-4 mt-2 mx-auto",attrs:{src:i("059c"),alt:""}}),s("form",{staticClass:"mb-0",attrs:{id:"recoverPass",novalidate:"novalidate"},on:{submit:function(e){return e.preventDefault(),t.sendForm(e)}}},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"d-none",attrs:{for:"recoverPassInput"}},[t._v("Ваш e-mail")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],ref:"recoverPassInput",staticClass:"lr-input form-control",class:{"is-invalid":t.errors&&t.errors["email"]},attrs:{type:"text",id:"recoverPassInput",placeholder:"Введите e-mail"},domProps:{value:t.form.email},on:{input:[function(e){e.target.composing||t.$set(t.form,"email",e.target.value)},function(e){t.errors=null}]}}),t.errors&&t.errors["email"]?s("div",{staticClass:"invalid-feedback"},[s("p",{staticClass:"text-danger"},[t._v(t._s(t.errors["email"][0]))])]):t._e()]),s("button",{staticClass:"btn-login btn plz-btn plz-btn-primary mt-4",attrs:{id:"recoverPassBtn",type:"submit"}},[t._v(" Восстановить ")]),t.successMessage?s("div",{staticClass:"text-center mt-3"},[s("p",{staticClass:"text-success"},[t._v(t._s(t.successMessage))])]):t._e()])])])])])])},rt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-center mb-4"},[i("h5",[t._v("Восстановление пароля")])])}],ot={name:"RecoverPassModal",props:{regModalVisible:Boolean},data:function(){return{isSuccessRegistration:!1,form:{email:null},errors:null,successMessage:null}},methods:{hideRecoverPassModal:function(){this.$root.$emit("hideRecoverPassModal",{})},sendForm:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.errors=null,e.prev=1,e.next=4,t.$root.$api.recoveryPassword(t.form.email);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),422===e.t0.status&&(t.errors=e.t0.data.errors);case 10:i&&(t.successMessage=i.message,setTimeout((function(){t.hideRecoverPassModal()}),3e3));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}},lt=ot,ct=(i("2585"),Object(b["a"])(lt,nt,rt,!1,null,null,null)),ut=ct.exports,dt=window.location.href;dt=dt.split("/"),dt=dt[0]+"//"+dt[2];var mt={facebook:"531305747577438",instagram:"147643463355245",vk:"7398618",redirect_uri:dt+"/login"},pt=mt,ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-import-socnet form-group text-center mt-4"},[i("h6",{staticClass:"mb-3"},[t._v("Импорт аккаунта")]),i("div",{staticClass:"plz-import-socnet-text  mb-3"},[t._v("Импортируйте свой аккаунт из списка следующих социальных сетей:")]),i("div",{staticClass:"plz-import-socnet-btns d-flex justify-content-center"},[i("div",{staticClass:"mx-3 d-none"},[i("a",{staticClass:"plz-socnet-btn",attrs:{href:"#twitter",title:"Twitter"},on:{click:function(e){return e.preventDefault(),t.loginWithSocial("twitter")}}},[i("i",{staticClass:"fab fa-twitter fa-2x mt-2"})])]),i("div",{staticClass:"mx-3"},[i("a",{staticClass:"plz-socnet-btn",attrs:{href:"#vk",title:"VKontakte"},on:{click:function(e){return e.preventDefault(),t.loginWithSocial("vkontakte")}}},[i("i",{staticClass:"fab fa-vk fa-2x mt-2"})])]),i("div",{staticClass:"mx-3"},[i("a",{staticClass:"plz-socnet-btn",attrs:{href:"#fb",title:"Facebook"},on:{click:function(e){return e.preventDefault(),t.loginWithSocial("facebook")}}},[i("i",{staticClass:"fab fa-facebook-f fa-2x mt-2"})])]),i("div",{staticClass:"mx-3 d-none"},[i("a",{staticClass:"plz-socnet-btn",attrs:{href:"#instagram",title:"Instagram"},on:{click:function(e){return e.preventDefault(),t.loginWithSocial("instagram")}}},[i("i",{staticClass:"fab fa-instagram fa-2x mt-2"})])])])])},ft=[],vt=(i("99af"),i("d3b7"),i("3ca3"),i("841c"),i("ddb0"),i("2b3d"),{name:"LoginSocialLinks",methods:{loginWithSocial:function(t){switch(t){case"facebook":this.socialFacebook(t);break;case"instagram":this.socialInstagram(t);break;case"vkontakte":this.socialVK(t);break}},socialFacebook:function(t){var e=this;FB.getLoginStatus((function(i){i.authResponse?e.saveToken(t,i.authResponse.accessToken):FB.login((function(i){i.authResponse&&e.saveToken(t,i.authResponse.accessToken)}))}))},socialInstagram:function(t){var e={domain:"https://api.instagram.com/oauth/authorize",client_id:"client_id=".concat(pt.instagram),scope:"scope=user_profile",response_type:"response_type=code",state:"state=instagram"};window.location.href="".concat(e.domain,"?").concat(e.client_id,"&redirect_uri=").concat(pt.redirect_uri,"&").concat(e.scope,"&").concat(e.response_type,"&").concat(e.state)},socialVK:function(t){var e={domain:"https://oauth.vk.com/authorize",client_id:"client_id=".concat(pt.vk),scope:"scope=offline",display:"display=page",response_type:"response_type=token",state:"state=vk"};window.location.href="".concat(e.domain,"?").concat(e.client_id,"&").concat(e.scope,"&redirect_uri=").concat(pt.redirect_uri,"&").concat(e.display,"&").concat(e.response_type,"&").concat(e.state)},getInstagramToken:function(t){var e=t.get("code");e&&this.saveToken("instagram",e)},getVKToken:function(t){var e=t.get("access_token");e&&this.saveToken("vkontakte",e)},saveToken:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,i.$root.$api.registerThroughSocialServices(t,e);case 3:a=s.sent,s.next=9;break;case 6:s.prev=6,s.t0=s["catch"](0),console.warn(s.t0.detailMessage);case 9:a&&a&&a.token&&i.$root.$emit("afterSuccessLogin",{token:a.token,chatChannel:a.channel,redirect:!0});case 10:case"end":return s.stop()}}),s,null,[[0,6]])})))()}},mounted:function(){var t=location.hash.substr(1),e=new URLSearchParams(t),i=e.get("state");switch(i||(e=new URLSearchParams(location.search),i=e.get("state")),i){case"instagram":this.getInstagramToken(e);break;case"vk":this.getVKToken(e);break}}}),gt=vt,bt=Object(b["a"])(gt,ht,ft,!1,null,null,null),Ct=bt.exports,yt={name:"LoginForm",components:{RegistrationModal:at,RecoverPassModal:ut,LoginSocialLinks:Ct},data:function(){return{model:{email:"",password:""},isRegistrationModalShow:!1,isRecoverPassModalShow:!1,isServerError:!1,serverErrorText:""}},validations:function(){return{model:{email:{required:R["required"],email:R["email"]},password:{required:R["required"],minLength:Object(R["minLength"])(4),maxLength:Object(R["maxLength"])(50)}}}},mounted:function(){var t=this;setTimeout((function(){t.$refs.email.focus()}),100),this.$root.$on("hideRegistrationModal",(function(e){t.isRegistrationModalShow=!1})),this.$root.$on("hideRecoverPassModal",(function(e){t.isRecoverPassModalShow=!1})),this.$route.params&&this.loginWithCredentialsFromRoute(this.$route.params)},methods:{initLogin:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.startLogin().catch((function(){}));case 2:case"end":return e.stop()}}),e)})))()},startLogin:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$v.$touch(),t.isServerError=!1,i=null,e.prev=3,e.next=6,t.$root.$api.login(t.model.email.trim(),t.model.password.trim());case 6:i=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),e.t0.status>=400&&(t.isServerError=!0,t.serverErrorText=e.t0.data.message,t.$refs.password.focus());case 12:i&&200===i.status&&i.data&&i.data.token&&""!==i.data.token&&t.$root.$emit("afterSuccessLogin",{token:i.data.token,chatChannel:i.data.channel,redirect:!0});case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()},loginKeyDownCheck:function(t){if(13===t.keyCode)return this.startLogin()},openRegistrationModal:function(){this.isRegistrationModalShow=!0},openRecoverPassModal:function(){this.isRecoverPassModalShow=!0},successRegistration:function(t){this.model.email=t.email,this.$refs.password.focus()},successRecoverPass:function(t){this.model.email=t.email,this.$refs.password.focus()},loginWithCredentialsFromRoute:function(t){t.email&&t.password&&(this.model.email=t.email,this.model.password=t.password,this.initLogin())},onInput:function(t){"email"===t&&(this.model[t]=this.model[t].trim())}}},wt=yt,xt=Object(b["a"])(wt,k,_,!1,null,null,null),kt=xt.exports,_t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-latest-entries bg-white-br20",style:t.calcStyle(),attrs:{id:"latestEntries"}},[i("h6",{staticClass:"text-center text-sm-left"},[t._v("Вы недавно входили в аккаунт с этого компьютера")]),i("div",{staticClass:"plz-latest-entries-wrap "},[i("vue-custom-scrollbar",{staticClass:"plz-latest-entries-list d-flex justify-content-between justify-content-sm-start pb-3",attrs:{settings:t.customScrollbarSettings}},t._l(t.getLastFiveEntries(),(function(e){return i("LastEntryItem",{key:"entry-"+e.id,attrs:{"entry-item":e},nativeOn:{click:function(i){return i.preventDefault(),t.onClickEntry(e)}}})})),1)],1),t.logInModal.isVisible?i("LastEntryModal",{attrs:{entry:t.logInModal.content.entry},on:{onHide:t.onHideLastEntryModal}}):t._e()],1)},$t=[],Mt=(i("fb6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-latest-entries-item mb-1"},[i("img",{staticClass:"plz-latest-entries-user-pic mb-3",attrs:{src:t.userPic,alt:t.fullName}}),i("div",{staticClass:"d-inline-block text-center mx-auto px-4 my-0"},[i("a",{attrs:{href:"/profile"}},[t._v(" "+t._s(t.fullName)+" ")])])])}),It=[],Pt={name:"LastEntryItem",props:{entryItem:Object},data:function(){return{}},computed:{userPic:function(){return this.entryItem.src||this.entryItem.userPic||"/images/noavatar-256.png"},fullName:function(){return this.entryItem.fullName||"".concat(this.entryItem.firstName," ").concat(this.entryItem.lastName)}}},St=Pt,Lt=Object(b["a"])(St,Mt,It,!1,null,null,null),Rt=Lt.exports,Nt=(i("4160"),i("13d5"),i("159b"),i("d4ec")),At=i("bee2"),Ft=i("262e"),zt=i("2caf"),Et=(i("d81d"),i("25f0"),i("bf19"),i("bc3a")),jt=i.n(Et),Dt=i("257e"),Ot=i("9072"),Tt=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(t,s){var a;Object(Nt["a"])(this,i);var n=s&&s.status?s.status:-1,r=s&&s.statusText?s.statusText:"Unknown status",o="PliziAPIError",l="PliziAPI->".concat(t,": ").concat(n," ").concat(r);return a=e.call(this,l),a.status=-1,a.statusText="",a.method="",a.serverMessage="",a.serverAnswer="",a.serverMessages=[],a.detailMessage="",a.data={},a.method=t,a.name=o,a.status=n,a.statusText=r,s&&s.data&&(a.data=s.data,s.data.message&&(a.serverMessage=(s.data.message+"").trim(),a.serverMessages=[a.serverMessage],a.serverAnswer=a.serverMessage.trim().toUpperCase().replace(/\s/g,"_")),s.data.messages&&Array.isArray(s.data.messages)&&s.data.messages.length>0&&(s.data.messages.map((function(t){return a.serverMessages.push(t)})),a.serverMessage=a.serverMessages.join("\r\n").trim())),a.detailMessage="PliziAPI->".concat(a.method,": ").concat(a.status," ").concat(a.statusText)+(""!==a.message?" :"+a.message:""),Error.captureStackTrace?Error.captureStackTrace(Object(Dt["a"])(a),i):a.stack=(new Error).stack,a}return i}(Object(Ot["a"])(Error)),Ht=function(){function t(e){Object(Nt["a"])(this,t),this.__base=null,this.__axios=null,this.__base=e,this.__axios=e.axios}return Object(At["a"])(t,[{key:"checkIsTokenExpires",value:function(t,e){this.__base.checkIsTokenExpires(t,e)}},{key:"api",get:function(){return this.__base}},{key:"axios",get:function(){return this.__axios}},{key:"authHeaders",get:function(){return this.__base.authHeaders}},{key:"authFileHeaders",get:function(){return this.__base.authFileHeaders}}]),t}(),Ut=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"dialogs",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/chat/dialogs",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$chat.dialogs"),new Tt("$chat.dialogs",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"dialogSearchByName",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/chat/dialogs?search="+e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$chat.dialogSearchByName"),new Tt("$chat.dialogSearchByName",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"dialogOpen",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={name:e||"",userIds:i},t.next=3,this.axios.post("api/chat/open",s,this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$chat.dialogOpen"),new Tt("$chat.dialogOpen",t.response)}));case 3:if(a=t.sent,200!==a.status){t.next=6;break}return t.abrupt("return",a.data.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"dialogRemove",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/chat/".concat(e),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$chat.dialogRemove"),new Tt("$chat.dialogRemove",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"addAttendee",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={chatId:e,userId:i},t.next=3,this.axios.post("api/chat/dialogs/attendees/append",s,this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$chat.addAttendee"),new Tt("$chat.addAttendee",t.response)}));case 3:if(a=t.sent,200!==a.status){t.next=6;break}return t.abrupt("return",a.data.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"removeAttendee",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={chatId:e,userId:i},t.next=3,this.axios.post("api/chat/dialogs/attendees/remove",s,this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$chat.removeAttendee"),new Tt("$chat.removeAttendee",t.response)}));case 3:if(a=t.sent,200!==a.status){t.next=6;break}return t.abrupt("return",a.data.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"messages",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n,r=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=o.length>1&&void 0!==o[1]?o[1]:null,s=o.length>2&&void 0!==o[2]?o[2]:null,a="api/chat/messages/"+e,i&&s&&(a+="?offset=".concat(i,"&limit=").concat(s)),t.next=6,this.axios.get(a,this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$chat.messages"),new Tt("$chat.messages",t.response)}));case 6:if(n=t.sent,200!==n.status){t.next=9;break}return t.abrupt("return",n.data.list);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"messageSend",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i,s){var a,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={chatId:e,body:i,attachments:s},t.next=3,this.axios.post("api/chat/send",a,this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$chat.messageSend"),new Tt("$chat.messageSend",t.response)}));case 3:if(n=t.sent,200!==n.status){t.next=6;break}return t.abrupt("return",n.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i,s){return t.apply(this,arguments)}return e}()},{key:"privateMessageSend",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i,s){var a,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={body:i,userId:e,attachments:s},t.next=3,this.axios.post("api/chat/message/user",a,this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$chat.privateMessageSend"),new Tt("$chat.privateMessageSend",t.response)}));case 3:if(n=t.sent,200!==n.status){t.next=6;break}return t.abrupt("return",n.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i,s){return t.apply(this,arguments)}return e}()},{key:"messageDelete",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/chat/message/".concat(e),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$chat.messageDelete"),new Tt("$chat.messageDelete",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",!0);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"messageForward",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.console.log("messageForward"),e.chatId?(i.chatId=e.chatId,s="api/chat/send"):(i.userId=e.userId,s="api/chat/message/user"),t.next=4,this.axios.post(s,i,this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$chat.messageForward"),new Tt("$chat.messageForward",t.response)}));case 4:if(a=t.sent,200!==a.status){t.next=7;break}return t.abrupt("return",a.data);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"attachment",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i=new FormData,s=0;s<e.length;s++)i.append("files[]",e[s]);return t.next=4,this.axios.post("api/chat/message/attachments",i,this.authFileHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$chat.attachment"),new Tt("$chat.attachment",t.response)}));case 4:if(a=t.sent,200!==a.status){t.next=7;break}return t.abrupt("return",a.data.data.list);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),i}(Ht),Vt=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"getPosts",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="api/user/posts/",a="",e&&i&&(a="?limit=".concat(e,"&offset=").concat(i)),t.next=5,this.axios.get(s+a,this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"getPosts"),new Tt("getPosts",t.response)}));case 5:if(n=t.sent,200!==n.status){t.next=8;break}return t.abrupt("return",n.data.data.list);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"getNews",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n,r,o,l=this,c=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=c.length>2&&void 0!==c[2]?c[2]:"",a=c.length>3&&void 0!==c[3]?c[3]:[],n="api/user/news",r=new URLSearchParams({limit:e||50,offset:i||0,search:s||""}),a.map((function(t){r.append("parts[]",t)})),t.next=7,this.axios.get(n+"?"+r.toString(),this.authHeaders).catch((function(t){throw l.checkIsTokenExpires(t,"getNews"),new Tt("getNews",t.response)}));case 7:if(o=t.sent,200!==o.status){t.next=10;break}return t.abrupt("return",o.data.data.list);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"getPostsByUserId",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i,s){var a,n,r,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="api/user/".concat(e,"/posts/"),n="",i&&s&&(n="?limit=".concat(i,"&offset=").concat(s)),t.next=5,this.axios.get(a+n,this.authHeaders).catch((function(t){throw o.checkIsTokenExpires(t,"getPostsByUserId"),new Tt("getPostsByUserId",t.response)}));case 5:if(r=t.sent,200!==r.status){t.next=8;break}return t.abrupt("return",r.data.data.list);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));function e(e,i,s){return t.apply(this,arguments)}return e}()},{key:"storePost",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/posts",e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"storePost"),new Tt("storePost",t.response)}));case 2:if(i=t.sent,201!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"storePostByCommunity",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/communities/".concat(e,"/posts"),i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"storePostByCommunity"),new Tt("storePostByCommunity",t.response)}));case 2:if(s=t.sent,201!==s.status){t.next=5;break}return t.abrupt("return",s.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"storePostAttachments",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i=new FormData,s=0;s<e.length;s++)i.append("files[]",e[s]);return t.next=4,this.axios.post("api/posts/attachments",i,this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"storePostAttachments"),new Tt("storePostAttachments",t.response)}));case 4:if(a=t.sent,200!==a.status){t.next=7;break}return t.abrupt("return",a.data.data.list);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deletePost",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/posts/".concat(e),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"deletePost"),new Tt("deletePost",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"restorePost",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/posts/".concat(e,"/restore"),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"restorePost"),new Tt("restorePost",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatePost",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/posts/".concat(e,"/update"),i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"editPost"),new Tt("editPost",t.response)}));case 2:if(s=t.sent,200!==s.status){t.next=5;break}return t.abrupt("return",s.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"sharePostToWall",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/posts/share/wall",{id:e},this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"sharePostToWall"),new Tt("sharePostToWall",t.response)}));case 2:if(i=t.sent,201!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deletePostImage",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/posts/".concat(e,"/attachment/").concat(i),this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"deletePostImage"),new Tt("deletePostImage",t.response)}));case 2:if(s=t.sent,200!==s.status){t.next=5;break}return t.abrupt("return",s.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"likePost",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/posts/rate",{postId:e},this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"likePost"),new Tt("likePost",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getUsersLikes",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i,s){var a,n,r,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="api/posts/".concat(e,"/likes/users"),n="",i&&s&&(n="?limit=".concat(i,"&offset=").concat(s)),t.next=5,this.axios.get(a+n,this.authHeaders).catch((function(t){throw o.checkIsTokenExpires(t,"getUsersLikes"),new Tt("getUsersLikes",t.response)}));case 5:if(r=t.sent,200!==r.status){t.next=8;break}return t.abrupt("return",r.data.data.list);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));function e(e,i,s){return t.apply(this,arguments)}return e}()},{key:"setPostComments",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=this,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=r.length>2&&void 0!==r[2]?r[2]:[],t.next=3,this.axios.post("api/comment/post",{body:e,postId:i,attachmentIds:s},this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$comment.sendComment"),new Tt("$comment.sendComment",t.response)}));case 3:if(a=t.sent,200!==a.status){t.next=6;break}return t.abrupt("return",a.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"getAnswerToComment",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n,r=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=o.length>2&&void 0!==o[2]?o[2]:[],a=o.length>3?o[3]:void 0,t.next=4,this.axios.post("api/comment/post",{body:e,postId:i,attachmentIds:s,replyOn:a},this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$comment.getAnswer"),new Tt("$comment.getAnswer",t.response)}));case 4:if(n=t.sent,200!==n.status){t.next=7;break}return t.abrupt("return",n.data);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"getCommentsById",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/comment/post/".concat(e),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$comment.getComment"),new Tt("$comment.getComment",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteCommentById",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/comment/".concat(e),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$comment.deleteComment"),new Tt("$comment.deleteComment",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"editCommentById",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=this,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=r.length>2&&void 0!==r[2]?r[2]:[],t.next=3,this.axios.patch("api/comment/".concat(e),{commentId:e,body:i,attachmentIds:s},this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$comment.editComment"),new Tt("$comment.editComment",t.response)}));case 3:if(a=t.sent,200!==a.status){t.next=6;break}return t.abrupt("return",a.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"addAttachmentsToComment",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(i=new FormData,s=0;s<e.length;s++)i.append("files[]",e[s]);return t.next=4,this.axios.post("api/comment/attachments",i,this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$comment.uploadAttachments"),new Tt("$comment.uploadAttachments",t.response)}));case 4:if(a=t.sent,200!==a.status){t.next=7;break}return t.abrupt("return",a.data.data.list);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"likeComment",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/comment/".concat(e,"/like"),{},this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$comment.likeComment"),new Tt("$comment.likeComment",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"setGalleryComments",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i,s){var a,n,r=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:[],t.next=3,this.axios.post("api/posts/attachments/".concat(s,"/comment"),{body:e,postId:i,attachmentId:s,attachmentIds:a},this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$comment.sendCommentToGallery"),new Tt("$comment.sendCommentToGallery",t.response)}));case 3:if(n=t.sent,200!==n.status){t.next=6;break}return t.abrupt("return",n.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i,s){return t.apply(this,arguments)}return e}()},{key:"getCommentsByIdOnGallery",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/posts/attachments/".concat(e,"/comment"),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$comment.getCommentToGallery"),new Tt("$comment.getCommentToGallery",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getAlbumComments",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/user/images/".concat(e,"/comment"),this.authHeaders);case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"sendCommentToAlbum",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=n.length>2&&void 0!==n[2]?n[2]:[],t.next=3,this.axios.post("api/user/images/".concat(i,"/comment"),{body:e,imageId:i,attachmentIds:s},this.authHeaders);case 3:if(a=t.sent,200!==a.status){t.next=6;break}return t.abrupt("return",a.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"addView",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={postId:e},t.next=3,this.axios.post("api/posts/view",s,this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$post.addView"),new Tt("$post.addView",t.response)}));case 3:if(a=t.sent,200!==a.status){t.next=6;break}return t.abrupt("return",a.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()}]),i}(Ht),Bt=Vt,Yt=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"friendsList",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i,s){var a,n,r,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="api/user/friendship",e&&(a="api/user/".concat(e,"/friendship")),n="",i&&s&&(n="?limit=".concat(i,"&offset=").concat(s)),t.next=6,this.axios.get(a+n,this.authHeaders).catch((function(t){throw o.checkIsTokenExpires(t,"$friend.friendsList"),new Tt("$friend.friendsList",t.response)}));case 6:if(r=t.sent,200!==r.status){t.next=9;break}return t.abrupt("return",r.data.data.list);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,this)})));function e(e,i,s){return t.apply(this,arguments)}return e}()},{key:"favorites",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/user/friendship/group/featured",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$friend.favorites"),new Tt("$friend.favorites",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getPossibleFriends",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="api/user/friendship/possible/?offset=0&limit=10",t.next=3,this.axios.get(e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$friend.getPossibleFriends"),new Tt("$friend.getPossibleFriends",t.response)}));case 3:if(i=t.sent,200!==i.status){t.next=6;break}return t.abrupt("return",i.data.data.list);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getRecommendedFriends",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/user/friendship/recommended",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$friend.getRecommendedFriends"),new Tt("$friend.getRecommendedFriends",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"sendFriendshipInvitation",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={userId:e},t.next=3,this.axios.post("/api/user/friendship",i,this.authHeaders).catch((function(t){if(422===t.response.status)return{status:422,message:t.response.data.message};throw s.checkIsTokenExpires(t,"$friend.sendFriendshipInvitation"),new Tt("$friend.sendFriendshipInvitation",t.response)}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"friendshipStop",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("/api/user/friendship/"+e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$friends.friendshipStop"),new Tt("$friends.friendshipStop",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"invitationsList",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/user/friendship/pending",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$friends.invitationsList"),new Tt("$friends.invitationsList",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"invitationAccept",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={userId:e},t.next=3,this.axios.post("api/user/friendship/accept",i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$friends.invitationAccept"),new Tt("$friends.invitationAccept",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"invitationDecline",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={userId:e},t.next=3,this.axios.post("api/user/friendship/decline",i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$friends.invitationDecline"),new Tt("$friends.invitationDecline",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"addToFavorites",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={userId:e,group:"featured"},t.next=3,this.axios.post("api/user/friendship/group",i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$friends.addToFavorites"),new Tt("$friends.addToFavorites",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"removeFromFavorites",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/user/friendship/group/featured/"+e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$friends.removeFromFavorites"),new Tt("$friends.removeFromFavorites",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),i}(Ht),qt=Yt,Kt=(i("caad"),function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"loadCommunities",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i,s,a,n,r,o=this,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:"",i=l.length>1&&void 0!==l[1]?l[1]:20,s=l.length>2&&void 0!==l[2]?l[2]:0,a=e?"?search=".concat(e,"&limit=").concat(i,"&offset=").concat(s):"?limit=".concat(i,"&offset=").concat(s),n="api/communities"+a,t.next=7,this.axios.get(n,this.authHeaders).catch((function(t){throw o.checkIsTokenExpires(t,"$communities.loadCommunities"),new Tt("$communities.loadCommunities",t.response)}));case 7:if(r=t.sent,200!==r.status){t.next=10;break}return t.abrupt("return",r.data.data.list);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"guestLoadCommunities",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=(e+"").trim(),t.next=3,this.axios.get("api/communities/search/"+i).catch((function(t){throw a.checkIsTokenExpires(t,"$communities.guestLoadCommunities"),new Tt("$communities.guestLoadCommunities",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data.data.list);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"loadManagedCommunities",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i,s,a,n,r,o=this,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:"",i=l.length>1&&void 0!==l[1]?l[1]:20,s=l.length>2&&void 0!==l[2]?l[2]:0,a=e?"&search=".concat(e,"&limit=").concat(i,"&offset=").concat(s):"&limit=".concat(i,"&offset=").concat(s),n="api/communities?list=owner"+a,t.next=7,this.axios.get(n,this.authHeaders).catch((function(t){throw o.checkIsTokenExpires(t,"$communities.loadManagedCommunities"),new Tt("$communities.loadManagedCommunities",t.response)}));case 7:if(r=t.sent,200!==r.status){t.next=10;break}return t.abrupt("return",r.data.data.list);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"userCommunities",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i,s,a,n,r,o=this,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:"",i=l.length>1&&void 0!==l[1]?l[1]:20,s=l.length>2&&void 0!==l[2]?l[2]:0,a=e?"&search=".concat(e,"&limit=").concat(i,"&offset=").concat(s):"&limit=".concat(i,"&offset=").concat(s),n="api/communities?list=my"+a,t.next=7,this.axios.get(n,this.authHeaders).catch((function(t){throw o.checkIsTokenExpires(t,"$communities.userCommunities"),new Tt("$communities.userCommunities",t.response)}));case 7:if(r=t.sent,200!==r.status){t.next=10;break}return t.abrupt("return",r.data.data.list);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getCommunity",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/communities/"+e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$communities.getCommunity"),new Tt("$communities.getCommunity",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"communityCreate",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/communities",e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$communities.communityCreate"),new Tt("$communities.communityCreate",t.response)}));case 2:if(i=t.sent,201!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"subscribe",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/communities/".concat(e,"/subscribe"),this.authHeaders).catch((function(t){if(422===t.response.status)return{status:422,message:t.response.data.message};throw s.checkIsTokenExpires(t,"$communities.subscribe"),new Tt("$communities.subscribe",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"unsubscribe",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/communities/".concat(e,"/unsubscribe"),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$communities.unsubscribe"),new Tt("$communities.unsubscribe",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"posts",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i,s){var a,n,r,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="api/communities/".concat(e,"/posts"),n="",i&&s&&(n="?limit=".concat(i,"&offset=").concat(s)),t.next=5,this.axios.get(a+n,this.authHeaders).catch((function(t){throw o.checkIsTokenExpires(t,"$communities.posts"),new Tt("$communities.posts",t.response)}));case 5:if(r=t.sent,200!==r.status){t.next=8;break}return t.abrupt("return",r.data.data.list);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));function e(e,i,s){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.patch("/api/communities/"+e,i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$communities.update"),new Tt("$communities.update",t.response)}));case 2:if(s=t.sent,200!==s.status&&201!==s.status){t.next=5;break}return t.abrupt("return",s.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"updatePrimaryImage",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.post("/api/communities/avatar",e,this.authFileHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$communities.updatePrimaryImage"),new Tt("$communities.updatePrimaryImage",t.response)}));case 2:if(i=t.sent,200!==i.status&&201!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateHeaderImage",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.post("/api/communities/header-image",e,this.authFileHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$communities.updateHeaderImage"),new Tt("$communities.updateHeaderImage",t.response)}));case 2:if(i=t.sent,200!==i.status&&201!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getThemes",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("/api/communities/themes/list",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$communities.getThemes"),new Tt("$communities.getThemes",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"requestList",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/communities/requests/list/".concat(e),this.authHeaders).catch((function(t){if(422===t.response.status)return{status:422,message:t.response.data.message};throw s.checkIsTokenExpires(t,"$communities.requestList"),new Tt("$communities.requestList",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"requestCreate",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/communities/requests/create/".concat(e),{},this.authHeaders).catch((function(t){if(422===t.response.status)return{status:422,data:{message:t.response.data.message}};throw s.checkIsTokenExpires(t,"$communities.requestCreate"),new Tt("$communities.requestCreate",t.response)}));case 2:if(i=t.sent,![200,422].includes(i.status)){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"requestAccept",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.patch("api/communities/requests/accept/".concat(e,"/").concat(i),{},this.authHeaders).catch((function(t){if(422===t.response.status)return{status:422,message:t.response.data.message};throw a.checkIsTokenExpires(t,"$communities.requestAccept"),new Tt("$communities.requestAccept",t.response)}));case 2:if(s=t.sent,200!==s.status){t.next=5;break}return t.abrupt("return",s.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"requestReject",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.patch("api/communities/requests/reject/".concat(e,"/").concat(i),{},this.authHeaders).catch((function(t){if(422===t.response.status)return{status:422,message:t.response.data.message};throw a.checkIsTokenExpires(t,"$communities.requestReject"),new Tt("$communities.requestReject",t.response)}));case 2:if(s=t.sent,200!==s.status){t.next=5;break}return t.abrupt("return",s.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"recommended",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/communities/recommended/list",this.authHeaders).catch((function(t){if(422===t.response.status)return{status:422,message:t.response.data.message};throw i.checkIsTokenExpires(t,"$communities.recommended"),new Tt("$communities.recommended",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"members",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n,r=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=o.length>1&&void 0!==o[1]?o[1]:20,s=o.length>2&&void 0!==o[2]?o[2]:0,a="api/communities/".concat(e,"/members?limit=").concat(i,"&offset=").concat(s),t.next=5,this.axios.get(a,this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$communities.members"),new Tt("$communities.members",t.response)}));case 5:if(n=t.sent,200!==n.status){t.next=8;break}return t.abrupt("return",n.data.data);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"videos",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n,r=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=o.length>1&&void 0!==o[1]?o[1]:5,s=o.length>2&&void 0!==o[2]?o[2]:0,a="api/communities/".concat(e,"/videos?limit=").concat(i,"&offset=").concat(s),t.next=5,this.axios.get(a,this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$communities.videos"),new Tt("$communities.videos",t.response)}));case 5:if(n=t.sent,200!==n.status){t.next=8;break}return t.abrupt("return",n.data.data);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"favorites",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/communities/favorite/list",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$communities.favorites"),new Tt("$communities.favorites",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"becomeAdmin",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="api/communities/admin/".concat(e,"/").concat(i),t.next=3,this.axios.post(s,{},this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$communities.members"),new Tt("$communities.members",t.response)}));case 3:if(a=t.sent,200!==a.status){t.next=6;break}return t.abrupt("return",a.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"addToFavorites",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={id:e},t.next=3,this.axios.post("api/communities/favorite/subscribe",i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$communities.addToFavorites"),new Tt("$communities.addToFavorites",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"stopBeAdmin",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="api/communities/admin/".concat(e,"/").concat(i),t.next=3,this.axios.delete(s,this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"$communities.members"),new Tt("$communities.members",t.response)}));case 3:if(a=t.sent,200!==a.status){t.next=6;break}return t.abrupt("return",a.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"removeToFavorites",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/communities/favorite/unsubscribe/"+e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$communities.removeToFavorites"),new Tt("$communities.removeToFavorites",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"subscribeNotify",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="api/communities/".concat(e,"/notify"),t.next=3,this.axios.post(i,{},this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$communities.subscribeNotify"),new Tt("$communities.subscribeNotify",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"unsubscribeNotify",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i="api/communities/".concat(e,"/notify"),t.next=3,this.axios.delete(i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$communities.unsubscribeNotify"),new Tt("$communities.unsubscribeNotify",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),i}(Ht)),Gt=Kt,Wt=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"getUser",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e?"api/user/".concat(e):"api/user",t.next=3,this.axios.get(i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$users.getUser"),new Tt("$users.getUser",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"infoUser",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.console.warn("$users.infoUser - DEPRECATED"),t.next=3,this.__axios.get(""+e,this.__getAuthHeaders()).catch((function(t){throw s.__checkIsTokenExperis(t,"infoUser"),new Tt("infoUser",t.response)}));case 3:if(i=t.sent,200!==i.status){t.next=6;break}return t.abrupt("return",i.data.data);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"blacklist",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/user/blacklist",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$users.blacklistGet"),new Tt("$users.blacklistGet",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"blacklistAdd",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={userId:e},t.next=3,this.axios.post("api/user/blacklist",i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$users.blacklistAdd"),new Tt("$users.blacklistAdd",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data.list);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"blacklistDelete",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/user/blacklist?userId="+e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$users.deleteFromBlacklist"),new Tt("$users.deleteFromBlacklist",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"search",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=(e+"").trim(),t.next=3,this.axios.get("/api/user/search/"+i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$users.search"),new Tt("$users.search",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data.data.list);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"guestSearch",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=(e+"").trim(),t.next=3,this.axios.get("/api/user/search/"+i).catch((function(t){throw a.checkIsTokenExpires(t,"$users.guestSearch"),new Tt("$users.guestSearch",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=6;break}return t.abrupt("return",s.data.data.list);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"changeEmail",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("/api/user/email/change",e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$users.changeEmail"),new Tt("$users.changeEmail",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"follow",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/user/".concat(e,"/follow"),{},this.authHeaders).catch((function(t){if(422===t.response.status)return{status:422,data:{message:t.response.data.message}};throw s.checkIsTokenExpires(t,"$users.follow"),new Tt("$users.follow",t.response)}));case 2:if(i=t.sent,![200,422].includes(i.status)){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"unFollow",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/user/".concat(e,"/follow"),this.authHeaders).catch((function(t){if(422===t.response.status)return{status:422,data:{message:t.response.data.message}};throw s.checkIsTokenExpires(t,"$users.unFollow"),new Tt("$users.unFollow",t.response)}));case 2:if(i=t.sent,![200,422].includes(i.status)){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"followList",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="api/user/follow/list",a="",e&&i&&(a="?limit=".concat(e,"&offset=").concat(i)),t.next=5,this.axios.get(s+a,this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$users.followList"),new Tt("$users.followList",t.response)}));case 5:if(n=t.sent,200!==n.status){t.next=8;break}return t.abrupt("return",n.data.data);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"userFollowList",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n,r=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=o.length>1&&void 0!==o[1]?o[1]:20,s=o.length>2&&void 0!==o[2]?o[2]:0,a="api/user/".concat(e,"/follow/list?limit=").concat(i,"&offset=").concat(s),t.next=5,this.axios.get(a,this.authHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$users.followList"),new Tt("$users.followList",t.response)}));case 5:if(n=t.sent,200!==n.status){t.next=8;break}return t.abrupt("return",n.data.data);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"lastPhotos",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("/api/user/".concat(e,"/photos"),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$users.lastPhotos"),new Tt("$users.lastPhotos",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getUserPhotoalbums",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/user/".concat(e,"/photo-albums"),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"getUserPhotoalbums"),new Tt("getUserPhotoalbums",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getUserCommunities",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n,r,o=this,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=l.length>1&&void 0!==l[1]?l[1]:10,s=l.length>2&&void 0!==l[2]?l[2]:0,a="/api/user/".concat(e,"/communities"),n=new URLSearchParams({limit:i||50,offset:s||0}),t.next=6,this.axios.get(a+"?"+n.toString(),this.authHeaders).catch((function(t){throw o.checkIsTokenExpires(t,"$users.getUserCommunities"),new Tt("$users.getUserCommunities",t.response)}));case 6:if(r=t.sent,200!==r.status){t.next=9;break}return t.abrupt("return",r.data.data);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getActiveSessions",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("/api/user/sessions/active",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$users.getActiveSessions"),new Tt("$users.getActiveSessions",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"closeActiveSessions",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("/api/user/sessions/close",{},this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$users.closeActiveSessions"),new Tt("$users.closeActiveSessions",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),i}(Ht),Jt=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"list",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/user/notifications",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"$notifications.notificationsList"),new Tt("$notifications.notificationsList",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"markAsRead",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={ids:e},t.next=3,this.axios.patch("api/user/notifications/mark/read",i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$notifications.markAsRead"),new Tt("$notifications.markAsRead",t.response)}));case 3:if(s=t.sent,200!==s.status){t.next=7;break}return window.console.log(s.data,"response.data"),t.abrupt("return",s.data.data.list);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),i}(Ht),Zt=Jt,Xt=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"list",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/photo-albums",this.authHeaders).catch((function(t){throw i.checkIsTokenExpires(t,"list"),new Tt("list",t.response)}));case 2:if(e=t.sent,200!==e.status){t.next=5;break}return t.abrupt("return",e.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"createPhotoalbum",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/photo-albums",e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"createPhotoalbum"),new Tt("createPhotoalbum",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updatePhotoAlbum",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/photo-albums/".concat(e),i,this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"updatePhotoalbum"),new Tt("updatePhotoalbum",t.response)}));case 2:if(s=t.sent,200!==s.status){t.next=5;break}return t.abrupt("return",s.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"deleteAlbum",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/photo-albums/".concat(e),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"deleteAlbum"),new Tt("deleteAlbum",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getPhotoAlbum",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.get("api/photo-albums/".concat(e),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"getPhotoAlbum"),new Tt("getPhotoAlbum",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"uploadImagesInPhotoAlbum",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a,n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(s=new FormData,a=0;a<i.length;a++)s.append("files[]",i[a]);return t.next=4,this.axios.post("api/photo-albums/".concat(e,"/photos"),s,this.authFileHeaders).catch((function(t){throw r.checkIsTokenExpires(t,"$photoAlbums.uploadImagesInPhotoAlbum"),new Tt("$photoAlbums.uploadImagesInPhotoAlbum",t.response)}));case 4:if(n=t.sent,200!==n.status){t.next=7;break}return t.abrupt("return",n.data.data.list);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"deleteImage",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/photos/".concat(e),this.authFileHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"$photoAlbums.deleteImage"),new Tt("$photoAlbums.deleteImage",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),i}(Ht),Qt=Xt,te=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"getUserVideo",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i,s,a=this,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:20,i=n.length>1&&void 0!==n[1]?n[1]:0,t.next=4,this.axios.get("api/user/videos?limit=".concat(e,"&offset=").concat(i),this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"getUserVideo"),new Tt("getUserVideo",t.response)}));case 4:if(s=t.sent,200!==s.status){t.next=7;break}return t.abrupt("return",s.data.data.list);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getUserVideoById",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s,a,n=this,r=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=r.length>1&&void 0!==r[1]?r[1]:20,s=r.length>2&&void 0!==r[2]?r[2]:0,t.next=4,this.axios.get("api/user/".concat(e,"/videos?limit=").concat(i,"&offset=").concat(s),this.authHeaders).catch((function(t){throw n.checkIsTokenExpires(t,"getUserVideo"),new Tt("getUserVideo",t.response)}));case 4:if(a=t.sent,200!==a.status){t.next=7;break}return t.abrupt("return",a.data.data);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"storeVideo",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/videos",e,this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"storeVideo"),new Tt("storeVideo",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteVideo",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.delete("api/videos/".concat(e),this.authHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"deleteVideo"),new Tt("deleteVideo",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),i}(Ht),ee=te,ie=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"likePostImage",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.axios.post("api/posts/".concat(e,"/image/like"),{imageId:i},this.authHeaders).catch((function(t){throw a.checkIsTokenExpires(t,"$image.likePostImage"),new Tt("$image.likePostImage",t.response)}));case 2:if(s=t.sent,200!==s.status){t.next=5;break}return t.abrupt("return",s.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()}]),i}(Ht),se=ie,ae=function(){function t(){Object(Nt["a"])(this,t),this.__axios=null,this.__$root=null,this.__token="",this.__baseURL="",this.__defaultHeaders={"X-Requested-With":"XMLHttpRequest"},this.__channel="",this.__baseWsURL="",this.__wsChannelCarrier=null,this.__wsIsConnected=!1,this.__wsChannelOptions={maxRetries:10,retryDelay:4e3,skipSubprotocolCheck:!0},this.__chat=null,this.__post=null,this.__friend=null,this.__communities=null,this.__users=null,this.__notifications=null,this.__photoalbums=null,this.__video=null,this.__image=null,this.__isInit=!1,this.__s=null,this.$error=function(){"production"!=="production".toLowerCase()&&window&&console&&console.error&&console.log.apply(window,arguments)}}return Object(At["a"])(t,[{key:"init",value:function(t,e){this.__isInit||(this.__baseURL="https://vm1095330.hl.had.pm".trim(),this.__baseWsURL="wss://vm1095330.hl.had.pm:7070".trim(),t&&(this.__$root=t),e&&(this.token=e),this.__axios=jt.a.create({baseURL:this.__baseURL,headers:this.__defaultHeaders}),this.__chat=new Ut(this),this.__post=new Bt(this),this.__friend=new qt(this),this.__communities=new Gt(this),this.__users=new Wt(this),this.__notifications=new Zt(this),this.__photoalbums=new Qt(this),this.__video=new ee(this),this.__image=new se(this),this.__isInit=!0)}},{key:"connectToChannel",value:function(t){""!==t&&(this.__channel=t),this.__tryConnectToWebSocketsChannel()}},{key:"__getAuthHeaders",value:function(){return{headers:{Authorization:this.__getBearer()}}}},{key:"__getAuthFileHeaders",value:function(){return{headers:{"Content-Type":"multipart/form-data",Authorization:this.__getBearer()}}}},{key:"__getBearer",value:function(){if(""===this.token)throw window.console.warn("API:getBearer - token is empty!"),new Tt("getBearer",{});return"Bearer "+this.__token}},{key:"login",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={email:e.trim(),password:i.trim()},t.next=3,this.__axios.post("api/login",s).catch((function(t){throw new Tt("login",t.response)}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"register",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.post("api/register",e).catch((function(t){throw new Tt("register",t.response)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"registerThroughSocialServices",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e,i){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.post("/api/sociallogin/".concat(e),{token:i}).catch((function(t){throw new Tt("registerThroughSocialServices",t.response)}));case 2:if(s=t.sent,200!==s.status){t.next=5;break}return t.abrupt("return",s.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e,i){return t.apply(this,arguments)}return e}()},{key:"updateUser",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.patch("api/user",e,this.__getAuthHeaders()).catch((function(t){throw s.__checkIsTokenExperis(t,"updateUser"),new Tt("updateUser",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"updateUserPrivacy",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.patch("api/user/privacy",e,this.__getAuthHeaders()).catch((function(t){throw s.__checkIsTokenExperis(t,"updateUserPrivacy"),new Tt("updateUserPrivacy",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"userProfileImage",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.post("/api/user/profile/image",e,this.authFileHeaders).catch((function(t){throw s.checkIsTokenExpires(t,"userProfileImage"),new Tt("userProfileImage",t.response)}));case 2:if(i=t.sent,201!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"recoveryPassword",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.post("api/password/email",{email:e}).catch((function(t){throw new Tt("recoveryPassword",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"resetPassword",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.post("api/password/reset",e).catch((function(t){throw new Tt("updatePassword",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"changePassword",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.post("api/user/password/change",e,this.__getAuthHeaders()).catch((function(t){throw new Tt("changePassword",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getLocationsByInput",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.__axios.get("api/city/search?search=".concat(e),this.__getAuthHeaders()).catch((function(t){throw s.__checkIsTokenExperis(t,"getLocationsByInput"),new Tt("getLocationsByInput",t.response)}));case 2:if(i=t.sent,200!==i.status){t.next=5;break}return t.abrupt("return",i.data.data.list);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"emit",value:function(t,e){if(this.__$root)return this.__$root.$emit(t,e||{})}},{key:"__tryConnectToWebSocketsChannel",value:function(){var t=this;this.__wsIsConnected||setTimeout((function(){""!==t.channel?t.__wsRealConnect():t.__tryConnectToWebSocketsChannel()}),500)}},{key:"__wsRealConnect",value:function(){var t=this,e={maxRetries:10,retryDelay:4e3,skipSubprotocolCheck:!0};this.__wsChannelCarrier=new ab.connect(this.__baseWsURL,(function(e){t.__s=e,t.__channelReceiver(e)}),(function(e,i,s){t.__channelErrorHandler(e,i,s)}),e),this.__wsIsConnected=!0}},{key:"__channelReceiver",value:function(t){var e=this;t.subscribe(this.__channel,(function(t,i){"user.typing"===i.event_type||i&&e.$dir(JSON.parse(JSON.stringify(i)),"from WebSockets server"),t===e.channel&&"user.typing"===i.event_type&&e.emit("userIsTyping",{chatId:i.chatId,user:i.data}),t===e.channel&&"user.notification"===i.event_type&&(e.emit("UserNotification",i.data),e.emit("NewAppNotification",{type:i.event_type,notification:i.data})),t===e.channel&&"message.new"===i.event_type&&(e.emit("newMessageInDialog",{chatId:i.data.chatId,message:i.data}),e.emit("NewAppNotification",{type:i.event_type,message:i.data})),t===e.channel&&"message.deleted"===i.event_type&&e.emit("removeMessageInDialog",{chatId:i.data.chatId,messageId:i.data.messageId}),t===e.channel&&"chat.removed"===i.event_type&&(e.emit("NewAppNotification",{type:i.event_type,chatId:i.data.id}),setTimeout((function(){e.emit("remoteRemoveDialog",{chatId:i.data.id})}),300)),t===e.channel&&"chat.created"===i.event_type&&(e.emit("remoteCreateDialog",{data:i.data}),e.emit("NewAppNotification",{type:i.event_type,dialog:i.data})),t===e.channel&&"chat.attendee.appended"===i.event_type&&(e.emit("remoteAddAttendee",{data:i.data}),e.emit("NewAppNotification",{type:i.event_type,dialog:i.data})),t===e.channel&&"chat.attendee.removed"===i.event_type&&(e.emit("NewAppNotification",{type:i.event_type,chatId:i.data.id}),setTimeout((function(){e.emit("remoteRemoveAttendee",{chatId:i.data.id,userId:i.data.userId})}),100))}))}},{key:"sendToChannel",value:function(t){t.token=this.__token,this.__s&&this.__s.call("user.typing",t)}},{key:"__channelErrorHandler",value:function(t,e,i){this.$info("".concat(t,": ").concat(e," ").concat(i||""))}},{key:"__getServerMessage",value:function(t){if(t&&t.data){if(t.data.message){var e=(t.data.message+"").trim();return e.trim().toUpperCase().replace(/\s/g,"_")}if(t.data.messages&&Array.isArray(t.data.messages)&&t.data.messages.length>0){var i=[];return t.data.messages.map((function(t){return i.push(t)})),i.join("\r\n").trim()}}}},{key:"__checkIsTokenExperis",value:function(t,e){var i=this.__getServerMessage(t.response);"TOKEN_IS_EXPIRED"===i&&this.emit("api:Unauthorized",{srcMethod:e||"pliziAPI"})}},{key:"checkIsTokenExpires",value:function(t,e){return this.__checkIsTokenExperis(t,e)}},{key:"$log",value:function(){"production"!=="production".toLowerCase()&&window&&console&&console.log&&console.log.apply(window,arguments)}},{key:"$info",value:function(){"production"!=="production".toLowerCase()&&window&&console&&console.info&&console.log.apply(window,arguments)}},{key:"$warn",value:function(){"production"!=="production".toLowerCase()&&window&&console&&console.warn&&console.log.apply(window,arguments)}},{key:"$dir",value:function(){"production"!=="production".toLowerCase()&&window&&console&&console.dir&&console.log.apply(window,arguments)}},{key:"$chat",get:function(){return this.__chat}},{key:"$post",get:function(){return this.__post}},{key:"$friend",get:function(){return this.__friend}},{key:"$communities",get:function(){return this.__communities}},{key:"$users",get:function(){return this.__users}},{key:"$notifications",get:function(){return this.__notifications}},{key:"$photoalbums",get:function(){return this.__photoalbums}},{key:"$video",get:function(){return this.__video}},{key:"$image",get:function(){return this.__image}},{key:"axios",get:function(){return this.__axios}},{key:"token",set:function(t){this.__token=(t+"").trim(),localStorage.setItem("pliziJWToken",this.__token)},get:function(){return this.__token}},{key:"channel",set:function(t){this.__channel=(t+"").trim(),localStorage.setItem("pliziChatChannel",this.__channel)},get:function(){return this.__channel}},{key:"authHeaders",get:function(){return this.__getAuthHeaders()}},{key:"authFileHeaders",get:function(){return this.__getAuthFileHeaders()}}]),t}(),ne=new ae,re=i("4534"),oe=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(t){var s;return Object(Nt["a"])(this,i),s=e.call(this,null,null),s.localStorageKey="",s._api=null,s.loadEventName="",s.restoreEventName="",s.storeEventName="",s.updateEventName="",s.pageSize=10,s._isLoad=!1,s._api=t,s}return Object(At["a"])(i,[{key:"restore",value:function(){this.clear(),this.restoreData(),this.isLoad=!0}},{key:"load",value:function(t){this._isLoad=!0}},{key:"storeData",value:function(){var t=this.toString();return window.localStorage.setItem(this.localStorageKey,t),this.storeEventName&&this.emit(this.storeEventName),t}},{key:"restoreData",value:function(){var t=this,e=localStorage.getItem(this.localStorageKey);if("undefined"===typeof e||null===e||""===e)return null;var i=null;try{i=JSON.parse(e),i&&(i.map((function(e){t.add(e)})),this.restoreEventName&&this.emit(this.restoreEventName))}catch(s){return void 0!==window.console&&window.console.error&&window.console.warn(s.toString()),null}return this.toJSON()}},{key:"emit",value:function(t,e){t&&this.api.emit(t,e||{})}},{key:"api",get:function(){return this._api}},{key:"isLoad",get:function(){return this._isLoad},set:function(t){this._isLoad=t}}]),i}(re["a"]),le=function(){function t(e){Object(Nt["a"])(this,t),this._id=null,this._email=null,this._firstName=null,this._lastName=null,this._userPic=null,this._lastLoginAt=null,this._id=e.id,this._email=e.email,this._firstName=e.firstName,this._lastName=e.lastName,this._userPic=e.userPic,this._lastLoginAt=e.lastLoginAt}return Object(At["a"])(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"email",get:function(){return this._email},set:function(t){this._email=t}},{key:"firstName",get:function(){return this._firstName},set:function(t){this._firstName=t}},{key:"lastName",get:function(){return this._lastName},set:function(t){this._lastName=t}},{key:"userPic",get:function(){return this._userPic},set:function(t){this._userPic=t}},{key:"lastLoginAt",get:function(){return this._lastLoginAt},set:function(t){this._lastLoginAt=t}},{key:"lastLoginUnix",get:function(){return this._lastLoginAt.valueOf()}}]),Object(At["a"])(t,[{key:"toJSON",value:function(){return{id:this.id,email:this.email,firstName:this.firstName,lastName:this.lastName,userPic:this.userPic,lastLoginAt:this.lastLoginAt}}}]),t}(),ce=le,ue=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){var t;Object(Nt["a"])(this,i);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a)),t.localStorageKey="pliziLastEntries",t}return Object(At["a"])(i,[{key:"addNewLastEntries",value:function(t){this.restore();var e=this.asArray();if(this.collection.size<5)this.add(t);else{var i=e.reduce((function(t,e){return t<e?t:e}));this.collection.delete(i.id),this.add(t)}this.storeData()}},{key:"new",value:function(t){return new ce(t)}},{key:"compare",value:function(t,e){return t.lastLoginUnix===e.lastLoginUnix?0:t.lastLoginUnix>e.lastLoginUnix?-1:1}},{key:"asArray",value:function(){var t=[];return this._collection.forEach((function(e){t.push(e)})),t.sort(this.compare),t}}]),i}(oe),de=ue,me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal show",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"Modal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.onHide(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body"},[i("div",{staticClass:"plz-last-entry-form-wrapper",attrs:{id:""}},[t._m(0),i("div",{staticClass:"plz-last-entry-userPic text-center"},[i("img",{staticClass:"rounded-circle",attrs:{src:t.userPic,alt:t.fullName}})]),i("div",{staticClass:"plz-last-entry-fullName text-center"},[i("p",{staticClass:"text-bold"},[t._v(" "+t._s(t.entry.firstName+" "+t.entry.lastName)+" ")])]),i("div",{staticClass:"plz-last-entry-email text-center"},[i("p",[t._v(t._s(t.entry.email))])]),i("form",{attrs:{id:"lastEntryForm",novalidate:"novalidate"},on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[i("div",{staticClass:"form-group",class:{"has-error":!!t.isPasswordErrors}},[i("label",{staticClass:"d-none",attrs:{for:"password"}},[t._v("Ваш пароль")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],ref:"password",staticClass:"form-control",class:{"is-invalid":!!t.isPasswordErrors},attrs:{id:"password",type:"password",placeholder:"Ваш пароль"},domProps:{value:t.form.password},on:{input:[function(e){e.target.composing||t.$set(t.form,"password",e.target.value)},function(e){return t.onInput("password")}],blur:function(e){return t.$v.form.password.$touch()}}}),i("div",{staticClass:"invalid-feedback"},[this.errors&&this.errors.password?i("p",[t._v(" "+t._s(this.errors.password[0])+" ")]):t._e(),this.$v.form.password.required?t._e():i("p",[t._v(" Поле Ваш пароль обязательно для заполнения. ")]),this.$v.form.password.minLength?t._e():i("p",[t._v(" Поле Ваш пароль не может быть менее 6 символов. ")])])]),i("div",{staticClass:"form-group"},[i("button",{staticClass:"btn plz-btn plz-btn-primary text-center",attrs:{id:"btnRegistration",type:"submit",disabled:t.$v.$invalid}},[t._v(" Войти ")]),t.serverError?i("p",{staticClass:"text-danger mt-3 mb-0 text-center"},[t._v(" "+t._s(t.serverError)+" ")]):t._e()])])])])])])])},pe=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-center"},[i("h5",[t._v("Быстрый вход")])])}],he={name:"LastEntryModal",props:{entry:ce},data:function(){return{form:{password:null},errors:null,serverError:null}},computed:{isPasswordErrors:function(){return this.$v.form.password.$error||this.errors&&this.errors.length},userPic:function(){return this.entry.src||this.entry.userPic||"/images/noavatar-256.png"},fullName:function(){return this.entry.fullName||"".concat(this.entry.firstName," ").concat(this.entry.lastName)}},validations:function(){return{form:{password:{required:R["required"],minLength:Object(R["minLength"])(6)}}}},methods:{onHide:function(){this.$emit("onHide")},onInput:function(t){this.errors&&this.errors[t]&&(this.errors[t]=null)},login:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$v.$touch(),t.errors=[],i=null,e.prev=3,e.next=6,t.$root.$api.login(t.entry.email.trim(),t.form.password.trim());case 6:i=e.sent,e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](3),console.warn(e.t0.detailMessage),e.t0.status>=400&&(t.serverError=e.t0.data.message,t.$refs.password.focus()),422===e.t0.status&&(t.errors=e.t0.data.errors);case 14:i&&t.$root.$emit("afterSuccessLogin",{token:i.data.token,chatChannel:i.data.channel,redirect:!0});case 15:case"end":return e.stop()}}),e,null,[[3,9]])})))()}},mounted:function(){var t=this;setTimeout((function(){t.$refs.password.focus()}),100)}},fe=he,ve=(i("7e3f"),Object(b["a"])(fe,me,pe,!1,null,null,null)),ge=ve.exports,be=i("4b70"),Ce=i.n(be),ye={name:"LastEntries",components:{LastEntryItem:Rt,LastEntryModal:ge,vueCustomScrollbar:Ce.a},data:function(){return{lastEntriesList:new de(null),logInModal:{isVisible:!1,content:{entry:null}},customScrollbarSettings:{maxScrollbarLength:60,suppressScrollY:!0,wheelPropagation:!1}}},methods:{getLastFiveEntries:function(){if(this.checkIsTarga())return this.getLastFakeEntries();var t=this.lastEntriesList.asArray().slice();return t.push({id:0,src:"/images/icons/add-account.png",fullName:"Добавить аккаунт",isUser:!1}),t},checkIsTarga:function(){return"undefined"!==typeof isTarga&&!!isTarga},calcStyle:function(){return this.checkIsTarga()?{height:"auto","padding-bottom":"2rem"}:{}},getLastFakeEntries:function(){return[{id:1,src:"/images/last-entries/ava-2.png",fullName:"Мариана Кабанова",isUser:!0,email:"test@gmail.com"},{id:2,src:"/images/last-entries/ava-1.png",fullName:"Виктория Мамонтовa",isUser:!0,email:"user@mail.com"},{id:3,src:"/images/last-entries/ava-3.png",fullName:"Полина Дорожина",isUser:!0,email:"admin@mail.com"},{id:4,src:"/images/last-entries/ava-21.png",fullName:"Иннокентий Савельев",isUser:!0,email:"brandyn96@paucek.net"},{id:5,src:"/images/last-entries/ava-4.png",fullName:"Alex Targa",isUser:!0,email:"targa@ua.fm",password:"5eb415816486f"},{id:6,src:"/images/last-entries/ava-7.png",fullName:"Alex Dnipro",isUser:!0,email:"targettius@gmail.com",password:"5eb595c40a762"},{id:7,src:"/images/last-entries/ava-22.png",fullName:"Филипп Голубев",isUser:!0,email:"homenick.amber@carroll.com"},{id:8,src:"/images/last-entries/ava-23.png",fullName:"Елизавета Зимина",isUser:!0,email:"rruecker@mann.com"},{id:9,src:"/images/last-entries/ava-24.png",fullName:"Яна Шарапова",isUser:!0,email:"ohintz@yahoo.com "},{id:10,src:"/images/last-entries/ava-25.png",fullName:"Михаил Шарапов",isUser:!0,email:"vharris@robel.org"},{id:11,src:"/images/last-entries/ava-26.png",fullName:"Родион Корнилов",isUser:!0,email:"kellen.williamson@gmail.com"},{id:12,src:"/images/last-entries/ava-27.png",fullName:"Олеся Александрова",isUser:!0,email:"vstreich@powlowski.biz"}]},onClickEntry:function(t){this.checkIsTarga()||0===t.id?this.$emit("logInWithEntryItem",t):(this.logInModal.content.entry=t,this.logInModal.isVisible=!0)},onHideLastEntryModal:function(){this.logInModal.isVisible=!1,this.logInModal.content.entry=null}},created:function(){this.lastEntriesList.restore()}},we=ye,xe=Object(b["a"])(we,_t,$t,!1,null,null,null),ke=xe.exports,_e=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$e=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white-br20 ",attrs:{id:"pliziMobile"}},[s("div",{staticClass:"plizi-mobile d-flex flex-wrap justify-content-between px-4 pt-2 position-relative"},[s("div",{staticClass:"plz-for-mobile col-12 col-sm-4 d-flex justify-content-center my-auto flex-column"},[s("h5",{staticClass:"mb-4 text-center text-sm-left"},[t._v("Скоро "),s("br"),t._v("Plizi для мобильных устройств")]),s("div",{staticClass:"plz-social-apps d-flex justify-content-center justify-content-sm-start mb-4"},[s("div",{staticClass:"mr-3"},[s("a",{staticClass:"btn-social-app",attrs:{href:"#apple",title:"Apple"}},[s("img",{attrs:{src:"/images/icons/app-ios-icon.png",alt:"ios"}})])]),s("div",{staticClass:"mx-3"},[s("a",{staticClass:"btn-social-app",attrs:{href:"#android",title:"Android"}},[s("img",{attrs:{src:"/images/icons/app-andoid-icon.png",alt:"android"}})])])])]),s("div",{staticClass:"col-12 col-sm-6 position-relative align-self-end"},[s("img",{staticClass:"w-100",attrs:{src:i("49bd"),alt:"image"}})])])])}],Me={name:"PliziMobile",data:function(){return{}},methods:{}},Ie=Me,Pe=Object(b["a"])(Ie,_e,$e,!1,null,null,null),Se=Pe.exports,Le={name:"LoginPage",components:{LoginForm:kt,LastEntries:ke,PliziMobile:Se},data:function(){return{}},methods:{logInWithEntryItem:function(t){if(t)return t.isUser?(this.$refs.loginForm.model.email=t.email,this.$refs.loginForm.model.password=t.password||"secret",void this.$refs.loginForm.startLogin()):void this.$refs.loginForm.openRegistrationModal()},checkIsTarga:function(){return"undefined"!==typeof isTarga&&!!isTarga}},created:function(){this.$root.$isAuth=!1},mounted:function(){this.$route.query.auto&&(this.$refs.loginForm.model.email=this.$route.query.auto,this.$refs.loginForm.model.password="secret",this.$refs.loginForm.startLogin()),this.$root.$emit("afterSuccessLogout",{redirect:!1})}},Re=Le,Ne=Object(b["a"])(Re,w,x,!1,null,null,null),Ae=Ne.exports,Fe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"w-100 bg-white-br20 p-5"},[t.successMessage?t._e():i("h4",{staticClass:"update-password-title text-center text-md-left mb-4"},[t._v("Восстановление пароля")]),t.successMessage?i("div",{staticClass:"update-password-success text-center"},[i("IconChecked",{staticClass:"update-password-success-icon-checked"}),i("p",{staticClass:"update-password-success-message"},[t._v(" Ваш пароль изменен. ")]),i("div",{staticClass:"d-flex justify-content-center"},[i("router-link",{staticClass:"btn plz-btn-primary update-password-success-btn",attrs:{to:{name:"LoginPage",params:{email:t.form.email,password:t.form.password}}}},[t._v(" Войти ")])],1)],1):i("form",{staticClass:"update-password-form w-100 mb-0",attrs:{method:"POST"},on:{submit:function(e){return e.preventDefault(),t.send(e)}}},[i("div",{staticClass:"d-flex flex-wrap justify-content-center update-password-form-box row align-items-center mb-4"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.token,expression:"form.token"}],attrs:{type:"hidden",name:"token"},domProps:{value:t.form.token},on:{input:function(e){e.target.composing||t.$set(t.form,"token",e.target.value)}}}),i("div",{staticClass:"form-group col-12 col-md-4 position-relative"},[i("label",{staticClass:"d-none col-form-label text-md-right",attrs:{for:"email"}},[t._v("Ваш E-mail")]),i("div",{staticClass:"position-relative"},[i("i",{staticClass:"icon icon-letter"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control",class:{"is-invalid":t.errors&&t.errors["email"]},attrs:{id:"email",type:"email",name:"email",autocomplete:"email",placeholder:"Ваш E-mail",required:"",autofocus:""},domProps:{value:t.form.email},on:{input:[function(e){e.target.composing||t.$set(t.form,"email",e.target.value)},function(e){t.errors&&t.errors["email"]&&(t.errors["email"]=null)}]}}),t.errors&&t.errors["email"]?i("div",{staticClass:"invalid-feedback"},[i("p",{staticClass:"text-danger"},[t._v(t._s(t.errors["email"][0]))])]):t._e()])]),i("div",{staticClass:"form-group col-12 col-md-4 position-relative"},[i("label",{staticClass:"d-none col-form-label text-md-right",attrs:{for:"password"}},[t._v("Ваш новый пароль")]),i("div",{staticClass:"position-relative"},[i("i",{staticClass:"icon icon-key"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",class:{"is-invalid":t.errors&&t.errors["password"]},attrs:{id:"password",type:"password",name:"password",autocomplete:"new-password",placeholder:"Ваш новый пароль",required:""},domProps:{value:t.form.password},on:{input:[function(e){e.target.composing||t.$set(t.form,"password",e.target.value)},function(e){t.errors&&t.errors["password"]&&(t.errors["password"]=null)}]}}),t.errors&&t.errors["password"]?i("div",{staticClass:"invalid-feedback"},[i("p",{staticClass:"text-danger"},[t._v(t._s(t.errors["password"][0]))])]):t._e()])]),i("div",{staticClass:"form-group col-12 col-md-4 position-relative"},[i("label",{staticClass:"d-none col-form-label text-md-right",attrs:{for:"password-confirm"}},[t._v(" Подтвердите новый пароль ")]),i("div",{staticClass:"position-relative"},[i("i",{staticClass:"icon icon-key"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirmation,expression:"form.password_confirmation"}],staticClass:"form-control",attrs:{id:"password-confirm",type:"password",name:"password_confirmation",autocomplete:"new-password",placeholder:"Подтвердите новый пароль",required:""},domProps:{value:t.form.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.form,"password_confirmation",e.target.value)}}})])])]),t._m(0),t.successMessage?i("div",{staticClass:"text-center mt-3"},[i("p",{staticClass:"text-success"},[t._v(t._s(t.successMessage))])]):t._e()])])])},ze=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group col-12 col-md-4 p-2 mx-auto"},[i("div",{staticClass:"w-100"},[i("button",{staticClass:"btn btn-primary w-100 text-uppercase",attrs:{type:"submit"}},[t._v(" Обновить пароль ")])])])}],Ee=i("00e9"),je=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 210 152"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M179.5 3C177.987 4.617 176.466 5.9535 176.118 5.97C175.771 5.9865 169.642 11.85 162.5 19C155.358 26.15 149.281 32 148.997 32C148.713 32 144.214 36.275 139 41.5C133.786 46.725 129.287 51 129.003 51C128.72 51 121.519 57.975 113 66.5C104.481 75.025 97.2795 82 96.9955 82C96.7115 82 92.6635 85.825 88 90.5C83.3365 95.175 79.2865 99 79 99C78.7135 99 74.6635 95.175 70 90.5C65.3365 85.825 61.288 82 61.0035 82C60.719 82 54.6425 76.15 47.5 69C40.3575 61.85 34.2735 56 33.9795 56C33.685 56 32.1115 54.6415 30.4815 52.9815L27.519 49.9625L24.2595 53.222C22.4665 55.015 21 56.7145 21 57C21 57.285 16.497 62.013 10.9935 67.5065L0.987 77.4945L9.24 85.7475C13.779 90.2865 17.7225 94 18.0035 94C18.284 94 24.3575 99.85 31.5 107C38.6425 114.15 44.7175 120 45 120C45.2825 120 51.3575 125.85 58.5 133C65.6425 140.15 71.7265 146 72.0205 146C72.315 146 73.8805 147.35 75.5 149C77.1195 150.65 78.6965 152 79.005 152C79.313 152 80.6605 150.875 82 149.5C83.3395 148.125 84.6775 147 84.9745 147C85.271 147 91.5825 140.925 99 133.5C106.418 126.075 112.719 120 113.003 120C113.288 120 117.561 115.95 122.5 111C127.439 106.05 131.712 102 131.995 102C132.279 102 139.707 94.8 148.5 86C157.293 77.2 164.719 70 165.001 70C165.283 70 171.358 64.15 178.5 57C185.642 49.85 191.716 44 191.996 44C192.277 44 196.221 40.2865 200.76 35.7475L209.013 27.4945L199.007 17.5065C193.503 12.013 189 7.285 189 7C189 6.5475 182.738 -0.0489993 182.384 0.0300007C182.31 0.0465007 181.013 1.383 179.5 3Z"}})])},De=[],Oe={name:"IconChecked"},Te=Oe,He=Object(b["a"])(Te,je,De,!1,null,"91da753e",null),Ue=He.exports,Ve={name:"UpdatePasswordPage",components:{IconMessage:Ee["a"],IconChecked:Ue},data:function(){return{form:{token:this.getParam("token"),email:this.getParam("email"),password:null,password_confirmation:null},errors:null,successMessage:null}},methods:{getParam:function(t){var e=new URLSearchParams(location.search);return e.get(t)},send:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.errors=null,e.prev=1,e.next=4,t.$root.$api.resetPassword(t.form);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),422===e.t0.status&&(t.errors=e.t0.data.errors);case 10:i&&(t.successMessage=i.message);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}},Be=Ve,Ye=Object(b["a"])(Be,Fe,ze,!1,null,null,null),qe=Ye.exports,Ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"alert alert-info"},[t._v("Выходим...")])},Ge=[],We={name:"LogoutPage",beforeMount:function(){this.$root.$isAuth=!1,window.localStorage.removeItem("pliziJWToken"),window.localStorage.removeItem("pliziUser"),window.localStorage.removeItem("pliziChatChannel"),window.localStorage.removeItem("pliziLastSearch"),window.localStorage.removeItem("pliziFriends"),window.localStorage.removeItem("pliziFavorites"),window.localStorage.removeItem("pliziDialogs"),window.localStorage.removeItem("pliziInvitations"),window.localStorage.removeItem("pliziNotifications"),this.$router.push({path:"/login"})}},Je=We,Ze=Object(b["a"])(Je,Ke,Ge,!1,null,null,null),Xe=Ze.exports,Qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3"},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-9 col-lg-9 col-xl-10  px-0 px-md-3"},[i("div",{staticClass:"container"},[i("WhatsNewBlock",{on:{addNewPost:t.addNewPost}}),i("div",{staticClass:"row mb-4 pt-0"},[i("PostFilter",{attrs:{filter:t.filter},on:{partsChange:t.partsChange,likedClick:t.likedClick,lastSearchChange:t.lastSearchChange}}),i("PostInterest",{attrs:{filter:t.filter},on:{interestSwitch:t.interestSwitch}})],1),t.filteredPosts&&t.filteredPosts.length>0?i("div",t._l(t.filteredPosts,(function(e){return i("Post",{directives:[{name:"waypoint",rawName:"v-waypoint",value:{active:!0,callback:function(i){i.el;var s=i.going,a=i.direction;t.postIsRead(e,s,a)},options:{threshold:[.5]}},expression:"{ active: true, callback: ({ el, going, direction })=>{ postIsRead(postData, going, direction); }, options: { threshold: [0.5] } }"}],key:"post-"+e.id,attrs:{post:e},on:{onEditPost:t.onEditPost,onDeletePost:t.onDeletePost,onRestorePost:t.onRestorePost,openVideoModal:t.openVideoModal,onShare:t.onSharePost,onShowUsersLikes:t.openLikeModal}})})),1):t.isStarted?t._e():i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},[t._v(" Извините, но сейчас нечего показывать. ")])]),t.isStarted?[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2)]),i("div",{staticClass:"col-md-2 col-lg-2 col-xl-1 d-none d-md-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)]),t.postEditModal.isVisible?i("PostEditModal",{attrs:{post:t.postForEdit},on:{hidePostEditModal:t.hidePostEditModal}}):t._e(),t.postVideoModal.isVisible?i("PostVideoModal",{attrs:{videoLink:t.postVideoModal.content.videoLink},on:{hideVideoModal:t.hideVideoModal}}):t._e(),t.postRepostModal.isVisible?i("PostRepostModal",{attrs:{user:t.postRepostModal.content.postForRepost.author,post:t.postRepostModal.content.postForRepost},on:{hidePostRepostModal:t.hidePostRepostModal}}):t._e(),t.postLikeModal.isVisible?i("PostLikeModal",{attrs:{postId:t.postLikeModal.content.postId},on:{hideLikeModal:t.hideLikeModal}}):t._e()],1)},ti=[],ei=(i("4de4"),i("7db0"),i("c740"),i("a434"),i("2909")),ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"py-2",attrs:{id:"accountToolbarLeft"}},[i("AccountToolbarLeftGrey"),i("AccountToolbarLeftColor")],1)},si=[],ai=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"toolbarLeftGrey"}},[i("div",{staticClass:"toolbar-left-grey container pt-0 pt-md-2 px-0 mb-1 mb-md-5 d-flex d-md-block"},[i("router-link",{staticClass:"w-100 d-block text-center mx-auto mb-0 mb-md-4 py-3 py-md-0",class:{active:"NewsPage"===this.$root.$router.currentRoute.name},attrs:{to:{name:"NewsPage"},title:t.newsPage}},[i("IconFireLeftToolBar")],1),i("router-link",{staticClass:"w-100 d-block text-center mx-auto mb-0 mb-md-4 py-3 py-md-0",class:t.communitiesListPage,attrs:{to:{name:"CommunitiesListPage"},title:t.communities,tag:"a"}},[i("IconAtom")],1),i("router-link",{staticClass:"w-100 d-block text-center mx-auto mb-0 mb-md-4 py-3 py-md-0",class:t.photoAlbumsPage,attrs:{to:{name:"PhotoalbumsListPage"},title:t.photoalbums,tag:"a"}},[i("IconAddCamera",{attrs:{clazz:"icon icon-atom"}})],1),i("router-link",{staticClass:"w-100 d-block text-center mx-auto mb-0 mb-md-4 py-3 py-md-0",class:{active:"VideosPage"===this.$root.$router.currentRoute.name},attrs:{to:{name:"VideosPage"},title:t.videos,tag:"a"}},[i("IconVideo")],1)],1)])},ni=[],ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-fire",attrs:{viewBox:"0 0 374 504",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M104.25 1.19951C101.004 2.22601 98.9735 3.46851 96.0995 6.18651C92.844 9.26551 91.249 12.2385 90.4785 16.6625C89.454 22.547 90.304 25.5335 96.466 37.688C104.34 53.2195 106.821 61.5625 107.36 74.319C107.84 85.661 105.984 95.6815 101.169 107.75C94.2915 124.986 85.083 140.27 58.995 177.75C44.5845 198.453 32.219 218.362 24.2135 233.75C8.14 264.645 -0.724496 299.636 0.154004 328.72C1.1885 362.97 13.289 398.156 33.6365 426.082C46.541 443.792 58.358 455.762 75.7625 468.75C106.253 491.504 143.946 503.979 182.25 503.992C213.894 504.003 247.769 496.395 272.5 483.721C319.62 459.574 352.255 416.662 366.456 360.174C371.731 339.192 373.996 320.663 373.996 298.5C373.996 258.507 365.223 220.682 348.31 187.75C343.168 177.738 339.204 171.39 332.448 162.347C323.941 150.963 319.933 147.316 313.831 145.412C305.962 142.955 297.071 145.827 292.266 152.378C289.967 155.511 288.686 159.504 287.734 166.5C285.869 180.207 282.091 190.893 278.443 192.78C277.054 193.498 276.816 193.495 275.665 192.741C273.892 191.579 272.767 188.719 270.727 180.182C267.364 166.115 261.729 149.279 255.606 135C242.61 104.699 219.007 71.753 194.613 49.87C178.339 35.27 166.886 26.9495 148 16.0045C136.54 9.36351 122.619 2.83551 116.577 1.27001C113.038 0.353011 107.036 0.318511 104.25 1.19951ZM154.597 68.888C159.78 71.307 179.935 90.843 189.273 102.5C202.759 119.335 213.713 138.278 221.656 158.5C233.183 187.845 238.275 214.158 239.99 253.25C240.483 264.469 241.16 267.379 244.268 271.622C250.327 279.895 262.606 281.947 271.095 276.107C278.836 270.781 295.539 248.805 307.224 228.574C313.249 218.142 315.504 216.386 319.048 219.368C321.29 221.254 323.501 226.287 327.784 239.25C333.154 255.505 335.665 268.193 337.23 286.991C338.541 302.737 337.989 317.29 335.457 333.72C331.076 362.144 319.515 389.145 302.589 410.486C293.614 421.8 289.085 425.125 286.048 422.625C284.832 421.624 284.312 419.149 283.5 410.5C282.155 396.16 277.588 382.413 270.352 370.922C265.102 362.586 261.73 358.65 248.997 346C238.885 335.954 235.515 332.27 233.107 328.629C226.698 318.941 224.078 311.131 223.632 300.38C223.337 293.265 223.721 290.55 226.16 282.5C227.514 278.031 227.75 276.468 227.75 271.99C227.75 267.084 227.642 266.51 226.152 263.484C222.174 255.404 214.619 251.442 205.321 252.562C201.448 253.028 194.419 255.66 188.223 258.966C157.594 275.308 130.661 299.018 113.784 324.5C101.425 343.159 95.017 359.833 91.396 382.75C89.777 392.999 89.799 409.142 91.447 420.098C92.0965 424.414 92.4935 428.295 92.3295 428.723C91.483 430.929 86.5895 428.563 81.0585 423.273C61.923 404.972 47.1185 376.373 42.275 348.353C41.177 342.001 40 330.176 40 325.5C40 320.824 41.177 308.999 42.275 302.647C44.65 288.907 51.5835 268.729 58.959 254.09C64.831 242.436 77.28 222.2 89.514 204.424C106.139 180.267 109.293 175.577 115.438 165.858C130.855 141.473 138.605 124.747 143.287 105.752C145.562 96.5225 146.991 86.539 147.009 79.75C147.027 73.05 147.544 70.5975 149.251 69.125C150.804 67.7855 152.11 67.7275 154.597 68.888ZM182.163 313.552C183.883 314.335 185.089 316.803 187.471 324.418C191.153 336.186 196.115 345.924 203.305 355.496C208.7 362.679 211.849 366.112 222.5 376.422C235.639 389.14 240.047 395.464 243.286 406.25C244.441 410.096 244.642 411.695 244.672 417.25L244.708 423.75L242.087 431.4C239.701 438.367 239.432 439.605 239.074 445.284C238.642 452.13 238.213 453.192 234.988 455.387C229.112 459.385 200.727 463.994 181.945 463.999C174.705 464 162.916 462.981 155.656 461.727C137.819 458.643 114.778 449.68 108.126 443.237C103.954 439.196 104.447 438.43 112.106 437.048C118.669 435.865 122.331 434.123 125.469 430.689C130.505 425.179 131.38 421.293 130.488 408.411C129.915 400.141 129.937 398.226 130.678 391.661C131.766 382.037 132.584 378.2 135.297 370C141.448 351.407 153.85 333.274 169.877 319.437C176.681 313.563 179.366 312.277 182.163 313.552Z"}})])},oi=[],li={name:"IconFireLeftToolBar"},ci=li,ui=Object(b["a"])(ci,ri,oi,!1,null,null,null),di=ui.exports,mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-atom",attrs:{viewBox:"0 0 512 491",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M244.692 0.739986C228.021 3.29249 212.617 10.32 199.954 21.149C186.697 32.4855 176.311 50.2075 172.392 68.176C171.425 72.608 171.283 74.768 171.268 85.25C171.252 96.0535 171.367 97.772 172.422 102.487C176.707 121.633 184.569 134.913 200.188 149.389C210.122 158.596 225.129 166.002 239.81 168.945C249.207 170.828 255.487 171.188 263.298 170.291C274.918 168.956 283.436 166.534 292.545 161.972C304.67 155.901 314.841 147.269 323.685 135.542C326.471 131.849 329.345 128.39 330.072 127.856C332.427 126.125 335.766 126.528 340.667 129.135C346.204 132.08 353.792 137.105 359.826 141.822C379.615 157.291 394.981 175.743 406.19 197.5C411.712 208.219 413.359 212.125 417.573 224.5C422.213 238.124 424.297 241.613 430.123 245.503C438.841 251.324 448.324 250.655 455.25 243.729C460.67 238.309 462.469 231.921 460.755 224.186C458.621 214.553 452.679 198.567 446.22 185.082C426.847 144.635 393.22 110.337 352.184 89.1695C340.489 83.137 340.021 82.569 338.511 72.573C335.789 54.5545 330.359 42.0455 319.478 28.724C308.265 14.998 289.907 4.63199 270.75 1.21099C264.549 0.103986 250.506 -0.150014 244.692 0.739986ZM263.5 43.7085C276.205 45.99 288.305 55.1405 294.24 66.9555C298.29 75.0185 299.386 87.589 296.793 96.219C291.516 113.78 278.3 125.126 260.339 127.516C250.011 128.891 237.734 125.066 228.642 117.642C222.852 112.913 217.075 103.462 214.954 95.25C212.875 87.2 213.802 75.9995 217.179 68.364C222.715 55.846 235.715 45.8235 249.416 43.5115C253.113 42.8875 259.421 42.976 263.5 43.7085ZM124.89 113.489C118.678 114.604 112.913 118.664 102.715 129.102C86.411 145.792 75.86 160.563 65.2485 181.554C57.4605 196.959 53.4395 207.686 49.2445 224.25C45.017 240.942 43.0185 255.966 42.9925 271.25C42.983 276.75 42.745 282.263 42.463 283.5C41.6545 287.052 39.9595 289.089 33.388 294.406C23.709 302.239 18.14 308.52 12.25 318.25C3.88451 332.069 -0.518485 349.224 0.142015 365.426C0.665015 378.257 3.38951 388.961 9.00601 400.25C13.511 409.305 17.496 414.771 25.3005 422.604C33.051 430.381 38.6195 434.446 47.75 438.992C77.021 453.564 111.116 450.147 137.49 429.998C141.888 426.637 150.227 418.147 153.691 413.5C163.001 401.013 168.306 387.255 170.277 370.484C171.11 363.396 171.008 359.888 169.691 350.5C166.355 326.715 152.958 305.584 132.551 291.918C121.621 284.599 111.364 280.541 98.5 278.447C91.4925 277.307 88.8215 276.144 87.331 273.585C84.07 267.987 87.462 244.034 94.501 222.95C103.299 196.599 117.704 173.919 138.929 153C145.334 146.688 147.43 143.47 148.73 137.954C150.851 128.959 148.725 122.507 141.969 117.43C137.444 114.03 130.633 112.458 124.89 113.489ZM417.626 277.789C400.172 279.903 385.679 286.116 371.866 297.406C362.636 304.95 353.547 317.032 348.538 328.415C343.028 340.936 340.237 356.678 341.454 368.375C342.818 381.482 345.44 390.516 351.276 402.213C354.122 407.916 355 410.169 355 411.765C355 415.918 351.444 419.222 339.428 426.233C323.838 435.33 302.944 442.894 284.897 445.976C269.093 448.675 255.28 449.425 242.25 448.293C224.811 446.776 213.77 444.502 196 438.765C185.701 435.439 180.223 435.313 174.186 438.262C170.966 439.835 166.846 443.851 165.278 446.945C162.757 451.921 162.481 458.739 164.575 464.336C165.767 467.522 169.849 472.158 173.559 474.538C180.108 478.74 201.74 485.164 218 487.734C234.521 490.345 238.824 490.686 255.5 490.705C266.135 490.718 272.873 490.516 275 490.121C276.788 489.79 281.062 489.163 284.5 488.729C306.143 485.997 331.272 478.331 351.25 468.367C362.997 462.508 371.102 457.593 382.018 449.712C391.526 442.847 393.122 442.479 402.661 444.956C418.9 449.172 435.602 448.909 451.5 444.185C458.649 442.061 469.682 436.641 475.75 432.271C481.602 428.057 492.079 417.591 496.232 411.809C503.019 402.36 508.568 389.016 510.81 376.75C512.086 369.769 512.083 355.208 510.805 348.25C508.326 334.756 502.402 321.469 493.98 310.511C490.989 306.619 483.615 299.18 479.25 295.651C467.189 285.9 451.943 279.771 434.745 277.759C427.153 276.871 425.172 276.875 417.626 277.789ZM94.2285 321.336C101.853 323.07 108.117 326.381 113.845 331.703C119.837 337.271 123.247 342.644 125.674 350.344C128.448 359.146 128.404 367.519 125.54 375.861C120.806 389.652 109.965 399.804 95.9225 403.595C89.987 405.198 79.936 405.204 74.3575 403.607C59.95 399.485 48.4895 388.022 44.3995 373.643C42.797 368.01 42.8095 357.453 44.4255 351.75C48.3605 337.86 58.494 327.149 72.139 322.458C79.5255 319.918 86.449 319.567 94.2285 321.336ZM436.704 321.488C449.452 324.749 460.665 334.274 465.469 345.924C468.004 352.072 468.691 355.669 468.683 362.75C468.674 370.549 467.864 374.318 464.817 380.727C459.563 391.779 449.22 400.46 437.565 403.599C431.871 405.133 421.734 405.133 416.078 403.6C402.019 399.789 391.193 389.65 386.46 375.861C383.02 365.84 383.671 354.816 388.28 345.045C396.992 326.574 417.528 316.584 436.704 321.488Z"}})])},pi=[],hi={name:"IconAtom"},fi=hi,vi=Object(b["a"])(fi,mi,pi,!1,null,null,null),gi=vi.exports,bi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-play",attrs:{viewBox:"0 0 382 383",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M172.01 0.551507C171.328 0.827507 167.841 1.49151 164.26 2.02751C105.226 10.8685 55.7515 44.274 25.5535 95.6835C14.9935 113.661 6.50051 137.267 3.04451 158.25C2.45551 161.825 1.59451 166.55 1.13051 168.75C-0.070995 174.449 -0.406995 206.387 0.691505 210.5C1.09501 212.013 1.68001 215.275 1.99051 217.75C4.21301 235.456 11.465 258.879 20.0455 276.066C23.8635 283.714 27.105 289.186 33.0415 298C50.531 323.969 75.352 346.085 103.284 360.59C121.38 369.986 143.295 376.994 163.879 379.965C167.721 380.52 171.473 381.204 172.215 381.487C174.035 382.179 207.965 382.179 209.785 381.487C210.527 381.204 214.279 380.52 218.121 379.965C238.705 376.994 260.621 369.986 278.716 360.59C297.451 350.861 313.887 338.43 329.427 322.233C345.496 305.486 359.003 284.761 367.38 264C372.856 250.428 376.847 236.555 378.956 223.75C379.545 220.175 380.409 215.45 380.876 213.25C381.587 209.902 381.725 206.273 381.725 191C381.725 175.727 381.587 172.098 380.876 168.75C380.409 166.55 379.545 161.825 378.956 158.25C375.5 137.267 367.007 113.661 356.447 95.6835C337.745 63.845 310.397 37.7895 278.25 21.18C262.06 12.8155 241.278 5.89601 223.75 3.03501C220.175 2.45151 215.45 1.59401 213.25 1.13001C209.997 0.444007 205.889 0.264507 191.25 0.168507C180.099 0.0955069 172.778 0.241507 172.01 0.551507ZM204.35 38.7535C220.04 40.082 226.478 41.307 237.183 44.998C254.264 50.8875 273.941 61.297 284.526 70.043C298.819 81.8525 309.973 93.7565 317.751 105.5C328.985 122.462 338.508 145.012 341.236 161.117C341.912 165.11 342.859 173.468 343.339 179.689C344.17 190.452 344.17 191.548 343.339 202.311C341.756 222.817 339.339 232.929 331.86 250.331C326.961 261.73 318.602 276.241 312.448 284.033C305.322 293.054 292.513 305.801 283.5 312.838C269.828 323.514 244.858 335.622 227.53 339.978C219.905 341.895 200.782 344 191 344C181.218 344 162.095 341.895 154.47 339.978C137.142 335.622 112.172 323.514 98.5 312.838C89.487 305.801 76.6775 293.054 69.552 284.033C60.349 272.382 50.2095 252.761 44.472 235.5C40.897 224.746 39.7425 217.893 38.4275 199.625C37.933 192.756 37.933 189.244 38.4275 182.375C39.7425 164.107 40.897 157.254 44.472 146.5C50.325 128.892 60.431 109.445 69.822 97.7185C80.036 84.9645 94.3635 71.5155 105.5 64.228C117.229 56.5535 131.383 49.63 144.817 44.998C155.249 41.401 162.059 40.076 176.75 38.7865C187.08 37.8795 193.931 37.8715 204.35 38.7535ZM149.208 122.711C147.15 123.607 145.658 125.597 144.749 128.66C144.102 130.839 144.001 139.34 144.003 191.216C144.005 233.07 144.171 251.855 144.552 253.25C146.067 258.794 150.846 261.245 156.354 259.302C157.443 258.918 165.852 254.267 175.042 248.967C262.881 198.31 262.166 198.739 264.371 195.407C265.332 193.955 265.693 192.765 265.693 191.044C265.693 187.861 264.174 185.527 260.33 182.803C256.047 179.766 158.881 123.59 156.395 122.713C153.894 121.831 151.232 121.83 149.208 122.711Z"}})])},Ci=[],yi={name:"IconPlay"},wi=yi,xi=Object(b["a"])(wi,bi,Ci,!1,null,null,null),ki=xi.exports,_i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-video",attrs:{"enable-background":"new 0 0 512 512",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"m458 16h-404c-29.776 0-54 24.224-54 54v276c0 29.776 24.224 54 54 54h404c29.776 0 54-24.224 54-54v-276c0-29.776-24.224-54-54-54zm6 330c0 3.309-2.691 6-6 6h-404c-3.309 0-6-2.691-6-6v-276c0-3.309 2.691-6 6-6h404c3.309 0 6 2.691 6 6z"}}),i("path",{attrs:{d:"m120 448h-96c-13.255 0-24 10.745-24 24s10.745 24 24 24h96c13.255 0 24-10.745 24-24s-10.745-24-24-24z"}}),i("path",{attrs:{d:"m488 448h-272c-13.255 0-24 10.745-24 24s10.745 24 24 24h272c13.255 0 24-10.745 24-24s-10.745-24-24-24z"}}),i("path",{attrs:{d:"m329.455 175.344-71.217-60.512c-13.5-11.539-31.901-14.097-48.041-6.675-16.159 7.432-26.197 23.098-26.197 40.884v117.919c0 17.786 10.038 33.451 26.197 40.883 6.118 2.813 12.559 4.193 18.937 4.193 10.447 0 20.722-3.704 29.104-10.868l71.217-60.512c.397-.337.783-.688 1.158-1.05 8.633-8.362 13.387-19.587 13.387-31.606s-4.754-23.244-13.388-31.605c-.374-.363-.76-.713-1.157-1.051zm-97.455 85.129v-104.946l61.757 52.473z"}})])},$i=[],Mi={name:"IconVideo"},Ii=Mi,Pi=Object(b["a"])(Ii,_i,$i,!1,null,null,null),Si=Pi.exports,Li=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-star",attrs:{viewBox:"0 0 463 444",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M229.25 0.317016C222.455 1.36252 216.507 4.47602 211.174 9.77852C207.619 13.313 206.741 14.563 204.317 19.541C202.788 22.681 199.48 30.3125 196.965 36.5C188.56 57.1845 181.647 74.1525 177.105 85.25C174.629 91.3 170.354 101.763 167.604 108.5C158.19 131.569 157.622 132.652 153.961 134.52C151.597 135.726 147.234 136.311 135.5 136.996C130.688 137.277 123.488 137.727 119.5 137.995C112.675 138.455 107.769 138.783 89.375 140.008C74.4505 141.002 66.8985 141.507 59.375 142.013C55.181 142.295 48.0375 142.744 43.5 143.011C21.385 144.313 16.4675 145.847 9.07003 153.755C-0.405973 163.885 -1.72947 180.306 5.99803 191.878C9.05753 196.46 11.494 198.711 33.75 217.524C109.653 281.683 103.598 276.414 104.834 279.374C106.318 282.926 105.822 285.844 99.4855 310.828C79.9625 387.808 75.487 405.996 75.206 409.5C74.097 423.329 84.482 437.121 98.73 440.743C105.432 442.446 113.966 441.291 121.068 437.718C123.093 436.699 131.163 431.879 139 427.006C179.661 401.724 220.865 376.319 223.126 375.137C226.832 373.199 230.623 373.025 234.133 374.632C235.629 375.317 243.918 380.329 252.552 385.77C261.186 391.21 277.588 401.551 289 408.749C300.413 415.946 315.825 425.666 323.25 430.348C342.951 442.77 345.141 443.726 353.75 443.669C357.724 443.643 359.571 443.368 362.75 442.329C371.954 439.323 379.361 431.949 382.605 422.563C383.599 419.689 383.748 418.291 383.731 412L383.711 404.75L378.132 382.25C369.789 348.601 359.283 305.769 357.222 297C355.009 287.586 355.023 284.63 357.295 281.373C358.134 280.169 366.129 273.126 375.763 265.104C385.106 257.323 395.675 248.519 399.25 245.539C402.825 242.559 415.875 231.696 428.25 221.399C440.625 211.101 452.341 200.991 454.285 198.931C460.616 192.225 462.7 187.173 462.712 178.5C462.717 174.498 462.46 172.418 461.631 169.75C458.795 160.633 451.649 152.888 443 149.56C437.251 147.348 435.047 147.072 406.5 144.994C386.441 143.534 380.749 143.118 365.75 142.013C358.325 141.466 345.95 140.563 338.25 140.006C313.898 138.245 312.374 137.987 309.328 135.099C308.546 134.357 307.263 132.486 306.479 130.94C305.694 129.394 295.345 103.857 283.481 74.19C271.617 44.523 260.994 18.4845 259.875 16.327C256.084 9.02302 250.354 4.10302 242.893 1.74602C239.031 0.526016 232.403 -0.168484 229.25 0.317016ZM235.745 63.71C237.047 65.091 241.325 75.3335 257.966 116.921C269.301 145.246 279.228 169.452 280.027 170.712C281.59 173.177 283.711 174.738 286.5 175.476C288.587 176.028 289.716 176.119 336 179.5C402.369 184.348 399.616 184.081 401.625 185.874C402.837 186.956 402.722 189.52 401.37 191.551C400.748 192.486 381.567 208.822 358.745 227.854C335.923 246.885 316.092 263.661 314.675 265.133C312.089 267.82 311.014 270.193 310.998 273.25C310.994 274.075 312.92 282.625 315.278 292.25C317.637 301.875 322.579 322.013 326.26 337C335.97 376.536 337 381.031 337 383.868C337 387.737 334.908 389.204 331.152 387.971C329.025 387.273 328.963 387.236 303.25 371.009C293.075 364.588 274.123 352.628 261.134 344.43C248.145 336.233 236.445 328.985 235.134 328.324C231.564 326.523 229.136 326.27 225.95 327.368C224.412 327.898 203.779 340.361 178 356.33C153.113 371.748 131.803 384.843 130.645 385.431C128.129 386.709 125.177 386.815 123.915 385.673C123.229 385.052 123 384.12 123 381.939C123 378.913 123.658 376.21 141.004 308C150.948 268.9 150.588 270.474 150.174 267.888C149.549 263.975 147.404 261.836 125.75 243.528C60.9835 188.769 62.7945 190.336 61.5765 188C60.5945 186.118 60.492 185.521 60.948 184.351C62.0045 181.641 63.945 181.337 91.75 179.52C96.425 179.214 103.4 178.751 107.25 178.491C111.1 178.23 117.682 177.788 121.875 177.509C126.069 177.229 132.875 176.775 137 176.5C147.85 175.777 158.019 175.112 168 174.474C178.858 173.78 181.279 173.17 183.667 170.527C186.071 167.866 186.761 166.424 193.008 151.024C198.047 138.602 201.681 129.701 213.336 101.25C215.927 94.925 220.201 84.4145 222.834 77.8935C228.124 64.7955 229.843 62 232.605 62C233.696 62 234.593 62.4885 235.745 63.71Z"}})])},Ri=[],Ni={name:"IconStar"},Ai=Ni,Fi=Object(b["a"])(Ai,Li,Ri,!1,null,null,null),zi=Fi.exports,Ei=i("a547"),ji={name:"AccountToolbarLeftGrey",components:{IconAddCamera:Ei["a"],IconStar:zi,IconVideo:Si,IconPlay:ki,IconAtom:gi,IconFireLeftToolBar:di},data:function(){return{newsPage:"Новости",communities:"Сообщества",photoalbums:"Фотоальбомы",videos:"Видео",favorites:"Избранное"}},computed:{communitiesListPage:function(){return"CommunitiesListPage"===this.$root.$router.currentRoute.name||"CommunitiesManagePage"===this.$root.$router.currentRoute.name||"CommunitiesPopularPage"===this.$root.$router.currentRoute.name||"CommunityPage"===this.$root.$router.currentRoute.name?["router-link-exact-active","router-link-active","active"]:null},photoAlbumsPage:function(){return"PhotoalbumsListPage"===this.$root.$router.currentRoute.name||"PhotoalbumPage"===this.$root.$router.currentRoute.name?["router-link-exact-active","router-link-active","active"]:null}},methods:{}},Di=ji,Oi=Object(b["a"])(Di,ai,ni,!1,null,null,null),Ti=Oi.exports,Hi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hot-communities d-flex d-md-block",attrs:{id:"hotCommunities"}},[t.isCanAddToFavorites()?i("button",{key:"btnAddToHot"+t.$root.$communitiesKeyUpdater,staticClass:"add-new btn btn-link text-center mx-sm-auto mr-1 mb-4 px-0 py-0",attrs:{type:"button"},on:{click:t.onAddCommunityToHot}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})]):t._e(),t.isDataReady?i("HotCommunities",{key:"hotCommunitiesBlock-"+t.keyUpdater,ref:"hotCommunitiesBlock",attrs:{communities:t.hotCommunitiesList(t.keyUpdater),keyUpdater:t.keyUpdater},on:{AddCommunityToHot:t.onAddCommunityToHot,RemoveCommunityFromHots:t.onRemoveCommunityFromHots}}):i("Spinner",{attrs:{clazz:"plz-favorit-friends-spinner d-flex flex-column align-items-center"}})],1)},Ui=[],Vi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.spinnerClazz},[t._m(0),t.hideText?t._e():i("div",{staticClass:"pt-1 spinner-color text-center"},[i("h3",{domProps:{innerHTML:t._s(t.spinnerMessage)}})])])},Bi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-center pr-3"},[i("i",{staticClass:"fas fa-circle-notch fa-3x fa-spin spinner-color"})])}],Yi={name:"Spinner",props:{clazz:String,message:String,hideText:{type:Boolean,default:!0}},data:function(){return{defaultClazz:"col-12 py-5 px-5 d-flex flex-column align-items-center",defaultMessage:"Данные загружаются"}},computed:{spinnerClazz:function(){return this.clazz||this.defaultClazz},spinnerMessage:function(){return this.message||this.defaultMessage}}},qi=Yi,Ki=Object(b["a"])(qi,Vi,Bi,!1,null,null,null),Gi=Ki.exports,Wi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex d-md-block"},t._l(t.communities,(function(e){return i("HotCommunityItem",{key:"hcItem-"+e.id+"-"+t.keyUpdater,attrs:{community:e},on:{RemoveCommunityFromHots:t.onRemoveCommunityFromHots}})})),1)},Ji=[],Zi=(i("a9e3"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("router-link",{staticClass:"d-inline-block d-sm-block text-center mx-2 mx-md-auto mb-2 mb-md-4 ",attrs:{tag:"a",to:"community-"+t.community.id}},[i("button",{staticClass:"btn-remove-from-hot",attrs:{"aria-label":"удалить"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onRemoveCommunityFromHot(t.community.id)}}},[i("i",{staticClass:"fa fa-plus"})]),i("img",{staticClass:"mx-auto",attrs:{src:t.community.primaryImage,alt:t.community.name}})])}),Xi=[],Qi=(i("a4d3"),i("e01a"),i("fe31")),ts=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(t){var s;return Object(Nt["a"])(this,i),s=e.call(this,t),s._role=null,s.role=t.role,s}return Object(At["a"])(i,[{key:"toJSON",value:function(){return{id:this.id,isOnline:this.isOnline,role:this.role,profile:this.profile?this.profile.toJSON():null}}},{key:"role",get:function(){return this._role},set:function(t){this._role=t}},{key:"birthDate",get:function(){return this.profile?this.profile.birthday:null}}]),i}(Qi["a"]),es=i("1066"),is=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return i}(es["a"]),ss=function(){function t(e){Object(Nt["a"])(this,t),this._id=null,this._originalName=null,this._url=null,this._path=null,this._mimeType=null,this._image=null,this._size=null,this._id=e.id,this._originalName=e.originalName,this._url=e.url,this._path=e.path,this._mimeType=e.mimeType,this._size=e.size,this._image=e.image?new is(e.image):null}return Object(At["a"])(t,[{key:"id",get:function(){return this._id}},{key:"originalName",get:function(){return this._originalName}},{key:"url",get:function(){return this._url}},{key:"path",get:function(){return this._path}},{key:"mimeType",get:function(){return this._mimeType}},{key:"size",get:function(){return this._size}},{key:"image",get:function(){return this._image}}]),Object(At["a"])(t,[{key:"toJSON",value:function(){return{id:this.id,originalName:this.originalName,url:this.url,path:this.path,mimeType:this.mimeType,size:this.size,image:this.image?this.image.toJSON():null}}}]),t}(),as=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return i}(ss),ns=i("f804"),rs=function(){function t(e){var i=this;Object(Nt["a"])(this,t),this.__defaultAvatarPath="/images/plizi-noPrimaryImage-256.png",this._id=null,this._name=null,this._description=null,this._notice=null,this._location=null,this._primaryImage=null,this._url=null,this._website=null,this._totalMembers=null,this._totalVideos=null,this._totalFriends=null,this._role=null,this._members=null,this._admins=null,this._friends=null,this._avatar=null,this._headerImage=null,this._privacy=null,this._type=null,this._themeId=null,this._requestsCount=0,this._subscribed=!1,this._id=e.id,this._name=e.name,this._description=e.description,this._location=e.location?new ns["a"](e.location):null,this._notice=e.notice,this._primaryImage=e.primaryImage,this._url=e.url,this._website=e.website,this._privacy=e.privacy,this._type=e.type,this._themeId=e.themeId,this._avatar=e.avatar?new ss(e.avatar):null,this._headerImage=e.headerImage?new as(e.headerImage):null,this._role=e.role,this._totalMembers=e.totalMembers,this._totalVideos=e.totalVideos,this._requestsCount=e.requestsCount,this._subscribed=e.subscribed,e.friends&&(this._friends=[],this._totalFriends=e.friends.total,e.friends.list.map((function(t){i._friends.push(new ts(t))}))),e.members&&(this._members=[],e.members.list.map((function(t){i._members.push(new ts(t))}))),e.admins&&(this._admins=[],e.admins.list.map((function(t){i._admins.push(new ts(t))})))}return Object(At["a"])(t,[{key:"toJSON",value:function(){var t=null,e=null,i=null;return this.members&&(t={list:this.members.map((function(t){return t.toJSON()}))}),this.admins&&(i={list:this.admins.map((function(t){return t.toJSON()}))}),this.friends&&(e={total:this.totalFriends,list:this.friends.map((function(t){return t.toJSON()}))}),{id:this.id,name:this.name,notice:this.notice,primaryImage:this._primaryImage,url:this.url,website:this.website,location:this._location?this.location.toJSON():null,role:this.role,privacy:this.privacy,type:this.type,themeId:this.themeId,totalMembers:this.totalMembers,requestsCount:this.requestsCount,avatar:this._avatar?this._avatar.toJSON():null,headerImage:this._headerImage?this._headerImage.toJSON():null,members:t,admins:i,friends:e,subscribed:this.subscribed}}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"description",get:function(){return this._description}},{key:"location",get:function(){return this._location}},{key:"notice",get:function(){return this._notice}},{key:"noticeShort",get:function(){return this._notice?this._notice.length<=16?this._notice:this._notice.substr(0,16).trim()+"...":""}},{key:"primaryImage",get:function(){return this._primaryImage?this._primaryImage:this._avatar&&this._avatar.image&&this._avatar.image.thumb&&this._avatar.image.thumb.path?this._avatar.image.thumb.path:this.__defaultAvatarPath}},{key:"defaultAvatarPath",get:function(){return this.__defaultAvatarPath}},{key:"url",get:function(){return this._url}},{key:"website",get:function(){return this._website}},{key:"totalMembers",get:function(){return this._totalMembers}},{key:"totalVideos",get:function(){return this._totalVideos}},{key:"role",get:function(){return this._role},set:function(t){this._role=t}},{key:"admins",get:function(){return this._admins}},{key:"adminsIds",get:function(){return this._admins?this._admins.map((function(t){return t.id})):[]}},{key:"members",get:function(){return this._members}},{key:"totalFriends",get:function(){return this._totalFriends}},{key:"friends",get:function(){return this._friends}},{key:"avatar",get:function(){return this._avatar},set:function(t){this._avatar=t}},{key:"headerImage",get:function(){return this._headerImage},set:function(t){this._headerImage=t}},{key:"privacy",get:function(){return this._privacy},set:function(t){this._privacy=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"themeId",get:function(){return this._themeId},set:function(t){this._themeId=t}},{key:"requestsCount",get:function(){return this._requestsCount}},{key:"subscribed",get:function(){return this._subscribed},set:function(t){this._subscribed=t}}]),t}(),os={name:"HotCommunityItem",props:{community:rs},methods:{onRemoveCommunityFromHot:function(t){this.$emit("RemoveCommunityFromHots",{id:t,community:this.community})}}},ls=os,cs=Object(b["a"])(ls,Zi,Xi,!1,null,null,null),us=cs.exports,ds={name:"HotCommunities",components:{HotCommunityItem:us},props:{communities:Array,keyUpdater:Number},methods:{onRemoveCommunityFromHots:function(t){this.$emit("RemoveCommunityFromHots",t)}}},ms=ds,ps=Object(b["a"])(ms,Wi,Ji,!1,null,null,null),hs=ps.exports,fs={methods:{addCommunityToFavorites:function(t){var e=arguments,i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a,n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=e.length>1&&void 0!==e[1]?e[1]:null,n=i.$root.$auth.cm.isCanAddToFavorites(t),n){s.next=4;break}return s.abrupt("return",!1);case 4:return r=null,s.prev=5,s.next=8,i.$root.$api.$communities.addToFavorites(t);case 8:r=s.sent,s.next=15;break;case 11:throw s.prev=11,s.t0=s["catch"](5),window.console.warn(s.t0.detailMessage),s.t0;case 15:return r&&(a&&i.$root.$auth.cm.onAddToFavorites(a.toJSON()),i.$emit("CommunityAddToFavorites",{id:t,communityId:t}),i.$root.$notify("Вы добавили сообщество <b>&laquo;".concat(a.name,"&raquo;</b> в Избранные"))),s.abrupt("return",!0);case 17:case"end":return s.stop()}}),s,null,[[5,11]])})))()},removeCommunityFromFavorites:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=null,e.prev=1,e.next=4,i.$root.$api.$communities.removeToFavorites(t);case 4:s=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:return s&&(i.$root.$auth.cm.removeFromFavorites(t),i.$root.$communitiesKeyUpdater++,i.$emit("CommunityRemoveFromFavorites",{id:t,communityId:t})),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}},vs={name:"AccountToolbarLeftColor",components:{HotCommunities:hs,Spinner:Gi},mixins:[fs],data:function(){return{isDataReady:!1,keyUpdater:0}},methods:{isCanAddToFavorites:function(){var t=this.$root.$auth.cm.isCanAddToFavorites(this.$route.params.id);return this.isDataReady&&"CommunityPage"===this.$root.$router.currentRoute.name&&t},hotCommunitiesList:function(t){return this.$root.$auth.cm.asArray().slice()},onRemoveCommunityFromHots:function(t){this.keyUpdater++,this.removeCommunityFromFavorites(t.id,t.community),this.$refs&&this.$refs.hotCommunitiesBlock&&this.$refs.hotCommunitiesBlock.$forceUpdate()},onAddCommunityToHot:function(){this.$root.$emit("NeedAddCommunityToHot",{communityId:this.$route.params.id})},afterFavoritsLoad:function(t){this.$root.$communitiesKeyUpdater++,this.keyUpdater++,this.showFavoritesBlock=this.$root.$auth.cm.size>0,this.isDataReady=!0}},created:function(){var t=this;this.$root.$auth.cm.isLoad&&this.afterFavoritsLoad("this.$root.$auth.cm.isLoad"),this.$root.$on(this.$root.$auth.cm.loadEventName,(function(){t.afterFavoritsLoad(t.$root.$auth.cm.loadEventName)})),this.$root.$on(this.$root.$auth.cm.restoreEventName,(function(){t.afterFavoritsLoad(t.$root.$auth.cm.restoreEventName)})),this.$root.$on(this.$root.$auth.cm.updateEventName,(function(){t.$refs&&t.$refs.hotCommunitiesBlock&&(t.$root.$communitiesKeyUpdater++,t.keyUpdater++,t.$refs.hotCommunitiesBlock.$forceUpdate())}))},beforeDestroy:function(){this.$root.$off(this.$root.$auth.cm.loadEventName,(function(){})),this.$root.$off(this.$root.$auth.cm.restoreEventName,(function(){})),this.$root.$off(this.$root.$auth.cm.updateEventName,(function(){}))}},gs=vs,bs=Object(b["a"])(gs,Hi,Ui,!1,null,null,null),Cs=bs.exports,ys={name:"AccountToolbarLeft",components:{AccountToolbarLeftGrey:Ti,AccountToolbarLeftColor:Cs}},ws=ys,xs=Object(b["a"])(ws,ii,si,!1,null,null,null),ks=xs.exports,_s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showFavoritesBlock?i("div",{key:"favoriteFriends-"+t.favorUpdated,staticClass:"plz-favorit-friends --overflow-hidden mb-5",class:{"bg-white-br20":!t.isPickFavorite,"is-pick-favorite":t.isPickFavorite},attrs:{id:"favoriteFriends"}},[t.isDataReady?i("div",{key:"favoriteFriendsInner-"+t.favorUpdated,staticClass:"--d-flex --flex-row --justify-content-start pb-3 --border-bottom pt-3"},[t.isNarrow?t._e():i("router-link",{staticClass:"plz-ff-title mt-2 ml-3 d-block cursor-pointer",attrs:{tag:"h6",to:"/friends#favorites"}},[t._v("Избранные")]),i("div",{staticClass:"plz-favorit-friends-list pb-2"},t._l(t.getFavoriteFriends(t.favorUpdated),(function(e){return i("FavoriteFriendItem",{key:e.id+"-"+t.favorUpdated,attrs:{friend:e,pickedFavoriteId:t.pickedFavoriteId,isNarrow:t.isNarrow},on:{PickFavorite:t.onPickFavorite,UnPickFavorite:t.onUnPickFavorite}})})),1)],1):i("Spinner",{attrs:{clazz:"plz-favorit-friends-spinner d-flex flex-column align-items-center"}})],1):t._e()},$s=[],Ms=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-favorit-friends-item position-relative",class:{active:t.chatWindowShown},on:{click:function(e){return e.preventDefault(),t.showRelatedChat(e)}}},[i("div",{staticClass:"plz-favorit-friends-item-wrap d-flex align-items-center align-items-center py-2 px-3 "},[i("div",{staticClass:"plz-favorit-friend-userpic",class:{"mx-auto":t.isNarrow}},[i("img",{staticClass:"plz-favorit-userpic rounded-circle",attrs:{src:t.friend.userPic,alt:t.friend.firstName}}),t.isTyper?i("div",{staticClass:"writing"},[i("span"),i("span"),i("span")]):i("div",{},[t.friend.isOnline?i("span",{staticClass:"plz-favorit-isonline",attrs:{title:"в сети"}}):i("span",{staticClass:"plz-favorit-isoffline",attrs:{title:"не в сети"}})])]),t.isNarrow?t._e():i("div",{staticClass:"plz-favorit-friend-title flex align-items-center mr-auto"},[i("span",{staticClass:"plz-favorit-friend-name"},[t._v(t._s(t.friend.fullName))]),i("div",{staticClass:"plz-favorit-friend-status"},[t.friend.isOnline?i("p",{staticClass:"plz-favorit-friend-status-online"},[t._v("В сети")]):i("p",{staticClass:"plz-favorit-friend-status-last-activity"},[t._v(t._s(t.favoriteLastActivity))])])]),t.isNarrow?t._e():i("span",{staticClass:"plz-ff-messages-count"},[t.friend.messagesNumber>0?i("span",{staticClass:"plz-ff-messages-count-number py-0 mr-2"},[t._v(" "+t._s(t.friend.messagesNumber)+" ")]):t._e()])]),t.isShowLinkedChat?i("div",{staticClass:"plz-linked-chat-block mr-3 bg-white-br20 ",class:{"active-chat plz-favorit-z":t.chatWindowShown}},[i("div",{staticClass:"plz-linked-chat-body bg-light d-none d-lg-flex flex-column p-0",class:{"is-pinned":"когда_чат_прибит"},attrs:{id:"chatMessagesWrapper"}},[t.currentDialog?i("ChatLinkedHeader",{ref:"chatHeader",attrs:{currentDialog:t.currentDialog},on:{ChatMessagesFilter:t.onUpdateMessagesFilterText,CloseLinkedChat:t.onCloseLinkedChat}}):t._e(),i("div",{staticClass:"position-relative",attrs:{id:"chatMessagesWrapperBody"}},[t.isMessagesLoaded?i("div",{staticClass:"plz-gallery-attached-chat"},[i("ChatMessages",{ref:"chatMessages",style:"padding-bottom: "+t.changedHeight,attrs:{messagesList:t.messagesList,filter:t.filter,currentDialog:t.currentDialog},on:{clearFilters:t.clearChatMessagesFilters}})],1):i("Spinner",{attrs:{message:"Сообщения загружаются"}}),t.currentDialog?i("ChatFooter",{ref:"ChatFooter",style:"height: "+t.changedHeight,attrs:{currentDialog:t.currentDialog},on:{chatFooterEditorChangedHeight:t.onChatFooterEditorChangedHeight}}):t._e()],1)],1)]):t._e()])},Is=[],Ps=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white w-100 border-bottom position-relative",attrs:{id:"chatHeader"}},[i("div",{staticClass:"row  align-items-center justify-content-between  mx-0 py-2"},[i("div",{staticClass:"col-auto position-relative pr-0"},[i("label",{staticClass:"sr-only d-none",attrs:{for:"txtFindInChat"}},[t._v("Поиск")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.chatFilterText,expression:"chatFilterText"}],ref:"txtFindInChat",staticClass:"chat-search-input form-control rounded-pill px-4",attrs:{id:"txtFindInChat",type:"text","data-change-focus":"onFocusSearch",placeholder:"Поиск в чате"},domProps:{value:t.chatFilterText},on:{keydown:function(e){return e.stopPropagation(),t.chatSearchKeyDownCheck(e)},input:function(e){e.target.composing||(t.chatFilterText=e.target.value)}}}),i("button",{staticClass:"btn btn-search h-100 shadow-none",attrs:{type:"submit"},on:{click:function(e){return t.onClickStartChatFilter()}}},[i("IconSearch",{staticStyle:{width:"15px",height:"15px"}})],1)]),i("div",{staticClass:"plz-linked-chat-btns d-flex align-items-center justify-content-between pr-3"},[i("button",{staticClass:"btn",on:{click:function(e){return t.closeLinkedChat()}}},[i("i",{staticClass:"fa fa-times"})])])])])},Ss=[],Ls=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-search",attrs:{viewBox:"0 0 430 430",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M172.75 0.327487C171.925 0.424987 167.875 0.858987 163.75 1.29099C137.501 4.04299 112.378 12.632 88.5495 27.0005C48.5945 51.0935 17.5495 92.7135 6.31249 137.25C4.43699 144.686 2.64599 153.973 1.75399 160.891C1.31899 164.269 0.74599 167.603 0.48149 168.299C-0.15901 169.984 -0.14401 197.756 0.49899 199.996C0.77299 200.953 1.34899 204.439 1.77799 207.743C5.08449 233.207 13.4905 257.168 27.0045 279.649C39.5335 300.492 60.1615 322.205 80.5 335.956C112.001 357.256 146.763 367.976 184.389 367.995C219.375 368.012 251.219 358.859 281.5 340.079C291.115 334.117 292.523 333.662 296.391 335.275C297.689 335.816 311.466 349.237 342 379.703C375.163 412.792 386.747 424.048 389.869 426.215C392.134 427.787 394.116 429.283 394.273 429.537C394.43 429.792 397.498 430 401.09 430H407.621L412.685 426.291C424.357 417.742 429.5 409.921 429.5 400.72C429.5 396.306 428.005 391.748 425.184 387.561C424.122 385.984 404.247 365.648 379.921 341.249C349.75 310.985 336.316 297.182 335.776 295.89C334.21 292.142 334.865 289.839 339.581 282.5C354.326 259.558 363.438 234.14 366.972 206.094C368.286 195.672 368.423 173.661 367.235 163.985C365.413 149.152 363.147 138.947 358.738 125.725C355.106 114.83 353.304 110.498 348.457 101C333.887 72.4515 312.403 48.2965 286 30.779C275.888 24.07 270.014 20.8145 259.706 16.205C240.379 7.56249 222.83 2.98199 200.555 0.765487C193.746 0.0879866 177 -0.176013 172.75 0.327487ZM204.5 49.2245C233.844 53.371 259.067 66.1095 280.772 87.7445C301.154 108.061 313.584 132.062 318.606 160.798C319.626 166.63 319.734 168.86 319.734 184C319.734 199.138 319.625 201.376 318.604 207.25C316.104 221.641 312.593 232.505 306.436 244.903C299.647 258.574 292.081 268.979 280.53 280.53C259.224 301.837 235.613 313.914 205.75 318.782C198.101 320.029 176.649 320.328 167.859 319.311C136.917 315.728 111.983 303.735 89.307 281.529C77.615 270.079 70.0665 260.189 63.3265 247.491C54.9345 231.68 50.566 216.393 48.755 196.5C47.8105 186.122 47.812 181.761 48.765 171.75C50.4025 154.549 52.999 143.872 58.977 129.75C66.843 111.169 80.359 93.3525 97.75 78.639C117.191 62.1915 141.311 51.9725 168.25 48.77C176.134 47.8325 196.456 48.0875 204.5 49.2245Z"}})])},Rs=[],Ns={name:"IconSearch"},As=Ns,Fs=Object(b["a"])(As,Ls,Rs,!1,null,null,null),zs=Fs.exports,Es=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-pin",attrs:{"enable-background":"new 0 0 512 512",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"m505.41 144.476-137.886-137.886c-4.25-4.25-9.9-6.59-15.91-6.59s-11.66 2.341-15.909 6.59c-4.25 4.25-6.591 9.9-6.591 15.91s2.341 11.66 6.59 15.91l15.58 15.58-119.957 106.281c-24.641-5.338-50.396-4.701-74.742 1.879-26.421 7.14-50.674 21.201-70.135 40.663-1.407 1.406-2.197 3.314-2.197 5.303s.79 3.897 2.197 5.303l90.156 90.156-159.409 159.408c-11.09 11.09-17.197 25.834-17.197 41.517 0 4.142 3.358 7.5 7.5 7.5 15.683 0 30.427-6.107 41.517-17.197l159.409-159.409 90.156 90.156c1.465 1.464 3.385 2.197 5.304 2.197s3.839-.732 5.304-2.197c19.461-19.461 33.521-43.713 40.662-70.135 6.58-24.348 7.217-50.102 1.879-74.742l106.281-119.958 15.579 15.579c4.25 4.25 9.9 6.59 15.91 6.59s11.661-2.341 15.909-6.59c4.25-4.25 6.591-9.9 6.591-15.91-.001-6.008-2.342-11.658-6.591-15.908zm-467 339.721c-6.27 6.27-14.109 10.4-22.632 12.025 1.625-8.523 5.756-16.362 12.025-22.632l159.409-159.409 10.607 10.607zm265.339-74.692-201.254-201.254c34.561-31.19 81.416-43.425 127.142-32.974l107.087 107.088c10.448 45.726-1.786 92.58-32.975 127.14zm191.054-243.816c-1.416 1.417-3.3 2.196-5.303 2.196s-3.887-.78-5.303-2.197l-95.459-95.458c-2.93-2.928-7.678-2.93-10.607 0-2.929 2.929-2.929 7.678 0 10.606l69.254 69.254-104.159 117.563-98.878-98.878 122.846-108.841c1.548-1.372 2.461-3.321 2.522-5.387.063-2.067-.73-4.068-2.192-5.53l-21.214-21.214c-1.416-1.417-2.196-3.3-2.196-5.303s.78-3.886 2.197-5.303c1.416-1.417 3.3-2.197 5.303-2.197s3.887.78 5.303 2.197l137.887 137.886c1.416 1.417 2.196 3.3 2.196 5.303s-.78 3.886-2.197 5.303z"}})])},js=[],Ds={name:"IconPin"},Os=Ds,Ts=Object(b["a"])(Os,Es,js,!1,null,null,null),Hs=Ts.exports,Us=(i("b680"),i("2532"),i("124d")),Vs=function(){function t(e){Object(Nt["a"])(this,t),this.__defaultAvatarPath="/images/noavatar-256.png",this._id=null,this._lastActivity=null,this._isOnline=null,this._userPic=null,this._firstName=null,this._lastName=null,this._sex=null,this._isAdmin=!1,this._id=e.id,this._lastActivity=e.lastActivity?Object(Us["a"])(e.lastActivity):this.lastActivity,this._isOnline=e.isOnline,this._userPic=e.userPic,this._firstName=e.firstName,this._lastName=e.lastName,this._sex=e.sex,this._isAdmin=!!e.isAdmin}return Object(At["a"])(t,[{key:"toJSON",value:function(){return{id:this.id,lastActivity:this.lastActivity?this.lastActivity.valueOf()/1e3:this.lastActivity,userPic:this._userPic,firstName:this.firstName,lastName:this.lastName,isOnline:this.isOnline,isAdmin:this.isAdmin,sex:this.sex}}},{key:"id",get:function(){return this._id}},{key:"lastActivity",get:function(){return this._lastActivity},set:function(t){this._lastActivity=Object(Us["a"])(t)}},{key:"isAdmin",get:function(){return this._isAdmin}},{key:"isOnline",get:function(){return this._isOnline},set:function(t){this._isOnline=!!t}},{key:"userPic",get:function(){return""!==this._userPic?this._userPic:this.__defaultAvatarPath}},{key:"firstName",get:function(){return this._firstName}},{key:"lastName",get:function(){return this._lastName}},{key:"fullName",get:function(){return this._firstName+" "+this._lastName}},{key:"sex",get:function(){return this._sex}}]),t}(),Bs=function(){function t(e){var i=this;Object(Nt["a"])(this,t),this.__defaultAvatarPath="/images/noavatar-256.png",this._id=null,this._name=null,this._lastMessageText=null,this._lastMessageDT=null,this._isRead=null,this._isLastFromMe=null,this._attendees=null,this._id=e.id,this._name=e.name,this._lastMessageText=e.lastMessageText,this._lastMessageDT=Object(Us["a"])(e.lastMessageDT),this._isRead=e.isRead,this._isLastFromMe=e.isLastFromMe,this._attendees=[],e.attendees.map((function(t){i._attendees.push(new Vs(t))}))}return Object(At["a"])(t,[{key:"getAttendee",value:function(t){return this.attendees.find((function(e){return e.id===t}))}},{key:"getAdmin",value:function(){return this.attendees.find((function(t){return!0===t.isAdmin}))}},{key:"removeAttendee",value:function(t){this._attendees=this._attendees.filter((function(e){return e.id!==t}))}},{key:"addAttendee",value:function(t){t instanceof Vs||(t=new Vs(t));var e=this.getAttendee(t.id);e||this.attendees.push(t)}},{key:"checkInAttendees",value:function(t){var e=!1;return t=t.toLowerCase(),this._attendees.map((function(i){(i.firstName.toLowerCase().includes(t)||i.lastName.toLowerCase().includes(t))&&(e=!0)})),e}},{key:"toJSON",value:function(){var t=[];return this._attendees.map((function(e){t.push(e.toJSON())})),{id:this.id,name:this.name,lastMessageText:this.lastMessageText,lastMessageDT:+(+this.lastMessageDT.valueOf()/1e3).toFixed(0),isRead:this.isRead,isLastFromMe:this.isLastFromMe,attendees:t}}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"lastMessageText",get:function(){return this._lastMessageText},set:function(t){this._lastMessageText=t.trim()}},{key:"lastMessageDT",get:function(){return this._lastMessageDT},set:function(t){this._lastMessageDT=new Date(t)}},{key:"lastMessageUnix",get:function(){return this._lastMessageDT.getTime()}},{key:"isRead",get:function(){return this._isRead},set:function(t){this._isRead=!!t}},{key:"isLastFromMe",get:function(){return this._isLastFromMe},set:function(t){this._isLastFromMe=!!t}},{key:"isPrivate",get:function(){return 1===this._attendees.length}},{key:"isGroup",get:function(){return this._attendees.length>=2}},{key:"attendeesName",get:function(){return this._attendees.map((function(t){return t.firstName}))}},{key:"attendees",get:function(){return this._attendees}},{key:"attendeesIds",get:function(){return this._attendees.map((function(t){return t.id}))}},{key:"companion",get:function(){return this.attendees[0]}},{key:"lastMessageUnixTime",get:function(){return this._lastMessageDT.getTime()/1e3>>>0}}]),t}(),Ys={name:"ChatLinkedHeader",components:{IconPin:Hs,IconSearch:zs},props:{currentDialog:{type:null|Bs,required:!0}},data:function(){return{chatFilterText:"",showDatePicker:!1,dateRange:null,pickAttendeesDialogModalShow:!1,removeDialogModalShow:!1}},computed:{companion:function(){return this.currentDialog&&this.currentDialog.companion?this.currentDialog.companion:{userPic:this.$defaultAvatarPath,firstName:"пользователь",fullName:"пользователь",lastActivity:(new Date).getTime()/1e3}}},methods:{unPinChat:function(){window.console.log(this.currentDialog.id,"Unpin chat!")},closeLinkedChat:function(){this.$emit("CloseLinkedChat",{chatId:this.currentDialog.id})},onShowRemoveCurrentChatModal:function(){this.removeDialogModalShow=!0},onHideRemoveDialogModal:function(){this.removeDialogModalShow=!1},onShowAddAttendeeToDialogModal:function(){this.pickAttendeesDialogModalShow=!0},onHidePickAttendeesDialogModal:function(){this.pickAttendeesDialogModalShow=!1},chatSearchKeyDownCheck:function(t){var e=this.chatFilterText.trim();if(8===t.keyCode||13===t.keyCode||46===t.keyCode)return this.startChatFilter(e)},onClickStartChatFilter:function(){var t=this.chatFilterText.trim();return this.startChatFilter(t)},startChatFilter:function(t){this.$emit("ChatMessagesFilter",{text:t,range:this.dateRange})},onFocusSearch:function(){this.showDatePicker=!0},dateSelected:function(t){this.dateRange=t,this.startChatFilter(null)},clearFilters:function(){this.chatFilterText="",this.showDatePicker=!1,this.$refs.chatDatePicker.clearDateSelected()}}},qs=Ys,Ks=Object(b["a"])(qs,Ps,Ss,!1,null,null,null),Gs=Ks.exports,Ws=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-100 align-self-stretch position-relative h-100",attrs:{id:"chatMessagesBody"}},[i("vue-custom-scrollbar",{ref:"chatMessageScrollBar",staticClass:"chat-messages-scroll py-4",attrs:{settings:t.customScrollbarSettings},on:{"ps-y-reach-start":t.onScrollToTop}},[t.messagesList&&t.messagesList.length>0?i("div",{staticClass:"d-flex flex-column"},[t.isMessagesLazyLoad?i("Spinner",{attrs:{hideText:!0}}):t._e(),0===t.filteredMessages().length?i("div",{staticClass:"clear-chat-filter text-center"},[t.filter.range&&t.filter.range.isSameDate?i("p",[t._v(" Ничего не найдено за "),i("b",[t._v(t._s(t._f("toLongDate")(t.rangeStart)))])]):t._e(),t.filter.range&&!t.filter.range.isSameDate?i("p",[t._v(" Ничего не найдено за период с "),i("b",[t._v(t._s(t._f("toLongDate")(t.rangeStart)))]),t._v(" по "),i("b",[t._v(t._s(t._f("toLongDate")(t.rangeEnd)))])]):t._e(),t.filter.range||""===t.filter.text?t._e():i("p",[t._v(" Не найдено сообщений с текстом "),i("b",[t._v(t._s(t.filter.text))])]),i("button",{staticClass:"btn btn-link --btn-filter-clear",on:{click:t.clearFilters}},[t._v(" Очистить фильтр ")])]):i("transition-group",{attrs:{name:"slide-fade",duration:700}},t._l(t.filteredMessages(),(function(e){return e.id!==t.removeMessageID?i("ChatMessageItem",{key:"chatMessageItem-"+e.id+"-"+t.keyUpdater,attrs:{message:e,isNextIsSamePerson:t.isNextIsSamePerson(e.id,e.userId),pickedID:t.pickedMessageID,dialogID:t.currentDialog.id},on:{ChatMessagePick:t.onChatMessagePick,ShowForwardMessageModal:t.onShowForwardMessageModal,ShowReplyMessageModal:t.onShowReplyMessageModal,RemoveMessage:t.onRemoveMessage,openChatVideoModal:t.openChatVideoModal}}):t._e()})),1)],1):i("div",{staticClass:"d-flex flex-column"},[t.currentDialog?i("div",{staticClass:"alert alert-info mx-3"},[t.currentDialog.isPrivate?i("p",[t._v("Сейчас Вы ещё ничего не написали для "),i("b",[t._v(t._s(t.currentDialog.companion.fullName))]),t._v(".")]):t._e(),t.currentDialog.isGroup?i("p",[t._v("Сейчас ещё никто ничего не написал в этом "),i("b",[t._v("групповом")]),t._v(" чате.")]):t._e()]):t._e()])]),t.resendMessageModalShow?i("ResendMessageModal",{attrs:{pickedMessage:t.pickedMessage(),currentDialog:t.currentDialog,pickedID:t.pickedMessageID},on:{HideMessageResendModal:t.onHideMessageResendModal}}):t._e(),t.replyMessageModalShow?i("ReplyMessageModal",{attrs:{pickedMessage:t.pickedMessage(),currentDialog:t.currentDialog,pickedID:t.pickedMessageID,attendees:t.currentDialog.attendees},on:{HideReplyMessageModal:t.onHideReplyMessageModal}}):t._e(),t.chatVideoModalShow?i("ChatVideoModal",{attrs:{videoLink:t.chatVideoModalContent.videoLink},on:{HideChatVideoModal:t.onHideChatVideoModal}}):t._e()],1)},Js=[],Zs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"w-100 d-flex px-5",class:{"checked-message":t.isPicked},attrs:{id:t.messageID},on:{click:function(e){return e.preventDefault(),t.onPickMessage()}}},[i("div",{staticClass:"message-item d-flex w-100 justify-content-start",class:t.calcMessageItemClass()},[t.isPicked?i("label",{staticClass:"radio"},[i("input",{ref:"dateTimeId",attrs:{type:"checkbox",name:"dateTimeId",id:"dateTimeId",checked:""}}),i("span")]):t._e(),t.isNextIsSamePerson?t._e():i("div",{staticClass:"message-user-pic mt-auto"},[i("img",{staticClass:"message-user-img",attrs:{src:t.message.userPic,alt:t.message.firstName}})]),i("div",{staticClass:"message-body d-flex"},[i("div",{staticClass:"message-text",on:{click:function(t){t.stopPropagation()}}},["object"===typeof t.livePreview?[t.livePreview.text?i("p",{staticClass:"message-text-inner mb-0",domProps:{innerHTML:t._s(t.livePreview.text)}}):t._e(),t.livePreview.videoLinks?i("div",{staticClass:"message-text-inner mt-2 chat-video",on:{click:function(e){e.stopPropagation(),t.hasYoutubeLinks&&t.openChatVideoModal()}}},[i("div",{domProps:{innerHTML:t._s(t.livePreview.videoLinks)}}),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1)]):t._e()]:i("div",{staticClass:"message-text-inner mb-0",domProps:{innerHTML:t._s(t.livePreview)}}),t.message.isAttachments?i("ChatMessageItemAttachments",{attrs:{message:t.message}}):t._e(),t.message.isReply?i("ChatMessageItemReplyContent",{attrs:{replyOn:t.message.replyOn,isForward:t.message.isForward}}):t._e()],2),t.isNextIsSamePerson?t._e():i("time",{staticClass:"message-time mx-2",attrs:{datetime:t.message.createdAt}},[t._v(" "+t._s(t._f("lastMessageTime")(t.message.createdAt))+" ")]),i("div",{staticClass:"message-info"},[t.message.isMine&&t.message.isEdited?i("span",{staticClass:"message-edited"},[i("IconPencilEdit")],1):t._e(),t.message.isMine?i("span",{staticClass:"message-delivery ml-3",class:{"message-readed":!0}},[i("IconCheckedDouble")],1):t._e()])]),t.isPicked?i("div",{staticClass:"messages-edit-group btn-group bg-white-br20 d-flex overflow-hidden"},[i("button",{staticClass:"btn btn-message-share d-flex align-items-center justify-content-center border-right",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onForwardBtnClick()}}},[i("IconShare"),t._v(" Переслать ")],1),t.message.isMine?t._e():i("button",{staticClass:"btn btn-message-reply d-flex align-items-center justify-content-center border-right",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onReplyBtnClick()}}},[i("i",{staticClass:"far fa-comment-dots mr-2"}),t._v(" Ответить ")]),t.message.isMine?i("button",{staticClass:"btn btn-message-basket d-flex align-items-center justify-content-center",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onRemoveBtnClick()}}},[i("IconBasket"),t._v(" Удалить ")],1):t._e()]):t._e()])])},Xs=[],Qs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-pencil-edit",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512.00025 512.00025"}},[i("path",{attrs:{d:"m512 492c0 11.046875-8.953125 20-20 20h-236c-11.046875 0-20-8.953125-20-20s8.953125-20 20-20h236c11.046875 0 20 8.953125 20 20zm-20-98.667969h-157.332031c-11.046875 0-20 8.957031-20 20 0 11.046875 8.953125 20 20 20h157.332031c11.046875 0 20-8.953125 20-20 0-11.042969-8.953125-20-20-20zm0-78.664062h-78.667969c-11.046875 0-20 8.953125-20 20s8.953125 20 20 20h78.667969c11.046875 0 20-8.953125 20-20s-8.953125-20-20-20zm14.140625-162.527344-354 354c-3.75 3.753906-8.835937 5.859375-14.140625 5.859375h-118c-11.046875 0-20-8.953125-20-20v-118c0-5.304688 2.105469-10.390625 5.859375-14.140625l354-354c7.808594-7.8125 20.472656-7.8125 28.28125 0l118 118c7.8125 7.808594 7.8125 20.472656 0 28.28125zm-42.425781-14.140625-89.714844-89.714844-334 334v89.714844h89.714844zm0 0"}})])},ta=[],ea={name:"IconPencilEdit"},ia=ea,sa=Object(b["a"])(ia,Qs,ta,!1,null,null,null),aa=sa.exports,na=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-checked-double ",class:t.clazz,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 287 152"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M179.5 3C177.988 4.617 176.466 5.9535 176.118 5.97C175.771 5.9865 169.643 11.85 162.5 19C155.358 26.15 149.282 32 148.998 32C148.714 32 144.215 36.275 139 41.5C133.786 46.725 129.287 51 129.004 51C128.72 51 121.519 57.975 113 66.5C104.482 75.025 97.2796 82 96.9956 82C96.7116 82 92.6636 85.825 88.0001 90.5C83.3366 95.175 79.2866 99 79.0001 99C78.7136 99 74.6636 95.175 70.0001 90.5C65.3366 85.825 61.2881 82 61.0036 82C60.7191 82 54.6426 76.15 47.5001 69C40.3576 61.85 34.2736 56 33.9796 56C33.6851 56 32.1116 54.6415 30.4816 52.9815L27.5191 49.9625L24.2596 53.222C22.4666 55.015 21.0001 56.7145 21.0001 57C21.0001 57.285 16.4971 62.013 10.9936 67.5065L0.987061 77.4945L9.24006 85.7475C13.7791 90.2865 17.7226 94 18.0036 94C18.2841 94 24.3576 99.85 31.5001 107C38.6426 114.15 44.7176 120 45.0001 120C45.2826 120 51.3576 125.85 58.5001 133C65.6426 140.15 71.7266 146 72.0206 146C72.3151 146 73.8806 147.35 75.5001 149C77.1196 150.65 78.6966 152 79.0051 152C79.3131 152 80.6606 150.875 82.0001 149.5C83.3396 148.125 84.6776 147 84.9746 147C85.2711 147 91.5826 140.925 99.0001 133.5C106.418 126.075 112.719 120 113.003 120C113.288 120 117.561 115.95 122.5 111C127.439 106.05 131.712 102 131.996 102C132.28 102 139.707 94.8 148.5 86C157.294 77.2 164.72 70 165.002 70C165.284 70 171.358 64.15 178.5 57C185.643 49.85 191.716 44 191.997 44C192.278 44 196.221 40.2865 200.76 35.7475L209.013 27.4945L199.007 17.5065C193.503 12.013 189 7.285 189 7C189 6.5475 182.738 -0.0489993 182.385 0.0300007C182.311 0.0465007 181.013 1.383 179.5 3ZM247 12.5C240.813 18.782 235.466 23.9395 235.118 23.961C234.77 23.9825 229.092 29.4 222.5 36C215.909 42.6 210.283 48 209.999 48C209.715 48 204.766 52.725 199 58.5C193.235 64.275 188.285 69 188.002 69C187.718 69 181.867 74.625 175 81.5C168.133 88.375 162.282 94 161.998 94C161.715 94 156.99 98.5 151.5 104C146.01 109.5 141.287 114 141.004 114C140.336 114 129 125.331 129 125.998C129 126.677 148.345 146 149.025 146C149.317 146 150.881 147.35 152.5 149C154.12 150.65 155.697 152 156.005 152C156.313 152 157.661 150.875 159 149.5C160.34 148.125 161.678 147 161.975 147C162.271 147 168.583 140.925 176 133.5C183.418 126.075 189.719 120 190.003 120C190.288 120 194.561 115.95 199.5 111C204.439 106.05 208.712 102 208.996 102C209.28 102 216.707 94.8 225.5 86C234.294 77.2 241.72 70 242.002 70C242.284 70 248.358 64.15 255.5 57C262.643 49.85 268.716 44 268.997 44C269.278 44 273.221 40.2865 277.76 35.7475L286.013 27.4945L276.007 17.5065C270.503 12.013 266 7.284 266 6.998C266 5.9245 260.534 0.999503 259.386 1.039C258.592 1.066 254.867 4.5125 247 12.5Z"}})])},ra=[],oa={name:"IconCheckedDouble",props:{clazz:String}},la=oa,ca=Object(b["a"])(la,na,ra,!1,null,null,null),ua=ca.exports,da=i("df9c"),ma=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-basket ",class:t.clazz,staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve"}},[i("g",[i("rect",{attrs:{x:"236",y:"222.93",width:"40",height:"209"}})]),i("g",[i("rect",{attrs:{x:"316",y:"222.93",width:"40",height:"209"}})]),i("g",[i("rect",{attrs:{x:"156",y:"222.93",width:"40",height:"209"}})]),i("g",[i("path",{attrs:{d:"M412,72.933h-61V60c0-33.084-26.916-60-60-60h-70c-33.084,0-60,26.916-60,60v12.933h-61c-33.084,0-60,26.916-60,60V183h40    v269c0,33.084,26.916,60,60,60h232c33.084,0,60-26.916,60-60V183h40v-50.067C472,99.849,445.084,72.933,412,72.933z M201,60    c0-11.028,8.972-20,20-20h70c11.028,0,20,8.972,20,20v12.933H201V60z M392,452c0,11.028-8.972,20-20,20H140    c-11.028,0-20-8.972-20-20V183h272V452z M432,143H80v-10.067c0-11.028,8.972-20,20-20h312c11.028,0,20,8.972,20,20V143z"}})])])},pa=[],ha={name:"IconBasket",props:{clazz:String}},fa=ha,va=Object(b["a"])(fa,ma,pa,!1,null,null,null),ga=va.exports,ba=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-youtube",attrs:{width:"68",height:"48",viewBox:"0 0 68 48"}},[i("path",{staticClass:"video__button-shape",attrs:{d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z"}}),i("path",{staticClass:"video__button-icon",attrs:{d:"M 45,24 27,14 27,34"}})])},Ca=[],ya={name:"IconYoutube"},wa=ya,xa=Object(b["a"])(wa,ba,Ca,!1,null,null,null),ka=xa.exports,_a=i("59d0"),$a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"message-resend pl-3 ml-3 mt-3"},[i("div",{staticClass:"message-user-data  d-flex align-items-center mb-2 "},[i("div",{staticClass:"media-pic border rounded-circle mr-3"},[i("img",{attrs:{src:t.replyOn.userPic,alt:t.replyOn.firstName}})]),i("div",{staticClass:"media-body"},[i("h6",{staticClass:"chatHeader-title w-75 align-self-start mt-2 pb-0 mb-0 pull-left",staticStyle:{"line-height":"20px"}},[t._v(t._s(t.replyOn.firstName))]),i("p",{staticClass:"chatHeader-subtitle p-0 mb-0 mt-1 w-100 d-block"},[t._v(t._s(t._f("lastMessageTime")(t.replyOn.createdAt)))])])]),i("p",{domProps:{innerHTML:t._s(t.msgBody)}}),i("ReplyMessageItemAttachments",{attrs:{message:t.replyOn}})],1)},Ma=[],Ia=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.message.attachments.length?i("div",{staticClass:"message-attachments d-flex flex-wrap",class:{"message-attachments-z":t.attachItem}},[i("div",{staticClass:"message-attachment-item mb-2 message-gallery --flex-grow-1"},[t.attachItem?i("Gallery",{staticClass:"message-sended-image",attrs:{type:"chat",images:t.imageList}}):i("span",{staticClass:"message-sended-attach d-flex align-items-center mb-2"},[i("IconZip"),i("span",{staticClass:"message-sended-attach-info d-flex flex-column mx-2"},[i("span",{staticClass:"message-sended-name m-0"},[t._v(t._s(t.attach.originalName))]),i("span",{staticClass:"message-sended-size m-0"},[t._v(t._s(t.attach.size))])])],1)],1)]):t._e()},Pa=[],Sa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-zip",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"-15 -25 487.99746 487"}},[i("path",{attrs:{d:"m413.226562 125.046875-118.488281-.085937-.023437 33.664062 17.292968.011719c4.828126 0 8.75 3.914062 8.75 8.746093 0 4.832032-3.921874 8.746094-8.75 8.746094l-17.292968-.007812-.007813 15.382812 17.289063.011719c4.832031 0 8.746094 3.914063 8.746094 8.746094s-3.914063 8.746093-8.746094 8.746093l-17.289063-.007812-.011719 15.386719 17.289063.007812c4.832031 0 8.746094 3.921875 8.746094 8.746094 0 4.832031-3.914063 8.75-8.746094 8.75l-17.289063-.011719-.007812 15.386719 17.289062.007813c4.824219 0 8.746094 3.921874 8.746094 8.75 0 4.832031-3.921875 8.746093-8.746094 8.746093l-17.289062-.011719-.011719 15.386719 17.285157.007813c4.832031 0 8.746093 3.921875 8.746093 8.75 0 4.832031-3.914062 8.746094-8.746093 8.746094l-17.285157-.011719-.007812 15.386719 17.28125.015624c4.832031 0 8.75 3.914063 8.75 8.746094 0 4.828125-3.917969 8.746094-8.75 8.746094l-17.28125-.011719v1.664063c13.5 1.992187 23.5 13.574218 23.511719 27.222656l-.019532 24.988281c-.03125 15.167969-12.320312 27.453125-27.492187 27.46875h-.019531c-7.300782.015625-14.3125-2.875-19.476563-8.039062-5.167969-5.160157-8.066406-12.164063-8.0625-19.46875l.019531-24.988281c0-4.882813 1.304688-9.671876 3.785156-13.875h-7.523437c-4.832031 0-8.746094-3.917969-8.746094-8.75.003907-4.828126 3.917969-8.742188 8.75-8.742188l17.703125.015625.011719-15.386719-17.703125-.015625c-4.828125 0-8.75-3.914062-8.75-8.746093 0-4.832032 3.921875-8.746094 8.75-8.746094h.007812l17.699219.011718.015625-15.382812-17.699218-.027344c-4.832032 0-8.746094-3.917968-8.746094-8.746094 0-4.832031 3.914062-8.746093 8.746094-8.746093l17.703124.015625.011719-15.390625-17.707031-.011719c-4.824219 0-8.746094-3.917969-8.746094-8.746094 0-4.832031 3.921875-8.746094 8.746094-8.746094l17.707031.007813.007813-15.382813-17.699219-.015624c-4.832031 0-8.746094-3.914063-8.746094-8.746094 0-4.828125 3.914063-8.75 8.746094-8.75l17.699219.015625.011718-15.386719-17.699218-.007812c-4.828125-.003907-8.742188-3.917969-8.742188-8.753907 0-4.832031 3.917969-8.746093 8.75-8.742187l17.695313.011718.007812-15.386718-17.691406-.011719c-4.832031 0-8.75-3.917969-8.75-8.75 0-4.828125 3.917969-8.746094 8.75-8.746094l17.691406.015625.011719-15.777344-121.054688-.085937h-.03125c-24.441406.027344-44.238281 19.839844-44.253906 44.28125l-.160156 222.6875c.03125 16.402344-6.5 32.132813-18.136719 43.6875-.203125.203125-.410156.40625-.613281.609375l320.058594.230469h.035156c24.445312-.03125 44.261719-19.828125 44.304688-44.273438l.160156-222.691406c-.003906-24.460937-19.8125-44.296875-44.269532-44.34375zm0 0"}}),i("path",{attrs:{d:"m280.613281 369.375-.015625 24.992188c.007813 5.515624 4.472656 9.988281 9.988282 9.996093h.007812c5.519531-.003906 9.988281-4.46875 10-9.988281l.011719-24.988281c0-5.523438-4.46875-10-9.984375-10.007813h-.011719c-5.515625.003906-9.984375 4.480469-9.996094 9.996094zm0 0"}}),i("path",{attrs:{d:"m94.351562 169.125c.027344-34.113281 27.6875-61.757812 61.800782-61.757812h.050781l236.28125.171874v-2.054687c.015625-24.46875-19.808594-44.320313-44.28125-44.335937l-99.566406-.074219c-6.179688-.007813-12.070313-2.613281-16.242188-7.171875l-36.097656-39.554688c-8.390625-9.179687-20.253906-14.4179685-32.691406-14.4374998l-119.019531-.0898442h-.03125c-24.445313.03125-44.257813 19.828126-44.304688 44.277344l-.25 347.648438c.0078125 24.460937 19.816406 44.292968 44.277344 44.339844h5.617187c24.449219-.003907 44.277344-19.820313 44.296875-44.273438zm0 0"}})])},La=[],Ra={name:"IconZip",props:{clazz:String}},Na=Ra,Aa=Object(b["a"])(Na,Sa,La,!1,null,null,null),Fa=Aa.exports,za=i("f195"),Ea=i("8e20"),ja=function(){function t(e){var i=this;Object(Nt["a"])(this,t),this.__defaultAvatarPath="/images/noavatar-256.png",this._id=null,this._userId=null,this._firstName=null,this._lastName=null,this._userPic=null,this._sex=null,this._body=null,this._isMine=null,this._isRead=null,this._isEdited=null,this._createdAt=null,this._updatedAt=null,this._replyOn=null,this._isForward=null,this._attachments=null,this._chatId=null,this._id=e.id,this._userId=e.userId,this._chatId=e.chatId,this._firstName=e.firstName,this._lastName=e.lastName,this._userPic=e.userPic,this._sex=e.sex,this._body=e.body,this._isMine=!!e.isMine,this._isRead=!!e.isRead,this._isEdited=!!e.isEdited,this._createdAt=Object(Us["a"])(e.createdAt),this._updatedAt=Object(Us["a"])(e.updatedAt),this._replyOn=e.replyOn?new t(e.replyOn):null,this._isForward=!!e.isForward,this._attachments=[],e.attachments&&e.attachments.list&&e.attachments.list.map((function(t){i._attachments.push(new Ea["a"](t))}))}return Object(At["a"])(t,[{key:"toJSON",value:function(){var t=[];return this._attachments.map((function(e){t.push(e.toJSON())})),{id:this.id,userId:this.userId,chatId:this.chatId,firstName:this.firstName,lastName:this.lastName,userPic:this.userPic,sex:this.sex,body:this.body,isMine:this.isMine,isRead:this.isRead,isEdited:this.isEdited,createdAt:+(+this.createdAt.valueOf()/1e3).toFixed(0),updatedAt:+(+this.updatedAt.valueOf()/1e3).toFixed(0),attachments:{list:t},replyOn:this.isReply?this.replyOn.toJSON():null,isForward:this.isForward}}},{key:"id",get:function(){return this._id}},{key:"userId",get:function(){return this._userId}},{key:"chatId",get:function(){return this._chatId}},{key:"firstName",get:function(){return this._firstName}},{key:"lastName",get:function(){return this._lastName}},{key:"fullName",get:function(){return this._firstName+" "+this._lastName}},{key:"userPic",get:function(){return""!==this._userPic?this._userPic:this.__defaultAvatarPath}},{key:"sex",get:function(){return this._sex}},{key:"body",get:function(){return this._body}},{key:"isMine",get:function(){return this._isMine}},{key:"isRead",get:function(){return this._isRead}},{key:"isEdited",get:function(){return this._isEdited}},{key:"createdAt",get:function(){return this._createdAt}},{key:"messageUnix",get:function(){return this._createdAt.valueOf()}},{key:"updatedAt",get:function(){return this._updatedAt}},{key:"replyOn",get:function(){return this._replyOn}},{key:"isReply",get:function(){return!!this._replyOn}},{key:"isForward",get:function(){return this._isForward}},{key:"attachments",get:function(){return this._attachments}},{key:"isAttachments",get:function(){return!!this._attachments&&this._attachments.length&&this._attachments.length>0}},{key:"attachmentsNumber",get:function(){return this._attachments?this._attachments.length:0}}]),t}(),Da={name:"ChatMessageItemAttachments",components:{Gallery:za["default"],IconZip:Fa},props:{message:ja},computed:{isArchive:function(){var t=this.attach.originalName.split(".").pop().toLowerCase();return"zip"===t||"rar"===t},imageList:function(){return this.message.attachments},attachItem:function(){return this.imageList.map((function(t){return t.isImage}))}}},Oa=Da,Ta=Object(b["a"])(Oa,Ia,Pa,!1,null,null,null),Ha=Ta.exports,Ua={name:"ChatMessageItemReplyContent",props:{replyOn:ja},components:{ReplyMessageItemAttachments:Ha},computed:{detectYoutubeLink:function(){var t=this.replyOn.body.replace(/<\/?[^>]+>/g,"").trim(),e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,i=t.match(e);return!(!i||11!==i[7].length)&&i[7]},livePreview:function(){if(this.detectYoutubeLink)return'<img src="//img.youtube.com/vi/'.concat(this.detectYoutubeLink,'/mqdefault.jpg" alt="" />')},msgBody:function(){return this.livePreview?this.livePreview:this.replyOn.body}}},Va=Ua,Ba=Object(b["a"])(Va,$a,Ma,!1,null,null,null),Ya=Ba.exports,qa=i("b99a"),Ka={name:"ChatMessageItem",components:{ChatMessageItemAttachments:Ha,ChatMessageItemReplyContent:Ya,TextEditor:_a["a"],IconBasket:ga,IconShare:da["a"],IconPencilEdit:aa,IconCheckedDouble:ua,IconYoutube:ka},mixins:[qa["a"]],props:{message:{type:ja,required:!0},dialogID:String,pickedID:String,replyID:String,isNextIsSamePerson:Boolean},data:function(){return{}},computed:{isPicked:function(){return this.message.id===this.pickedID},messageID:function(){return"message-"+this.message.id},currentDialog:function(){return this.$parent.currentDialog},detectEmoji:function(){return!!this.message.body&&this.message.body.includes('<p class="big-emoji">')},hasYoutubeLinks:function(){var t=this.message.body.replace(/<\/?[^>]+>/g,"").trim();return this.detectYoutubeLinks(t)},livePreview:function(){var t=this.message.body.replace(/<\/?[^>]+>/g,"").trim(),e=this.transformStrWithLinks(t);return t===e?this.message.body:this.transformStrWithLinks(t)}},methods:{calcMessageItemClass:function(){var t=this.isNextIsSamePerson;return{"my-message ml-auto flex-row-reverse":this.message.isMine,"companion-message ":!this.message.isMine,"compact-message":t,"fullsize-message":!t,"has-only-one-emoji":this.detectEmoji&&0===this.message.attachments.length,"youtube-link":this.hasYoutubeLinks}},onForwardBtnClick:function(){this.$emit("ShowForwardMessageModal",{messageID:this.message.id})},onRemoveBtnClick:function(){this.$emit("RemoveMessage",{messageID:this.message.id})},onPickMessage:function(){this.$emit("ChatMessagePick",{messageID:this.pickedID!==this.message.id?this.message.id:"none"})},onReplyBtnClick:function(){this.$emit("ShowReplyMessageModal",{messageID:this.message.id})},openChatVideoModal:function(){this.$emit("openChatVideoModal",{videoLink:this.detectYoutubeLinks(this.message.body.replace(/<\/?[^>]+>/g,"").trim())[0]})}}},Ga=Ka,Wa=Object(b["a"])(Ga,Zs,Xs,!1,null,null,null),Ja=Wa.exports,Za=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"resendMessageModal",tabindex:"-1",role:"dialog","aria-labelledby":"resendMessageModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideMessageResendModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body p-4",attrs:{id:"resendMessageModalBody"}},[i("h5",{staticClass:"resend-message-title text-left mb-3"},[t._v("Переслать собщение")]),i("div",{staticClass:"form",attrs:{id:"resendMessageModalForm"}},[i("div",{staticClass:"form-group mb-4"},[i("ResendMessageItem",{attrs:{message:t.pickedMessage}})],1),i("div",{staticClass:"form-group"},[i("multiselect",{attrs:{options:t.getFriendsCombo,label:"fullName","track-by":"fullName",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"Выберите получателя"},scopedSlots:t._u([{key:"option",fn:function(e){return[i("div",{staticClass:"plz-receivers-item d-flex align-items-center py-1 px-3"},[i("span",{staticClass:"plz-receiver-userpic text-body"},[i("img",{staticClass:"plz-short-userpic rounded-circle",attrs:{src:e.option.userPic,alt:e.option.firstName}}),e.option.isOnline?i("span",{staticClass:"plz-short-isonline",attrs:{title:"в сети"}}):i("span",{staticClass:"plz-short-isoffline",attrs:{title:"не в сети"}})]),i("div",{staticClass:"plz-receiver-title flex align-items-center mr-auto "},[i("span",{staticClass:"plz-receiver-name"},[t._v(" "+t._s(e.option.fullName)+" ")])])])]}}]),model:{value:t.selectedFriend,callback:function(e){t.selectedFriend=e},expression:"selectedFriend"}})],1),i("div",{staticClass:"form-group"},[i("TextEditor",{ref:"forwardMessageEditor",attrs:{id:"forwardMessageEditor",workMode:"chat",showAvatar:!1,dropToDown:!1,clazz:"row plz-text-editor mx-0 mb-4 px-0 py-4 align-items-start"},on:{editorPost:t.onTextPost}})],1)]),i("button",{staticClass:"btn plz-btn plz-btn-primary mt-4",attrs:{type:"button",disabled:t.isBtnSendDisabled},on:{click:function(e){return e.preventDefault(),t.startForwardMessage()}}},[t._v(" Отправить ")])])])])])},Xa=[],Qa=i("5b38"),tn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"message-resend pl-3 ml-1 mt-3"},[i("div",{staticClass:"message-user-data  d-flex align-items-center mb-2"},[i("div",{staticClass:"media-pic border rounded-circle  mr-3"},[i("img",{attrs:{src:t.message.userPic,alt:t.message.firstName}})]),i("div",{staticClass:"media-body"},[i("h6",{staticClass:"chatHeader-title w-75 align-self-start mt-2 pb-0 mb-0 pull-left text-body",staticStyle:{"line-height":"20px"}},[t._v(t._s(t.message.firstName))]),i("p",{staticClass:"chatHeader-subtitle p-0 mb-0 mt-1 w-100 d-block"},[t._v(" "+t._s(t._f("lastMessageTime")(t.message.createdAt))+" ")])])]),i("p",{domProps:{innerHTML:t._s(t.message.body)}})])},en=[],sn={name:"ResendMessageItem",props:{message:ja}},an=sn,nn=Object(b["a"])(an,tn,en,!1,null,null,null),rn=nn.exports,on=i("7e84"),ln=i("45eb"),cn=function(){function t(e,i){Object(Nt["a"])(this,t),this.__defaultAvatarPath="/images/noavatar-256.png",this._chatId=null,this._id=null,this._isOnline=!1,this._lastActivity=null,this._firstName="",this._lastName="",this._sex="n",this._userPic=null,this._chatId=i||null,this._id=e.id,this._isOnline=!!e.isOnline,this._lastActivity=e.lastActivity,this._firstName=e.firstName,this._lastName=e.lastName,this._sex=e.sex,this._userPic=e.userPic}return Object(At["a"])(t,[{key:"toJSON",value:function(){return{id:this.id,chatId:this.chatId,lastActivity:this.lastActivity.getTime()/1e3>>>0,userPic:this._userPic,firstName:this.firstName,lastName:this.lastName,isOnline:this.isOnline,sex:this.sex}}},{key:"id",get:function(){return this._id}},{key:"chatId",get:function(){return this._chatId}},{key:"isOnline",get:function(){return this._isOnline}},{key:"lastActivity",get:function(){return this._lastActivity}},{key:"userPic",get:function(){return""!==this._userPic?this._userPic:this.__defaultAvatarPath}},{key:"firstName",get:function(){return this._firstName}},{key:"lastName",get:function(){return this._lastName}},{key:"fullName",get:function(){return this._firstName+" "+this._lastName}},{key:"sex",get:function(){return this._sex}}]),t}(),un=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return Object(At["a"])(i,[{key:"compare",value:function(t,e){return t.fullName>e.firstName?1:-1}},{key:"add",value:function(t,e){if(t){var i=new cn(t,e);this.collection.set(i.id,i)}}},{key:"asArray",value:function(){return Object(ln["a"])(Object(on["a"])(i.prototype),"asArray",this).call(this)}}]),i}(re["a"]),dn={name:"ResendMessageModal",components:{ResendMessageItem:rn,TextEditor:_a["a"]},mixins:[Qa["a"]],props:{pickedMessage:ja,messageID:Number,currentDialog:Object},data:function(){return{recipients:null,msgData:null,selectedFriend:null,isStartSend:!1}},computed:{isBtnSendDisabled:function(){return!!this.isStartSend||null===this.selectedFriend},getFriendsCombo:function(){var t=this;return this.recipients=new un,this.$root.$auth.frm.asArray().map((function(e){t.recipients.add(e,null)})),this.$root.$auth.dm.asArray().map((function(e){t.recipients.add(e.companion,e.id)})),this.recipients.asArray()}},methods:{onTextPost:function(t){var e=t.postText.trim();if(""!==e){var i="<br/>";e=e.replace(/<p><\/p>/g,i),e=this.killBrTrail(e),""!==e&&"<p></p>"!==e&&this.startForwardMessage(t)}},startForwardMessage:function(t){this.isStartSend=!0;var e={chatId:this.selectedFriend.chatId,userId:this.selectedFriend.id},i={};if(t)i={toUserId:this.selectedFriend.id,chatId:this.selectedFriend.chatId,body:t.postText,replyOnMessageId:this.msgData.id,forwardFromChatId:this.currentDialog.id,attachments:t.attachments,isForward:!0};else{var s=this.$refs.forwardMessageEditor.getContent();i={toUserId:this.selectedFriend.id,chatId:this.selectedFriend.chatId,body:s.postText,replyOnMessageId:this.msgData.id,forwardFromChatId:this.currentDialog.id,attachments:s.attachments,isForward:!0}}this.forwardMessageToChat(e,i)},hideMessageResendModal:function(){this.$emit("HideMessageResendModal",{})},forwardMessageToChat:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.event="new.message",i.$root.$api.sendToChannel(e),i.hideMessageResendModal();case 3:case"end":return t.stop()}}),t)})))()},forwardChatMessage:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.console.warn("forwardChatMessage DEPRECATED"),t.abrupt("return");case 6:e=t.sent,t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](3),window.console.warn(t.t0.detailMessage),t.t0;case 13:e?(s={dialogId:e.data.chatId,message:e.data},i.$root.$emit("newMessageInDialog",s),i.hideMessageResendModal()):window.console.info(e);case 14:case"end":return t.stop()}}),t,null,[[3,9]])})))()}},created:function(){this.msgData=this.pickedMessage},mounted:function(){var t=this;setTimeout((function(){t.$refs.forwardMessageEditor&&t.$refs.forwardMessageEditor.focus()}),100)}},mn=dn,pn=Object(b["a"])(mn,Za,Xa,!1,null,null,null),hn=pn.exports,fn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"resendMessageModal",tabindex:"-1",role:"dialog","aria-labelledby":"resendMessageModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideReplyMessageModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body p-4",attrs:{id:"resendMessageModalBody"}},[i("h5",{staticClass:"resend-message-title text-left mb-3"},[t._v("Ответ на сообщение")]),i("div",{staticClass:"form",attrs:{id:"resendMessageModalForm"}},[i("div",{staticClass:"form-group mb-4"},[t.pickedMessage?i("ResendMessageItem",{attrs:{message:t.msgData}}):t._e()],1),i("div",{staticClass:"form-group"},[i("TextEditor",{ref:"forwardMessageEditor",attrs:{id:"forwardMessageEditor",workMode:"chat",showAvatar:!1,dropToDown:!1,clazz:"row plz-text-editor mb-4 px-1 py-4 align-items-start"},on:{editorPost:t.onReplyPost}})],1)]),i("button",{staticClass:"btn plz-btn plz-btn-primary mt-4",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.startReplyMessage()}}},[t._v(" Ответить ")])])])])])},vn=[],gn={name:"ReplyMessageModal",components:{ResendMessageItem:rn,TextEditor:_a["a"]},mixins:[Qa["a"]],props:{pickedMessage:null|ja,messageID:Number,currentDialog:Object,attendees:{type:Array,default:null}},data:function(){return{msgData:null}},methods:{startReplyMessage:function(){var t=this.$refs.forwardMessageEditor.getContent();this.onReplyPost(t)},hideReplyMessageModal:function(){this.$emit("HideReplyMessageModal",{})},onReplyPost:function(t){var e=t.postText.trim();e="<p></p>"===e?"":e;var i={chatId:this.currentDialog.id,userId:this.pickedMessage.userId},s={chatId:this.currentDialog.id,body:e,replyOnMessageId:this.msgData.id,forwardFromChatId:this.currentDialog.id,attachments:t.attachments,isForward:!0};if(""!==e){var a="<br/>";e=e.replace(/<p><\/p>/g,a),e=this.killBrTrail(e),""!==e&&this.replyMessageToChat(i,s)}else t.attachments.length>0&&this.replyMessageToChat(i,s)},replyMessageToChat:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.event="new.message",i.$root.$api.sendToChannel(e),i.hideReplyMessageModal();case 3:case"end":return t.stop()}}),t)})))()},replyOnMessage:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return window.console.warn("replyOnMessage DEPRECATED"),t.abrupt("return");case 6:s=t.sent,t.next=13;break;case 9:throw t.prev=9,t.t0=t["catch"](3),window.console.warn(t.t0.detailMessage),t.t0;case 13:s?(a=i.attendees.find((function(t){return t.id===e.userId})),n={id:s.data.id,userId:a.id,chatId:e.forwardFromChatId,firstName:a.firstName,lastName:a.lastName,userPic:a.userPic,sex:a.sex,body:e.body,attachments:e.attachments,isMine:!0,isRead:!1,isEdited:!1,createdAt:Math.floor(Date.now()/1e3),updatedAt:Math.floor(Date.now()/1e3),replyOn:i.pickedMessage,isForward:e.isForward},i.$root.$emit("newMessageInDialog",n),i.hideReplyMessageModal()):window.console.info(s);case 14:case"end":return t.stop()}}),t,null,[[3,9]])})))()}},created:function(){this.msgData=this.pickedMessage},mounted:function(){var t=this;setTimeout((function(){t.$refs.forwardMessageEditor&&t.$refs.forwardMessageEditor.focus()}),100)}},bn=gn,Cn=Object(b["a"])(bn,fn,vn,!1,null,null,null),yn=Cn.exports,wn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"chatVideoModal",tabindex:"-1",role:"dialog","aria-labelledby":"chatVideoModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideChatVideoModal(e)}}},[i("div",{staticClass:"modal-dialog modal-xl modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("VideoPlayer",{attrs:{videoLink:t.videoLink}})],1)])])},xn=[],kn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("videoPlayer",{staticClass:"w-100",attrs:{options:t.generatePlayerOptions},on:{play:function(e){return t.onPlay(e)},ready:t.playerReady}})},_n=[],$n=(i("fda2"),i("d6d3")),Mn=(i("eb85"),{name:"VideoPlayer",components:{videoPlayer:$n["videoPlayer"]},mixins:[qa["a"]],props:{videoLink:{type:String,default:null}},computed:{detectYoutubeLink:function(){var t=this.videoLink.replace(/<\/?[^>]+>/g,"").trim(),e=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,i=t.match(e);return!(!i||11!==i[7].length)&&t},generatePlayerOptions:function(){return{techOrder:this.detectYoutubeLink?["youtube"]:null,sources:[{type:this.detectYoutubeLink?"video/youtube":"video/mp4",src:this.detectYoutubeLink?this.detectYoutubeLink:null}],youtube:this.detectYoutubeLink?{iv_load_policy:1}:null}},getTime:function(){return Number(this.getParameterByName("t",this.detectYoutubeLink))}},data:function(){return{isSetStatedTime:!1}},methods:{onPlay:function(t){this.isSetStatedTime||(t.currentTime(this.getTime),this.isSetStatedTime=!0)},playerReady:function(t){}}}),In=Mn,Pn=Object(b["a"])(In,kn,_n,!1,null,null,null),Sn=Pn.exports,Ln={name:"ChatVideoModal",props:{videoLink:{type:String,default:null}},components:{VideoPlayer:Sn},methods:{hideChatVideoModal:function(){this.$emit("HideChatVideoModal",{})}}},Rn=Ln,Nn=Object(b["a"])(Rn,wn,xn,!1,null,"e7e88f30",null),An=Nn.exports,Fn=(i("4ec9"),function(){function t(e,i,s){Object(Nt["a"])(this,t),this._self=null,this._prev=null,this._next=null,this._self=e,this._prev=i,this._next=s}return Object(At["a"])(t,[{key:"toJSON",value:function(){return{self:this.self,prev:this.prev,next:this.next}}},{key:"self",get:function(){return this._self},set:function(t){this._self=t}},{key:"prev",get:function(){return this._prev},set:function(t){this._prev=t}},{key:"next",get:function(){return this._next},set:function(t){this._next=t}}]),t}()),zn=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){var t;return Object(Nt["a"])(this,i),t=e.call(this,null),t._headId=null,t._tailId=null,t._nodes=null,t._nodes=new Map,t}return Object(At["a"])(i,[{key:"add",value:function(t){window.console.warn("PliziLinkedList::add - запрещён для связных списков. Используйте append/prepend")}},{key:"getNode",value:function(t){return this._nodes.get(t)}},{key:"append",value:function(t){if(Object(ln["a"])(Object(on["a"])(i.prototype),"add",this).call(this,t),this._nodes.set(t.id,new Fn(t.id,this._tailId,null)),this._tailId){var e=this.getNode(this._tailId);e&&(e.next=t.id,this._nodes.set(e.id,new Fn(e.id,e.prev,e.next)))}this._tailId=t.id,this._headId||(this._headId=t.id)}},{key:"prepend",value:function(t){if(Object(ln["a"])(Object(on["a"])(i.prototype),"add",this).call(this,t),this._nodes.set(t.id,new Fn(t.id,null,this._headId)),this._headId){var e=this.getNode(this._headId);e&&(e.prev=t.id,this._nodes.set(e.id,new Fn(e.id,e.prev,e.next)))}this._headId=t.id,this._tailId||(this._tailId=t.id)}},{key:"clear",value:function(){Object(ln["a"])(Object(on["a"])(i.prototype),"clear",this).call(this),this.nodes.clear(),this._headId=null,this._tailId=null}},{key:"delete",value:function(t){var e=this.nodes.get(t);if(e){var s=e.prev?this.nodes.get(e.prev).toJSON():null,a=e.next?this.nodes.get(e.next).toJSON():null;s.next=a?a.self:null,a.prev=s?s.self:null,Object(ln["a"])(Object(on["a"])(i.prototype),"delete",this).call(this,t),this.nodes.delete(t),s?this.nodes.set(s.self,new Fn(s.self,s.prev,s.next)):this._headId=a?a.self:null,a?this.nodes.set(a.self,new Fn(a.self,a.prev,a.next)):this._tailId=a?a.self:null}}},{key:"nodes",get:function(){return this._nodes}},{key:"first",get:function(){return this.collection.get(this._headId)}},{key:"last",get:function(){return this.collection.get(this._tailId)}}]),i}(re["a"]),En=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){var t;Object(Nt["a"])(this,i);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a)),t.updateEventName="MessagesIsUpdated",t}return Object(At["a"])(i,[{key:"compare",value:function(t,e){return t.messageUnix===e.messageUnix?0:t.messageUnix<e.messageUnix?-1:1}},{key:"new",value:function(t){return new ja(t)}},{key:"get",value:function(t){return this.collection.get(t)}},{key:"asArray",value:function(){var t=Object(ei["a"])(this.collection.values());return t.sort(this.compare),t}},{key:"filter",value:function(t){var e,i,s=this.asArray();if(t.range&&t.range.start&&t.range.end&&(e=t.range.start,i=t.range.end,this.rangeStart=e,this.rangeEnd=i),t.text&&t.range&&e&&i){var a=t.text.toLocaleLowerCase();if(a.length>2)return s.filter((function(t){return t.body.toLowerCase().includes(a)&&t.createdAt>e&&t.createdAt<i}))}if(t.text){var n=t.text.toLocaleLowerCase();return n.length>2?s.filter((function(t){return t.body.toLowerCase().includes(n)})):s}return t.range&&e&&i?s.filter((function(t){return t.createdAt>=e&&t.createdAt<=i})):s}}]),i}(zn),jn={name:"ChatMessages",components:{vueCustomScrollbar:Ce.a,Spinner:Gi,ChatMessageItem:Ja,ResendMessageModal:hn,ReplyMessageModal:yn,ChatVideoModal:An},props:{messagesList:En,currentDialog:Object,filter:Object,keyUpdater:Number,isMessagesLazyLoad:Boolean,isCanLoadMoreMessages:Boolean},data:function(){return{pickedMessageID:"unknown",replyMessageID:"unknown",removeMessageID:"unknown",previousMsg:null,resendMessageModalShow:!1,replyMessageModalShow:!1,customScrollbarSettings:{maxScrollbarLength:60,suppressScrollX:!0,wheelPropagation:!1},chatVideoModalShow:!1,chatVideoModalContent:{videoLink:null},rangeStart:null,rangeEnd:null}},methods:{filteredMessages:function(){return""===this.filter.text&&null===this.filter.range?this.messagesList.asArray():(this.filter.range&&this.filter.range.start&&this.filter.range.end&&(this.rangeStart=this.filter.range.start,this.rangeEnd=this.filter.range.end),this.messagesList.filter(this.filter).slice())},onScrollToTop:function(){this.$emit("ScrollToTop",{chatId:this.currentDialog.id,offset:this.messagesList.size,limit:10})},pickedMessage:function(){var t=this.messagesList.get(this.pickedMessageID);return t?t=new ja(t):window.console.warn(this.pickedMessageID+" не найден"),t},onChatMessagePick:function(t){this.pickedMessageID=t.messageID},openChatVideoModal:function(t){t.videoLink&&(this.chatVideoModalShow=!0,this.chatVideoModalContent.videoLink=t.videoLink)},onRemoveMessage:function(t){this.removeMessageID=t.messageID,this.removeMessageById(this.removeMessageID)},removeMessageById:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.messagesList.delete(t),e.$root.$emit("removeMessageInDialog",{chatId:e.currentDialog.id}),null,i.prev=3,i.next=6,e.$root.$api.$chat.messageDelete(t);case 6:i.sent,i.next=13;break;case 9:throw i.prev=9,i.t0=i["catch"](3),window.console.warn(i.t0.detailMessage),i.t0;case 13:case 14:case"end":return i.stop()}}),i,null,[[3,9]])})))()},isNextIsSamePerson:function(t,e){var i=this.messagesList.getNode(t);if(!i)return!1;if(!i.next)return!1;var s=this.messagesList.get(i.next);return!!s&&s.userId===e},scrollToEnd:function(){var t=this;return setTimeout((function(){var e=t.$el.querySelector(".ps-container");e&&(e.scrollTop=e.scrollHeight)}),200)},clearFilters:function(){this.$emit("ClearFilters")},onShowForwardMessageModal:function(){this.resendMessageModalShow=!0},onShowReplyMessageModal:function(){this.replyMessageModalShow=!0},onHideMessageResendModal:function(){this.resendMessageModalShow=!1},onHideReplyMessageModal:function(){this.replyMessageModalShow=!1},onHideChatVideoModal:function(){this.chatVideoModalShow=!1}},mounted:function(){this.scrollToEnd()}},Dn=jn,On=Object(b["a"])(Dn,Ws,Js,!1,null,null,null),Tn=On.exports,Hn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chat-footer border-top",attrs:{id:"chatFooter"}},[i("div",{staticClass:"companion-is-typing pl-2 d-flex w-100 align-items-center overflow-hidden"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isTyper,expression:"isTyper"}]},[t._v(t._s(t.typerName)+" печатает...")])]),i("TextEditor",{attrs:{showAvatar:!1,dropToDown:!1,clazz:"d-flex bg-white w-100  position-relative mt-auto align-items-start px-3 pb-3 pt-1",workMode:"chat",editorPlaceholder:t.placeholder,maximumCharacterLimit:500,errors:t.errors},on:{editorNewHeight:t.onEditorChangeHeight,editorKeyDown:t.onEditorKeyDown,newAttach:t.onAddAttachToTextEditor,editorPost:t.onTextPost,onUpdateEditor:t.onUpdateEditor}})],1)},Un=[],Vn={name:"ChatFooter",props:{currentDialog:{type:null|Bs,required:!0}},components:{TextEditor:_a["a"]},mixins:[Qa["a"],qa["a"]],data:function(){return{placeholder:"Написать сообщение...",timeout:0,errors:null,isTyper:!1,currentTyper:null,lastTypeTime:null,typerDelay:2500}},computed:{typerName:function(){return this.currentTyper?this.currentTyper.fullName:(this.isTyper=!1,"")}},methods:{onEditorKeyDown:function(t){var e=[8,9,13,16,17,18,20,27,32,33,34,35,36,37,38,39,40,45,46,91,92,112,113,114,115,116,117,118,119,120,121,122,123];if(!e.includes(t.which)&&!((new Date).valueOf()-this.lastTypeTime<this.typerDelay)){var i={channel:window.localStorage.getItem("pliziChatChannel"),userId:this.$root.$auth.user.id,chatId:this.currentDialog.id,event:"user.typing"};this.$root.$api.sendToChannel(i),this.lastTypeTime=(new Date).valueOf()}},onAddAttachToTextEditor:function(t){},onEditorChangeHeight:function(t){this.$emit("chatFooterEditorChangedHeight",{changedHeight:t.newHeight})},onTextPost:function(t){var e=t.postText.trim();if(""!==e||t.videoLink){var i="<br/>";e=e.replace(/<p><\/p>/g,i),e=this.killBrTrail(e),""!==e||t.videoLink?this.addMessageToChat(e,t.attachments,t.attachmentsData,t.videoLink):t.attachments.length>0&&this.addMessageToChat("",t.attachments,t.attachmentsData,t.videoLink)}else t.attachments.length>0&&this.addMessageToChat("",t.attachments,t.attachmentsData)},onUpdateEditor:function(){this.errors=null},onCompanionTyping:function(t){var e=this;this.currentTyper=new Qi["a"](t.user),this.$root.$auth.user.id!==this.currentTyper.id&&(this.typingTimeout&&clearTimeout(this.typingTimeout),this.isTyper=!0,this.typingTimeout=setTimeout((function(){e.isTyper=!1,e.currentTyper=null}),3e3))},addMessageToChat:function(t,e,i){var s=arguments,a=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var n,r,o;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:n=s.length>3&&void 0!==s[3]?s[3]:null,r=a.currentDialog?a.currentDialog.id:"unknown",o={chatId:r,body:t,attachments:e||[],event:"new.message"},n&&(o.body+=" ".concat(n)),a.$root.$api.sendToChannel(o);case 5:case"end":return i.stop()}}),i)})))()}},mounted:function(){this.$root.$on("userIsTyping",this.onCompanionTyping),this.lastTypeTime=(new Date).valueOf()}},Bn=Vn,Yn=Object(b["a"])(Bn,Hn,Un,!1,null,null,null),qn=Yn.exports,Kn=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(t){var s;return Object(Nt["a"])(this,i),s=e.call(this,t),s._friendshipSinceTime=null,s._friendshipSinceTime=t.friendshipSinceTime?Object(Us["a"])(t.friendshipSinceTime):s.friendshipSinceTime,s}return Object(At["a"])(i,[{key:"toJSON",value:function(){var t=Object(ln["a"])(Object(on["a"])(i.prototype),"toJSON",this).call(this);return t.friendshipSinceTime=this.friendshipSinceTime?this.friendshipSinceTime.valueOf()/1e3:this.friendshipSinceTime,t}},{key:"friendshipSinceTime",get:function(){return this._friendshipSinceTime}},{key:"friendshipLivingTime",get:function(){return((new Date).valueOf()-this.friendshipSinceTime.valueOf())/1e3>>>0}}]),i}(Qi["a"]),Gn={props:{friend:Kn},data:function(){return{isInRedirecting:!1}},methods:{goToDialogWithFriend:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isInRedirecting=!0,e.next=3,t.openDialogWithFriend(t.friend);case 3:t.$root.$router.push("/chats");case 4:case"end":return e.stop()}}),e)})))()},lastFriendActivity:function(t){var e=this.getSexTitle(t.sex),i=A()(),s=A()().subtract(1,"days"),a=A.a.unix(t.lastActivity/1e3);if(i.format("YYYY-MM-DD")===a.format("YYYY-MM-DD"))return e+" сегодня в "+a.format("HH:mm");if(s.format("YYYY-MM-DD")===a.format("YYYY-MM-DD"))return e+" вчера в "+a.format("HH:mm");var n=A()().subtract(7,"days");if(+a.format("X")>=+n.format("X")){var r=a.format("dddd").toLowerCase(),o="";switch(r){case"понедельник":o="Понедельник";break;case"вторник":o="Вторник";break;case"среда":o="Среду";break;case"четверг":o="Четверг";break;case"пятница":o="Пятницу";break;case"суббота":o="Субботу";break;case"воскресенье":o="Воскресенье";break;default:o=r.charAt(0).toUpperCase()+r.slice(1);break}return e+" в "+o}return e+" "+a.format("DD.MM.YY")},getSexTitle:function(t){return"m"===t?"был":"f"===t?"была":"был(а)"}}},Wn={methods:{openDialogWithFriend:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$chat.dialogOpen(t.fullName,[t.id]);case 4:s=i.sent,i.next=11;break;case 7:throw i.prev=7,i.t0=i["catch"](1),window.console.warn(i.t0.detailMessage),i.t0;case 11:s&&(window.localStorage.setItem("pliziActiveDialog",s.id),e.$root.$emit("NewChatDialog",s));case 12:case"end":return i.stop()}}),i,null,[[1,7]])})))()},openDialogWithAdmins:function(t,e,i){var s=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=null,r=e.slice(),r.push(i),a.prev=3,a.next=6,s.$root.$api.$chat.dialogOpen(t,r);case 6:n=a.sent,a.next=13;break;case 9:throw a.prev=9,a.t0=a["catch"](3),window.console.warn(a.t0.detailMessage),a.t0;case 13:n&&(window.localStorage.setItem("pliziActiveDialog",n.id),s.$root.$emit("NewChatDialog",n));case 14:case"end":return a.stop()}}),a,null,[[3,9]])})))()}}},Jn={name:"FavoriteFriendItem",components:{Spinner:Gi,ChatLinkedHeader:Gs,ChatMessages:Tn,ChatFooter:qn},mixins:[Gn,Wn],props:{friend:{type:Kn,required:!0},pickedFavoriteId:{type:String,required:!1,default:"none"},isNarrow:{type:Boolean,required:!1,default:!1}},data:function(){return{isShowLinkedChat:!1,typingTimeout:null,isTyper:!1,currentDialog:null,messagesList:new En,isMessagesLoaded:!1,filter:{text:"",range:null},dialogsSearchedList:null,changedHeight:""}},computed:{chatWindowShown:function(){return this.friend.id===this.pickedFavoriteId},favoriteLastActivity:function(){return this.lastFriendActivity(this.friend)}},methods:{onUpdateMessagesFilterText:function(t){this.filter.text=t.text?t.text.trim():"",this.filter.range=t.range&&t.range.start&&t.range.end?t.range:null,this.$forceUpdate()},onCloseLinkedChat:function(){this.isShowLinkedChat=!1,this.$emit("UnPickFavorite",{friendId:this.friend.id})},clearChatMessagesFilters:function(){this.$refs.chatHeader.clearFilters(),this.onUpdateMessagesFilterText({text:"",range:null})},onChatFooterEditorChangedHeight:function(t){this.changedHeight=t.changedHeight+"px";try{this.$refs.chatMessages.scrollToEnd()}catch(e){}},addMessageToMessagesList:function(t){this.isShowLinkedChat&&(this.currentDialog=this.$root.$auth.dm.getDialogByCompanion(this.friend.id),this.currentDialog?this.currentDialog.id===t.message.chatId&&(this.messagesList.append(t.message),this.$refs&&this.$refs.chatMessages&&(this.$refs.chatMessages.$forceUpdate(),this.$refs.chatMessages.scrollToEnd())):window.console.warn("нулёвый диалог"))},showRelatedChat:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.isSwitchedClass(t.target.className)){i.next=2;break}return i.abrupt("return");case 2:if(s={friendId:e.friend.id},!e.chatWindowShown){i.next=8;break}e.isShowLinkedChat=!1,e.$emit("UnPickFavorite",s),i.next=24;break;case 8:if(e.$emit("PickFavorite",s),e.currentDialog=e.$root.$auth.dm.getDialogByCompanion(e.friend.id),!e.currentDialog){i.next=16;break}return i.next=13,e.chatSelect(e.currentDialog.id);case 13:e.isShowLinkedChat=!0,i.next=24;break;case 16:return i.next=18,e.openDialogWithFriend(e.friend);case 18:if(e.currentDialog=e.$root.$auth.dm.getDialogByCompanion(e.friend.id),!e.currentDialog){i.next=23;break}return i.next=22,e.chatSelect(e.currentDialog.id);case 22:e.isShowLinkedChat=!0;case 23:e.isShowLinkedChat=!0;case 24:case"end":return i.stop()}}),i)})))()},isSwitchedClass:function(t){var e=["plz-favorit-friends-item d-flex align-items-center align-items-center py-2 px-3 position-relative","plz-favorit-friends-item d-flex align-items-center align-items-center py-2 px-3 position-relative active","plz-favorit-friend-userpic","plz-favorit-userpic rounded-circle","plz-favorit-isonline","plz-favorit-isoffline","plz-favorit-friend-title flex align-items-center mr-auto","plz-favorit-friend-name","plz-favorit-friend-status","plz-favorit-friend-status-online","plz-favorit-friend-status-last-activity","plz-ff-messages-count","plz-ff-messages-count-number py-0 mr-2"];return e.includes(t)},onFriendTyping:function(t){var e=this;this.friend.id===t.user.id&&(this.typingTimeout&&clearTimeout(this.typingTimeout),this.isTyper=!0,this.typingTimeout=setTimeout((function(){e.isTyper=!1}),3e3))},removeMessageInLinkedChat:function(t){if(this.isShowLinkedChat&&(this.currentDialog=this.$root.$auth.dm.getDialogByCompanion(this.friend.id),this.currentDialog)){if(this.currentDialog.id!==t.chatId)return;this.messagesList.delete(t.messageId),this.updateDialogsList(t.chatId,{message:this.messagesList.last})}},updateDialogsList:function(t,e){e.chatId=t,this.$root.$emit("UpdateChatDialog",e)},chatSelect:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,e.isMessagesLoaded=!1,e.currentDialog=e.$root.$auth.dm.get(t),i.prev=3,i.next=6,e.$root.$api.$chat.messages(t);case 6:s=i.sent,i.next=13;break;case 9:throw i.prev=9,i.t0=i["catch"](3),window.console.warn(i.t0.detailMessage),i.t0;case 13:window.localStorage.setItem("pliziActiveDialog",t),e.messagesList.clear(),s.map((function(t){e.messagesList.append(t)})),e.isMessagesLoaded=!0;case 17:case"end":return i.stop()}}),i,null,[[3,9]])})))()},addListeners:function(){this.$root.$on("userIsTyping",this.onFriendTyping),this.$root.$on("newMessageInDialog",this.addMessageToMessagesList),this.$root.$on("removeMessageInDialog",this.removeMessageInLinkedChat)}},created:function(){this.addListeners()}},Zn=Jn,Xn=Object(b["a"])(Zn,Ms,Is,!1,null,null,null),Qn=Xn.exports,tr={name:"FavoriteFriends",components:{Spinner:Gi,FavoriteFriendItem:Qn},props:{isNarrow:{type:Boolean,required:!1,default:!1}},data:function(){return{showFavoritesBlock:!0,isDataReady:!1,isPickFavorite:!1,pickedFavoriteId:"none",favorUpdated:1}},methods:{getFavoriteFriends:function(t){return this.$root.$auth.fm.asArray().slice()},onPickFavorite:function(t){this.isPickFavorite=!0,this.pickedFavoriteId=t.friendId},onUnPickFavorite:function(t){this.isPickFavorite=!1,this.pickedFavoriteId="none"},afterFavoritsLoad:function(t){this.favorUpdated++,this.showFavoritesBlock=0*this.favorUpdated+this.$root.$auth.fm.size>0,this.isDataReady=!0},updateOnlineStatus:function(t){this.$root.$auth.fm.updateOnlineStatus(t.message.userId),this.$root.$favoritesKeyUpdater++,this.$root.$auth.frm.updateOnlineStatus(t.message.userId),this.$root.$friendsKeyUpdater++}},created:function(){var t=this;this.$root.$auth.fm.isLoad&&this.afterFavoritsLoad("this.$root.$auth.fm.isLoad"),this.$root.$on(this.$root.$auth.fm.loadEventName,(function(){t.afterFavoritsLoad(t.$root.$auth.fm.loadEventName)})),this.$root.$on(this.$root.$auth.fm.restoreEventName,(function(){t.afterFavoritsLoad(t.$root.$auth.fm.restoreEventName)})),this.$root.$on(this.$root.$auth.fm.updateEventName,(function(){t.afterFavoritsLoad(t.$root.$auth.fm.updateEventName)})),this.$root.$on("newMessageInDialog",this.updateOnlineStatus)}},er=tr,ir=Object(b["a"])(er,_s,$s,!1,null,null,null),sr=ir.exports,ar=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("TextEditor",{attrs:{id:"profileWhatsNew",clazz:"row plz-text-editor mb-4 p-4 h-auto  align-items-start bg-white-br20",editorPlaceholder:"Что у Вас нового?",dropToDown:!0,maximumCharacterLimit:1e4,errors:t.errors,workMode:"post"},on:{editorPost:t.onTextPost,onUpdateEditor:t.onUpdateEditor}})},nr=[],rr={name:"WhatsNewBlock",components:{TextEditor:_a["a"]},mixins:[Qa["a"]],data:function(){return{errors:null}},computed:{userData:function(){return this.$root.$auth.user}},methods:{onUpdateEditor:function(){this.errors=null},onTextPost:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:s=t.postText.trim(),""!==s||t.videoLink?(a="<br/>",s=s.replace(/<p><\/p>/g,a),s=e.killBrTrail(s),""!==s||t.videoLink?e.savePost(s,t.attachments,t.videoLink,t.workMode):(t.attachments.length>0||t.videoLink)&&e.savePost("<p></p>",t.attachments,t.videoLink,t.workMode)):t.attachments.length>0&&e.savePost("",t.attachments);case 2:case"end":return i.stop()}}),i)})))()},savePost:function(t,e){var i=arguments,s=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n,r,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:null,r=i.length>3&&void 0!==i[3]?i[3]:null,l={},n?(l.body=n,t&&(l.body+=" ".concat(t))):l.body=t.trim(),e&&e.length&&(l.attachmentIds=e),a.prev=5,a.next=8,s.$root.$api.$post.storePost(l);case 8:o=a.sent,a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](5),s.errors=a.t0.data.errors,console.warn(a.t0.detailMessage);case 15:o&&(s.$emit("addNewPost",o),s.storeVideo(n,r,o.id));case 16:case"end":return a.stop()}}),a,null,[[5,11]])})))()},storeVideo:function(t,e,i){var s=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t&&e&&i){a.next=2;break}return a.abrupt("return");case 2:return r={link:t,workMode:e,id:i},a.prev=3,a.next=6,s.$root.$api.$video.storeVideo(r);case 6:n=a.sent,a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](3),console.warn(a.t0.detailMessage);case 12:n&&console.log(n);case 13:case"end":return a.stop()}}),a,null,[[3,9]])})))()}}},or=rr,lr=Object(b["a"])(or,ar,nr,!1,null,null,null),cr=lr.exports,ur=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 py-4"},[t.post.deleted?[i("div",{staticClass:"col-12"},[i("div",{staticClass:"post-deleted text-center"},[i("p",[t._v("Запись удалена.")]),i("button",{staticClass:"btn btn-secondary",on:{click:function(e){return t.$emit("onRestorePost",t.post.id)}}},[t._v(" Восстановить запись ")])])])]:[i("div",{staticClass:"col-12 border-bottom plz-post-item-header"},[i("div",{staticClass:"post-news-item d-flex flex-row align-content-center pb-4"},[i("div",{staticClass:"post-poster-pic mr-3"},[this.post.user?i("router-link",{attrs:{to:{name:"PersonalPage",params:{id:t.postable.id}}}},[i("img",{attrs:{src:t.post.posterPic,alt:t.post.posterName}})]):i("router-link",{attrs:{to:{name:"CommunityPage",params:{id:t.postable.id}}}},[i("img",{attrs:{src:t.communityAvatar,alt:t.post.posterName}})])],1),i("div",{staticClass:"post-poster-name d-flex flex-column justify-content-center"},[i("h6",{staticClass:"post-poster-title mb-1"},[this.post.user?i("router-link",{attrs:{to:{name:"PersonalPage",params:{id:t.postable.id}}}},[i("b",[t._v(t._s(t.post.posterName))])]):i("router-link",{attrs:{to:{name:"CommunityPage",params:{id:t.postable.id}}}},[i("b",[t._v(t._s(t.post.posterName))])])],1),i("time",{staticClass:"post-poster-time",attrs:{datetime:t.post.createdAt}},[t._v(" "+t._s(t._f("lastPostTime")(t.post.createdAt))+" ")])]),t.post.author.id===t.user.id||t.isAdmin?i("div",{staticClass:"post-poster-actions my-auto ml-auto"},[i("button",{staticClass:"btn btn-link post-settings",attrs:{id:"postSettings"+t.post.id,type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[i("i",{staticClass:"dots-vertical"})]),i("div",{staticClass:"dropdown-menu dropdown-menu-right py-3 px-0",attrs:{"aria-labelledby":"postSettings"+t.post.id}},[t.post.author.id===t.user.id?i("div",{staticClass:"nav-item"},[i("button",{staticClass:"btn dropdown-item text-left px-3 py-1",on:{click:function(e){return t.$emit("onEditPost",t.post)}}},[t._v(" Редактировать ")])]):t._e(),i("div",{staticClass:"nav-item"},[i("button",{staticClass:"btn dropdown-item text-left px-3 py-1",on:{click:function(e){return t.$emit("onDeletePost",t.post.id)}}},[t._v(" Удалить ")])])])]):t._e()])]),t.recursivePosts&&t.recursivePosts.length?t._l(t.recursivePosts,(function(e,s){return i("div",{key:s,staticClass:"sharedFrom pt-3 pl-3"},[i("div",{staticClass:"col-12 plz-post-item-header"},[i("div",{staticClass:"post-news-item d-flex flex-row align-content-center shared  pb-2"},[e.user?i("router-link",{staticClass:"post-poster-pic mr-3",attrs:{to:{name:"PersonalPage",params:{id:e.user.id}}}},[i("img",{attrs:{src:e.posterPic,alt:e.posterName}})]):i("router-link",{staticClass:"post-poster-pic mr-3",attrs:{to:{name:"CommunityPage",params:{id:e.community.id}}}},[i("img",{attrs:{src:t.recursiveCommunityAvatar,alt:e.posterName}})]),i("div",{staticClass:"post-poster-name d-flex flex-column justify-content-center"},[i("h6",{staticClass:"post-poster-title mb-1"},[e.user?i("router-link",{attrs:{to:{name:"PersonalPage",params:{id:e.user.id}}}},[i("b",[t._v(t._s(e.posterName))])]):i("router-link",{attrs:{to:{name:"CommunityPage",params:{id:e.community.id}}}},[i("b",[t._v(t._s(e.posterName))])])],1),i("time",{staticClass:"post-poster-time",attrs:{datetime:e.createdAt}},[t._v(" "+t._s(t._f("lastPostTime")(e.createdAt))+" ")])])],1)]),e.body?i("div",{staticClass:"col-12 plz-post-item-body pt-2"},[e.livePreview&&"object"===typeof e.livePreview?[e.livePreview.text?i("p",{staticClass:"post-main-text shared mb-0",domProps:{innerHTML:t._s(e.livePreview.text)}}):t._e(),e.livePreview.videoLinks?[i("div",{staticClass:"youtube-video-link d-flex justify-content-center"},[i("p",{staticClass:"post-main-text  mt-2",domProps:{innerHTML:t._s(e.livePreview.videoLinks)},on:{click:function(i){i.stopPropagation(),e.livePreview&&t.openVideoModal()}}}),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("svg",{attrs:{width:"68",height:"48",viewBox:"0 0 68 48"}},[i("path",{staticClass:"video__button-shape",attrs:{d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z"}}),i("path",{staticClass:"video__button-icon",attrs:{d:"M 45,24 27,14 27,34"}})])])])]:t._e()]:[e.body?i("p",{staticClass:"post-main-text shared mb-0",domProps:{innerHTML:t._s(e.body)}}):t._e()]],2):t._e(),e.attachments?i("div",{staticClass:"col-12 plz-post-item-images"},[i("div",{staticClass:"post-images shared"},[e.imageAttachments.length>0?i("Gallery",{attrs:{type:"gallery",post:t.post,images:e.imageAttachments}}):t._e(),t._l(e.attachments,(function(e){return[e.isImage?t._e():[i("AttachmentFile",{attrs:{attach:e}})]]}))],2)]):t._e()])})):t._e(),i("div",{staticClass:"col-12 plz-post-item-body pb-2",class:{"--px-2 --pt-2":t.recursivePosts.length,"pt-4":!t.recursivePosts.length}},[t.livePreview&&"object"===typeof t.livePreview?[t.livePreview.text?i("p",{staticClass:"post-main-text mb-0",domProps:{innerHTML:t._s(t.livePreview.text)}}):t._e(),t.livePreview.videoLinks?[i("div",{staticClass:"youtube-video-link d-flex justify-content-center"},[i("p",{staticClass:"post-main-text  mt-2",domProps:{innerHTML:t._s(t.livePreview.videoLinks)},on:{click:function(e){e.stopPropagation(),t.hasYoutubeLinks&&t.openVideoModal(!0)}}}),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1)])]:t._e()]:[t.post.body?i("p",{staticClass:"post-main-text mb-2",domProps:{innerHTML:t._s(this.$options.filters.toBR(t.post.body))}}):t._e()]],2),i("div",{staticClass:"col-12 plz-post-item-images"},[i("div",{staticClass:"post-images"},[t.post.imageAttachments.length>0?i("Gallery",{attrs:{type:"gallery",post:t.post,images:t.post.imageAttachments}}):t._e(),t._l(t.post.attachments,(function(e){return[e.isImage?t._e():[i("AttachmentFile",{attrs:{attach:e}})]]}))],2)]),i("div",{staticClass:"plz-post-item-footer col-12 pt-4"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"d-flex"},[i("div",{staticClass:"post-watched-counter",class:{"is-active":t.post.alreadyLiked},on:{click:t.onLike}},[t.post.alreadyLiked?i("IconFillHeard"):i("IconHeard"),i("span",[t._v(t._s(t._f("space1000")(t.post.likes)))]),t.post.usersLikes&&t.post.usersLikes.length?i("div",{staticClass:"usersLikes p-3",on:{click:function(t){t.stopPropagation()}}},[i("p",{staticClass:"mb-1"},[i("b",{staticStyle:{cursor:"pointer"},on:{click:function(e){return e.stopPropagation(),t.$emit("onShowUsersLikes",t.post.id)}}},[t._v(" Понравилось ")]),t._v(" "+t._s(t.post.likes)+" пользователям ")]),i("div",{staticClass:"d-flex mb-0"},t._l(t.shortUsersLikes,(function(t,e){return i("router-link",{key:e,staticClass:"usersLikes-user m-1",attrs:{to:{name:"PersonalPage",params:{id:t.id}}}},[i("img",{staticClass:"rounded-circle",attrs:{src:t.profile.userPic,alt:t.profile.firstName+" "+t.profile.lastName,title:t.profile.firstName+" "+t.profile.lastName}})])})),1)]):t._e()],1),i("div",{staticClass:"post-watched-counter ml-4",on:{click:t.getCommentsByPostId}},[i("IconMessage"),i("span",[t._v(t._s(t._f("space1000")(t.post.commentsCount)))])],1),i("div",{staticClass:"post-watched-counter ml-4",on:{click:function(e){return t.$emit("onShare",t.post)}}},[i("IconShare"),i("span",[t._v(t._s(t._f("space1000")(t.post.sharesCount)))])],1)]),i("div",{staticClass:"ml-auto d-flex align-items-center"},[i("div",{staticClass:"post-watched-counter"},[i("span",[t._v(t._s(t._f("space1000")(t.post.views)))]),i("IconEye")],1)])]),t.isShowComment?t._e():[t._l(t.comments,(function(e){return i("div",{staticClass:"plz-comments"},[i("CommentItem",{key:e.id,attrs:{type:"post",comment:e,postId:t.post.id,attachments:e.attachments},on:{onDelete:t.removeComment,update:t.editComment}})],1)})),i("CommentTextField",{attrs:{type:"post",postId:t.post.id},on:{updateComments:t.addNewComment}})]],2)]],2)},dr=[],mr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-eye",staticStyle:{"enable-background":"new 0 0 511.999 511.999"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 511.999 511.999","xml:space":"preserve"}},[i("g",[i("path",{attrs:{d:"M508.745,246.041c-4.574-6.257-113.557-153.206-252.748-153.206S7.818,239.784,3.249,246.035\n                        c-4.332,5.936-4.332,13.987,0,19.923c4.569,6.257,113.557,153.206,252.748,153.206s248.174-146.95,252.748-153.201\n                        C513.083,260.028,513.083,251.971,508.745,246.041z M255.997,385.406c-102.529,0-191.33-97.533-217.617-129.418\n                        c26.253-31.913,114.868-129.395,217.617-129.395c102.524,0,191.319,97.516,217.617,129.418\n                        C447.361,287.923,358.746,385.406,255.997,385.406z"}})]),i("g",[i("path",{attrs:{d:"M255.997,154.725c-55.842,0-101.275,45.433-101.275,101.275s45.433,101.275,101.275,101.275\n                        s101.275-45.433,101.275-101.275S311.839,154.725,255.997,154.725z M255.997,323.516c-37.23,0-67.516-30.287-67.516-67.516\n                        s30.287-67.516,67.516-67.516s67.516,30.287,67.516,67.516S293.227,323.516,255.997,323.516z"}})])])},pr=[],hr={name:"IconEye"},fr=hr,vr=Object(b["a"])(fr,mr,pr,!1,null,null,null),gr=vr.exports,br=i("5e5e"),Cr=i("37f2"),yr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-message",attrs:{viewBox:"0 0 387 387",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M174.249 0.540985C148.138 3.20295 126.815 9.42485 103.999 21.0387C89.6043 28.3666 78.6544 35.7055 66.304 46.3028C47.4596 62.4731 32.4252 81.6353 21.0373 103.998C6.62394 132.303 0.00949097 159.668 0.00949097 190.997C0.00949097 226.275 8.98792 258.667 27.3113 289.496C42.2922 314.7 64.3405 337.107 90.0098 353.214C96.6692 357.392 110.944 364.668 118.866 367.922C141.835 377.355 165.577 381.984 190.998 381.984C208.113 381.984 222.411 380.19 239.248 375.932C249.17 373.423 264.229 367.888 272.86 363.577C282.428 358.798 283.566 358.841 303.248 364.728C380.066 387.702 378.171 387.161 380.785 386.866C385.173 386.372 387.36 383.434 386.827 378.748C386.671 377.371 384.423 369.157 381.833 360.495C370.508 322.627 362.278 294.933 361.181 290.999C359.215 283.946 359.675 280.579 363.702 272.585C369.424 261.225 374.756 245.485 377.961 230.497C383.418 204.969 383.418 177.025 377.961 151.498C374.257 134.173 369.363 120.501 360.96 103.998C349.572 81.6353 334.537 62.4731 315.693 46.3028C303.343 35.7055 292.393 28.3666 277.998 21.0387C255.315 9.49185 234.894 3.47544 209.096 0.737482C201.699 -0.0475064 181.157 -0.163505 174.249 0.540985ZM205.348 43.7603C221.997 45.1833 228.549 46.7143 243.248 52.6142C257.067 58.1611 269.734 64.9815 278.571 71.6324C288.045 78.7628 299.071 89.5547 307.808 100.249C313.934 107.746 321.672 120.722 326.147 130.998C334.918 151.141 336.622 157.627 338.23 176.989C339.192 188.58 339.192 193.415 338.23 205.005C336.556 225.168 334.506 232.509 324.161 255.401C320.368 263.795 318.747 268.618 317.241 275.996C315.647 283.802 316.66 290.613 322.286 309.909C324.781 318.465 324.955 321.26 323.108 323.106C321.262 324.953 318.467 324.779 309.911 322.284C290.615 316.658 283.804 315.645 275.998 317.239C268.592 318.751 263.786 320.37 255.308 324.211C233.001 334.316 226.828 336.078 206.998 338C194.694 339.193 188.435 339.241 176.649 338.234C160 336.811 153.448 335.28 138.749 329.38C124.93 323.833 112.263 317.013 103.426 310.362C93.9613 303.239 82.2169 291.744 73.7369 281.303C68.0855 274.344 60.1955 260.976 55.8496 250.996C47.0786 230.854 45.3746 224.368 43.7672 205.005C42.8047 193.415 42.8047 188.58 43.7672 176.989C45.3746 157.627 47.0786 151.141 55.8496 130.998C60.3245 120.722 68.0635 107.746 74.1889 100.249C82.9258 89.5547 93.9518 78.7628 103.426 71.6324C118.397 60.3646 145.55 48.2313 161.957 45.4778C175.908 43.1364 191.042 42.5374 205.348 43.7603Z"}})])},wr=[],xr={name:"IconMessageUserPost"},kr=xr,_r=Object(b["a"])(kr,yr,wr,!1,null,null,null),$r=_r.exports,Mr=i("1568"),Ir=i("3e4b"),Pr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("img",{attrs:{src:t.src,alt:t.alt}})},Sr=[],Lr={name:"PostImage",props:{src:{type:String,default:null},alt:{type:String,default:null}}},Rr=Lr,Nr=Object(b["a"])(Rr,Pr,Sr,!1,null,null,null),Ar=Nr.exports,Fr=i("df0c"),zr=function(){function t(e){Object(Nt["a"])(this,t),this.__defaultAvatarPath="/images/noavatar-256.png",this._id=null,this._name=null,this._body=null,this._primaryImage=null,this._likes=null,this._alreadyLiked=!1,this._alreadyViewed=!1,this._usersLikes=[],this._views=null,this._commentsCount=null,this._sharesCount=null,this._user=null,this._community=null,this._author=null,this._createdAt=null,this._deleted=!1,this._attachments=null,this._sharedFrom=null,this.update(e)}return Object(At["a"])(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"posterName",get:function(){return this._user?this._user.firstName+" "+this._user.lastName:this._community?this._community.name:this.author?this.author.firstName+" "+this.author.lastName:""}},{key:"posterPic",get:function(){return this._user?this.user.userPic:this._community?this.community.primaryImage:this.author?this.author.userPic:this.__defaultAvatarPath}},{key:"body",get:function(){return this._body},set:function(t){this._body=t}},{key:"primaryImage",get:function(){return this._primaryImage},set:function(t){this._primaryImage=t}},{key:"images",get:function(){return this._primaryImage}},{key:"isImages",get:function(){return this._primaryImage&&this._primaryImage.length>0}},{key:"likes",get:function(){return this._likes},set:function(t){this._likes=t}},{key:"alreadyLiked",get:function(){return this._alreadyLiked},set:function(t){this._alreadyLiked=t}},{key:"alreadyViewed",get:function(){return this._alreadyViewed},set:function(t){this._alreadyViewed=t}},{key:"usersLikes",get:function(){return this._usersLikes},set:function(t){this._usersLikes=t}},{key:"views",get:function(){return this._views},set:function(t){this._views=t}},{key:"user",get:function(){return this._user},set:function(t){this._user=t}},{key:"community",get:function(){return this._community},set:function(t){this._community=t}},{key:"author",get:function(){return this._author},set:function(t){this._author=t}},{key:"commentsCount",get:function(){return this._commentsCount},set:function(t){this._commentsCount=t}},{key:"sharesCount",get:function(){return this._sharesCount},set:function(t){this._sharesCount=t}},{key:"createdAt",get:function(){return this._createdAt},set:function(t){this._createdAt=t?Object(Us["a"])(t):t}},{key:"deleted",get:function(){return this._deleted},set:function(t){this._deleted=Boolean(t)}},{key:"attachments",get:function(){return this._attachments},set:function(t){this._attachments=t}},{key:"sharedFrom",get:function(){return this._sharedFrom},set:function(t){this._sharedFrom=t}}]),Object(At["a"])(t,[{key:"update",value:function(e){var i=this;this.id=e.id,this.name=e.name,this.body=e.body,this.primaryImage=e.primaryImage,this.likes=e.likes,this.alreadyLiked=e.alreadyLiked,this.alreadyViewed=e.alreadyViewed,this.usersLikes=e.usersLikes?e.usersLikes.list.map((function(t){return new Qi["a"](t)})):[],this.views=e.views,this.commentsCount=e.commentsCount,this.sharesCount=e.sharesCount,this.user=e.user?new Qi["a"](e.user):null,this.community=e.community?new rs(e.community):null,this.createdAt=e.createdAt,this.deleted=!1,this.attachments=[],e.attachments&&e.attachments.list&&e.attachments.list.length>0&&e.attachments.list.map((function(t){i.attachments.push(new Ea["a"](t))})),this.sharedFrom=e.sharedFrom?new t(e.sharedFrom):null,this.author=e.author?new Qi["a"](e.author):null}},{key:"toJSON",value:function(){return{id:this._id,name:this._name,body:this._body,primaryImage:this._primaryImage,likes:this._likes,alreadyLiked:this._alreadyLiked,usersLikes:this._usersLikes,views:this._views,commentsCount:this._commentsCount,sharesCount:this._sharesCount,user:this._user,community:this._community,createdAt:this._createdAt,attachments:this._attachments,sharedFrom:this._sharedFrom,author:this._author}}},{key:"checkIsMinePost",value:function(t){return(this.user&&this.user.id)===t}},{key:"isArchivePost",get:function(){var t=new Date(this.createdAt),e=new Date,i=Math.abs(e-t),s=Math.ceil(i/864e5);return s>7}},{key:"imageAttachments",get:function(){return this.attachments.filter((function(t){return t.isImage}))}}]),t}(),Er={methods:{getCommunityAvatar:function(t){var e,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"thumb";return(null===t||void 0===t||null===(e=t.avatar)||void 0===e||null===(i=e.image[s])||void 0===i?void 0:i.path)||(null===t||void 0===t?void 0:t.primaryImage)||new rs({}).defaultAvatarPath}}},jr=i("66cf"),Dr={name:"Post",components:{CommentTextField:Mr["a"],CommentItem:Ir["a"],Gallery:za["default"],IconShare:da["a"],IconMessage:Ee["a"],IconHeard:br["a"],IconFillHeard:Cr["a"],IconEye:gr,IconMessageUserPost:$r,IconYoutube:ka,PostImage:Ar,AttachmentFile:Fr["a"]},props:{post:zr,isCommunity:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1}},mixins:[qa["a"],Er],data:function(){return{recursivePostsSimple:[],recursivePosts:[],isShowComment:!0,comments:[]}},computed:{hasYoutubeLinks:function(){var t=this.post.body.replace(/<\/?[^>]+>/g,"").trim();return t?this.detectYoutubeLinks(t):null},livePreview:function(){var t=this.post.body.replace(/<\/?[^>]+>/g,"").trim();return t?this.transformStrWithLinks(t,"hqdefault"):null},postable:function(){return this.post.community?this.post.community:this.post.author},user:function(){return this.$root.$auth.user},shortUsersLikes:function(){return this.post.usersLikes&&this.post.usersLikes.length?this.post.usersLikes.slice(0,8):null},communityAvatar:function(){var t;return this.getCommunityAvatar(null===(t=this.post)||void 0===t?void 0:t.community)},recursiveCommunityAvatar:function(){var t,e;return this.getCommunityAvatar(null===(t=this.post)||void 0===t||null===(e=t.sharedFrom)||void 0===e?void 0:e.community)}},methods:{editComment:function(t){this.comments=this.comments.map((function(e){return e.id===t.id?e.update(t):e}))},removeComment:function(t){this.comments=this.comments.filter((function(e){return e.id!==t})),this.post.commentsCount=this.comments.length},addNewComment:function(t){this.comments.push(new jr["a"](t)),this.post.commentsCount=this.comments.length},openVideoModal:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t=e?this.detectYoutubeLinks(this.post.body.replace(/<\/?[^>]+>/g,"").trim())[0]:this.detectYoutubeLinks(this.post.sharedFrom.body.replace(/<\/?[^>]+>/g,"").trim())[0],this.$emit("openVideoModal",{videoLink:t})},recursiveParent:function(t){t&&(this.post.id!==t.id?t.sharedFrom?(this.recursivePostsSimple.push(t),this.recursiveParent(t.sharedFrom)):(this.recursivePostsSimple.push(t),this.transformRecursivePosts()):this.recursiveParent(t.sharedFrom))},recursiveLivePreview:function(t){return t=t.replace(/<\/?[^>]+>/g,"").trim(),this.transformStrWithLinks(t,"hqdefault")},recursiveHasYoutubeLinks:function(t){return t=t.replace(/<\/?[^>]+>/g,"").trim(),this.detectYoutubeLinks(t)},recursiveImageAttachments:function(t){return t.filter((function(t){return t.isImage}))},transformRecursivePosts:function(){var t=this;this.recursivePostsSimple.forEach((function(e){t.recursivePosts.push({id:e.id,body:e.body,user:e.user,posterPic:e.posterPic,posterName:e.posterName,community:e.community,createdAt:e.createdAt,livePreview:t.recursiveLivePreview(e.body),hasYoutubeLinks:t.recursiveHasYoutubeLinks(e.body),imageAttachments:t.recursiveImageAttachments(e.attachments),attachments:e.attachments})}))},onLike:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$post.likePost(t.post.id);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.warn(e.t0.detailMessage);case 10:null!==i&&(t.post.alreadyLiked?(t.post.alreadyLiked=!1,t.post.likes--,s=t.post.usersLikes.findIndex((function(e){return e.id===t.$root.$auth.user.id})),t.post.usersLikes.splice(s,1)):(t.post.alreadyLiked=!0,t.post.likes++,t.post.usersLikes.push(t.$root.$auth.user)));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},getCommentsByPostId:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isShowComment=!t.isShowComment,!t.isShowComment){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.$root.$api.$post.getCommentsById(t.post.id);case 6:i=e.sent,t.comments=i.data.list.map((function(t){return new jr["a"](t)})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.warn(e.t0.detailMessage);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))()}},mounted:function(){this.post&&this.recursiveParent(this.post)}},Or=Dr,Tr=Object(b["a"])(Or,ur,dr,!1,null,null,null),Hr=Tr.exports,Ur=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12 col-xl-9 mb-4 mb-xl-0 ",attrs:{id:"postFilter"}},[i("div",{staticClass:"row mr-xl-0 bg-white-br20 align-items-center justify-content-between"},[i("nav",{staticClass:"col-lg-8 nav profile-filter-links align-items-center  pl-3 mb-lg-0",attrs:{role:"tablist"}},[i("div",{staticClass:"nav-link py-0 px-1 mr-2 mr-lg-4 position-relative active"},[t._m(0),i("div",{staticClass:"dropdown-menu dropdown-menu-left py-3 px-3",attrs:{"aria-labelledby":"dropdownNews"}},[i("div",{staticClass:"nav-item "},[i("label",{staticClass:"radio mb-3 mb-md-0",attrs:{for:"ownNews"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.allSelected,expression:"allSelected"}],staticClass:"mb-0",attrs:{type:"checkbox",name:"ownNews",id:"ownNews"},domProps:{checked:Array.isArray(t.allSelected)?t._i(t.allSelected,null)>-1:t.allSelected},on:{click:t.selectAll,change:function(e){var i=t.allSelected,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n=null,r=t._i(i,n);s.checked?r<0&&(t.allSelected=i.concat([n])):r>-1&&(t.allSelected=i.slice(0,r).concat(i.slice(r+1)))}else t.allSelected=a}}}),i("span",{staticClass:"mb-0"},[t._v("Все ")])])]),t._l(t.parts,(function(e){return i("div",{key:e.key,staticClass:"nav-item"},[i("label",{staticClass:"radio mb-3 mb-md-0"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checked,expression:"checked"}],staticClass:"mb-0",attrs:{type:"checkbox"},domProps:{value:e.key,checked:Array.isArray(t.checked)?t._i(t.checked,e.key)>-1:t.checked},on:{change:[function(i){var s=t.checked,a=i.target,n=!!a.checked;if(Array.isArray(s)){var r=e.key,o=t._i(s,r);a.checked?o<0&&(t.checked=s.concat([r])):o>-1&&(t.checked=s.slice(0,o).concat(s.slice(o+1)))}else t.checked=n},t.doEvent],click:t.select}}),i("span",{staticClass:"mb-0"},[t._v(t._s(e.title))])])])}))],2)]),i("span",{staticClass:"nav-link py-2 py-sm-3 px-1 mr-2 mr-lg-4",class:{active:t.liked},on:{click:t.likedClick}},[t._v("Понравилось")]),i("span",{staticClass:"nav-link py-3 px-1 mr-2 mr-lg-4 ml-auto ml-lg-4 d-none #d-md-inline-block"},[i("button",{staticClass:"btn px-2 py-0 "},[i("IconSearch",{staticStyle:{width:"15px",height:"16px"}})],1)])]),i("div",{staticClass:"newsViewModes col-lg-4 justify-content-end d-none "},[i("span",[t._v("Вид:")]),i("button",{staticClass:"btn bg-transparent p-0"},[i("IconMultipleViewMode",{staticStyle:{width:"16px",height:"16px"}})],1),i("button",{staticClass:"btn bg-transparent p-0"},[i("IconSingleViewMode",{staticStyle:{width:"16px",height:"16px"}})],1)])])])},Vr=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"btn dropdown-menu-btn py-2 py-sm-3",attrs:{id:"dropdownNews",type:"button","data-toggle":"dropdown","aria-haspopup":"true","data-offset":"-5,0","aria-expanded":"false"}},[t._v(" Новости "),i("i",{staticClass:"fas fa-chevron-down ml-2"})])}],Br=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"-19 -19 600 600"}},[i("path",{attrs:{d:"m251.25 12.5c0-6.90625-5.59375-12.5-12.5-12.5h-226.25c-6.90625 0-12.5 5.59375-12.5 12.5v226.25c0 6.90625 5.59375 12.5 12.5 12.5h226.25c6.90625 0 12.5-5.59375 12.5-12.5zm-25 213.75h-201.25v-201.25h201.25zm0 0"}}),i("path",{attrs:{d:"m562.5 12.5c0-6.90625-5.59375-12.5-12.5-12.5h-226.25c-6.90625 0-12.5 5.59375-12.5 12.5v226.25c0 6.90625 5.59375 12.5 12.5 12.5h226.25c6.90625 0 12.5-5.59375 12.5-12.5zm-25 213.75h-201.25v-201.25h201.25zm0 0"}}),i("path",{attrs:{d:"m251.25 323.75c0-6.90625-5.59375-12.5-12.5-12.5h-226.25c-6.90625 0-12.5 5.59375-12.5 12.5v226.25c0 6.90625 5.59375 12.5 12.5 12.5h226.25c6.90625 0 12.5-5.59375 12.5-12.5zm-25 212.5h-201.25v-200h201.25zm0 0"}}),i("path",{attrs:{d:"m562.5 323.75c0-6.90625-5.59375-12.5-12.5-12.5h-226.25c-6.90625 0-12.5 5.59375-12.5 12.5v226.25c0 6.90625 5.59375 12.5 12.5 12.5h226.25c6.90625 0 12.5-5.59375 12.5-12.5zm-25 212.5h-201.25v-200h201.25zm0 0"}})])},Yr=[],qr={name:"IconMultipleViewMode"},Kr=qr,Gr=Object(b["a"])(Kr,Br,Yr,!1,null,"06ecb145",null),Wr=Gr.exports,Jr=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 463 461"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.29252 0.620979C5.51952 1.35398 2.32252 4.69148 1.58402 7.62448C0.745023 10.956 0.745023 195.044 1.58402 198.375C2.37402 201.514 5.48602 204.626 8.62452 205.416C11.974 206.259 451.026 206.259 454.376 205.416C457.514 204.626 460.626 201.514 461.416 198.375C462.255 195.044 462.255 10.956 461.416 7.62448C460.626 4.48598 457.514 1.37398 454.376 0.583978C451.265 -0.199522 11.2575 -0.163021 8.29252 0.620979ZM436.718 22.2825C437.939 22.923 439.077 24.061 439.718 25.2825C440.748 27.2455 440.75 27.4295 440.75 103C440.75 178.57 440.748 178.754 439.718 180.717C439.077 181.939 437.939 183.077 436.718 183.717L434.75 184.75H231.5H28.25L26.2825 183.717C25.061 183.077 23.923 181.939 23.2825 180.717C22.255 178.759 22.2495 178.406 22.0965 104.5C21.9855 50.772 22.099 29.5255 22.5065 27.6285C23.1775 24.507 25.107 22.336 27.8605 21.6035C29.1145 21.27 97.8715 21.126 232.25 21.1755L434.75 21.25L436.718 22.2825ZM8.29252 254.621C5.51952 255.354 2.32252 258.691 1.58402 261.624C0.745023 264.956 0.745023 449.044 1.58402 452.375C2.37402 455.514 5.48602 458.626 8.62452 459.416C11.974 460.259 451.026 460.259 454.376 459.416C457.514 458.626 460.626 455.514 461.416 452.375C462.255 449.044 462.255 264.956 461.416 261.624C460.626 258.486 457.514 255.374 454.376 254.584C451.265 253.8 11.2575 253.837 8.29252 254.621ZM436.718 276.282C437.939 276.923 439.077 278.061 439.718 279.282C440.748 281.245 440.75 281.429 440.75 357C440.75 432.57 440.748 432.754 439.718 434.717C439.077 435.939 437.939 437.077 436.718 437.717L434.75 438.75H231.5H28.25L26.2825 437.717C25.061 437.077 23.923 435.939 23.2825 434.717C22.255 432.759 22.2495 432.406 22.0965 358.5C21.9855 304.772 22.099 283.525 22.5065 281.628C23.1775 278.507 25.107 276.336 27.8605 275.603C29.1145 275.27 97.8715 275.126 232.25 275.175L434.75 275.25L436.718 276.282Z"}})])},Zr=[],Xr={name:"IconSingleViewMode"},Qr=Xr,to=Object(b["a"])(Qr,Jr,Zr,!1,null,"37ee0a9a",null),eo=to.exports,io={name:"PostFilter",components:{IconMultipleViewMode:Wr,IconSearch:zs,IconSingleViewMode:eo},props:{filter:Object},data:function(){return{isFocused:!1,lastSearch:"",liked:!1,parts:[{key:"own",title:"Свои"},{key:"friends",title:"Друзья"},{key:"communities",title:"Сообщества"}],checked:["own","friends","communities"],allSelected:!0}},methods:{onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1},searchKeyDownCheck:function(t){if(13===t.keyCode)return this.startSearch()},startSearch:function(){this.$emit("lastSearchChange",this.lastSearch)},likedClick:function(){this.liked=!this.liked,this.$emit("likedClick",this.liked)},selectAll:function(){var t=this;this.checked=[],this.allSelected||(this.parts.map((function(e){t.checked.push(e.key)})),this.doEvent())},select:function(){this.allSelected=!1},doEvent:function(){var t=this;this.$nextTick((function(){t.$emit("partsChange",t.checked)}))}},mounted:function(){this.liked=this.filter.liked}},so=io,ao=Object(b["a"])(so,Ur,Vr,!1,null,null,null),no=ao.exports,ro=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12 col-xl-3 bg-white-br20 d-flex align-items-center mr-n3 py-2 py-xl-0",attrs:{id:"postInterest"}},[i("div",{staticClass:"d-flex align-items-center"},[i("IconFire",{staticClass:"mr-3"}),i("p",{staticClass:"my-0"},[t._v("Сначала Интересные")])],1),i("div",{staticClass:"button-switch d-flex align-items-center justify-content-center ml-2 ml-lg-auto"},[i("input",{staticClass:"switch",attrs:{type:"checkbox",id:"switch-blue"},domProps:{value:t.filter.interest},on:{click:t.interestSwitch}}),i("label",{staticClass:"lbl-off",attrs:{for:"switch-blue"}},[t._v("Off")]),i("label",{staticClass:"lbl-on",attrs:{for:"switch-blue"}},[t._v("On")])])])},oo=[],lo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-fire",attrs:{viewBox:"0 0 374 504",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M104.25 1.19951C101.004 2.22601 98.9735 3.46851 96.0995 6.18651C92.844 9.26551 91.249 12.2385 90.4785 16.6625C89.454 22.547 90.304 25.5335 96.466 37.688C104.34 53.2195 106.821 61.5625 107.36 74.319C107.84 85.661 105.984 95.6815 101.169 107.75C94.2915 124.986 85.083 140.27 58.995 177.75C44.5845 198.453 32.219 218.362 24.2135 233.75C8.14 264.645 -0.724496 299.636 0.154004 328.72C1.1885 362.97 13.289 398.156 33.6365 426.082C46.541 443.792 58.358 455.762 75.7625 468.75C106.253 491.504 143.946 503.979 182.25 503.992C213.894 504.003 247.769 496.395 272.5 483.721C319.62 459.574 352.255 416.662 366.456 360.174C371.731 339.192 373.996 320.663 373.996 298.5C373.996 258.507 365.223 220.682 348.31 187.75C343.168 177.738 339.204 171.39 332.448 162.347C323.941 150.963 319.933 147.316 313.831 145.412C305.962 142.955 297.071 145.827 292.266 152.378C289.967 155.511 288.686 159.504 287.734 166.5C285.869 180.207 282.091 190.893 278.443 192.78C277.054 193.498 276.816 193.495 275.665 192.741C273.892 191.579 272.767 188.719 270.727 180.182C267.364 166.115 261.729 149.279 255.606 135C242.61 104.699 219.007 71.753 194.613 49.87C178.339 35.27 166.886 26.9495 148 16.0045C136.54 9.36351 122.619 2.83551 116.577 1.27001C113.038 0.353011 107.036 0.318511 104.25 1.19951ZM154.597 68.888C159.78 71.307 179.935 90.843 189.273 102.5C202.759 119.335 213.713 138.278 221.656 158.5C233.183 187.845 238.275 214.158 239.99 253.25C240.483 264.469 241.16 267.379 244.268 271.622C250.327 279.895 262.606 281.947 271.095 276.107C278.836 270.781 295.539 248.805 307.224 228.574C313.249 218.142 315.504 216.386 319.048 219.368C321.29 221.254 323.501 226.287 327.784 239.25C333.154 255.505 335.665 268.193 337.23 286.991C338.541 302.737 337.989 317.29 335.457 333.72C331.076 362.144 319.515 389.145 302.589 410.486C293.614 421.8 289.085 425.125 286.048 422.625C284.832 421.624 284.312 419.149 283.5 410.5C282.155 396.16 277.588 382.413 270.352 370.922C265.102 362.586 261.73 358.65 248.997 346C238.885 335.954 235.515 332.27 233.107 328.629C226.698 318.941 224.078 311.131 223.632 300.38C223.337 293.265 223.721 290.55 226.16 282.5C227.514 278.031 227.75 276.468 227.75 271.99C227.75 267.084 227.642 266.51 226.152 263.484C222.174 255.404 214.619 251.442 205.321 252.562C201.448 253.028 194.419 255.66 188.223 258.966C157.594 275.308 130.661 299.018 113.784 324.5C101.425 343.159 95.017 359.833 91.396 382.75C89.777 392.999 89.799 409.142 91.447 420.098C92.0965 424.414 92.4935 428.295 92.3295 428.723C91.483 430.929 86.5895 428.563 81.0585 423.273C61.923 404.972 47.1185 376.373 42.275 348.353C41.177 342.001 40 330.176 40 325.5C40 320.824 41.177 308.999 42.275 302.647C44.65 288.907 51.5835 268.729 58.959 254.09C64.831 242.436 77.28 222.2 89.514 204.424C106.139 180.267 109.293 175.577 115.438 165.858C130.855 141.473 138.605 124.747 143.287 105.752C145.562 96.5225 146.991 86.539 147.009 79.75C147.027 73.05 147.544 70.5975 149.251 69.125C150.804 67.7855 152.11 67.7275 154.597 68.888ZM182.163 313.552C183.883 314.335 185.089 316.803 187.471 324.418C191.153 336.186 196.115 345.924 203.305 355.496C208.7 362.679 211.849 366.112 222.5 376.422C235.639 389.14 240.047 395.464 243.286 406.25C244.441 410.096 244.642 411.695 244.672 417.25L244.708 423.75L242.087 431.4C239.701 438.367 239.432 439.605 239.074 445.284C238.642 452.13 238.213 453.192 234.988 455.387C229.112 459.385 200.727 463.994 181.945 463.999C174.705 464 162.916 462.981 155.656 461.727C137.819 458.643 114.778 449.68 108.126 443.237C103.954 439.196 104.447 438.43 112.106 437.048C118.669 435.865 122.331 434.123 125.469 430.689C130.505 425.179 131.38 421.293 130.488 408.411C129.915 400.141 129.937 398.226 130.678 391.661C131.766 382.037 132.584 378.2 135.297 370C141.448 351.407 153.85 333.274 169.877 319.437C176.681 313.563 179.366 312.277 182.163 313.552Z"}})])},co=[],uo={name:"IconFire",props:{clazz:String}},mo=uo,po=Object(b["a"])(mo,lo,co,!1,null,null,null),ho=po.exports,fo={name:"PostInterest",components:{IconFire:ho},props:{filter:Object},data:function(){return{}},methods:{interestSwitch:function(){this.$emit("interestSwitch",!this.filter.interest)}}},vo=fo,go=Object(b["a"])(vo,ro,oo,!1,null,null,null),bo=go.exports,Co=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"postEditModal",tabindex:"-1",role:"dialog","aria-labelledby":"postEditModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hidePostEditModal(e)}}},[i("div",{staticClass:"modal-dialog modal-xl modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body p-4",attrs:{id:"resendMessageModalBody"}},[i("TextEditor",{staticClass:"border-0",attrs:{"work-mode":"post",showAvatar:t.textEditor.showAvatar,inputEditorText:t.post.body,inputEditorAttachment:t.post.attachments},on:{editorPost:t.onTextPost,onRemoveAttachment:t.onRemoveAttachment}})],1)])])])},yo=[],wo={name:"PostEditModal",components:{TextEditor:_a["a"]},props:{post:zr},mixins:[Qa["a"]],data:function(){return{textEditor:{showAvatar:!1}}},methods:{hidePostEditModal:function(){this.$emit("hidePostEditModal")},onTextPost:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:s=t.postText.trim(),""!==s||t.videoLink?(a="<br/>",s=s.replace(/<p><\/p>/g,a),s=e.killBrTrail(s),""!==s||t.videoLink?e.updatePost(s,t.attachments,t.videoLink,t.workMode):t.attachments.length>0&&e.updatePost("<p></p>",t.attachments,t.videoLink,t.workMode)):t.attachments.length>0&&e.updatePost("",t.attachments);case 2:case"end":return i.stop()}}),i)})))()},updatePost:function(t,e){var i=arguments,s=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n,r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:null,i.length>3&&void 0!==i[3]?i[3]:null,o={},n?(o.body=n,t&&(o.body+=" ".concat(t))):o.body=t.trim(),e&&e.length&&(o.attachmentIds=e),a.prev=5,a.next=8,s.$root.$api.$post.updatePost(s.post.id,o);case 8:r=a.sent,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](5),console.warn(a.t0.detailMessage);case 14:r&&(s.post.update(r),s.hidePostEditModal());case 15:case"end":return a.stop()}}),a,null,[[5,11]])})))()},onRemoveAttachment:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.deletePostImage(e.post.id,t);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 9:s&&e.post.update(s);case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()}}},xo=wo,ko=Object(b["a"])(xo,Co,yo,!1,null,null,null),_o=ko.exports,$o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"chatVideoModal",tabindex:"-1",role:"dialog","aria-labelledby":"chatVideoModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideVideoModal(e)}}},[i("div",{staticClass:"modal-dialog modal-xl modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("VideoPlayer",{attrs:{videoLink:t.videoLink}})],1)])])},Mo=[],Io={name:"PostVideoModal",props:{videoLink:{type:String,default:null}},components:{VideoPlayer:Sn},methods:{hideVideoModal:function(){this.$emit("hideVideoModal")}}},Po=Io,So=Object(b["a"])(Po,$o,Mo,!1,null,"6eaa8bc4",null),Lo=So.exports,Ro=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"postEditModal",tabindex:"-1",role:"dialog","aria-labelledby":"postEditModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hidePostRepostModal(e)}}},[i("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body p-4",attrs:{id:"resendMessageModalBody"}},[i("div",{staticClass:"form-group d-none"},[i("multiselect",{attrs:{options:t.shareList,searchable:!0,trackBy:"code",label:"title","close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"Выберите получателя"},model:{value:t.selectedShareList,callback:function(e){t.selectedShareList=e},expression:"selectedShareList"}})],1),i("div",{staticClass:"form-group mb-4"},[i("PostRepostItem",{attrs:{post:t.post,user:t.user,community:t.community}})],1),i("button",{staticClass:"btn plz-btn plz-btn-primary mt-4",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.sharePostToWall(e)}}},[t._v(" Отправить себе на стену ")])])])])])},No=[],Ao=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"post-repost pl-3 ml-1 mt-3"},[i("div",{staticClass:"post-user-data  d-flex align-items-center mb-2"},[i("div",{staticClass:"media-pic border rounded-circle  mr-3"},[i("img",{attrs:{src:t.user?t.user.userPic:t.community.primaryImage,alt:t.user?t.user.firstName:t.community.name}})]),i("div",{staticClass:"media-body"},[i("h6",{staticClass:"chatHeader-title w-75 align-self-start mt-2 pb-0 mb-0 pull-left text-body",staticStyle:{"line-height":"20px"}},[t._v(t._s(t.user?t.user.firstName:t.community.name))])])]),t.livePreview&&"object"===typeof t.livePreview?[t.livePreview.text?i("p",{staticClass:"post-main-text mb-0",domProps:{innerHTML:t._s(t.livePreview.text)}}):t._e(),t.livePreview.videoLinks?[i("div",{staticClass:"youtube-video-link d-flex justify-content-center"},[i("p",{staticClass:"post-main-text  mt-2",domProps:{innerHTML:t._s(t.livePreview.videoLinks)}}),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1)])]:t._e()]:[t.post.body?i("p",{staticClass:"post-main-text mb-2",domProps:{innerHTML:t._s(this.$options.filters.toBR(t.post.body))}}):t._e()],t.post.attachments&&t.post.attachments.length?i("div",{staticClass:"attachments"},[t.imageAttachments.length>0?i("Gallery",{attrs:{post:t.post,images:t.imageAttachments}}):t._e(),t._l(t.post.attachments,(function(e){return[e.isImage?t._e():[i("AttachmentFile",{attrs:{attach:e}})]]}))],2):t._e(),t.recursivePosts&&t.recursivePosts.length?t._l(t.recursivePosts,(function(e,s){return i("div",{key:s,staticClass:"sharedFrom pt-3 pl-3"},[e.body&&e.attachments?[i("div",{staticClass:"col-12 plz-post-item-header"},[i("div",{staticClass:"post-news-item d-flex flex-row align-content-center shared  pb-2"},[e.user?i("router-link",{staticClass:"post-poster-pic mr-3 media-pic border rounded-circle",attrs:{to:{name:"PersonalPage",params:{id:e.user.id}}}},[i("img",{attrs:{src:e.posterPic,alt:e.posterName}})]):i("router-link",{staticClass:"post-poster-pic mr-3 media-pic border rounded-circle",attrs:{to:{name:"CommunityPage",params:{id:e.community.id}}}},[i("img",{attrs:{src:e.posterPic,alt:e.posterName}})]),i("div",{staticClass:"post-poster-name d-flex flex-column justify-content-center media-body"},[i("h6",{staticClass:"post-poster-title mb-1 chatHeader-title w-75"},[e.user?i("router-link",{staticClass:"text-body",attrs:{to:{name:"PersonalPage",params:{id:e.user.id}}}},[i("b",[t._v(t._s(e.posterName))])]):i("router-link",{staticClass:"text-body",attrs:{to:{name:"CommunityPage",params:{id:e.community.id}}}},[i("b",[t._v(t._s(e.posterName))])])],1),i("time",{staticClass:"post-poster-time",attrs:{datetime:e.createdAt}},[t._v(" "+t._s(t._f("lastPostTime")(e.createdAt))+" ")])])],1)]),i("div",{staticClass:"col-12 plz-post-item-body pt-2"},[e.livePreview&&"object"===typeof e.livePreview?[e.livePreview.text?i("p",{staticClass:"post-main-text shared mb-0",domProps:{innerHTML:t._s(e.livePreview.text)}}):t._e(),e.livePreview.videoLinks?[i("div",{staticClass:"youtube-video-link d-flex justify-content-center"},[i("p",{staticClass:"post-main-text  mt-2",domProps:{innerHTML:t._s(e.livePreview.videoLinks)},on:{click:function(i){i.stopPropagation(),e.livePreview&&t.openVideoModal()}}}),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("svg",{attrs:{width:"68",height:"48",viewBox:"0 0 68 48"}},[i("path",{staticClass:"video__button-shape",attrs:{d:"M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z"}}),i("path",{staticClass:"video__button-icon",attrs:{d:"M 45,24 27,14 27,34"}})])])])]:t._e()]:[e.body?i("p",{staticClass:"post-main-text shared mb-0",domProps:{innerHTML:t._s(e.body)}}):t._e()]],2),i("div",{staticClass:"col-12 plz-post-item-images attachments"},[i("div",{staticClass:"post-images shared"},[e.imageAttachments.length>0?i("Gallery",{attrs:{post:t.post,images:e.imageAttachments}}):t._e(),t._l(e.attachments,(function(e){return[e.isImage?t._e():[i("AttachmentFile",{attrs:{attach:e}})]]}))],2)])]:t._e()],2)})):t._e()],2)},Fo=[],zo={name:"PostRepostItem",props:{user:Qi["a"],community:rs,post:zr},mixins:[qa["a"]],components:{Gallery:za["default"],AttachmentFile:Fr["a"],IconYoutube:ka},computed:{imageAttachments:function(){return this.post.attachments.filter((function(t){return t.isImage}))},sharedFromImageAttachments:function(){return this.post.sharedFrom.attachments.filter((function(t){return t.isImage}))},livePreview:function(){var t=this.post.body.replace(/<\/?[^>]+>/g,"").trim();return this.transformStrWithLinks(t)},sharedFromLivePreview:function(){var t=this.post.sharedFrom.body.replace(/<\/?[^>]+>/g,"").trim();return this.transformStrWithLinks(t)},hasYoutubeLinks:function(){var t=this.post.body.replace(/<\/?[^>]+>/g,"").trim();return this.detectYoutubeLinks(t)},hasSharedFromYoutubeLinks:function(){var t=this.post.sharedFrom.body.replace(/<\/?[^>]+>/g,"").trim();return this.detectYoutubeLinks(t)},sharedFromUser:function(){return this.post.sharedFrom?this.post.sharedFrom.user:null}},data:function(){return{recursivePostsSimple:[],recursivePosts:[]}},methods:{recursiveParent:function(t){t&&(this.post.id!==t.id?t.sharedFrom?(this.recursivePostsSimple.push(t),this.recursiveParent(t.sharedFrom)):(this.recursivePostsSimple.push(t),this.transformRecursivePosts()):this.recursiveParent(t.sharedFrom))},recursiveLivePreview:function(t){return t=t.replace(/<\/?[^>]+>/g,"").trim(),this.transformStrWithLinks(t)},recursiveHasYoutubeLinks:function(t){return t=t.replace(/<\/?[^>]+>/g,"").trim(),this.detectYoutubeLinks(t)},recursiveImageAttachments:function(t){return t.filter((function(t){return t.isImage}))},transformRecursivePosts:function(){var t=this;this.recursivePostsSimple.forEach((function(e){t.recursivePosts.push({id:e.id,body:e.body,user:e.user,posterPic:e.posterPic,posterName:e.posterName,community:e.community,createdAt:e.createdAt,livePreview:t.recursiveLivePreview(e.body),hasYoutubeLinks:t.recursiveHasYoutubeLinks(e.body),imageAttachments:t.recursiveImageAttachments(e.attachments),attachments:e.attachments})}))}},mounted:function(){this.post&&this.recursiveParent(this.post)}},Eo=zo,jo=Object(b["a"])(Eo,Ao,Fo,!1,null,null,null),Do=jo.exports,Oo={name:"PostRepostModal",components:{PostRepostItem:Do},props:{user:Qi["a"],community:rs,post:zr},data:function(){return{selectedShareList:{code:"myWall",title:"На мою стену"},shareList:[{code:"myWall",title:"На мою стену"}]}},methods:{hidePostRepostModal:function(){this.$emit("hidePostRepostModal")},sharePostToWall:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.selectedShareList){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"myWall"!==t.selectedShareList.code){e.next=7;break}return e.next=6,t.$root.$api.$post.sharePostToWall(t.post.id);case 6:i=e.sent;case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.warn(e.t0.detailMessage);case 12:i&&t.hidePostRepostModal();case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}}},To=Oo,Ho=Object(b["a"])(To,Ro,No,!1,null,null,null),Uo=Ho.exports,Vo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"postLikeModal",tabindex:"-1",role:"dialog","aria-labelledby":"postLikeModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideLikeModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body p-4",attrs:{id:"postLikeBody"}},[i("div",{staticClass:"row"},t._l(t.users,(function(e,s){return i("div",{key:s,staticClass:"col-4 col-lg-2 text-center mb-3 d-flex align-items-stretch text-center"},[i("router-link",{staticClass:"post-like-body-box text-dark d-flex flex-column w-100",attrs:{to:{name:"PersonalPage",params:{id:e.id}}}},[i("p",{staticClass:"post-like-body-desc mb-1"},[t._v(t._s(e.profile.firstName+" "+e.profile.lastName))]),i("div",{staticClass:"post-like-body-pic"},[i("img",{staticClass:"post-like-body-img rounded-circle mt-auto",attrs:{src:e.profile.userPic,alt:e.profile.firstName+" "+e.profile.lastName,title:e.profile.firstName+" "+e.profile.lastName}})])])],1)})),0)])])])])},Bo=[],Yo={name:"PostLikeModal",props:{postId:Number},data:function(){return{isStarted:!1,noMore:!1,users:[]}},methods:{hideLikeModal:function(){this.$emit("hideLikeModal")},getUsersLikes:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:20,a=t.length>1&&void 0!==t[1]?t[1]:0,n=null,i.prev=3,i.next=6,e.$root.$api.$post.getUsersLikes(e.postId,s,a);case 6:n=i.sent,i.next=12;break;case 9:i.prev=9,i.t0=i["catch"](3),console.warn(i.t0.detailMessage);case 12:if(null===n){i.next=15;break}return n.map((function(t){e.users.push(new Qi["a"](t))})),i.abrupt("return",n.length);case 15:case"end":return i.stop()}}),i,null,[[3,9]])})))()},lazyLoadLikes:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isStarted&&!t.noMore){e.next=2;break}return e.abrupt("return");case 2:if(t.isStarted=!0,i=t.users.length,s=0,!i){e.next=9;break}return e.next=8,t.getUsersLikes(10,i++);case 8:s=e.sent;case 9:0===s&&(t.noMore=!0),t.isStarted=!1,t.onScrollYPageLikes();case 12:case"end":return e.stop()}}),e)})))()},onScrollYPageLikes:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=document.querySelector("#postLikeBody"),!(i.scrollTop>=i.scrollHeight-i.clientHeight-i.clientHeight/2)){e.next=4;break}return e.next=4,t.lazyLoadLikes();case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUsersLikes();case 2:i=document.querySelector("#postLikeBody"),i.addEventListener("scroll",t.onScrollYPageLikes);case 4:case"end":return e.stop()}}),e)})))()},beforeRouteLeave:function(t,e,i){var s=document.querySelector("#postLikeBody");s.removeEventListener("scroll",this.onScrollYPageLikes),i()}},qo=Yo,Ko=Object(b["a"])(qo,Vo,Bo,!1,null,null,null),Go=Ko.exports,Wo={data:function(){return{isStarted:!0,noMore:!0}},methods:{onScrollYPage:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(window.scrollY>=document.body.scrollHeight-document.documentElement.clientHeight-document.documentElement.clientHeight/2)){e.next=3;break}return e.next=3,t.lazyLoadPosts();case 3:case"end":return e.stop()}}),e)})))()},lazyLoadPosts:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isStarted&&!t.noMore){e.next=2;break}return e.abrupt("return");case 2:if(t.isStarted=!0,i=t.posts.length,s=0,!i){e.next=9;break}return e.next=8,t.getPosts(10,i++);case 8:s=e.sent;case 9:0===s&&(t.noMore=!0),t.isStarted=!1,t.onScrollYPage();case 12:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.addEventListener("scroll",t.onScrollYPage);case 1:case"end":return e.stop()}}),e)})))()},beforeRouteLeave:function(t,e,i){window.removeEventListener("scroll",this.onScrollYPage),i()},beforeRouteUpdate:function(t,e,i){var s=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i(),window.addEventListener("scroll",s.onScrollYPage);case 2:case"end":return t.stop()}}),t)})))()}},Jo={methods:{postIsRead:function(t,e,i){if(i&&t&&"in"===e&&"top"===i&&!t.alreadyViewed){t.id,this.$root.$auth.user.id,t.views;this.incrementPostViewCounter(t.id,this.$root.$auth.user.id)}},incrementPostViewCounter:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return null,s.prev=1,s.next=4,i.$root.$api.$post.addView(t,e);case 4:s.sent,s.next=11;break;case 7:throw s.prev=7,s.t0=s["catch"](1),window.console.warn(s.t0.detailMessage),s.t0;case 11:case"end":return s.stop()}}),s,null,[[1,7]])})))()}}},Zo={name:"NewsPage",components:{PostInterest:bo,PostFilter:no,AccountToolbarLeft:ks,FavoriteFriends:sr,WhatsNewBlock:cr,Post:Hr,PostEditModal:_o,PostVideoModal:Lo,PostRepostModal:Uo,SmallSpinner:J["a"],PostLikeModal:Go},mixins:[Wo,Jo],data:function(){return{posts:[],filteredPosts:[],postEditModal:{isVisible:!1},postForEdit:null,postVideoModal:{isVisible:!1,content:{videoLink:null}},postRepostModal:{isVisible:!1,content:{postForRepost:null}},postLikeModal:{isVisible:!1,content:{postId:null}},lastSearch:"",filter:{interest:!1,liked:!1,parts:[]}}},methods:{filterPost:function(){this.filteredPosts=Object(ei["a"])(this.posts),this.filter.interest&&this.filteredPosts.sort((function(t,e){return e.commentsCount+e.likes-(t.commentsCount+t.likes)})),this.filter.liked&&(this.filteredPosts=this.filteredPosts.filter((function(t){return t.alreadyLiked})))},addNewPost:function(t){this.posts.unshift(new zr(t)),this.filterPost()},onEditPost:function(t){this.postEditModal.isVisible=!0,this.postForEdit=t},hidePostEditModal:function(){this.postEditModal.isVisible=!1,this.postForEdit=null},openVideoModal:function(t){t.videoLink&&(this.postVideoModal.isVisible=!0,this.postVideoModal.content.videoLink=t.videoLink)},hideVideoModal:function(){this.postVideoModal.isVisible=!1},startTimer:function(t){var e=this;setTimeout((function(){e.posts.splice(t,1),e.filterPost()}),5e3)},onSharePost:function(t){this.postRepostModal.isVisible=!0,this.postRepostModal.content.postForRepost=t},hidePostRepostModal:function(){this.postRepostModal.isVisible=!1,this.postRepostModal.content.postForRepost=null},openLikeModal:function(t){this.postLikeModal.isVisible=!0,this.postLikeModal.content.postId=t},hideLikeModal:function(){this.postLikeModal.isVisible=!1,this.postLikeModal.content.postId=null},getPosts:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:50,a=t.length>1&&void 0!==t[1]?t[1]:0,n=null,e.isStarted=!0,i.prev=4,i.next=7,e.$root.$api.$post.getNews(s,a,e.startSearch,e.filter.parts);case 7:n=i.sent,i.next=14;break;case 10:i.prev=10,i.t0=i["catch"](4),e.isStarted=!1,console.warn(i.t0.message);case 14:if(null===n){i.next=20;break}return e.isStarted=!1,0===a&&(e.posts=[]),n.map((function(t){e.posts.push(new zr(t))})),e.filterPost(),i.abrupt("return",n.length);case 20:case"end":return i.stop()}}),i,null,[[4,10]])})))()},lastSearchChange:function(t){this.startSearch=t,this.getPosts()},onDeletePost:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.deletePost(t);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 9:s&&(a=e.posts.findIndex((function(e){return e.id===t})),e.posts[a].deleted=!0,e.startTimer(a));case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()},onRestorePost:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.restorePost(t);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 9:s&&(a=e.posts.find((function(e){return e.id===t})),a.deleted=!1,e.filterPost());case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()},interestSwitch:function(t){this.filter.interest=t,this.filterPost()},likedClick:function(t){this.filter.liked=t,this.filterPost()},partsChange:function(t){this.filter.parts=t,this.getPosts()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPosts();case 2:case"end":return e.stop()}}),e)})))()}},Xo=Zo,Qo=Object(b["a"])(Xo,Qe,ti,!1,null,null,null),tl=Qo.exports,el=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1  px-0 px-md-3"},[i("AccountToolbarLeft")],1),i("div",{key:"CentralColumn-"+t.shortFriendsUpdater,staticClass:"col-12 col-md-11 pr-0 px-0 px-md-3",class:t.calcCentralBlockClass()},[i("div",{staticClass:"container"},[i("ProfileHeader",{key:"profileHeader-"+t.profileHeaderKeyUpdater,attrs:{refs:"profileHeader",userData:t.userData(t.profileHeaderKeyUpdater),isOwner:!0}}),t.userPhotos.length>0?[t.isPhotosDataReady?i("ProfilePhotos",{attrs:{photos:t.userPhotos,isOwner:!0}}):i("SmallSpinner")]:t._e(),i("WhatsNewBlock",{on:{addNewPost:t.addNewPost}}),t.posts&&t.posts.length>1?i("ProfileFilter",{on:{wallPostsSelect:t.wallPostsSelectHandler}}):t._e(),t.posts&&t.posts.length>0?t._l(t.filteredPosts,(function(e){return i("Post",{key:e.id,attrs:{post:e},on:{onDeletePost:t.onDeletePost,onRestorePost:t.onRestorePost,onEditPost:t.onEditPost,openVideoModal:t.openVideoModal,onShowUsersLikes:t.openLikeModal,onShare:t.onSharePost}})})):t.isStarted?t._e():i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},[t._v(" Извините, но сейчас нечего показывать. ")])]),t.isStarted?[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2)]),t.$root.$auth.frm.size>0?i("div",{key:"RightColumn-"+t.shortFriendsUpdater,staticClass:"col-sm-3 col-md-3 col-lg-3 col-xl-3 pr-0 d-none d-xl-block"},[i("FavoriteFriends",{ref:"favoriteFriends",attrs:{isNarrow:!1}}),i("ShortFriends",{key:"shortFriendsBlock-"+t.shortFriendsUpdater,ref:"shortFriends",attrs:{friends:t.getAllFriends()}})],1):t._e(),t.postEditModal.isVisible?i("PostEditModal",{attrs:{post:t.postForEdit},on:{hidePostEditModal:t.hidePostEditModal}}):t._e(),t.postVideoModal.isVisible?i("PostVideoModal",{attrs:{videoLink:t.postVideoModal.content.videoLink},on:{hideVideoModal:t.hideVideoModal}}):t._e(),t.postLikeModal.isVisible?i("PostLikeModal",{attrs:{postId:t.postLikeModal.content.postId},on:{hideLikeModal:t.hideLikeModal}}):t._e(),t.postRepostModal.isVisible?i("PostRepostModal",{attrs:{user:t.postRepostModal.content.postForRepost.author,post:t.postRepostModal.content.postForRepost},on:{hidePostRepostModal:t.hidePostRepostModal}}):t._e()],1)])},il=[],sl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.shortFriends.length>0?i("div",{staticClass:"plz-short-friends overflow-hidden",attrs:{id:"shortFriends"}},[i("div",{staticClass:"d-flex flex-row justify-content-start pb-3"},[i("h6",{staticClass:"plz-sf-title w-auto mt-2 ml-3"},[t._v("Друзья "),i("span",{staticClass:"plz-sf-subtitle ml-2"},[t._v(t._s(t.getTotalFriends()))])]),i("router-link",{staticClass:" plz-sf-subtitle w-auto ml-auto --align-self-end mr-3 mt-2",attrs:{to:"/friends",tag:"a"}},[t._v(" Все ")])],1),i("div",{staticClass:"plz-short-friends-list pb-2"},t._l(t.shortFriends,(function(t){return i("ShortFriendItem",{key:"sfItem-"+t.id,attrs:{friend:t}})})),1)]):t._e()},al=[],nl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-short-friends-item d-flex align-items-center py-2 px-3"},[i("router-link",{staticClass:"plz-short-friend-userpic text-body",attrs:{tag:"a",to:"/user-"+t.friend.id}},[i("img",{staticClass:"plz-short-userpic rounded-circle",attrs:{src:t.friend.userPic,alt:t.friend.firstName}}),t.friend.isOnline?i("span",{staticClass:"plz-short-isonline",attrs:{title:"в сети"}}):i("span",{staticClass:"plz-short-isoffline",attrs:{title:t.getSexTitle(t.friend)}})]),i("div",{staticClass:"plz-short-friend-title flex align-items-center mr-auto "},[i("router-link",{staticClass:"plz-short-friend-name",attrs:{to:"/user-"+t.friend.id}},[t._v(" "+t._s(t.friend.fullName)+" ")]),i("div",{staticClass:"plz-short-friend-status"},[i("p",{domProps:{innerHTML:t._s(t.$options.filters.mutualFriendsText(t.friend.mutualFriendsCount))}})])],1),i("button",{staticClass:"btn btn-link plz-short-friend-is-active text-body",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.goToDialogWithFriend()}}},[t.isInRedirecting?i("IconSpinner"):i("IconMessageShort")],1)],1)},rl=[],ol=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-message",class:t.clazz,attrs:{viewBox:"0 0 387 387",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M174.249 0.540985C148.138 3.20295 126.815 9.42485 103.999 21.0387C89.6043 28.3666 78.6544 35.7055 66.304 46.3028C47.4596 62.4731 32.4252 81.6353 21.0373 103.998C6.62394 132.303 0.00949097 159.668 0.00949097 190.997C0.00949097 226.275 8.98792 258.667 27.3113 289.496C42.2922 314.7 64.3405 337.107 90.0098 353.214C96.6692 357.392 110.944 364.668 118.866 367.922C141.835 377.355 165.577 381.984 190.998 381.984C208.113 381.984 222.411 380.19 239.248 375.932C249.17 373.423 264.229 367.888 272.86 363.577C282.428 358.798 283.566 358.841 303.248 364.728C380.066 387.702 378.171 387.161 380.785 386.866C385.173 386.372 387.36 383.434 386.827 378.748C386.671 377.371 384.423 369.157 381.833 360.495C370.508 322.627 362.278 294.933 361.181 290.999C359.215 283.946 359.675 280.579 363.702 272.585C369.424 261.225 374.756 245.485 377.961 230.497C383.418 204.969 383.418 177.025 377.961 151.498C374.257 134.173 369.363 120.501 360.96 103.998C349.572 81.6353 334.537 62.4731 315.693 46.3028C303.343 35.7055 292.393 28.3666 277.998 21.0387C255.315 9.49185 234.894 3.47544 209.096 0.737482C201.699 -0.0475064 181.157 -0.163505 174.249 0.540985ZM205.348 43.7603C221.997 45.1833 228.549 46.7143 243.248 52.6142C257.067 58.1611 269.734 64.9815 278.571 71.6324C288.045 78.7628 299.071 89.5547 307.808 100.249C313.934 107.746 321.672 120.722 326.147 130.998C334.918 151.141 336.622 157.627 338.23 176.989C339.192 188.58 339.192 193.415 338.23 205.005C336.556 225.168 334.506 232.509 324.161 255.401C320.368 263.795 318.747 268.618 317.241 275.996C315.647 283.802 316.66 290.613 322.286 309.909C324.781 318.465 324.955 321.26 323.108 323.106C321.262 324.953 318.467 324.779 309.911 322.284C290.615 316.658 283.804 315.645 275.998 317.239C268.592 318.751 263.786 320.37 255.308 324.211C233.001 334.316 226.828 336.078 206.998 338C194.694 339.193 188.435 339.241 176.649 338.234C160 336.811 153.448 335.28 138.749 329.38C124.93 323.833 112.263 317.013 103.426 310.362C93.9613 303.239 82.2169 291.744 73.7369 281.303C68.0855 274.344 60.1955 260.976 55.8496 250.996C47.0786 230.854 45.3746 224.368 43.7672 205.005C42.8047 193.415 42.8047 188.58 43.7672 176.989C45.3746 157.627 47.0786 151.141 55.8496 130.998C60.3245 120.722 68.0635 107.746 74.1889 100.249C82.9258 89.5547 93.9518 78.7628 103.426 71.6324C118.397 60.3646 145.55 48.2313 161.957 45.4778C175.908 43.1364 191.042 42.5374 205.348 43.7603Z"}})])},ll=[],cl={name:"IconMessageShort",props:{clazz:String}},ul=cl,dl=Object(b["a"])(ul,ol,ll,!1,null,null,null),ml=dl.exports,pl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{staticClass:"fas fa-spinner fa-spin text-info"})},hl=[],fl={name:"IconSpinner"},vl=fl,gl=Object(b["a"])(vl,pl,hl,!1,null,null,null),bl=gl.exports,Cl={name:"ShortFriendItem",components:{IconMessageShort:ml,IconSpinner:bl},mixins:[Wn,Gn]},yl=Cl,wl=Object(b["a"])(yl,nl,rl,!1,null,null,null),xl=wl.exports,kl={name:"ShortFriends",components:{ShortFriendItem:xl},props:{friends:Array},data:function(){return{isDataReady:!1}},computed:{shortFriends:function(){var t=this;if(!this.friends)return[];var e=this.friends.filter((function(e){return!t.$root.$auth.fm.checkIsFavorite(e.id)}));return e.slice(0,10)}},methods:{getTotalFriends:function(t){return this.$root.$auth.user.stats.totalFriendsCount}},created:function(){var t=this;this.$root.$on([this.$root.$auth.frm.restoreEventName,this.$root.$auth.frm.loadEventName,this.$root.$auth.frm.updateEventName,this.$root.$auth.fm.restoreEventName,this.$root.$auth.fm.loadEventName,this.$root.$auth.fm.updateEventName],(function(){t.$forceUpdate()}))}},_l=kl,$l=Object(b["a"])(_l,sl,al,!1,null,null,null),Ml=$l.exports,Il=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row plz-profile-header mb-4",attrs:{id:"profileHeader"}},[i("div",{staticClass:"d-flex align-items-stretch offset-1 col-10 offset-sm-3 col-sm-6 offset-md-4 col-md-4 offset-lg-0 col-lg-4 col-xl-3 pl-lg-0 mb-4 mb-lg-0"},[i("div",{staticClass:"plz-profile-userpic-container d-flex flex-column  bg-white-br20 overflow-hidden"},[i("div",{staticClass:"plz-profile-userpic-wrapper overflow-hidden position-relative d-flex align-items-center justify-content-center mx-auto m-lg-0",class:{"flex-grow-1":3===t.userData.privacySettings.pageType}},[i("img",{ref:"userAvatar",class:{"plz-profile-userpic-img":3===t.userData.privacySettings.pageType},attrs:{src:t.userAvatar,alt:t.userData.fullName}}),!0===t.isOwner?i("label",{staticClass:"user-avatar-file-label m-0 cursor-pointer",attrs:{for:"userAvatarFile"}}):t._e(),i("input",{ref:"userAvatarFile",staticClass:"d-none",attrs:{id:"userAvatarFile",type:"file"},on:{change:function(e){return t.uploadUserAvatar()}}})]),t.isOwner?i("div",{staticClass:"plz-profile-userpic-footer mt-auto"},[i("div",{staticClass:"plz-profile-userpic-edit file-label d-flex align-items-center justify-content-between"},[i("router-link",{staticClass:"btn align-items-center justify-content-center d-flex w-75 border-right m-0",attrs:{tag:"a",to:"/account"}},[t._v("Редактировать")]),i("button",{staticClass:"btn dropdown-menu-btn align-items-center justify-content-center d-flex w-25",attrs:{id:t.configurationMenuID,type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"опции"}},[i("span",{staticClass:"ps-dot"}),i("span",{staticClass:"ps-dot"}),i("span",{staticClass:"ps-dot"})]),i("div",{staticClass:"dropdown-menu dropdown-menu-right py-3",attrs:{"aria-labelledby":t.configurationMenuID}},[i("div",{staticClass:"nav-item "},[i("router-link",{staticClass:"dropdown-item px-0 py-1 px-3",attrs:{tag:"a",to:"/account"}},[t._v("Настройки")])],1),i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-0 py-1 px-3",attrs:{tag:"a",to:"/black-list"}},[t._v("Чёрный список")])],1),i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-0 py-1 px-3",attrs:{tag:"a",to:"/friends"}},[t._v("Друзья")])],1),i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-0 py-1 px-3",attrs:{tag:"a",to:"/follow-list"}},[t._v("Подписки")])],1),i("div",{staticClass:"nav-item "},[i("router-link",{staticClass:"dropdown-item px-0 py-1 px-3",attrs:{tag:"a",to:"/communities"}},[t._v("Сообщества")])],1)])],1)]):[3!==t.userData.privacySettings.pageType?i("div",{staticClass:"plz-profile-userpic-footer mt-auto"},[i("div",{staticClass:"plz-profile-userpic-edit file-label d-flex align-items-center justify-content-between"},[i("button",{staticClass:"btn align-items-center justify-content-center d-flex w-75 border-right m-0",style:{width:t.fullWidth},on:{click:function(e){return t.showPersonalMsgDialog()}}},[t._v("Написать")]),i("button",{staticClass:"btn dropdown-menu-btn align-items-center justify-content-center d-flex w-25",attrs:{id:t.configurationMenuID,type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"меню"}},[i("span",{staticClass:"ps-dot"}),i("span",{staticClass:"ps-dot"}),i("span",{staticClass:"ps-dot"})]),i("div",{key:"userActionBlock-"+t.$root.$friendsKeyUpdater,staticClass:"dropdown-menu dropdown-menu-right py-3 ",attrs:{"aria-labelledby":t.configurationMenuID}},[i("div",{staticClass:"nav-item "},[t.isCanAddToFriends()?i("p",{staticClass:"dropdown-item px-0 py-1 m-0 px-3",attrs:{title:"Добавить в друзья"},on:{click:function(e){return t.sendFriendshipInvitation(t.userData.id,t.userData.fullName)}}},[t._v("Добавить в друзья")]):i("p",{staticClass:"dropdown-item px-0 py-1 m-0 px-3",attrs:{title:"Удалить из друзей"},on:{click:function(e){return t.stopFriendship(t.userData.id)}}},[t._v("Удалить из друзей")])]),t.userData.stats.isFriend?t._e():i("div",{staticClass:"nav-item"},[t.userData.stats.isFollow?i("p",{staticClass:"dropdown-item px-0 py-1 m-0 px-3",attrs:{title:"Отписаться"},on:{click:t.unFollow}},[t._v("Отписаться")]):i("p",{staticClass:"dropdown-item px-0 py-1 m-0 px-3",attrs:{title:"Подписаться"},on:{click:t.follow}},[t._v("Подписаться")])]),t.userData.isOwner?t._e():i("div",{staticClass:"nav-item"},[t.isAddedToBlacklist?i("p",{staticClass:"dropdown-item px-0 py-1 m-0 px-3",attrs:{title:"Удалить с чёрного списка"},on:{click:function(e){return t.deleteFromBlacklist(t.userData.id)}}},[t._v("Удалить с чёрного списка")]):i("p",{staticClass:"dropdown-item px-0 py-1 m-0 px-3",attrs:{title:"Добавить в чёрный список"},on:{click:t.addToBlacklist}},[t._v("Добавить в чёрный список")])]),t.userData.isOwner?t._e():i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-0 py-1 m-0 px-3",attrs:{tag:"a",to:{path:"/user-"+t.userData.id+"/followers",params:{id:t.userData.id}}}},[t._v(" На кого подписан ")])],1)])])]):t._e()]],2)]),i("div",{staticClass:"col-12  col-lg-8 col-xl-9 px-0 pt-4 plz-profile-userdetails"},[i("div",{staticClass:"w-100 bg-white-br20 px-3 px-md-5 pb-3"},[i("div",{staticClass:"d-flex justify-content-between align-items-center mb-2"},[t.isOwner?i("h2",{staticClass:"plz-user-name mb-0 pr-4"},[t._v(t._s(t.userData.fullName))]):i("router-link",{staticClass:"plz-user-name mb-0 pr-4",attrs:{to:{name:"PersonalPage",params:{id:t.userData.id}},tag:"h2"}},[t._v(t._s(t.userData.fullName))]),t.userData.isOnline?i("span",{staticClass:"online text-nowrap"},[t._v("В сети")]):t._e()],1),i("table",{staticClass:"plz-user-profile-details table table-borderless mt-2"},[i("tbody",[t.userData.profile.birthday?i("tr",[i("td",{},[t._v("Дата рождения:")]),i("td",{},[t._v(t._s(t._f("toLongDate")(t.userData.profile.birthday)))])]):t._e(),i("tr",[i("td",{},[t._v("Город:")]),i("td",{},[t.userData.country&&t.userData.city.title?[i("IconLocation"),t._v(" "+t._s(t.userData.locationText)+" ")]:[t._v("Не указано")]],2)]),t.userData.relationshipId?i("tr",[i("td",{},[t._v("Семейное положение:")]),i("td",{},[t._v(" "+t._s(t.userData.family)+" "),t.userData.profile.relationshipUser?[t._v(" "+t._s(t.userData.profile.relationshipUserText)+" "),i("router-link",{attrs:{to:{name:"PersonalPage",params:{id:t.userData.profile.relationshipUser.id}}}},[t._v(" "+t._s(t.userData.profile.partnerFullname)+" ")])]:t._e()],2)]):t._e()])])]),i("ProfileStats",{key:"ProfileStats-"+t.profileStatsKeyUpdater,ref:"profileStats",attrs:{userData:t.userData,isOwner:t.isOwner,keyUpdater:t.profileStatsKeyUpdater}})],1)])},Pl=[],Sl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-location",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve"}},[i("g",[i("path",{attrs:{d:"M256,0C153.755,0,70.573,83.182,70.573,185.426c0,126.888,165.939,313.167,173.004,321.035    c6.636,7.391,18.222,7.378,24.846,0c7.065-7.868,173.004-194.147,173.004-321.035C441.425,83.182,358.244,0,256,0z M256,278.719    c-51.442,0-93.292-41.851-93.292-93.293S204.559,92.134,256,92.134s93.291,41.851,93.291,93.293S307.441,278.719,256,278.719z"}})])])},Ll=[],Rl={name:"IconLocation"},Nl=Rl,Al=Object(b["a"])(Nl,Sl,Ll,!1,null,null,null),Fl=Al.exports,zl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-profile-userdetails-footer d-flex justify-content-around px-2 px-md-4"},[t.usrFollowersNumber()>0?i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4"},[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.usrFollowersNumber()))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Подписчиков")])]):i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4"},[i("span",{staticClass:"numbers-bottom mt-auto"},[t._v("Нет подписчиков")])]),t.isOwner?[i("router-link",{key:"profileFriendsCounter-"+t.$root.$friendsKeyUpdater,staticClass:"p-0 d-flex",attrs:{tag:"a",to:"/friends"}},[t.usrFriendsNumber()>0?i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.usrFriendsNumber()))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Друзей")])]):i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-bottom"},[t._v("Нет друзей")])])])]:t.userData.stats.isFriend?[i("router-link",{staticClass:"p-0 d-flex",attrs:{tag:"a",to:{path:"/user-"+t.userData.id+"/friends",params:{id:t.userData.id}}}},[t.usrFriendsNumber()>0?i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.userData.stats.totalFriendsCount))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Друзей")])]):i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-bottom"},[t._v("Нет друзей")])])])]:[i("div",[t.usrFriendsNumber()>0?i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.userData.stats.totalFriendsCount))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Друзей")])]):i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-bottom"},[t._v("Нет друзей")])])])],t.isOwner?[i("router-link",{staticClass:"p-0 d-flex",attrs:{tag:"a",to:"/photoalbums-list"}},[i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[t.userImageNumber()?[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.userImageNumber()))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Фотографий")])]:[i("span",{staticClass:"numbers-bottom"},[t._v("Нет фотографий")])]],2)])]:t.userData.stats.isFriend?[i("router-link",{staticClass:"p-0 d-flex",attrs:{tag:"a",to:{path:"/user-"+t.userData.id+"/albums",params:{id:t.userData.id}}}},[i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[t.userImageNumber()?[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.userImageNumber()))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Фотографий")])]:[i("span",{staticClass:"numbers-bottom"},[t._v("Нет фотографий")])]],2)])]:[i("div",[i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[t.userImageNumber()?[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.userImageNumber()))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Фотографий")])]:[i("span",{staticClass:"numbers-bottom"},[t._v("Нет фотографий")])]],2)])],t.isOwner?[i("router-link",{staticClass:"p-0 d-flex",attrs:{tag:"a",to:"/videos"}},[t.usrVideosNumber()>0?i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.usrVideosNumber()))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Видео")])]):i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-bottom"},[t._v("Нет видео")])])])]:t.userData.stats.isFriend?[t.usrVideosNumber()>0?i("router-link",{staticClass:"p-0 d-flex",attrs:{tag:"a",to:{path:"/user-"+t.userData.id+"/videos",params:{id:t.userData.id}}}},[i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.usrVideosNumber()))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Видео")])])]):i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-bottom"},[t._v("Нет видео")])])]:[i("div",[t.usrVideosNumber()>0?i("div",[i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-top",domProps:{innerHTML:t._s(t.sBeaty(t.usrVideosNumber()))}}),i("span",{staticClass:"numbers-bottom"},[t._v("Видео")])])]):i("div",{staticClass:"plz-profile-userdetails-numbers text-center py-2 px-2 py-md-4 px-md-4 mt-auto"},[i("span",{staticClass:"numbers-bottom"},[t._v("Нет видео")])])])]],2)},El=[],jl={name:"ProfileStats",props:{userData:Qi["a"],isOwner:Boolean,keyUpdater:Number},methods:{sBeaty:function(t){return this.$options.filters.statsBeauty(t)},usrFriendsNumber:function(){return this.userData.stats.totalFriendsCount},usrFollowersNumber:function(){return this.userData.stats.followCount},usrVideosNumber:function(){return this.userData.stats.videosCount},userImageNumber:function(){return this.userData.stats.imageCount}}},Dl=jl,Ol=Object(b["a"])(Dl,zl,El,!1,null,null,null),Tl=Ol.exports,Hl={methods:{sendFriendshipInvitation:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=null,s.prev=1,s.next=4,i.$root.$api.$friend.sendFriendshipInvitation(t);case 4:a=s.sent,s.next=11;break;case 7:return s.prev=7,s.t0=s["catch"](1),window.console.warn(s.t0.detailMessage),s.abrupt("return");case 11:null!==a&&(200===a.status&&i.$notify('Приглашение дружбы для <b class="friend-name">'.concat(e,"</b> отправлено!")),422===a.status&&i.$notify(a.message));case 12:case"end":return s.stop()}}),s,null,[[1,7]])})))()},stopFriendship:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$friend.friendshipStop(t);case 4:s=i.sent,i.next=11;break;case 7:throw i.prev=7,i.t0=i["catch"](1),window.console.warn(i.t0.detailMessage),i.t0;case 11:e.isPrepareToRemoved=!0,s&&(e.isRemoved=!0,a=e.$root.$auth.frm.get(t).toJSON(),e.$root.$auth.fm.removeFromFavorites(t),e.$root.$auth.frm.stopFriendship(t),e.$root.$auth.friendsDecrease(),e.$root.$friendsKeyUpdater--,e.$root.$favoritesKeyUpdater--,e.$emit("FriendshipStop",{friendId:t}),e.$notify('<b class="friend-name">'.concat(a.profile.firstName," ").concat(a.profile.lastName,"</b> больше не Ваш друг")));case 13:case"end":return i.stop()}}),i,null,[[1,7]])})))()}}},Ul={data:function(){return{isAddedToBlacklist:!1}},methods:{addToBlacklist:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isAddedToBlacklist){e.next=3;break}return t.$root.$notify("Пользователь ".concat(t.userData.firstName," ").concat(t.userData.lastName," уже внесен в чёрный список"),"bg-warning",3),e.abrupt("return",!0);case 3:return null,e.prev=4,e.next=7,t.$root.$api.$users.blacklistAdd(t.userData.id);case 7:e.sent,e.next=17;break;case 10:if(e.prev=10,e.t0=e["catch"](4),422!==e.t0.status){e.next=16;break}return console.log("выбранный пользователь уже добавлен в Ваш чёрный список"),t.isAddedToBlacklist=!0,e.abrupt("return");case 16:window.console.warn(e.t0.detailMessage);case 17:t.isAddedToBlacklist=!0,t.$root.$notify("Вы добавили пользователя ".concat(t.userData.firstName," ").concat(t.userData.lastName," в чёрный список"));case 19:case"end":return e.stop()}}),e,null,[[4,10]])})))()},deleteFromBlacklist:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return null,i.prev=1,i.next=4,e.$root.$api.$users.blacklistDelete(t);case 4:i.sent,i.next=11;break;case 7:throw i.prev=7,i.t0=i["catch"](1),window.console.warn(i.t0.detailMessage),i.t0;case 11:e.isAddedToBlacklist=!1,e.$root.$notify("Вы удалили пользователя ".concat(e.userData.firstName," ").concat(e.userData.lastName," из чёрного списка"));case 13:case"end":return i.stop()}}),i,null,[[1,7]])})))()}}},Vl=i("093c"),Bl={name:"ProfileHeader",components:{ProfileStats:Tl,IconLocation:Fl},mixins:[Hl,Ul],props:{userData:Qi["a"],isOwner:Boolean,isInBlacklist:Boolean},data:function(){return{configurationMenuID:"configurationMenuUser",profileStatsKeyUpdater:0}},computed:{fullWidth:function(){return this.isCanAddToFriends?"full-width":"100%"},userAvatar:function(){var t,e;return(null===(t=this.userData.avatar)||void 0===t||null===(e=t.image)||void 0===e?void 0:e.medium.path)||this.userData.userPic},isLockedProfile:function(){return!(!(this.userData&&this.userData.privacySettings&&this.userData.stats)||(2!==this.userData.privacySettings.pageType||this.userData.stats.isFriend)&&3!==this.userData.privacySettings.pageType)}},methods:{isCanAddToFriends:function(){return!this.$root.$auth.frm.get(this.userData.id)},showPersonalMsgDialog:function(){this.$emit("ShowPersonalMsgModal",{user:this.userData,src:this.$route.name})},uploadUserAvatar:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s,a,n,r,o,l,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0===t.isOwner){e.next=2;break}return e.abrupt("return");case 2:if(i=t.getFormData(),i){e.next=5;break}return e.abrupt("return");case 5:if(s=i.get("image"),a=s.size,!(a>2e6)){e.next=9;break}return t.showErrorOnLargeFile(),e.abrupt("return");case 9:return n=null,e.prev=10,e.next=13,t.$root.$api.userProfileImage(i);case 13:n=e.sent,e.next=22;break;case 16:if(e.prev=16,e.t0=e["catch"](10),422!==e.t0.status){e.next=21;break}return t.showErrorOnLargeFile(),e.abrupt("return");case 21:console.warn(e.t0.detailMessage);case 22:null!==n&&(t.$root.$auth.user.avatar=new Vl["a"](n.data),t.$root.$auth.user.userPic=null===(r=t.$root.$auth.user.avatar)||void 0===r||null===(o=r.image)||void 0===o?void 0:o.thumb.path,t.$refs.userAvatar.src=(null===(l=t.$root.$auth.user.avatar)||void 0===l||null===(c=l.image)||void 0===c?void 0:c.medium.path)||t.$root.$auth.user.userPic,t.$root.$auth.storeUserData(),t.$root.$emit("updateUserAvatar",{}));case 23:case"end":return e.stop()}}),e,null,[[10,16]])})))()},getFormData:function(){var t=this.$refs.userAvatarFile.value,e=t.split(".").pop().toLowerCase(),i=["png","jpg","jpeg","bmp","webp","gif"];if(!i.includes(e))return this.$alert('<h4 class="text-white">Ошибка</h4><div class="alert alert-danger">\nНедопустимое расширение у файла <b>'.concat(t,'</b><br />\nДопустимы только: <b class="text-success">').concat(i.join(", "),"</b>\n</div>"),"bg-danger",30),!1;var s=new FormData;return s.append("image",this.$refs.userAvatarFile.files[0]),s.append("tag","primary"),this.$refs.userAvatarFile.value="",s},showErrorOnLargeFile:function(){this.$alert('<h4 class="text-white">Ошибка</h4>\n        <div class="alert alert-danger">\n            Превышен максимальный размер файла.\n            <br />\n            Максимальный размер файла:\n            <b class="text-success">2 MB</b>\n        </div>',"bg-danger",30)},follow:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$users.follow(t.userData.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:return i?i.status&&422===i.status?t.$root.$alert(i.message,"bg-info",3):(t.userData.stats.isFollow=!0,t.userData.stats.followCount=t.userData.stats.followCount+1,t.$root.$notify(i.message)):t.$root.$alert("Не получилось подписаться","bg-warning",3),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))()},unFollow:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$users.unFollow(t.userData.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:return i?i.status&&422===i.status?t.$root.$alert(i.message,"bg-info",3):(t.userData.stats.isFollow=!1,t.userData.stats.followCount=t.userData.stats.followCount-1,t.$root.$notify(i.message)):t.$root.$alert("Не получилось отписаться","bg-warning",3),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))()}},created:function(){var t=this;this.$root.$on("UserIsUpdated",(function(){t.$refs&&t.$refs.profileStats&&(t.profileStatsKeyUpdater++,t.$refs.profileStats.$forceUpdate())}))},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isAddedToBlacklist=t.isInBlacklist;case 1:case"end":return e.stop()}}),e)})))()}},Yl=Bl,ql=Object(b["a"])(Yl,Il,Pl,!1,null,null,null),Kl=ql.exports,Gl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.photos.length||t.isPhotosDataReady?[t.photos.length?i("div",{staticClass:"row bg-white-br20 p-4 mb-4",attrs:{id:"profilePhotos"}},[i("div",{staticClass:"col-12 bg-white-br20 p-0"},[i("div",{staticClass:"w-100 d-flex flex-row justify-content-between align-items-center"},[i("div",{},[t.userImageNumber>0?[i("h6",{staticClass:"profilePhotos-title my-0"},[t._v("Фотографии "),i("span",{staticClass:"profilePhotos-desc",domProps:{innerHTML:t._s(t.sBeaty(t.userImageNumber))}})])]:t._e()],2),t._m(0)]),i("div",{staticClass:"d-flex flex-row plz-profile-photos-list pt-3"},[i("vue-custom-scrollbar",{staticClass:"plz-latest-entries-list d-flex justify-content-between justify-content-sm-start pb-3",attrs:{settings:t.customScrollbarSettings}},[t.photos.length>0?i("ProfileGallery",{attrs:{type:"album",profilePhotos:t.profilePhotos,images:t.photos,isOwner:t.isOwner}}):i("div",{staticClass:"mx-auto"},[t._v("Нет фотографий")])],1)],1)])]):t._e()]:i("Spinner")],2)},Wl=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profilePhotos-desc d-none"},[i("a",{attrs:{href:"#onmap"}},[t._v("Показать на карте")])])}],Jl=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile-photos"},[t.profilePhotos?i("div",{staticClass:"w-100  d-flex flex-row plz-profile-photos-list"},t._l(t.images,(function(e){return i("div",{key:e.id,staticClass:"profile-photos-item"},[i("div",{staticClass:"plz-profile-photo-item my-0 ml-0 mr-3",class:{"plz-gallery-image-mores":e.isMore},on:{click:function(i){return t.showImage(e)}}},[i("img",{attrs:{src:e.medium.path,alt:e.name},on:{click:function(i){return t.showImage(e)}}})]),t.isOwner?i("button",{staticClass:"btn-close",attrs:{"aria-label":"delete"},on:{click:function(i){return t.onDeleteImage(e.id)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})]):t._e()])})),0):t._e(),t.activeImage?i("div",{staticClass:"plz-gallery__show"},[i("GalleryViewer",{attrs:{images:t.images,"active-image":t.activeImage},on:{showImage:t.showImage,close:t.closeAlbumModal}}),i("GalleryDescription",{attrs:{comments:t.comments,post:{id:0},image:t.activeImage,type:t.type},on:{updateComments:t.updateComments}})],1):t._e()])},Zl=[],Xl=i("7be8"),Ql=i("7a8b"),tc={name:"ProfileGallery",components:{GalleryDescription:Ql["a"],GalleryViewer:Xl["a"]},props:{profilePhotos:Boolean,images:{type:Array,required:!0},type:{type:String},isOwner:Boolean},data:function(){return{activeImage:null,comments:[]}},computed:{viewImages:function(){return this.images.slice(0,this.moreCount)},firstImageView:function(){return this.images.slice(0,1).pop()},lastImageView:function(){return this.viewImages.slice(-1).pop()}},methods:{onDeleteImage:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$photoalbums.deleteImage(t);case 4:s=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),console.warn(i.t0.detailMessage);case 10:s&&(a=e.images.findIndex((function(e){return e.id===t})),e.images.splice(a,1),n=JSON.parse(localStorage.getItem("pliziUser")),n.data.stats.imageCount?n.data.stats.imageCount--:n.data.stats.imageCount=0,localStorage.setItem("pliziUser",JSON.stringify(n)));case 11:case"end":return i.stop()}}),i,null,[[1,7]])})))()},getCommentsOfAlbum:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.getAlbumComments(t);case 3:s=i.sent,e.comments=s.data.list.map((function(t){return new jr["a"](t)})),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()},updateComments:function(t){var e=t.comments,i=t.id;this.activeImage.id===i&&(this.comments=e)},showImage:function(t){this.getCommentsOfAlbum(t.id),this.activeImage=this.images.find((function(e){return e.id===t.id}));var e="".concat(this.$router.currentRoute.path,"?activeImageId=").concat(t.id,"&galleryType=").concat(this.type);history.pushState({url:e},"",e)},closeAlbumModal:function(){var t=this.$router.currentRoute.path;history.pushState({url:t},"",t),this.activeImage=null}},created:function(){var t=this.$router.history.current.query.activeImageId,e=this.$router.history.current.query.galleryType;if(e===this.type&&t){var i=this.images.find((function(e){return e.id.toString()===t}));i&&this.showImage(i)}}},ec=tc,ic=Object(b["a"])(ec,Jl,Zl,!1,null,null,null),sc=ic.exports,ac=i("57bd"),nc=i("382c"),rc=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(t){var s;return Object(Nt["a"])(this,i),s=e.call(this,t),s._stats=null,s._privacySettings=null,s._email="",s}return Object(At["a"])(i,[{key:"updateAuthUser",value:function(t){this.updateUserData(t),this._email=t.email?(t.email+"").trim():this.email,this._stats=t.stats?new ac["a"](t.stats):this.stats,this._privacySettings=t.privacySettings?new nc["a"](t.privacySettings):this.privacySettings}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){var t=Object(ln["a"])(Object(on["a"])(i.prototype),"toJSON",this).call(this);return delete t.mutualFriendsCount,t.email=this._email,t.privacySettings=this.privacySettings.toJSON(),t.stats=this.stats.toJSON(),t}},{key:"email",get:function(){return this._email}},{key:"stats",get:function(){return this._stats}},{key:"privacySettings",get:function(){return this._privacySettings}}]),i}(Qi["a"]),oc={name:"ProfilePhotos",components:{ProfileGallery:sc,vueCustomScrollbar:Ce.a,Spinner:Gi},props:{photos:Array,isPhotosDataReady:Boolean,profileData:Qi["a"]|rc,isOwner:Boolean},data:function(){return{profilePhotos:!0,customScrollbarSettings:{maxScrollbarLength:60,suppressScrollY:!0,wheelPropagation:!1}}},computed:{userData:function(){return this.$root.$auth.user},userImageNumber:function(){return this.profileData?this.profileData.stats.imageCount:this.userData.stats.imageCount}},methods:{sBeaty:function(t){return this.$options.filters.statsBeauty(t)}}},lc=oc,cc=Object(b["a"])(lc,Gl,Wl,!1,null,null,null),uc=cc.exports,dc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row bg-white-br20 mb-4 pt-0 px-4",attrs:{id:"profileFilter"}},[i("div",{staticClass:"col-12 d-flex flex-wrap align-items-center justify-content-between flex-column-reverse flex-md-row px-0 "},[t.firstName?i("nav",{staticClass:"nav profile-filter-links",attrs:{role:"tablist"}},[i("span",{staticClass:"nav-link py-3 px-1 mr-4",class:{active:"all"===t.wMode},attrs:{id:"tabAllPosts",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.wallPostsSelect("all")}}},[t._v("Все записи")]),i("span",{staticClass:"nav-link py-3 px-1 mr-4",class:{active:"user"===t.wMode},attrs:{id:"tabMyPosts",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.wallPostsSelect("user")}}},[t._v("Записи "+t._s(t.firstName))])]):i("nav",{staticClass:"nav profile-filter-links ",attrs:{role:"tablist"}},[i("span",{staticClass:"nav-link py-3 px-1 mr-4",class:{active:"all"===t.wMode},attrs:{id:"tabAllPosts",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.wallPostsSelect("all")}}},[t._v("Все записи")]),i("span",{staticClass:"nav-link py-3 px-1 mr-4",class:{active:"my"===t.wMode},attrs:{id:"tabMyPosts",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.wallPostsSelect("my")}}},[t._v("Мои записи")]),i("span",{staticClass:"nav-link py-3 px-1 mr-4",class:{active:"archive"===t.wMode},attrs:{id:"tabArchivePosts",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.wallPostsSelect("archive")}}},[t._v("Архив")])]),i("button",{staticClass:"btn btn-link mx-1 px-1 btn-add-file d-none",attrs:{type:"button"}},[i("IconSearch",{staticStyle:{width:"15px",height:"16px"}})],1),i("div",{staticClass:"col-12 d-flex d-md-none  align-items-center form-inline mb-3 pl-0 pr-0 position-relative overflow-hidden rounded-pill mt-4"},[i("div",{staticClass:"form-inline  position-relative w-100",class:{isFocused:t.isFocused}},[i("input",{ref:"txtNewsListSearch",staticClass:"top-search form-control form-control  w-100",attrs:{id:"txtNewsListSearch",type:"text",placeholder:"Поиск","aria-label":"Поиск"},domProps:{value:t.lastSearch},on:{blur:t.onBlur,focus:t.onFocus}}),i("button",{staticClass:"btn btn-search h-100",attrs:{type:"button"}},[i("IconSearch",{staticStyle:{width:"15px",height:"15px"}})],1)])])])])},mc=[],pc={name:"ProfileFilter",components:{IconSearch:zs},props:{firstName:{type:String,default:null}},data:function(){return{wMode:"all",isFocused:!1,lastSearch:""}},methods:{wallPostsSelect:function(t){this.wMode=t,this.$emit("wallPostsSelect",{wMode:t})},onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1}}},hc=pc,fc=Object(b["a"])(hc,dc,mc,!1,null,null,null),vc=fc.exports,gc=function(){function t(e){var i=this;Object(Nt["a"])(this,t),this._id=null,this._author=null,this._title=null,this._description=null,this._user=null,this._community=null,this._createdAt=null,this._images=null,this._lastImage=null,this._id=e.id,this._author=new Qi["a"](e.user),this._title=e.title,this._description=e.description,this._user=e.user?new Qi["a"](e.user):null,this._community=e.community?new rs(e.community):null,this._createdAt=e.createdAt,e.images&&(this._images=[],e.images.list.forEach((function(t){i._images.push(new Ea["a"](t))}))),this._lastImage=e.lastImage?new Ea["a"](e.lastImage):null}return Object(At["a"])(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"author",get:function(){return this._author},set:function(t){this._author=t}},{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"description",get:function(){return this._description},set:function(t){this._description=t}},{key:"user",get:function(){return this._user},set:function(t){this._user=t}},{key:"community",get:function(){return this._community},set:function(t){this._community=t}},{key:"createdAt",get:function(){return this._createdAt},set:function(t){this._createdAt=t}},{key:"images",get:function(){return this._images},set:function(t){this._images=t}},{key:"lastImage",get:function(){return this._lastImage},set:function(t){this._lastImage=t}}]),t}(),bc=gc,Cc={data:function(){return{userPhotos:[],isPhotosDataReady:!1,photoAlbums:null,isDataReady:!1,isAlbumDataReady:!1,photoAlbum:null}},methods:{getUserPhotos:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.userPhotos=[],s=null,i.prev=2,i.next=5,e.$root.$api.$users.lastPhotos(t);case 5:s=i.sent,i.next=12;break;case 8:throw i.prev=8,i.t0=i["catch"](2),window.console.warn(i.t0.detailMessage),i.t0;case 12:s&&(s.forEach((function(t){e.userPhotos.push(new Ea["a"](t))})),e.isPhotosDataReady=!0);case 13:case"end":return i.stop()}}),i,null,[[2,8]])})))()},getPhotoAlbums:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$users.getUserPhotoalbums(t);case 4:s=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),console.warn(i.t0.detailMessage);case 10:s&&(e.photoAlbums=s.map((function(t){return new bc(t)})),e.isDataReady=!0);case 11:case"end":return i.stop()}}),i,null,[[1,7]])})))()},getPhotoAlbum:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$photoalbums.getPhotoAlbum(t);case 4:s=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),console.warn(i.t0.detailMessage);case 10:s&&(e.photoAlbum=new bc(s),e.isAlbumDataReady=!0);case 11:case"end":return i.stop()}}),i,null,[[1,7]])})))()}}},yc={name:"ProfilePage",components:{AccountToolbarLeft:ks,FavoriteFriends:sr,ShortFriends:Ml,ProfileHeader:Kl,ProfilePhotos:uc,WhatsNewBlock:cr,ProfileFilter:vc,Post:Hr,PostEditModal:_o,PostVideoModal:Lo,PostLikeModal:Go,PostRepostModal:Uo,SmallSpinner:J["a"]},mixins:[Wo,Cc],data:function(){return{posts:[],filterMode:"all",userPhotos:[],isPhotosDataReady:!1,postEditModal:{isVisible:!1},postForEdit:null,postVideoModal:{isVisible:!1,content:{videoLink:null}},postLikeModal:{isVisible:!1,content:{postId:null}},postRepostModal:{isVisible:!1,content:{postForRepost:null}},profileHeaderKeyUpdater:0}},computed:{shortFriendsUpdater:function(){return this.$root.$friendsKeyUpdater+"-"+this.$root.$favoritesKeyUpdater},filteredPosts:function(){switch(this.filterMode){case"my":return this.posts.filter((function(t){return!t.sharedFrom}));case"archive":return this.posts.filter((function(t){return t.isArchivePost}))}return this.posts}},methods:{userData:function(){return this.$root.$auth.user},calcCentralBlockClass:function(){return{"col-xl-8 pr-xl-3":this.$root.$auth.frm.size>0,"col-xl-11":0===this.$root.$auth.frm.size}},getAllFriends:function(){return this.$root.$auth.frm.asArray()},wallPostsSelectHandler:function(t){this.filterMode=t.wMode},openVideoModal:function(t){t.videoLink&&(this.postVideoModal.isVisible=!0,this.postVideoModal.content.videoLink=t.videoLink)},hideVideoModal:function(){this.postVideoModal.isVisible=!1},addNewPost:function(t){this.posts.unshift(new zr(t))},startTimer:function(t){var e=this;setTimeout((function(){var i=e.posts.findIndex((function(e){return e.id===t.id}));e.posts.splice(i,1)}),5e3)},onEditPost:function(t){this.postEditModal.isVisible=!0,this.postForEdit=t},hidePostEditModal:function(){this.postEditModal.isVisible=!1,this.postForEdit=null},onSharePost:function(t){this.postRepostModal.isVisible=!0,this.postRepostModal.content.postForRepost=t},hidePostRepostModal:function(){this.postRepostModal.isVisible=!1,this.postRepostModal.content.postForRepost=null},openLikeModal:function(t){this.postLikeModal.isVisible=!0,this.postLikeModal.content.postId=t},hideLikeModal:function(){this.postLikeModal.isVisible=!1,this.postLikeModal.content.postId=null},getPosts:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:50,a=t.length>1&&void 0!==t[1]?t[1]:0,n=null,e.isStarted=!0,i.prev=4,i.next=7,e.$root.$api.$post.getPosts(s,a);case 7:n=i.sent,i.next=13;break;case 10:i.prev=10,i.t0=i["catch"](4),e.isStarted=!1;case 13:if(null===n){i.next=17;break}return e.isStarted=!1,n.map((function(t){e.posts.push(new zr(t))})),i.abrupt("return",n.length);case 17:case"end":return i.stop()}}),i,null,[[4,10]])})))()},onDeletePost:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.deletePost(t);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 9:s&&(a=e.posts.find((function(e){return e.id===t})),a.deleted=!0,e.startTimer(a));case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()},onRestorePost:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.restorePost(t);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 9:s&&(a=e.posts.find((function(e){return e.id===t})),a.deleted=!1);case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()}},created:function(){var t=this;this.$root.$on("UserIsUpdated",(function(){t.$refs&&t.$refs.shortFriends&&t.$refs.shortFriends.$forceUpdate()}))},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUserPhotos(t.$root.$auth.user.id);case 2:return e.next=4,t.getPosts();case 4:case"end":return e.stop()}}),e)})))()}},wc=yc,xc=Object(b["a"])(wc,el,il,!1,null,null,null),kc=xc.exports,_c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1  px-0 px-md-3"},[i("AccountToolbarLeft")],1),i("div",{key:"CentralColumn-"+t.$root.$friendsKeyUpdater,staticClass:"col-12 col-md-11 col-lg-11 col-xl-8 pr-0 px-0 px-md-3",class:t.calcCentralBlockClass()},[i("div",{staticClass:"container"},[t.isDataReady?i("ProfileHeader",{ref:"personalProfileHeader",attrs:{isInBlacklist:t.profileData.stats.isInBlacklist,userData:t.profileData},on:{ShowPersonalMsgModal:t.onShowPersonalMsgModal}}):i("Spinner"),t.isLockedProfile?[i("div",{staticClass:"row"},[i("div",{staticClass:"card locked-profile-notify bg-white-br20 border-0 w-100"},[i("div",{staticClass:"card-body d-flex flex-column justify-content-center align-items-center"},[i("div",{staticClass:"mb-3"},[i("IconUnlock")],1),i("div",{staticClass:"font-weight-bold text-uppercase"},[t._v(" Это закрытый профиль ")]),3!==this.profileData.privacySettings.pageType?i("div",{staticClass:"text-center text-secondary mt-2 w-50"},[t._v(" Добавьте пользователя "+t._s(this.profileData.profile.firstName)+" в друзья, чтобы смотреть записи, фотографии и другие материалы ")]):t._e()])])])]:[i("router-view",{attrs:{name:"userLastPhotos",profileData:t.profileData,isPhotosDataReady:t.isPhotosDataReady,photos:t.userPhotos,isOwner:!1}}),i("router-view",{attrs:{name:"userLastPost","filter-mode":t.filterMode,"filtered-posts":t.filteredPosts,"on-share-post":t.onSharePost,"open-like-modal":t.openLikeModal,isStarted:t.isStarted,"profile-data":t.profileData,"wall-posts-select-handler":t.wallPostsSelectHandler}}),i("router-view",{attrs:{name:"userFriendsList"}}),i("router-view",{attrs:{name:"userCommunities"}}),i("router-view",{attrs:{name:"userPhotoalbums"}}),i("router-view",{attrs:{name:"userPhotoalbum"}}),i("router-view",{attrs:{name:"userVideoList"}}),i("router-view",{attrs:{name:"followersList"}})]],2),t.isShowMessageDialog?i("NewPersonalMessageModal",{attrs:{user:t.profileData},on:{HidePersonalMsgModal:t.onHidePersonalMsgModal,SendPersonalMessage:t.handlePersonalMessage}}):t._e(),t.postRepostModal.isVisible?i("PostRepostModal",{attrs:{user:t.profileData,post:t.postForRepost},on:{hidePostRepostModal:t.hidePostRepostModal}}):t._e(),t.postLikeModal.isVisible?i("PostLikeModal",{attrs:{postId:t.postLikeModal.content.postId},on:{hideLikeModal:t.hideLikeModal}}):t._e()],1),this.$root.$auth.fm.size>0||this.userCommunities||this.profileData.videos?i("div",{key:"RightColumn-"+t.$root.$favoritesKeyUpdater,staticClass:"col-sm-3 col-md-3 col-lg-3 col-xl-3 pr-0 d-xl-block"},[i("FavoriteFriends"),t.userCommunities.length?i("CommunitiesSmallBlock",{attrs:{footer:t.footerLink,title:"Сообщества пользователя",clazz:"bg-white-br20",communities:t.userCommunities.slice(0,5)}}):t._e()],1):t._e()])])},$c=[],Mc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal show",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"Modal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hidePersonalMsgModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[t._m(0),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"mb-2"},[i("button",{staticClass:"btn btn-link btn-block text-left p-3 bg-light text-black-50",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.goToDialogWithFriend()}}},[t.isInRedirecting?i("IconSpinner"):t._e(),t._v(" Перейти к диалогу с "+t._s(t.user.firstName)+" ")],1)]),i("div",{staticClass:"user-friend d-flex"},[i("div",{staticClass:"user-friend-pic mr-3 "},[i("img",{staticClass:"user-friend-img rounded-circle overflow-hidden",attrs:{src:t.user.userPic,alt:t.user.firstName}}),t.user.isOnline?i("span",{staticClass:"user-friend-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"user-friend-isoffline"})]),i("div",{staticClass:" user-friend-body m-0 col-12 pr-5 "},[i("div",{staticClass:"user-friend-body-top d-flex align-items-end justify-content-between"},[i("h6",{staticClass:"user-friend-name my-0"},[t._v(t._s(t.user.fullName))])]),i("div",{staticClass:"user-friend-body-bottom d-flex pr-5"},[i("p",{staticClass:"user-friend-desc p-0 my-0  d-inline"},[t._v(t._s(t._f("lastEventTime")(t.user.lastActivity)))])])])]),i("div",{staticClass:"form mt-3"},[i("TextEditor",{ref:"messageToUserFromHisPage",attrs:{id:"messageToUserFromHisPage",workMode:"chat",showAvatar:!1,dropToDown:!0,clazz:"row plz-text-editor mb-4 pl-2 h-auto  align-items-start",inModal:!0},on:{editorPost:t.startPersonalMessage}})],1),i("div",{staticClass:"form-group row mb-0 pt-3 border-top"},[i("div",{staticClass:"col-12"},[i("button",{staticClass:"btn plz-btn plz-btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.startPersonalMessage()}}},[t._v("Отправить")])])])])])])])},Ic=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title p-2"},[t._v("Новое сообщение")])])}],Pc={name:"NewPersonalMessageModal",props:{user:Qi["a"]},components:{IconSpinner:bl,TextEditor:_a["a"]},mixins:[Wn],data:function(){return{isInRedirecting:!1}},methods:{hidePersonalMsgModal:function(){this.$emit("HidePersonalMsgModal",{})},startPersonalMessage:function(t){t||(t=this.$refs.messageToUserFromHisPage.getContent()),("<p></p>"!==t.postText||t.attachments.length>=1)&&this.$emit("SendPersonalMessage",{message:t,receiverId:this.user.id})},goToDialogWithFriend:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isInRedirecting=!0,e.next=3,t.openDialogWithFriend(t.user);case 3:return e.next=5,t.$root.$router.push("/chats");case 5:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;setTimeout((function(){t.$refs.messageToUserFromHisPage.focus()}),100)}},Sc=Pc,Lc=Object(b["a"])(Sc,Mc,Ic,!1,null,null,null),Rc=Lc.exports,Nc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-unlock",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 477.999 477.999","xml:space":"preserve"}},[i("g",[i("g",[i("path",{attrs:{d:"M409.666,170.799H119.533v-17.067c-0.052-65.98,53.393-119.509,119.372-119.561    c48.746-0.038,92.626,29.543,110.874,74.744c3.594,8.714,13.571,12.864,22.285,9.27c8.63-3.559,12.799-13.393,9.357-22.07    c-31.77-78.657-121.289-116.667-199.946-84.896C123.382,34.684,85.362,91.08,85.4,153.733v17.067H68.333    c-9.426,0-17.067,7.641-17.067,17.067v273.067c0,9.426,7.641,17.067,17.067,17.067h341.333c9.426,0,17.067-7.641,17.067-17.067    V187.866C426.733,178.44,419.092,170.799,409.666,170.799z M392.6,443.866H85.4V204.933h307.2V443.866z"}})])]),i("g",[i("g",[i("path",{attrs:{d:"M287.272,290.054c-9.426-26.66-38.679-40.631-65.338-31.205c-26.66,9.426-40.631,38.679-31.205,65.339    c5.155,14.581,16.624,26.05,31.205,31.205v37.274c0,9.426,7.641,17.067,17.067,17.067s17.067-7.641,17.067-17.067v-37.274    C282.726,345.967,296.697,316.714,287.272,290.054z M239,324.4c-9.426,0-17.067-7.641-17.067-17.067s7.641-17.067,17.067-17.067    s17.067,7.641,17.067,17.067S248.425,324.4,239,324.4z"}})])]),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g"),i("g")])},Ac=[],Fc={name:"IconUnlock"},zc=Fc,Ec=Object(b["a"])(zc,Nc,Ac,!1,null,"80daf12c",null),jc=Ec.exports,Dc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-12 col-lg-8 col-xl-9 py-0",attrs:{id:"communitiesFilter"}},[i("div",{staticClass:"d-flex bg-white-br20 mb-4 pb-0 pt-3 pt-xl-0 px-4 flex-column-reverse flex-xl-row"},[i("div",{staticClass:"col-12 col-xl-8 d-flex align-items-center justify-content-between px-0"},[i("nav",{staticClass:"nav profile-filter-links mt-2 mt-md-0",attrs:{role:"tablist"}},[i("router-link",{staticClass:"nav-link py-2 py-sm-3 py-xl-4 px-1 mr-2 mr-xl-4",class:{active:"CommunitiesListPage"===this.$root.$router.currentRoute.name},attrs:{to:"/communities",tag:"span",role:"tab"}},[t._v(" Мои сообщества ")]),i("router-link",{staticClass:"nav-link py-2 py-sm-3 py-xl-4 px-1 mr-2 mr-xl-4",class:{active:"CommunitiesManagePage"===this.$root.$router.currentRoute.name},attrs:{to:"/manage-communities",tag:"span",role:"tab"}},[t._v(" Управление ")]),i("router-link",{staticClass:"nav-link py-2 py-sm-3 py-xl-4 px-1 mr-2 mr-xl-4",class:{active:"CommunitiesPopularPage"===this.$root.$router.currentRoute.name},attrs:{to:"/popular-communities",tag:"span",role:"tab"}},[t._v(" Популярные сообщества ")])],1)]),i("div",{staticClass:"col-12 col-xl-4 d-flex align-items-center form-inline mb-3 mb-xl-0 pl-0 pl-xl-4 pr-0 position-relative  rounded-pill mt-4 mt-md-0 "},[i("div",{staticClass:"form-inline  position-relative w-100",class:{isFocused:t.isFocused}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.lastCommunitiesSearch[t.list],expression:"lastCommunitiesSearch[list]"}],ref:"txtCommunitiesListSearch",staticClass:"top-search form-control form-control  w-100",attrs:{id:"txtCommunitiesListSearch",type:"text",placeholder:"Поиск","aria-label":"Поиск"},domProps:{value:t.lastCommunitiesSearch[t.list]},on:{keydown:function(e){return e.stopPropagation(),t.communitySearchKeyDownCheck(e)},blur:t.onBlur,focus:t.onFocus,input:function(e){e.target.composing||t.$set(t.lastCommunitiesSearch,t.list,e.target.value)}}}),i("button",{staticClass:"btn btn-search h-100 ",attrs:{type:"submit"},on:{click:function(e){return t.initSearch()}}},[i("IconSearch",{staticStyle:{width:"15px",height:"15px"}})],1)])])])])},Oc=[];function Tc(t,e){var i=!1;return function(){i||(t.apply(this,arguments),i=!0,setTimeout((function(){return i=!1}),e))}}var Hc={name:"CommunitiesListHeader",components:{IconSearch:zs},props:{list:String},data:function(){return{isFocused:!1,lastCommunitiesSearch:{popular:"",my:"",owner:""}}},mounted:function(){this.lastCommunitiesSearch[this.list]=window.localStorage.getItem("lastCommunitiesSearch_"+this.list)},methods:{communitySearchKeyDownCheck:Tc((function(t){var e=this.$refs.txtCommunitiesListSearch.value.trim();if(13===t.keyCode)return this.startSearch(e)}),100),initSearch:Tc((function(){var t=this.$refs.txtCommunitiesListSearch.value.trim();return this.startSearch(t)}),100),startSearch:function(t){window.localStorage.setItem("lastCommunitiesSearch_"+this.list,t),this.$root.$emit("communitySearchStart",{searchText:t,source:"communitySearch",list:this.list})},onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1}}},Uc=Hc,Vc=Object(b["a"])(Uc,Dc,Oc,!1,null,null,null),Bc=Vc.exports,Yc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-md-12 col-lg-4 col-xl-3 mb-4  d-flex pl-lg-0",attrs:{id:"createCommunityBlock"}},[i("div",{staticClass:"col-12  d-flex align-items-center align-items-center  bg-white-br20 "},[i("div",{staticClass:"w-100 py-3 py-lg-0"},[i("button",{staticClass:"btn btn-create btn-block btn-primary rounded-pill ",attrs:{type:"button"},on:{click:t.ShowCommunityCreateModal}},[t._v(" Создать сообщество ")]),t.communityCreateModalShow?i("CommunityCreateModal",{on:{HideCommunityCreateModal:t.onHideCommunityCreateModal}}):t._e()],1)])])},qc=[],Kc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal community-create-modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"communityCreateModal",tabindex:"-1",role:"dialog","aria-labelledby":"communityCreateModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideCommunityCreateModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20 overflow-auto"},[i("div",{staticClass:"modal-body p-0 pt-3 w-100"},[t._m(0),i("form",{staticClass:"form community-create-modal-form p-0  w-100 overflow-hidden",attrs:{novalidate:"novalidate"},on:{submit:function(t){t.preventDefault()}}},[i("div",{staticClass:"form-group d-flex align-items-center mb-4 px-5 row position-relative"},[i("label",{staticClass:"col-4 community-create-modal-label text-right",attrs:{for:"commType"}},[t._v("Тип сообщества:")]),i("div",{staticClass:"col-8"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.model.type,expression:"model.type"}],ref:"commType",staticClass:"form-control  community-create-modal-select",attrs:{id:"commType"},on:{click:function(e){return t.$v.model.type.$touch()},change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.model,"type",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"0",disabled:""}},[t._v("Выберите тип")]),t._l(t.types,(function(e){return i("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.title)+" ")])}))],2),i("i",{staticClass:"fas fa-chevron-down"})]),i("div",{staticClass:"col-4"}),t.$v.model.type.$error?i("div",{staticClass:"col-8 invalid-feedback"},[t.$v.model.type.required?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите тип сообщества")]),t.$v.model.type.isIn?t._e():i("p",{staticClass:"text-danger"},[t._v("Выберите тип сообщества")])]):t._e()]),i("div",{staticClass:"form-group d-flex align-items-center mb-4 px-5 row position-relative"},[i("label",{staticClass:"col-4 community-create-modal-label  text-right",attrs:{for:"commName"}},[t._v("Название:")]),i("div",{staticClass:"col-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.name,expression:"model.name"}],ref:"commName",staticClass:"form-control community-create-modal-select",attrs:{type:"text",id:"commName",required:""},domProps:{value:t.model.name},on:{blur:function(e){return t.$v.model.name.$touch()},input:function(e){e.target.composing||t.$set(t.model,"name",e.target.value)}}})]),i("div",{staticClass:"col-4"}),t.$v.model.name.$error?i("div",{staticClass:"col-8 invalid-feedback"},[t.$v.model.name.required?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите название сообщества")]),t.$v.model.name.minLength?t._e():i("p",{staticClass:"text-danger"},[t._v("Название не может быть короче "),i("b",[t._v("четырёх")]),t._v(" символов")])]):t._e()]),i("div",{staticClass:"form-group d-flex align-items-center mb-4 px-5 row position-relative"},[i("label",{staticClass:"col-4 community-create-modal-label  text-right",attrs:{for:"commTema"}},[t._v("Тематика:")]),i("div",{staticClass:"col-8"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.model.themeId,expression:"model.themeId"}],ref:"commType",staticClass:"form-control  community-create-modal-select",attrs:{id:"commTema"},on:{click:function(e){return t.$v.model.themeId.$touch()},change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.model,"themeId",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"0",disabled:""}},[t._v("Выберите тематику")]),t._l(t.themes,(function(e){return i("optgroup",{key:e.id,attrs:{label:e.name}},t._l(e.children,(function(e){return i("option",{domProps:{value:e.id}},[t._v(t._s(e.name)+" ")])})),0)}))],2),i("i",{staticClass:"fas fa-chevron-down"})]),i("div",{staticClass:"col-4"}),t.$v.model.themeId.$error?i("div",{staticClass:"col-8 invalid-feedback"},[t.$v.model.themeId.required?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите тематику сообщества")]),t.$v.model.themeId.isIn?t._e():i("p",{staticClass:"text-danger"},[t._v("Выберите тематику сообщества")])]):t._e()]),i("div",{staticClass:"form-group d-flex align-items-center mb-5 px-5 row position-relative"},[i("label",{staticClass:"col-4 community-create-modal-label  text-right",attrs:{for:"commPrivacy"}},[t._v("Приватность:")]),i("div",{staticClass:"col-8"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.model.privacy,expression:"model.privacy"}],ref:"commPrivacy",staticClass:"form-control community-create-modal-select",attrs:{id:"commPrivacy"},on:{click:function(e){return t.$v.model.privacy.$touch()},change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.model,"privacy",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"0",disabled:""}},[t._v("Выберите уровень приватности")]),t._l(t.privacyList,(function(e){return i("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.title)+" ")])}))],2),i("i",{staticClass:"fas fa-chevron-down"})]),i("div",{staticClass:"col-4"}),t.$v.model.privacy.$error?i("div",{staticClass:"col-8 invalid-feedback"},[t.$v.model.privacy.required?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите уровень приватности сообщества")]),t.$v.model.privacy.isIn?t._e():i("p",{staticClass:"text-danger"},[t._v("Выберите уровень приватности сообщества")])]):t._e()]),i("div",{staticClass:"form-group d-flex align-items-center px-5 py-4 community-create-modal-footer mb-0 row"},[i("label",{staticClass:"col-12 col-md-7 radio mb-3 mb-md-0",attrs:{for:"communityRules"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.rule,expression:"model.rule"}],ref:"communityRules",staticClass:"mb-0",attrs:{type:"checkbox",name:"communityRules",id:"communityRules"},domProps:{checked:Array.isArray(t.model.rule)?t._i(t.model.rule,null)>-1:t.model.rule},on:{change:function(e){var i=t.model.rule,s=e.target,a=!!s.checked;if(Array.isArray(i)){var n=null,r=t._i(i,n);s.checked?r<0&&t.$set(t.model,"rule",i.concat([n])):r>-1&&t.$set(t.model,"rule",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.model,"rule",a)}}}),i("span",{staticClass:"mb-0"},[t._v("Я прочитал и согласен с "),i("router-link",{staticClass:"text-link",attrs:{to:{name:"CommunityRulesPage"},target:"_blank"}},[t._v("правилами")])],1)]),i("div",{staticClass:"col-12 col-md-5 d-flex align-items-center justify-content-end px-0"},[i("button",{staticClass:"btn w-100 btn-primary rounded-pill",attrs:{type:"button",disabled:!t.model.rule},on:{click:function(e){return e.stopPropagation(),t.startCreateCommunity()}}},[t._v("Создать сообщество ")])]),t.$v.model.rule.$error?i("div",{staticClass:"col-7 invalid-feedback"},[t.$v.model.rule.selected?t._e():i("p",{staticClass:"text-danger"},[t._v("Вы должны согласиться с правилами")])]):t._e()])])])])])])},Gc=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"community-create-modal-box p-4 w-100 overflow-hidden"},[i("h5",{staticClass:"community-create-modal-title text-center mb-2"},[t._v("Создать сообщество")]),i("div",{staticClass:"d-flex align-items-center justify-content-center"},[i("img",{attrs:{src:"images/icons/icon-communities.png",alt:"image"}})]),i("p",{staticClass:"community-create-modal-desc text-center mb-4 mt-3"},[t._v(" Публикуйте материалы разных форматов, общайтесь с читателями, изучайте статистику и подключайте монетизацию."),i("br"),t._v(" Для начала выберите тип сообщества. ")])])}],Wc={privacyList:[{value:1,title:"Открытое"},{value:2,title:"Закрытое"}],types:[{value:1,title:"Бизнес"},{value:2,title:"Тематическое сообщество"},{value:3,title:"Бренд или организация"},{value:4,title:"Группа по интересам"},{value:5,title:"Публичная страница"},{value:6,title:"Мероприятие"}],getPrivacyLabel:function(t){var e=this.privacyList.find((function(e){return e.value===t}));return e?e.title:"Открытое"}},Jc={name:"CommunityCreateModal",components:{},props:{},data:function(){return{model:{type:0,name:"",themeId:0,privacy:0,rule:!1},themes:null,privacyList:Wc.privacyList,types:Wc.types}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,t.popularCommunities=null,e.prev=2,e.next=5,t.$root.$api.$communities.getThemes();case 5:i=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](2),window.console.warn(e.t0.detailMessage),e.t0;case 12:t.themes=i.data;case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))()},validations:function(){return{model:{name:{required:R["required"],minLength:Object(R["minLength"])(4)},type:{required:R["required"],isIn:function(t){return this.types.reduce((function(e,i){return e||i.value===t}),!1)}},themeId:{required:R["required"],isIn:function(t){return t>0}},privacy:{required:R["required"],isIn:function(t){return this.privacyList.reduce((function(e,i){return e||i.value===t}),!1)}},rule:{selected:function(t){return t}}}}},methods:{hideCommunityCreateModal:function(){this.$emit("HideCommunityCreateModal",{})},startCreateCommunity:function(){this.$v.$touch(),this.$v.model.$invalid||this.createCommunity()},createCommunity:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,s={type:t.model.type,name:t.model.name.trim(),theme_id:t.model.themeId,privacy:t.model.privacy},e.prev=2,e.next=5,t.$root.$api.$communities.communityCreate(s);case 5:i=e.sent,t.hideCommunityCreateModal(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.warn(e.t0.detailMessage);case 12:i&&(t.$emit("AddNewCommunity",i),t.$router.push({name:"CommunityPage",params:{id:i.id}}));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))()}}},Zc=Jc,Xc=(i("7881"),Object(b["a"])(Zc,Kc,Gc,!1,null,"cd380b08",null)),Qc=Xc.exports,tu={name:"CommunityCreateBlock",components:{CommunityCreateModal:Qc},data:function(){return{communityCreateModalShow:!1}},methods:{ShowCommunityCreateModal:function(){this.communityCreateModalShow=!0},onHideCommunityCreateModal:function(){this.communityCreateModalShow=!1}}},eu=tu,iu=Object(b["a"])(eu,Yc,qc,!1,null,null,null),su=iu.exports,au=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-community-item-wrp col-12 col-sm-6 media px-2 mb-3 align-items-stretch"},[i("div",{staticClass:"plizi-community-item d-flex flex-column flex-xl-row align-items-center justify-content-between bg-white-br20 w-100 px-4 py-4"},[i("router-link",{staticClass:"plizi-community-item-pic mr-auto ml-auto mr-xl-3 ml-xl-3 mb-3 mb-xl-0 rounded-circle overflow-hidden align-self-start",attrs:{to:"/community-"+t.community.id,tag:"a"}},[i("img",{staticClass:"plizi-community-item-img ",attrs:{src:t.avatar,alt:t.community.name,title:t.community.name}})]),i("div",{staticClass:"plizi-community-item-body"},[i("router-link",{staticClass:"plizi-community-item-top d-flex align-items-end justify-content-between mb-2  ",attrs:{to:"/community-"+t.community.id,tag:"a"}},[i("h6",{staticClass:"plizi-community-item-name my-0"},[t._v(" "+t._s(t.community.name)+" ")])]),i("PrivacyLabel",{attrs:{community:t.community}}),i("div",{staticClass:"plizi-community-item-body-middle mb-2"},[t.community.description?i("p",{staticClass:"plizi-community-item-desc p-0 mb-1"},[t._v(" "+t._s(t.community.description)+" ")]):t.community.notice?i("p",{staticClass:"plizi-community-item-notice p-0 my-0 text-secondary"},[t._v(t._s(t.community.notice))]):i("p",{staticClass:"plizi-community-item-location p-0 my-0 text-secondary"},[t._v(t._s(t.locationLabel))]),i("p",{staticClass:"plizi-community-item-members-number p-0 my-0"},[t._v(t._s(t.community.totalMembers)+" участников ")])]),i("div",{staticClass:"plizi-community-item-body-bottom d-flex flex-column-reverse flex-xl-row align-items-center justify-content-between mt-3 mt-xl-0"},["new"===t.subscribeType?i("button",{staticClass:"btn plz-btn-outline  plizi-community-btn rounded-pill",on:{click:function(e){return t.subscribeInvite(t.community)}}},[t._v(" Подписаться ")]):"request"===t.subscribeType?i("button",{staticClass:"btn plz-btn-outline  plizi-community-btn rounded-pill",on:{click:function(e){return t.sendRequest(t.community)}}},[t._v(" Запрос ")]):"exists"===t.subscribeType?i("button",{staticClass:"btn btn-outline-danger plizi-community-btn  rounded-pill",on:{click:function(e){return t.unsubscribeInvite(t.community)}}},[t._v(" Отписаться ")]):"author"===t.subscribeType?i("router-link",{staticClass:"btn btn-outline-danger plizi-community-btn  rounded-pill",attrs:{to:{name:"CommunitySettingsPage",params:{id:t.community.id}}}},[t._v(" Управление ")]):t._e(),t.community.totalFriends?i("div",{staticClass:"plizi-community-item-body-friends d-flex flex-wrap align-items-center justify-content-between ml-1"},[i("div",{staticClass:"plizi-community-item-body-friends-pics mr-1 my-1"},t._l(t.community.friends,(function(e){return i("div",{key:e.id,staticClass:"plizi-community-item-body-friends-pic position-relative rounded-circle"},[i("img",{attrs:{src:t.getAvatar(e),alt:e.profile.fullName,title:e.profile.fullName}})])})),0),i("p",{staticClass:"plizi-community-item-desc my-1"},[t._v(t._s(t.community.totalFriends)+" друзей")])]):t._e()],1)],1)],1)])},nu=[],ru=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-add-user",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 377 320"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M107 0.5C107 0.775 105.875 1 104.5 1C103.125 1 102 1.225 102 1.5C102 1.775 101.325 2 100.5 2C99.675 2 99 2.225 99 2.5C99 2.775 98.1 3 97 3C95.9 3 95 3.225 95 3.5C95 3.775 94.55 4 94 4C93.45 4 93 4.225 93 4.5C93 4.775 92.325 5 91.5 5C90.675 5 90 5.225 90 5.5C90 5.775 89.55 6 89 6C88.45 6 88 6.225 88 6.5C88 6.775 87.55 7 87 7C86.45 7 86 7.225 86 7.5C86 7.775 85.55 8 85 8C84.45 8 84 8.225 84 8.5C84 8.775 83.55 9 83 9C82.45 9 82 9.225 82 9.5C82 9.775 81.5995 10 81.1105 10C80.621 10 79.8965 10.45 79.5 11C79.1035 11.55 78.4285 12 78 12C77.5715 12 76.8965 12.45 76.5 13C76.1035 13.55 75.469 14 75.09 14C74.7115 14 73.7705 14.675 73 15.5C72.2295 16.325 71.3495 17 71.0445 17C70.321 17 58 29.321 58 30.0445C58 30.3495 57.325 31.2295 56.5 32C55.675 32.7705 55 33.7115 55 34.09C55 34.469 54.55 35.1035 54 35.5C53.45 35.8965 53 36.5715 53 37C53 37.4285 52.55 38.1035 52 38.5C51.45 38.8965 51 39.621 51 40.1105C51 40.5995 50.775 41 50.5 41C50.225 41 50 41.45 50 42C50 42.55 49.775 43 49.5 43C49.225 43 49 43.45 49 44C49 44.55 48.775 45 48.5 45C48.225 45 48 45.45 48 46C48 46.55 47.775 47 47.5 47C47.225 47 47 47.45 47 48C47 48.55 46.775 49 46.5 49C46.225 49 46 49.45 46 50C46 50.55 45.775 51 45.5 51C45.225 51 45 51.675 45 52.5C45 53.325 44.775 54 44.5 54C44.225 54 44 54.675 44 55.5C44 56.325 43.775 57 43.5 57C43.225 57 43 57.675 43 58.5C43 59.325 42.775 60 42.5 60C42.225 60 42 60.9 42 62C42 63.1 41.775 64 41.5 64C41.225 64 41 65.125 41 66.5C41 67.875 40.775 69 40.5 69C40.182 69 40 73 40 80C40 87 40.182 91 40.5 91C40.778 91 41 92.3335 41 94C41 95.6665 41.222 97 41.5 97C41.775 97 42 97.9 42 99C42 100.1 42.225 101 42.5 101C42.775 101 43 101.675 43 102.5C43 103.325 43.225 104 43.5 104C43.775 104 44 104.675 44 105.5C44 106.325 44.225 107 44.5 107C44.775 107 45 107.45 45 108C45 108.55 45.225 109 45.5 109C45.775 109 46 109.45 46 110C46 110.55 46.225 111 46.5 111C46.775 111 47 111.45 47 112C47 112.55 47.225 113 47.5 113C47.775 113 48 113.45 48 114C48 114.55 48.225 115 48.5 115C48.775 115 49 115.45 49 116C49 116.55 49.225 117 49.5 117C49.775 117 50 117.45 50 118C50 118.55 50.225 119 50.5 119C50.775 119 51 119.401 51 119.89C51 120.379 51.45 121.104 52 121.5C52.55 121.896 53 122.531 53 122.91C53 123.289 53.675 124.229 54.5 125C55.325 125.771 56 126.663 56 126.983C56 127.303 57.125 128.661 58.5 130C59.875 131.339 61 132.68 61 132.98C61 133.691 65.309 138 66.0195 138C66.3195 138 67.6605 139.125 69 140.5C70.3395 141.875 71.697 143 72.017 143C72.337 143 73.2295 143.675 74 144.5C74.7705 145.325 75.761 146 76.2005 146C76.6405 146 77 146.225 77 146.5C77 146.775 77.4005 147 77.8895 147C78.379 147 79.1035 147.45 79.5 148C79.8965 148.55 80.621 149 81.1105 149C81.5995 149 82 149.225 82 149.5C82 149.775 82.45 150 83 150C83.55 150 84 150.225 84 150.5C84 150.775 84.45 151 85 151C85.55 151 86 151.225 86 151.5C86 151.775 86.45 152 87 152C87.55 152 88 152.225 88 152.5C88 152.775 88.45 153 89 153C89.55 153 90 153.225 90 153.5C90 153.775 90.675 154 91.5 154C92.325 154 93 154.225 93 154.5C93 154.775 93.675 155 94.5 155C95.325 155 96 155.225 96 155.5C96 155.775 96.675 156 97.5 156C98.325 156 99 156.225 99 156.5C99 156.775 99.9 157 101 157C102.1 157 103 157.225 103 157.5C103 157.778 104.334 158 106 158C107.666 158 109 158.222 109 158.5C109 158.816 112.5 159 118.5 159C124.5 159 128 158.816 128 158.5C128 158.222 129.334 158 131 158C132.666 158 134 157.778 134 157.5C134 157.225 134.9 157 136 157C137.1 157 138 156.775 138 156.5C138 156.225 138.675 156 139.5 156C140.325 156 141 155.775 141 155.5C141 155.225 141.675 155 142.5 155C143.325 155 144 154.775 144 154.5C144 154.225 144.675 154 145.5 154C146.325 154 147 153.775 147 153.5C147 153.225 147.45 153 148 153C148.55 153 149 152.775 149 152.5C149 152.225 149.45 152 150 152C150.55 152 151 151.775 151 151.5C151 151.225 151.45 151 152 151C152.55 151 153 150.775 153 150.5C153 150.225 153.45 150 154 150C154.55 150 155 149.775 155 149.5C155 149.225 155.45 149 156 149C156.55 149 157 148.775 157 148.5C157 148.225 157.4 148 157.889 148C158.379 148 159.104 147.55 159.5 147C159.896 146.45 160.531 146 160.91 146C161.289 146 162.229 145.325 163 144.5C163.771 143.675 164.666 143 164.99 143C165.314 143 166.443 142.1 167.5 141C168.557 139.9 169.668 139 169.969 139C170.682 139 178 131.682 178 130.969C178 130.668 178.9 129.557 180 128.5C181.1 127.443 182 126.313 182 125.99C182 125.666 182.675 124.771 183.5 124C184.325 123.229 185 122.289 185 121.91C185 121.531 185.45 120.896 186 120.5C186.55 120.104 187 119.379 187 118.89C187 118.401 187.225 118 187.5 118C187.775 118 188 117.55 188 117C188 116.45 188.225 116 188.5 116C188.775 116 189 115.55 189 115C189 114.45 189.225 114 189.5 114C189.775 114 190 113.55 190 113C190 112.45 190.225 112 190.5 112C190.775 112 191 111.55 191 111C191 110.45 191.225 110 191.5 110C191.775 110 192 109.55 192 109C192 108.45 192.225 108 192.5 108C192.775 108 193 107.55 193 107C193 106.45 193.225 106 193.5 106C193.775 106 194 105.325 194 104.5C194 103.675 194.225 103 194.5 103C194.775 103 195 102.325 195 101.5C195 100.675 195.225 100 195.5 100C195.775 100 196 99.325 196 98.5C196 97.675 196.225 97 196.5 97C196.775 97 197 95.875 197 94.5C197 93.125 197.225 92 197.5 92C197.778 92 198 90.6665 198 89C198 87.3335 198.222 86 198.5 86C198.813 86 199 82.8335 199 77.5C199 72.1665 198.813 69 198.5 69C198.222 69 198 67.6665 198 66C198 64.3335 197.778 63 197.5 63C197.225 63 197 62.1 197 61C197 59.9 196.775 59 196.5 59C196.225 59 196 58.325 196 57.5C196 56.675 195.775 56 195.5 56C195.225 56 195 55.325 195 54.5C195 53.675 194.775 53 194.5 53C194.225 53 194 52.325 194 51.5C194 50.675 193.775 50 193.5 50C193.225 50 193 49.55 193 49C193 48.45 192.775 48 192.5 48C192.225 48 192 47.55 192 47C192 46.45 191.775 46 191.5 46C191.225 46 191 45.55 191 45C191 44.45 190.775 44 190.5 44C190.225 44 190 43.55 190 43C190 42.45 189.775 42 189.5 42C189.225 42 189 41.55 189 41C189 40.45 188.775 40 188.5 40C188.225 40 188 39.5995 188 39.1105C188 38.621 187.55 37.8965 187 37.5C186.45 37.1035 186 36.469 186 36.09C186 35.7115 185.325 34.7705 184.5 34C183.675 33.2295 183 32.3405 183 32.0255C183 31.71 181.425 29.8985 179.5 28C177.575 26.1015 176 24.2 176 23.774C176 23.3485 175.65 23 175.223 23C174.795 23 173.12 21.65 171.5 20C169.88 18.35 168.296 17 167.979 17C167.661 17 166.771 16.325 166 15.5C165.229 14.675 164.289 14 163.91 14C163.531 14 162.896 13.55 162.5 13C162.104 12.45 161.428 12 161 12C160.572 12 159.896 11.55 159.5 11C159.104 10.45 158.379 10 157.889 10C157.4 10 157 9.775 157 9.5C157 9.225 156.55 9 156 9C155.45 9 155 8.775 155 8.5C155 8.225 154.55 8 154 8C153.45 8 153 7.775 153 7.5C153 7.225 152.55 7 152 7C151.45 7 151 6.775 151 6.5C151 6.225 150.55 6 150 6C149.45 6 149 5.775 149 5.5C149 5.225 148.325 5 147.5 5C146.675 5 146 4.775 146 4.5C146 4.225 145.325 4 144.5 4C143.675 4 143 3.775 143 3.5C143 3.225 142.325 3 141.5 3C140.675 3 140 2.775 140 2.5C140 2.225 139.1 2 138 2C136.9 2 136 1.775 136 1.5C136 1.225 134.875 1 133.5 1C132.125 1 131 0.775 131 0.5C131 0.1805 126.667 0 119 0C111.333 0 107 0.1805 107 0.5ZM128 32.5C128 32.775 128.9 33 130 33C131.1 33 132 33.225 132 33.5C132 33.775 132.675 34 133.5 34C134.325 34 135 34.225 135 34.5C135 34.775 135.675 35 136.5 35C137.325 35 138 35.225 138 35.5C138 35.775 138.45 36 139 36C139.55 36 140 36.225 140 36.5C140 36.775 140.4 37 140.889 37C141.379 37 142.104 37.45 142.5 38C142.896 38.55 143.572 39 144 39C144.428 39 145.104 39.45 145.5 40C145.896 40.55 146.512 41 146.867 41C147.71 41 157 50.2905 157 51.133C157 51.4885 157.45 52.1035 158 52.5C158.55 52.8965 159 53.5715 159 54C159 54.4285 159.45 55.1035 160 55.5C160.55 55.8965 161 56.621 161 57.1105C161 57.5995 161.225 58 161.5 58C161.775 58 162 58.45 162 59C162 59.55 162.225 60 162.5 60C162.775 60 163 60.45 163 61C163 61.55 163.225 62 163.5 62C163.775 62 164 62.675 164 63.5C164 64.325 164.225 65 164.5 65C164.775 65 165 65.9 165 67C165 68.1 165.225 69 165.5 69C165.775 69 166 69.9 166 71C166 72.1 166.225 73 166.5 73C166.81 73 167 75.6665 167 80C167 84.3335 166.81 87 166.5 87C166.225 87 166 87.9 166 89C166 90.1 165.775 91 165.5 91C165.225 91 165 91.9 165 93C165 94.1 164.775 95 164.5 95C164.225 95 164 95.45 164 96C164 96.55 163.775 97 163.5 97C163.225 97 163 97.45 163 98C163 98.55 162.775 99 162.5 99C162.225 99 162 99.45 162 100C162 100.55 161.775 101 161.5 101C161.225 101 161 101.45 161 102C161 102.55 160.775 103 160.5 103C160.225 103 160 103.359 160 103.799C160 104.239 159.325 105.229 158.5 106C157.675 106.771 157 107.651 157 107.957C157 108.738 148.656 117 147.867 117C147.512 117 146.896 117.45 146.5 118C146.104 118.55 145.428 119 145 119C144.572 119 143.896 119.45 143.5 120C143.104 120.55 142.379 121 141.889 121C141.4 121 141 121.225 141 121.5C141 121.775 140.55 122 140 122C139.45 122 139 122.225 139 122.5C139 122.775 138.55 123 138 123C137.45 123 137 123.225 137 123.5C137 123.775 136.325 124 135.5 124C134.675 124 134 124.225 134 124.5C134 124.775 133.325 125 132.5 125C131.675 125 131 125.225 131 125.5C131 125.775 129.875 126 128.5 126C127.125 126 126 126.225 126 126.5C126 126.808 123.5 127 119.5 127C115.5 127 113 126.808 113 126.5C113 126.225 111.875 126 110.5 126C109.125 126 108 125.775 108 125.5C108 125.225 107.325 125 106.5 125C105.675 125 105 124.775 105 124.5C105 124.225 104.325 124 103.5 124C102.675 124 102 123.775 102 123.5C102 123.225 101.55 123 101 123C100.45 123 100 122.775 100 122.5C100 122.225 99.55 122 99 122C98.45 122 98 121.775 98 121.5C98 121.225 97.55 121 97 121C96.45 121 96 120.775 96 120.5C96 120.225 95.5995 120 95.1105 120C94.621 120 93.8965 119.55 93.5 119C93.1035 118.45 92.489 118 92.134 118C91.2915 118 81 107.708 81 106.866C81 106.511 80.55 105.896 80 105.5C79.45 105.104 79 104.428 79 104C79 103.572 78.55 102.896 78 102.5C77.45 102.104 77 101.379 77 100.89C77 100.401 76.775 100 76.5 100C76.225 100 76 99.55 76 99C76 98.45 75.775 98 75.5 98C75.225 98 75 97.325 75 96.5C75 95.675 74.775 95 74.5 95C74.225 95 74 94.325 74 93.5C74 92.675 73.775 92 73.5 92C73.225 92 73 91.1 73 90C73 88.9 72.775 88 72.5 88C72.1875 88 72 85 72 80C72 75 72.1875 72 72.5 72C72.775 72 73 71.1 73 70C73 68.9 73.225 68 73.5 68C73.775 68 74 67.325 74 66.5C74 65.675 74.225 65 74.5 65C74.775 65 75 64.325 75 63.5C75 62.675 75.225 62 75.5 62C75.775 62 76 61.55 76 61C76 60.45 76.225 60 76.5 60C76.775 60 77 59.55 77 59C77 58.45 77.225 58 77.5 58C77.775 58 78 57.5995 78 57.1105C78 56.621 78.45 55.8965 79 55.5C79.55 55.1035 80 54.4285 80 54C80 53.5715 80.45 52.8965 81 52.5C81.55 52.1035 82 51.488 82 51.1325C82 50.344 90.2615 42 91.0425 42C91.3485 42 92.2295 41.325 93 40.5C93.7705 39.675 94.761 39 95.2005 39C95.6405 39 96 38.775 96 38.5C96 38.225 96.4005 38 96.8895 38C97.379 38 98.1035 37.55 98.5 37C98.9235 36.413 99.7945 36 100.61 36C101.374 36 102 35.775 102 35.5C102 35.225 102.45 35 103 35C103.55 35 104 34.775 104 34.5C104 34.225 104.675 34 105.5 34C106.325 34 107 33.775 107 33.5C107 33.225 107.9 33 109 33C110.1 33 111 32.775 111 32.5C111 32.1865 114.167 32 119.5 32C124.833 32 128 32.1865 128 32.5ZM294 38.5C294 38.775 293.325 39 292.5 39C291.675 39 291 39.225 291 39.5C291 39.775 290.658 40 290.239 40C289.249 40 284 45.249 284 46.239C284 46.6575 283.775 47 283.5 47C283.225 47 283 47.45 283 48C283 48.55 282.775 49 282.5 49C282.173 49 282 58.1665 282 75.5V102H255.5C238.167 102 229 102.173 229 102.5C229 102.775 228.55 103 228 103C227.45 103 227 103.225 227 103.5C227 103.775 226.657 104 226.239 104C224.93 104 220 109.325 220 110.739C220 111.432 219.775 112 219.5 112C219.197 112 219 114.167 219 117.5C219 120.833 219.197 123 219.5 123C219.775 123 220 123.626 220 124.39C220 125.206 220.413 126.076 221 126.5C221.55 126.896 222 127.519 222 127.883C222 128.795 224.282 131 225.227 131C225.652 131 226 131.225 226 131.5C226 131.775 226.45 132 227 132C227.55 132 228 132.225 228 132.5C228 132.775 228.675 133 229.5 133C230.325 133 231 133.225 231 133.5C231 133.827 239.833 134 256.5 134H282V160.5C282 177.833 282.173 187 282.5 187C282.775 187 283 187.45 283 188C283 188.55 283.225 189 283.5 189C283.775 189 284 189.344 284 189.763C284 190.756 288.244 195 289.237 195C289.656 195 290 195.225 290 195.5C290 195.775 290.675 196 291.5 196C292.325 196 293 196.225 293 196.5C293 196.792 294.667 197 297 197C299.333 197 301 196.792 301 196.5C301 196.225 301.675 196 302.5 196C303.325 196 304 195.775 304 195.5C304 195.225 304.341 195 304.759 195C305.748 195 312 188.748 312 187.76C312 187.342 312.225 187 312.5 187C312.775 187 313 186.325 313 185.5C313 184.675 313.225 184 313.5 184C313.826 184 314 175.333 314 159V134H339C355.333 134 364 133.826 364 133.5C364 133.225 364.9 133 366 133C367.1 133 368 132.775 368 132.5C368 132.225 368.342 132 368.761 132C369.751 132 375 126.751 375 125.761C375 125.343 375.225 125 375.5 125C375.775 125 376 124.55 376 124C376 123.45 376.225 123 376.5 123C376.796 123 377 121.167 377 118.5C377 115.833 376.796 114 376.5 114C376.225 114 376 113.374 376 112.61C376 111.794 375.587 110.924 375 110.5C374.45 110.104 374 109.486 374 109.127C374 108.216 369.694 104 368.763 104C368.344 104 368 103.775 368 103.5C368 103.225 367.55 103 367 103C366.45 103 366 102.775 366 102.5C366 102.173 357 102 340 102H314V76.5C314 59.8335 313.827 51 313.5 51C313.225 51 313 50.325 313 49.5C313 48.675 312.775 48 312.5 48C312.225 48 312 47.55 312 47C312 46.45 311.775 46 311.5 46C311.225 46 311 45.655 311 45.2335C311 44.2975 307.789 41 306.877 41C306.516 41 305.896 40.55 305.5 40C305.076 39.413 304.205 39 303.389 39C302.625 39 302 38.775 302 38.5C302 38.2085 300.333 38 298 38C295.667 38 294 38.2085 294 38.5ZM188 159.5C188 159.775 187.375 160 186.611 160C185.795 160 184.924 160.413 184.5 161C184.104 161.55 183.484 162 183.123 162C182.212 162 179 165.298 179 166.234C179 166.655 178.775 167 178.5 167C178.225 167 178 167.45 178 168C178 168.55 177.775 169 177.5 169C177.225 169 177 169.675 177 170.5C177 171.325 176.775 172 176.5 172C176.215 172 176 173.5 176 175.5C176 177.5 176.215 179 176.5 179C176.775 179 177 179.625 177 180.389C177 181.205 177.413 182.076 178 182.5C178.55 182.896 179 183.523 179 183.893C179 184.263 180.125 185.661 181.5 187C182.875 188.339 184 189.697 184 190.017C184 190.337 184.675 191.229 185.5 192C186.325 192.771 187 193.671 187 194C187 194.329 187.675 195.229 188.5 196C189.325 196.771 190 197.761 190 198.201C190 198.641 190.225 199 190.5 199C190.775 199 191 199.4 191 199.889C191 200.379 191.45 201.104 192 201.5C192.55 201.896 193 202.621 193 203.111C193 203.6 193.225 204 193.5 204C193.775 204 194 204.45 194 205C194 205.55 194.225 206 194.5 206C194.775 206 195 206.45 195 207C195 207.55 195.225 208 195.5 208C195.775 208 196 208.45 196 209C196 209.55 196.225 210 196.5 210C196.775 210 197 210.45 197 211C197 211.55 197.225 212 197.5 212C197.775 212 198 212.45 198 213C198 213.55 198.225 214 198.5 214C198.775 214 199 214.675 199 215.5C199 216.325 199.225 217 199.5 217C199.775 217 200 217.675 200 218.5C200 219.325 200.225 220 200.5 220C200.775 220 201 220.45 201 221C201 221.55 201.225 222 201.5 222C201.775 222 202 222.9 202 224C202 225.1 202.225 226 202.5 226C202.775 226 203 226.675 203 227.5C203 228.325 203.225 229 203.5 229C203.775 229 204 230.125 204 231.5C204 232.875 204.225 234 204.5 234C204.775 234 205 235.125 205 236.5C205 237.875 205.225 239 205.5 239C205.792 239 206 240.667 206 243C206 245.333 206.208 247 206.5 247C206.796 247 207 248.833 207 251.5C207 254.167 206.796 256 206.5 256C206.225 256 206 256.9 206 258C206 259.1 205.775 260 205.5 260C205.225 260 205 260.341 205 260.759C205 261.629 198.806 268 197.96 268C197.653 268 196.771 268.675 196 269.5C195.229 270.325 194.239 271 193.799 271C193.359 271 193 271.225 193 271.5C193 271.775 192.6 272 192.111 272C191.621 272 190.896 272.45 190.5 273C190.104 273.55 189.379 274 188.889 274C188.4 274 188 274.225 188 274.5C188 274.775 187.55 275 187 275C186.45 275 186 275.225 186 275.5C186 275.775 185.325 276 184.5 276C183.675 276 183 276.225 183 276.5C183 276.775 182.55 277 182 277C181.45 277 181 277.225 181 277.5C181 277.775 180.325 278 179.5 278C178.675 278 178 278.225 178 278.5C178 278.775 177.1 279 176 279C174.9 279 174 279.225 174 279.5C174 279.775 173.325 280 172.5 280C171.675 280 171 280.225 171 280.5C171 280.775 169.875 281 168.5 281C167.125 281 166 281.225 166 281.5C166 281.775 164.875 282 163.5 282C162.125 282 161 282.225 161 282.5C161 282.778 159.666 283 158 283C156.334 283 155 283.222 155 283.5C155 283.785 153.5 284 151.5 284C149.5 284 148 284.215 148 284.5C148 284.796 146.167 285 143.5 285C140.833 285 139 285.204 139 285.5C139 285.808 136.5 286 132.5 286C128.5 286 126 286.192 126 286.5C126 286.817 122.333 287 116 287C109.667 287 106 286.817 106 286.5C106 286.194 103.667 286 100 286C96.3335 286 94 285.806 94 285.5C94 285.215 92.5 285 90.5 285C88.5 285 87 284.785 87 284.5C87 284.222 85.6665 284 84 284C82.3335 284 81 283.778 81 283.5C81 283.225 79.875 283 78.5 283C77.125 283 76 282.775 76 282.5C76 282.225 75.325 282 74.5 282C73.675 282 73 281.775 73 281.5C73 281.225 72.1 281 71 281C69.9 281 69 280.775 69 280.5C69 280.225 68.325 280 67.5 280C66.675 280 66 279.775 66 279.5C66 279.225 65.325 279 64.5 279C63.675 279 63 278.775 63 278.5C63 278.225 62.325 278 61.5 278C60.675 278 60 277.775 60 277.5C60 277.225 59.55 277 59 277C58.45 277 58 276.775 58 276.5C58 276.225 57.325 276 56.5 276C55.675 276 55 275.775 55 275.5C55 275.225 54.55 275 54 275C53.45 275 53 274.775 53 274.5C53 274.225 52.55 274 52 274C51.45 274 51 273.775 51 273.5C51 273.225 50.55 273 50 273C49.45 273 49 272.775 49 272.5C49 272.225 48.55 272 48 272C47.45 272 47 271.775 47 271.5C47 271.225 46.55 271 46 271C45.45 271 45 270.775 45 270.5C45 270.225 44.5995 270 44.1105 270C43.621 270 42.8965 269.55 42.5 269C42.1035 268.45 41.4285 268 41 268C40.5715 268 39.8965 267.55 39.5 267C39.1035 266.45 38.481 266 38.117 266C37.2585 266 35 263.741 35 262.883C35 262.519 34.55 261.896 34 261.5C33.45 261.104 33 260.379 33 259.889C33 259.4 32.775 259 32.5 259C32.189 259 32 256.167 32 251.5C32 246.833 32.189 244 32.5 244C32.7855 244 33 242.5 33 240.5C33 238.5 33.2145 237 33.5 237C33.775 237 34 235.875 34 234.5C34 233.125 34.225 232 34.5 232C34.775 232 35 231.1 35 230C35 228.9 35.225 228 35.5 228C35.775 228 36 227.325 36 226.5C36 225.675 36.225 225 36.5 225C36.775 225 37 224.325 37 223.5C37 222.675 37.225 222 37.5 222C37.775 222 38 221.325 38 220.5C38 219.675 38.225 219 38.5 219C38.775 219 39 218.325 39 217.5C39 216.675 39.225 216 39.5 216C39.775 216 40 215.55 40 215C40 214.45 40.225 214 40.5 214C40.775 214 41 213.325 41 212.5C41 211.675 41.225 211 41.5 211C41.775 211 42 210.55 42 210C42 209.45 42.225 209 42.5 209C42.775 209 43 208.55 43 208C43 207.45 43.225 207 43.5 207C43.775 207 44 206.6 44 206.111C44 205.621 44.45 204.896 45 204.5C45.55 204.104 46 203.379 46 202.889C46 202.4 46.225 202 46.5 202C46.775 202 47 201.6 47 201.111C47 200.621 47.45 199.896 48 199.5C48.55 199.104 49 198.428 49 198C49 197.572 49.45 196.896 50 196.5C50.55 196.104 51 195.428 51 195C51 194.572 51.45 193.896 52 193.5C52.55 193.104 53 192.428 53 192C53 191.572 53.45 190.896 54 190.5C54.55 190.104 55 189.428 55 189C55 188.572 55.45 187.896 56 187.5C56.55 187.104 57 186.428 57 186C57 185.572 57.45 184.896 58 184.5C58.55 184.104 59 183.379 59 182.889C59 182.4 59.225 182 59.5 182C59.775 182 60 181.325 60 180.5C60 179.675 60.225 179 60.5 179C60.775 179 61 178.325 61 177.5C61 176.675 61.225 176 61.5 176C61.775 176 62 174.875 62 173.5C62 172.125 61.775 171 61.5 171C61.225 171 61 170.375 61 169.611C61 168.795 60.587 167.924 60 167.5C59.45 167.104 59 166.481 59 166.117C59 165.259 56.7415 163 55.883 163C55.519 163 54.8965 162.55 54.5 162C54.0765 161.413 53.2055 161 52.3895 161C51.6255 161 51 160.775 51 160.5C51 160.208 49.3335 160 47 160C44.6665 160 43 160.208 43 160.5C43 160.775 42.325 161 41.5 161C40.675 161 40 161.225 40 161.5C40 161.775 39.55 162 39 162C38.45 162 38 162.225 38 162.5C38 162.775 37.659 163 37.242 163C36.381 163 29 170.193 29 171.031C29 171.332 28.1 172.443 27 173.5C25.9 174.557 25 175.727 25 176.1C25 176.474 24.55 177.104 24 177.5C23.45 177.896 23 178.572 23 179C23 179.428 22.55 180.104 22 180.5C21.45 180.896 21 181.621 21 182.111C21 182.6 20.775 183 20.5 183C20.225 183 20 183.4 20 183.889C20 184.379 19.55 185.104 19 185.5C18.45 185.896 18 186.621 18 187.111C18 187.6 17.775 188 17.5 188C17.225 188 17 188.45 17 189C17 189.55 16.775 190 16.5 190C16.225 190 16 190.45 16 191C16 191.55 15.775 192 15.5 192C15.225 192 15 192.45 15 193C15 193.55 14.775 194 14.5 194C14.225 194 14 194.45 14 195C14 195.55 13.775 196 13.5 196C13.225 196 13 196.45 13 197C13 197.55 12.775 198 12.5 198C12.225 198 12 198.45 12 199C12 199.55 11.775 200 11.5 200C11.225 200 11 200.45 11 201C11 201.55 10.775 202 10.5 202C10.225 202 10 202.675 10 203.5C10 204.325 9.775 205 9.5 205C9.225 205 9 205.45 9 206C9 206.55 8.775 207 8.5 207C8.225 207 8 207.675 8 208.5C8 209.325 7.775 210 7.5 210C7.225 210 7 210.675 7 211.5C7 212.325 6.775 213 6.5 213C6.225 213 6 213.675 6 214.5C6 215.325 5.775 216 5.5 216C5.225 216 5 216.9 5 218C5 219.1 4.775 220 4.5 220C4.225 220 4 220.9 4 222C4 223.1 3.775 224 3.5 224C3.225 224 3 225.125 3 226.5C3 227.875 2.775 229 2.5 229C2.225 229 2 230.125 2 231.5C2 232.875 1.775 234 1.5 234C1.2085 234 1 235.667 1 238C1 240.333 0.7915 242 0.5 242C0.184 242 0 245.5 0 251.5C0 257.5 0.184 261 0.5 261C0.775 261 1 261.9 1 263C1 264.1 1.225 265 1.5 265C1.775 265 2 265.9 2 267C2 268.1 2.225 269 2.5 269C2.775 269 3 269.45 3 270C3 270.55 3.225 271 3.5 271C3.775 271 4 271.45 4 272C4 272.55 4.225 273 4.5 273C4.775 273 5 273.45 5 274C5 274.55 5.225 275 5.5 275C5.775 275 6 275.45 6 276C6 276.55 6.225 277 6.5 277C6.775 277 7 277.4 7 277.889C7 278.379 7.45 279.104 8 279.5C8.55 279.896 9 280.511 9 280.866C9 281.708 20.2925 293 21.1345 293C21.489 293 22.1035 293.45 22.5 294C22.8965 294.55 23.5715 295 24 295C24.4285 295 25.1035 295.45 25.5 296C25.8965 296.55 26.5715 297 27 297C27.4285 297 28.1035 297.45 28.5 298C28.8965 298.55 29.621 299 30.1105 299C30.5995 299 31 299.225 31 299.5C31 299.775 31.45 300 32 300C32.55 300 33 300.225 33 300.5C33 300.775 33.4005 301 33.8895 301C34.379 301 35.1035 301.45 35.5 302C35.8965 302.55 36.621 303 37.1105 303C37.5995 303 38 303.225 38 303.5C38 303.775 38.45 304 39 304C39.55 304 40 304.225 40 304.5C40 304.775 40.675 305 41.5 305C42.325 305 43 305.225 43 305.5C43 305.775 43.45 306 44 306C44.55 306 45 306.225 45 306.5C45 306.775 45.45 307 46 307C46.55 307 47 307.225 47 307.5C47 307.775 47.675 308 48.5 308C49.325 308 50 308.225 50 308.5C50 308.775 50.45 309 51 309C51.55 309 52 309.225 52 309.5C52 309.775 52.675 310 53.5 310C54.325 310 55 310.225 55 310.5C55 310.775 55.675 311 56.5 311C57.325 311 58 311.225 58 311.5C58 311.775 58.675 312 59.5 312C60.325 312 61 312.225 61 312.5C61 312.775 61.9 313 63 313C64.1 313 65 313.225 65 313.5C65 313.775 65.675 314 66.5 314C67.325 314 68 314.225 68 314.5C68 314.775 68.9 315 70 315C71.1 315 72 315.225 72 315.5C72 315.775 73.125 316 74.5 316C75.875 316 77 316.225 77 316.5C77 316.778 78.3335 317 80 317C81.6665 317 83 317.222 83 317.5C83 317.778 84.3335 318 86 318C87.6665 318 89 318.222 89 318.5C89 318.8 91 319 94 319C97 319 99 319.2 99 319.5C99 319.823 104.667 320 115 320C125.333 320 131 319.823 131 319.5C131 319.2 133 319 136 319C139 319 141 318.8 141 318.5C141 318.208 142.667 318 145 318C147.333 318 149 317.792 149 317.5C149 317.222 150.334 317 152 317C153.666 317 155 316.778 155 316.5C155 316.225 156.125 316 157.5 316C158.875 316 160 315.775 160 315.5C160 315.225 161.125 315 162.5 315C163.875 315 165 314.775 165 314.5C165 314.225 165.9 314 167 314C168.1 314 169 313.775 169 313.5C169 313.225 169.9 313 171 313C172.1 313 173 312.775 173 312.5C173 312.225 173.9 312 175 312C176.1 312 177 311.775 177 311.5C177 311.225 177.675 311 178.5 311C179.325 311 180 310.775 180 310.5C180 310.225 180.675 310 181.5 310C182.325 310 183 309.775 183 309.5C183 309.225 183.9 309 185 309C186.1 309 187 308.775 187 308.5C187 308.225 187.45 308 188 308C188.55 308 189 307.775 189 307.5C189 307.225 189.675 307 190.5 307C191.325 307 192 306.775 192 306.5C192 306.225 192.675 306 193.5 306C194.325 306 195 305.775 195 305.5C195 305.225 195.45 305 196 305C196.55 305 197 304.775 197 304.5C197 304.225 197.45 304 198 304C198.55 304 199 303.775 199 303.5C199 303.225 199.45 303 200 303C200.55 303 201 302.775 201 302.5C201 302.225 201.45 302 202 302C202.55 302 203 301.775 203 301.5C203 301.225 203.45 301 204 301C204.55 301 205 300.775 205 300.5C205 300.225 205.45 300 206 300C206.55 300 207 299.775 207 299.5C207 299.225 207.45 299 208 299C208.55 299 209 298.775 209 298.5C209 298.225 209.4 298 209.889 298C210.379 298 211.104 297.55 211.5 297C211.896 296.45 212.572 296 213 296C213.428 296 214.104 295.55 214.5 295C214.896 294.45 215.526 294 215.9 294C216.273 294 217.443 293.1 218.5 292C219.557 290.9 220.668 290 220.968 290C221.742 290 230 281.65 230 280.867C230 280.512 230.45 279.896 231 279.5C231.55 279.104 232 278.428 232 278C232 277.572 232.45 276.896 233 276.5C233.55 276.104 234 275.379 234 274.889C234 274.4 234.225 274 234.5 274C234.775 274 235 273.55 235 273C235 272.45 235.225 272 235.5 272C235.775 272 236 271.55 236 271C236 270.45 236.225 270 236.5 270C236.775 270 237 269.325 237 268.5C237 267.675 237.225 267 237.5 267C237.775 267 238 265.875 238 264.5C238 263.125 238.225 262 238.5 262C238.817 262 239 258.167 239 251.5C239 244.833 238.817 241 238.5 241C238.208 241 238 239.333 238 237C238 234.667 237.792 233 237.5 233C237.225 233 237 231.875 237 230.5C237 229.125 236.775 228 236.5 228C236.225 228 236 226.875 236 225.5C236 224.125 235.775 223 235.5 223C235.225 223 235 222.325 235 221.5C235 220.675 234.775 220 234.5 220C234.225 220 234 219.1 234 218C234 216.9 233.775 216 233.5 216C233.225 216 233 215.325 233 214.5C233 213.675 232.775 213 232.5 213C232.225 213 232 212.325 232 211.5C232 210.675 231.775 210 231.5 210C231.225 210 231 209.325 231 208.5C231 207.675 230.775 207 230.5 207C230.225 207 230 206.55 230 206C230 205.45 229.775 205 229.5 205C229.225 205 229 204.325 229 203.5C229 202.675 228.775 202 228.5 202C228.225 202 228 201.55 228 201C228 200.45 227.775 200 227.5 200C227.225 200 227 199.55 227 199C227 198.45 226.775 198 226.5 198C226.225 198 226 197.55 226 197C226 196.45 225.775 196 225.5 196C225.225 196 225 195.55 225 195C225 194.45 224.775 194 224.5 194C224.225 194 224 193.55 224 193C224 192.45 223.775 192 223.5 192C223.225 192 223 191.55 223 191C223 190.45 222.775 190 222.5 190C222.225 190 222 189.55 222 189C222 188.45 221.775 188 221.5 188C221.225 188 221 187.6 221 187.111C221 186.621 220.55 185.896 220 185.5C219.45 185.104 219 184.428 219 184C219 183.572 218.55 182.896 218 182.5C217.45 182.104 217 181.428 217 181C217 180.572 216.55 179.896 216 179.5C215.45 179.104 215 178.428 215 178C215 177.572 214.55 176.896 214 176.5C213.45 176.104 213 175.474 213 175.1C213 174.727 212.1 173.557 211 172.5C209.9 171.443 209 170.318 209 170C209 169.682 208.1 168.557 207 167.5C205.9 166.443 205 165.325 205 165.016C205 164.236 202.689 162 201.883 162C201.519 162 200.896 161.55 200.5 161C200.076 160.413 199.205 160 198.389 160C197.625 160 197 159.775 197 159.5C197 159.204 195.167 159 192.5 159C189.833 159 188 159.204 188 159.5Z"}})])},ou=[],lu={name:"IconAddUser"},cu=lu,uu=Object(b["a"])(cu,ru,ou,!1,null,null,null),du=uu.exports,mu={methods:{getSubscribeType:function(t){var e=null===t||void 0===t?void 0:t.role;if(!e)switch(null===t||void 0===t?void 0:t.privacy){case 1:return"new";case 2:return"request";default:return""}return"author"===e?"author":"exists"},subscribeInvite:function(t){this.subscribeOnCommunity(t)},unsubscribeInvite:function(t){this.unsubscribeCommunity(t)},sendRequest:function(t){this.requestCommunity(t)},subscribeOnCommunity:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$communities.subscribe(t.id);case 4:s=i.sent,i.next=11;break;case 7:throw i.prev=7,i.t0=i["catch"](1),window.console.warn(i.t0.detailMessage),i.t0;case 11:return s?s.status&&422===s.status?e.$root.$notify("Вы уже подписаны на ".concat(t.name)):(t.role="user",e.$root.$notify("Вы успешно подписались на сообщество ".concat(t.name))):e.$root.$alert("Не получилось подписаться на ".concat(t.name),"bg-warning",3),i.abrupt("return",!0);case 13:case"end":return i.stop()}}),i,null,[[1,7]])})))()},unsubscribeCommunity:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$communities.unsubscribe(t.id);case 4:s=i.sent,i.next=11;break;case 7:throw i.prev=7,i.t0=i["catch"](1),window.console.warn(i.t0.detailMessage),i.t0;case 11:return s?(t.role=null,e.$root.$notify("Вы успешно отписались от ".concat(t.name))):e.$root.$alert("Не получилось отписаться от ".concat(t.name),"bg-warning",3),i.abrupt("return",!0);case 13:case"end":return i.stop()}}),i,null,[[1,7]])})))()},requestCommunity:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$communities.requestCreate(t.id);case 4:s=i.sent,i.next=11;break;case 7:throw i.prev=7,i.t0=i["catch"](1),window.console.warn(i.t0.detailMessage),i.t0;case 11:return s?e.$root.$notify(s.message,"bg-success",3):e.$root.$alert("Ошибка отправки запроса","bg-warning",3),i.abrupt("return",!0);case 13:case"end":return i.stop()}}),i,null,[[1,7]])})))()}}},pu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"plizi-community-privacy-label mb-0",class:{"text-red":"Закрытое"==t.privacyLabel,"text-blue":"Частное"==t.privacyLabel}},[t._v(" "+t._s(t.privacyLabel)+" сообщество ")])},hu=[],fu={name:"PrivacyLabel",props:{community:rs},computed:{privacyLabel:function(){var t;return Wc.getPrivacyLabel(null===(t=this.community)||void 0===t?void 0:t.privacy)}}},vu=fu,gu=Object(b["a"])(vu,pu,hu,!1,null,null,null),bu=gu.exports,Cu={name:"CommunityItem",components:{PrivacyLabel:bu,IconMessageShort:ml,IconAddUser:du,IconMessage:Ee["a"],IconLocation:Fl},mixins:[mu],props:{community:rs},computed:{avatar:function(){var t;return(null===(t=this.community.avatar)||void 0===t?void 0:t.image.thumb.path)||this.community.primaryImage},subscribeType:function(){return this.getSubscribeType(this.community)},locationLabel:function(){var t,e,i,s=[],a=null===(t=this.community.location)||void 0===t?void 0:t.country.title.ru;a&&s.push(a);var n=null===(e=this.community.location)||void 0===e?void 0:e.region.title.ru;n&&s.push(n);var r=null===(i=this.community.location)||void 0===i?void 0:i.title.ru;return r&&s.push(r),s.join(", ")}},methods:{getAvatar:function(t){var e;return(null===(e=t.profile.avatar)||void 0===e?void 0:e.image.thumb.path)||t.profile.userPic}}},yu=Cu,wu=Object(b["a"])(yu,au,nu,!1,null,null,null),xu=wu.exports,ku=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-potential-friends",class:t.clazz,attrs:{id:"recommendedCommunities"}},[t.title?i("div",{staticClass:"d-flex flex-row justify-content-start pb-3 --pt-5"},[i("h6",{staticClass:"plz-sf-title w-auto mt-3 ml-3"},[t._v(t._s(t.title))])]):t._e(),i("div",{staticClass:"plz-recommended-communities-list pb-2"},t._l(t.communities,(function(t){return i("CommunitiesSmallBlockItem",{key:t.id,attrs:{community:t}})})),1),t.footer?i("div",{staticClass:"d-flex flex-row footer-link justify-content-start pb-3 --pt-5 border-top"},[i("router-link",{staticClass:"ml-4 mt-2",attrs:{to:t.footer.path,tag:"a"}},[t._v(t._s(t.footer.title))])],1):t._e()])},_u=[],$u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-potential-friends-item d-flex align-items-center py-2 px-3"},[i("router-link",{staticClass:"plz-potential-friend-userpic text-body",attrs:{tag:"a",to:{name:"CommunityPage",params:{id:t.community.id}}}},[i("img",{staticClass:"plz-potential-userpic rounded-circle",attrs:{src:t.getCommunityAvatar(t.community),alt:t.community.name}})]),i("div",{staticClass:"plz-potential-friend-title flex align-items-center mr-auto "},[i("router-link",{staticClass:"plz-potential-friend-name",attrs:{to:{name:"CommunityPage",params:{id:t.community.id}}}},[t._v(" "+t._s(t.community.name)+" ")]),i("div",{staticClass:"plz-potential-friend-status"},[i("p",{domProps:{innerHTML:t._s(t.community.noticeShort)}})])],1)],1)},Mu=[],Iu={name:"CommunitiesSmallBlockItem",mixins:[Er],props:{community:rs}},Pu=Iu,Su=Object(b["a"])(Pu,$u,Mu,!1,null,null,null),Lu=Su.exports,Ru={name:"CommunitiesSmallBlock",components:{CommunitiesSmallBlockItem:Lu},props:{communities:Array,title:String,footer:Object,clazz:String},data:function(){return{}}},Nu=Ru,Au=Object(b["a"])(Nu,ku,_u,!1,null,null,null),Fu=Au.exports,zu={components:{AccountToolbarLeft:ks,Spinner:Gi,CommunitiesListHeader:Bc,CommunityItem:xu,CommunityCreateBlock:su,CommunitiesSmallBlock:Fu,FavoriteFriends:sr},data:function(){return{isCommunitiesLoaded:!1,communitiesList:[],isPopularCommunitiesLoaded:!0,popularCommunities:[],isManagedCommunitiesLoaded:!1,managedCommunities:[],isRecommendedCommunitiesDataReady:!1,recommendedCommunities:[],isUserCommunitiesDataReady:!1,userCommunities:[],noMore:!1,enabledLoader:!0,searchString:"",isDataReady:!1}},mounted:function(){this.$root.$on("communitySearchStart",this.searchProcess),window.addEventListener("scroll",this.onScrollYPage),this.searchString=window.localStorage.getItem("lastCommunitiesSearch_"+this.list)||""},beforeRouteLeave:function(t,e,i){window.removeEventListener("scroll",this.onScrollYPage),i()},beforeDestroy:function(){this.$root.$off("communitySearchStart",this.searchProcess)},methods:{searchProcess:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.noMore=!1,e.searchString=t.searchText,"my"!==t.list){i.next=4;break}return i.abrupt("return",e.loadCommunities());case 4:if("owner"!==t.list){i.next=6;break}return i.abrupt("return",e.loadManagedCommunities());case 6:return i.abrupt("return",e.loadPopularCommunities());case 7:case"end":return i.stop()}}),i)})))()},isSubscribed:function(t){if(!this.popularCommunities)return!0;var e=!!this.popularCommunities.find((function(e){return e.id===t}));return e},onScrollYPage:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(window.scrollY>=document.body.scrollHeight-document.documentElement.clientHeight-document.documentElement.clientHeight/2)){e.next=18;break}if("CommunitiesManagePage"!==t.$route.name){e.next=6;break}return e.next=4,t.lazyLoad("manage");case 4:e.next=18;break;case 6:if("CommunitiesPopularPage"!==t.$route.name){e.next=11;break}return e.next=9,t.lazyLoad("popular");case 9:e.next=18;break;case 11:if("userCommunities"!==t.$route.name){e.next=16;break}return e.next=14,t.lazyLoad("userCommunities");case 14:e.next=18;break;case 16:return e.next=18,t.lazyLoad();case 18:case"end":return e.stop()}}),e)})))()},loadCommunities:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:10,a=t.length>1&&void 0!==t[1]?t[1]:0,e.enabledLoader=!0,n=e.searchString,r=null,0===a&&(e.isCommunitiesLoaded=!1),i.prev=6,i.next=9,e.$root.$api.$communities.userCommunities(n,s,a);case 9:r=i.sent,i.next=17;break;case 12:throw i.prev=12,i.t0=i["catch"](6),e.enabledLoader=!1,window.console.warn(i.t0.detailMessage),i.t0;case 17:return e.isCommunitiesLoaded=!0,e.enabledLoader=!1,i.abrupt("return",e.processApiResponce(a,r,"communitiesList"));case 20:case"end":return i.stop()}}),i,null,[[6,12]])})))()},loadPopularCommunities:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:10,a=t.length>1&&void 0!==t[1]?t[1]:0,e.enabledLoader=!0,n=e.searchString,r=null,0===a&&(e.isPopularCommunitiesLoaded=!1),i.prev=6,i.next=9,e.$root.$api.$communities.loadCommunities(n,s,a);case 9:r=i.sent,i.next=17;break;case 12:throw i.prev=12,i.t0=i["catch"](6),e.enabledLoader=!1,window.console.warn(i.t0.detailMessage),i.t0;case 17:return e.isPopularCommunitiesLoaded=!0,e.enabledLoader=!1,i.abrupt("return",e.processApiResponce(a,r,"popularCommunities"));case 20:case"end":return i.stop()}}),i,null,[[6,12]])})))()},loadManagedCommunities:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:10,a=t.length>1&&void 0!==t[1]?t[1]:0,e.enabledLoader=!0,n=e.searchString,r=null,0===a&&(e.isManagedCommunitiesLoaded=!1),i.prev=6,i.next=9,e.$root.$api.$communities.loadManagedCommunities(n,s,a);case 9:r=i.sent,i.next=17;break;case 12:throw i.prev=12,i.t0=i["catch"](6),e.enabledLoader=!1,window.console.warn(i.t0.detailMessage),i.t0;case 17:return e.isManagedCommunitiesLoaded=!0,e.enabledLoader=!1,i.abrupt("return",e.processApiResponce(a,r,"managedCommunities"));case 20:case"end":return i.stop()}}),i,null,[[6,12]])})))()},processApiResponce:function(t,e,i){var s=this;return e?(this.enabledLoader=!1,this.isCommunitiesLoaded=!0,0===t&&(this[i]=[]),e.map((function(t){s[i].push(new rs(t))})),e.length):0},loadRecommendedCommunities:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isRecommendedCommunitiesDataReady=!1,i=null,e.prev=2,e.next=5,t.$root.$api.$communities.recommended();case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),window.console.warn(e.t0.detailMessage);case 11:null!==i&&(t.communities=[],i.list.map((function(e){t.recommendedCommunities.push(new rs(e))})),t.isRecommendedCommunitiesDataReady=!0);case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))()},getUserCommunitiesList:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:10,a=t.length>1&&void 0!==t[1]?t[1]:0,n=null,e.isUserCommunitiesDataReady=!1,i.prev=4,i.next=7,e.$root.$api.$users.getUserCommunities(e.userId,s,a);case 7:n=i.sent,i.next=15;break;case 10:throw i.prev=10,i.t0=i["catch"](4),e.isStarted=!1,window.console.warn(i.t0.detailMessage),i.t0;case 15:return e.isUserCommunitiesDataReady=!0,e.enabledLoader=!1,i.abrupt("return",e.processApiResponce(a,n.list,"userCommunities"));case 18:case"end":return i.stop()}}),i,null,[[4,10]])})))()},lazyLoad:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=t.length>0&&void 0!==t[0]?t[0]:null,!e.noMore&&!e.enabledLoader){i.next=3;break}return i.abrupt("return");case 3:if(e.enabledLoader=!0,"manage"!==s){i.next=12;break}if(a=e.managedCommunities.length,!a){i.next=10;break}return i.next=9,e.loadManagedCommunities(20,a++);case 9:n=i.sent;case 10:i.next=33;break;case 12:if("popular"!==s){i.next=20;break}if(a=e.popularCommunities.length,!a){i.next=18;break}return i.next=17,e.loadPopularCommunities(20,a++);case 17:n=i.sent;case 18:i.next=33;break;case 20:if("userCommunities"!==s){i.next=28;break}if(a=e.userCommunities.length,!a){i.next=26;break}return i.next=25,e.getUserCommunitiesList(20,a++);case 25:n=i.sent;case 26:i.next=33;break;case 28:if(a=e.communitiesList.length,!a){i.next=33;break}return i.next=32,e.loadCommunities(20,a++);case 32:n=i.sent;case 33:0===n&&(e.noMore=!0),e.enabledLoader=!1;case 35:case"end":return i.stop()}}),i)})))()}}},Eu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.filteredPosts&&t.filteredPosts.length>1||"all"!==t.filterMode?i("ProfileFilter",{attrs:{firstName:t.profileData.firstName},on:{wallPostsSelect:t.wallPostsSelectHandler}}):t._e(),t.filteredPosts&&t.filteredPosts.length>0?t._l(t.filteredPosts,(function(e){return i("Post",{directives:[{name:"waypoint",rawName:"v-waypoint",value:{active:!0,callback:function(e){var i=e.el,s=e.going,a=e.direction;t.postIsRead(i,s,a)},options:{threshold:[.5]}},expression:"{ active: true, callback: ({ el, going, direction })=>{ postIsRead(el, going, direction); }, options: { threshold: [0.5] } }"}],key:"userPost-"+e.id,attrs:{post:e},on:{onShare:t.onSharePost,onShowUsersLikes:t.openLikeModal}})})):t.isStarted?t._e():i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},[t._v(" Пользователь "+t._s(t.profileData.firstName)+" не создал ни одной записи. ")])]),t.isStarted?[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2)},ju=[],Du={name:"UserPosts",components:{Post:Hr,ProfileFilter:vc,SmallSpinner:J["a"]},mixins:[Jo],props:{isStarted:Boolean,filterMode:{},filteredPosts:{},onSharePost:{},openLikeModal:{},profileData:{},wallPostsSelectHandler:{}}},Ou=Du,Tu=Object(b["a"])(Ou,Eu,ju,!1,null,null,null),Hu=Tu.exports,Uu={name:"PersonalPage",props:{id:Number|String},components:{UserPosts:Hu,CommunitiesSmallBlock:Fu,Spinner:Gi,AccountToolbarLeft:ks,FavoriteFriends:sr,ProfileHeader:Kl,NewPersonalMessageModal:Rc,ProfilePhotos:uc,PostRepostModal:Uo,PostLikeModal:Go,IconUnlock:jc},mixins:[Wn,Wo,Ul,Cc,zu],data:function(){return{userId:null,profileData:{},isDataReady:!1,isShowMessageDialog:!1,posts:[],footerLink:null,userPhotos:[],filterMode:"all",postRepostModal:{isVisible:!1},postForRepost:null,postLikeModal:{isVisible:!1,content:{postId:null}}}},watch:{$route:"afterRouteUpdate"},computed:{filteredPosts:function(){var t=this;return"user"===this.filterMode?this.posts.filter((function(e){return e.checkIsMinePost(t.profileData.id)})):this.posts},isLockedProfile:function(){return!(!(this.profileData&&this.profileData.privacySettings&&this.profileData.stats)||(2!==this.profileData.privacySettings.pageType||this.profileData.stats.isFriend)&&3!==this.profileData.privacySettings.pageType)}},methods:{afterRouteUpdate:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.userId=t.params.id,e.posts=[],e.isStarted=!0,e.isLockedProfile){i.next=11;break}return i.next=6,e.getUserInfo();case 6:if("PersonalPage"!==e.$root.$router.currentRoute.name){i.next=11;break}return i.next=9,e.getPosts();case 9:return i.next=11,e.getUserPhotos(e.id);case 11:window.scrollTo(0,0);case 12:case"end":return i.stop()}}),i)})))()},calcCentralBlockClass:function(){var t=this.$root.$auth.fm.size>0||this.userCommunities||this.profileData.videos;return{"col-lg-8 col-xl-8":t,"col-lg-11 col-xl-11":!t}},wallPostsSelectHandler:function(t){this.filterMode=t.wMode},onSharePost:function(t){this.postRepostModal.isVisible=!0,this.postForRepost=t},hidePostRepostModal:function(){this.postRepostModal.isVisible=!1,this.postForRepost=null},onHidePersonalMsgModal:function(){this.isShowMessageDialog=!1},onShowPersonalMsgModal:function(){this.isShowMessageDialog=!0},hideLikeModal:function(){this.postLikeModal.isVisible=!1,this.postLikeModal.content.postId=null},openLikeModal:function(t){this.postLikeModal.isVisible=!0,this.postLikeModal.content.postId=t},handlePersonalMessage:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.onHidePersonalMsgModal(),e.$root.$once("NewChatDialog",(function(i){e.sendPrivateMessageToUser(i,t.message)})),i.next=4,e.openDialogWithFriend({id:e.profileData.id,fullName:e.profileData.fullName});case 4:case"end":return i.stop()}}),i)})))()},sendPrivateMessageToUser:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a={chatId:t.id,body:e.postText,attachments:e.attachments,event:"new.message"},i.$root.$api.sendToChannel(a);case 2:case"end":return s.stop()}}),s)})))()},getUserInfo:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$users.getUser(t.userId);case 4:i=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e["catch"](1),t.isStarted=!1,window.console.warn(e.t0.detailMessage),e.t0;case 12:i&&(t.profileData=new Qi["a"](i.data),t.isDataReady=!0);case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))()},getPosts:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=t.length>0&&void 0!==t[0]?t[0]:50,a=t.length>1&&void 0!==t[1]?t[1]:0,e.profileData&&e.profileData.id){i.next=4;break}return i.abrupt("return");case 4:return n=null,i.prev=5,i.next=8,e.$root.$api.$post.getPostsByUserId(e.profileData.id,s,a);case 8:n=i.sent,i.next=15;break;case 11:i.prev=11,i.t0=i["catch"](5),e.isStarted=!1,console.warn(i.t0.detailMessage);case 15:if(null===n){i.next=19;break}return e.isStarted=!1,n.map((function(t){e.posts.push(new zr(t))})),i.abrupt("return",n.length);case 19:case"end":return i.stop()}}),i,null,[[5,11]])})))()}},created:function(){var t=this;this.userId=this.id,this.$root.$on(this.$root.$auth.frm.updateEventName,(function(){t.$refs&&t.$refs.personalProfileHeader&&t.$refs.personalProfileHeader.$forceUpdate()}))},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isStarted=!0,e.next=3,t.getUserInfo();case 3:if(t.isLockedProfile){e.next=12;break}if("PersonalPage"!==t.$root.$router.currentRoute.name){e.next=9;break}return e.next=7,t.getUserPhotos(t.userId);case 7:return e.next=9,t.getPosts();case 9:return e.next=11,t.getUserCommunitiesList(6);case 11:t.userCommunities.length>5&&(t.footerLink={title:"Все сообщества",path:"/user-".concat(t.id,"/communities")});case 12:window.scrollTo(0,0);case 13:case"end":return e.stop()}}),e)})))()}},Vu=Uu,Bu=(i("aab6"),Object(b["a"])(Vu,_c,$c,!1,null,null,null)),Yu=Bu.exports,qu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-9 col-xl-8  px-0 px-md-3"},[i("AccountSettingsMain"),i("AccountSettingsPrivacy"),i("AccountSettingsSecurity")],1),i("div",{staticClass:"d-none d-xl-block col-sm-2 col-md-2 col-lg-2 col-xl-2  px-0 px-md-3"},[i("AccountSettingsSideMenu")],1),i("div",{staticClass:"col-md-2 col-lg-2 col-xl-1 d-none d-md-block pr-0  px-0 px-md-3"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},Ku=[],Gu=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings bg-white-br20 plz-mb20 container-fluid",attrs:{id:"accountSettingsMain"}},[i("form",{staticClass:"plz-account-settings-form pb-0 px-3 mb-0"},[t._m(0),i("div",{staticClass:"plz-account-settings-body "},[i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4 ",attrs:{for:"firstName"}},[t._v(" Имя ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6 "},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.firstName,expression:"model.firstName"}],ref:"firstName",staticClass:"w-50 w-sm-75",class:[t.isEdit.firstName?"form-control":"form-control-plaintext",{"is-invalid":!!t.firstNameError,"is-valid":t.isSuccessFirstName}],attrs:{type:"text",id:"firstName",readonly:!t.isEdit.firstName},domProps:{value:t.model.firstName},on:{input:[function(e){e.target.composing||t.$set(t.model,"firstName",e.target.value)},function(e){return t.inputFieldEdit(e,"firstName")}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.accountStartSaveData(e.target.value,"firstName")},blur:function(e){return t.finishFieldEdit("firstName")}}}),i("div",{staticClass:"invalid-feedback"},[i("p",{staticClass:"text-danger"},[t._v(t._s(t.firstNameError))])])]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 d-flex"},[i("button",{staticClass:"btn btn-link",class:{"text-primary":t.isEdit.firstName},attrs:{type:"button"},on:{click:function(e){t.isEdit.firstName?t.finishFieldEdit("firstName"):t.startFieldEdit("firstName")}}},[t._v(" "+t._s(t.isEdit.firstName?"Сохранить":"Изменить")+" ")])])]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4",attrs:{for:"lastName"}},[t._v("Фамилия")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6 "},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.lastName,expression:"model.lastName"}],ref:"lastName",staticClass:"w-50 w-sm-75",class:[t.isEdit.lastName?"form-control":"form-control-plaintext",{"is-invalid":!!t.lastNameError,"is-valid":t.isSuccessLastName}],attrs:{id:"lastName",type:"text",readonly:!t.isEdit.lastName},domProps:{value:t.model.lastName},on:{input:[function(e){e.target.composing||t.$set(t.model,"lastName",e.target.value)},function(e){return t.inputFieldEdit(e,"lastName")}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.accountStartSaveData(e.target.value,"lastName")},blur:function(e){return t.finishFieldEdit("lastName")}}}),i("div",{staticClass:"invalid-feedback"},[i("p",{staticClass:"text-danger"},[t._v(t._s(t.lastNameError))])])]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 d-flex"},[i("button",{staticClass:"btn btn-link",class:{"text-primary":t.isEdit.firstName},attrs:{type:"button"},on:{click:function(e){t.isEdit.lastName?t.finishFieldEdit("lastName"):t.startFieldEdit("lastName")}}},[t._v(" "+t._s(t.isEdit.lastName?"Сохранить":"Изменить")+" ")])])]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4 ",attrs:{for:"userSex"}},[t._v("Пол")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5  col-lg-6 "},[i("div",{staticClass:"w-100 w-sm-75  position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.model.sex,expression:"model.sex"}],staticClass:"form-control border-0 pl-2",attrs:{id:"userSex"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.model,"sex",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.model.sex,"sex")}]}},[i("option",{attrs:{value:"n"}},[t._v("Не указано")]),i("option",{attrs:{value:"m"}},[t._v("Мужской")]),i("option",{attrs:{value:"f"}},[t._v("Женский")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])]),i("div",{staticClass:"col-3"})]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4",attrs:{for:"relationship"}},[t._v(" Семейной положение ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"w-100 w-sm-75 position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.model.relationshipId,expression:"model.relationshipId"}],staticClass:"form-control border-0 pl-2",attrs:{id:"relationship"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.model,"relationshipId",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.model.relationshipId,"relationshipId")}]}},[i("option",{attrs:{value:"null",selected:"",disabled:""}},[t._v("Выберите вариант")]),i("option",{attrs:{value:"1"}},[t._v("В браке")]),i("option",{attrs:{value:"2"}},[t._v("Не в браке")]),i("option",{attrs:{value:"3"}},[t._v("В активном поиске")]),i("option",{attrs:{value:"4"}},[t._v("Встречаюсь")]),i("option",{attrs:{value:"5"}},[t._v("В отношениях")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])]),i("div",{staticClass:"col-3 d-sm-none d-md-none"})]),t.canEditRelationUser?i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4",attrs:{for:"relationshipUsers"}},[t._v(" С кем ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"w-100 w-sm-75 position-relative "},[i("multiselect",{staticClass:"w-100 w-sm-75 border-0 form-control p-0 position-relative relationshipUsers",attrs:{id:"relationshipUsers",options:t.friends,showLabels:!1,"track-by":"id",label:"id",placeholder:"Выберите друга","custom-label":t.relationshipUserLabel},on:{select:t.accountStartSaveData,"search-change":t.getFriends},model:{value:t.model.relationshipUser,callback:function(e){t.$set(t.model,"relationshipUser",e)},expression:"model.relationshipUser"}},[i("template",{slot:"noOptions"},[t._v("Результатов нет.")]),i("template",{slot:"noResult"},[t._v("У Вас нет такого друга.")])],2),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})],1)]),i("div",{staticClass:"col-3 d-sm-none d-md-none"})]):t._e(),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 ",attrs:{for:"birthday"}},[t._v(" Дата рождения ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6  "},[t.isEdit.birthday?t._e():i("div",{staticClass:"form-control-plaintext border-bottom-0"},[t.model.birthday?[t._v(" "+t._s(t._f("toDMY")(t.model.birthday))+" ")]:[t._v(" Не указано ")]],2),t.isEdit.birthday?i("input",{ref:"birthday",staticClass:"form-control w-50 w-sm-75",class:{"is-invalid":!!t.birthdayError,"is-valid":t.isSuccessBirthday},attrs:{id:"birthday",type:"date"},domProps:{value:t._f("toYMD")(t.model.birthday)},on:{input:function(e){return t.inputFieldEdit(e,"birthday")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.accountStartSaveData(e.target.value,"birthday")},blur:function(e){return t.finishFieldEdit("birthday")}}}):t._e(),i("div",{staticClass:"invalid-feedback"},[i("p",{staticClass:"text-danger"},[t._v(t._s(t.birthdayError))])])]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 col-xl-auto d-lg-flex "},[i("button",{staticClass:"btn btn-link",class:{"text-primary":t.isEdit.birthday},attrs:{type:"button"},on:{click:function(e){t.isEdit.birthday?t.finishFieldEdit("birthday"):t.startFieldEdit("birthday")}}},[t._v(" "+t._s(t.isEdit.birthday?"Сохранить":"Изменить")+" ")])])]),i("div",{staticClass:"form-group row border-bottom d-flex "},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4",attrs:{for:"location"}},[t._v(" Месторасположение ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 pl-4 col-6 col-lg-8  d-flex align-items-center"},[i("i",{staticClass:"fas fa-map-marker-alt"}),i("multiselect",{staticClass:"w-100 w-sm-75 ml-1 border-0 form-control p-0 position-relative",attrs:{id:"location",options:t.geoLocations,showLabels:!1,"track-by":"title",label:"title",placeholder:"Выберите местоположение","custom-label":t.locationLabel},on:{select:t.accountStartSaveData,"search-change":t.getLocations},model:{value:t.model.location,callback:function(e){t.$set(t.model,"location",e)},expression:"model.location"}},[i("template",{slot:"noOptions"},[t._v("Результатов нет.")]),i("template",{slot:"noResult"},[t._v("Такого города не существует.")])],2)],1)])])])])},Wu=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings-header row border-bottom"},[i("div",{staticClass:"d-flex"},[i("h6",{staticClass:"title-settings mb-0"},[t._v("Основные")])])])}],Ju={name:"AccountSettingsMain",computed:{userData:function(){return this.$root.$auth.user},geoLocations:function(){var t=[];if(this.locations)return this.locations.forEach((function(e){t.push({id:e.id,title:{ru:e.title.ru,ua:e.title.ua,en:e.title.en},region:e.region,country:e.country})})),t},isSuccessFirstName:function(){return(!this.$v.model.firstName.$invalid||!this.serverRegMessages.firstName)&&!!this.model.firstName},firstNameError:function(){if(this.$v.model.firstName.$error){if(!this.$v.model.firstName.required)return"Укажите как Вас зовут.";if(!this.$v.model.firstName.minLength)return"Врядли у Вас такое короткое имя?";if(!this.$v.model.firstName.maxLength)return"Слишком длинное имя.";if(!this.$v.model.firstName.isCorrectHumanName)return"Только буквы в имени.";if(!this.$v.model.firstName.notHaveSpace)return"Не должно быть пробелов."}else if(this.serverRegMessages.firstName)return this.serverRegMessages.firstName;return null},isSuccessLastName:function(){return(!this.$v.model.lastName.$invalid||!this.serverRegMessages.lastName)&&!!this.model.lastName},lastNameError:function(){if(this.$v.model.lastName.$error){if(!this.$v.model.lastName.required)return"Укажите свою фамилию.";if(!this.$v.model.lastName.minLength)return"Врядли у Вас такая короткая фамилия.";if(!this.$v.model.lastName.maxLength)return"Слишком длинная фамилия.";if(!this.$v.model.lastName.isCorrectHumanName)return"Только буквы в фамилии.";if(!this.$v.model.lastName.notHaveSpace)return"Не должно быть пробелов."}else if(this.serverRegMessages.lastName)return this.serverRegMessages.lastName;return null},isSuccessBirthday:function(){return(!this.$v.model.birthday.$invalid||!this.serverRegMessages.birthday)&&!!this.model.birthday},birthdayError:function(){if(this.$v.model.birthday.$error){if(!this.$v.model.birthday.isValidBirthday)return"Укажите корректную дату."}else if(this.serverRegMessages.birthday)return this.serverRegMessages.birthday;return null},canEditRelationUser:function(){var t=Number(this.model.relationshipId);return!(1!==t&&4!==t&&5!==t)}},data:function(){return{model:{firstName:this.$root.$auth.user.profile.firstName,lastName:this.$root.$auth.user.profile.lastName,sex:this.$root.$auth.user.profile.sex,relationshipId:this.$root.$auth.user.profile.relationshipId,relationshipUser:this.$root.$auth.user.profile.relationshipUser,birthday:this.$root.$auth.user.profile.birthday,location:this.$root.$auth.user.profile.location},isEdit:{firstName:!1,lastName:!1,birthday:!1,location:!1},isSend:{firstName:!1,lastName:!1,sex:!1,birthday:!1,relationshipId:!1,location:!1},locations:[],friends:[],serverRegMessages:{firstName:null,lastName:null,birthday:null}}},validations:function(){return{model:{firstName:{required:R["required"],minLength:Object(R["minLength"])(2),maxLength:Object(R["maxLength"])(50),isCorrectHumanName:F,notHaveSpace:j},lastName:{required:R["required"],minLength:Object(R["minLength"])(2),maxLength:Object(R["maxLength"])(50),isCorrectHumanName:F,notHaveSpace:j},birthday:{isValidBirthday:function(t){return!t||D(t)}}}}},methods:{getRef:function(t){for(var e=0,i=Object.entries(this.$refs);e<i.length;e++){var s=Object(L["a"])(i[e],2),a=s[0],n=s[1];if(t===a)return n}return null},startFieldEdit:function(t){this.isEdit[t]=!0;var e=this.getRef(t);e?e.focus():window.console.warn("Ошибка редактирования поля")},finishFieldEdit:function(t){var e=this,i=this.getRef(t);this.$v.model[t].$touch(),setTimeout((function(){if(e.isEdit[t]=!1,i){if(i.blur(),"birthday"===t&&""===e.model[t])return void(e.model[t]=e.$root.$auth.user.profile[t]);e.isSend[t]||e.accountStartSaveData(e.model[t],t)}else window.console.warn("Ошибка редактирования поля")}),100)},formatFormData:function(t,e){var i={};if("location"===e)i={geoCityId:t.id};else if("relationshipUsers"===e)i={relationshipUserId:t.id};else{for(var s in i)"birthday"!==s&&(i[s]=i[s].trim());"relationshipId"===e&&"null"===t&&(t=null),i[e]=t}return i},inputFieldEdit:function(t,e){"birthday"===e&&(this.model.birthday=t.target.value),this.serverRegMessages[e]=null,this.$v.model[e].$touch()},locationLabel:function(t){var e=t.title,i=t.region,s=t.country;if(e)return i?"".concat(s.title.ru,", ").concat(i?i.title.ru:null,", ").concat(e.ru):"".concat(s.title.ru,", ").concat(e.ru)},relationshipUserLabel:function(t){var e=t.id,i=t.title,s=t.profile;return null===e?i:"".concat(s.firstName," ").concat(s.lastName)},accountStartSaveData:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(i.isSend[e]=!0,!i["".concat(e,"Error")]){s.next=4;break}return i.model[e]=i.$root.$auth.user.profile[e],s.abrupt("return");case 4:return i.isEdit[e]=!1,a=i.formatFormData(t,e),n=null,s.prev=7,s.next=10,i.$root.$api.updateUser(a);case 10:n=s.sent,s.next=16;break;case 13:s.prev=13,s.t0=s["catch"](7),console.warn(s.t0.detailMessage);case 16:null!==n&&(i.$root.$auth.user.updateAuthUser({profile:n}),i.$root.$auth.storeUserData(),"firstName"!==e&&"lastName"!==e||i.$root.$emit("updateUserName",{firstName:i.$root.$auth.user.profile.firstName,lastName:i.$root.$auth.user.profile.lastName}),"relationshipId"===e&&(2!=t&&3!=t||(i.model.relationshipUser=n.relationshipUser)),setTimeout((function(){i.isSend[e]=!1}),2e3));case 17:case"end":return s.stop()}}),s,null,[[7,13]])})))()},getLocations:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.getLocationsByInput(t);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 9:s&&(e.locations=s);case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()},getFriends:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:50,a=t.length>1&&void 0!==t[1]?t[1]:0,i.prev=2,i.next=5,e.$root.$api.$friend.friendsList(e.userData.id,s,a);case 5:n=i.sent,i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](2),console.warn(i.t0.detailMessage);case 11:n&&(e.friends.push({id:null,title:"Не указывать"}),n.forEach((function(t){e.friends.push(t)})));case 12:case"end":return i.stop()}}),i,null,[[2,8]])})))()}},mounted:function(){this.getFriends()}},Zu=Ju,Xu=Object(b["a"])(Zu,Gu,Wu,!1,null,null,null),Qu=Xu.exports,td=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings bg-white-br20 plz-mb20 container-fluid",attrs:{id:"accountSettingsPrivacy"}},[i("form",{staticClass:"plz-account-settings-form pb-2 px-3 mb-0"},[t._m(0),i("div",{staticClass:"plz-account-settings-body "},[i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"pageType"}},[t._v(" Тип страницы ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative pl-4 "},[1!==Number(t.form.pageType)?i("i",{staticClass:"fas fa-lock mr-2"}):i("i",{staticClass:"fas fa-unlock mr-2"}),i("div",{staticClass:"w-100 position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.pageType,expression:"form.pageType"}],staticClass:"form-control border-0 pl-2",attrs:{id:"pageType"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"pageType",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.form.pageType,"pageType")}]}},[i("option",{attrs:{value:"0",selected:"",disabled:""}},[t._v("Выберите вариант")]),i("option",{attrs:{value:"1"}},[t._v("Открытая")]),i("option",{attrs:{value:"2"}},[t._v("Закрытая (Только друзья)")]),i("option",{attrs:{value:"3"}},[t._v("Закрытая")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"writeMessagesPermissions"}},[t._v(" Кто может оставлять сообщения ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative pl-4 "},[i("div",{staticClass:"w-100 position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.writeMessagesPermissions,expression:"form.writeMessagesPermissions"}],staticClass:"form-control border-0 pl-2",attrs:{id:"writeMessagesPermissions"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"writeMessagesPermissions",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.form.writeMessagesPermissions,"writeMessagesPermissions")}]}},[i("option",{attrs:{value:"0",selected:"",disabled:""}},[t._v("Выберите вариант")]),i("option",{attrs:{value:"1"}},[t._v("Все")]),i("option",{attrs:{value:"2"}},[t._v("Только друзья")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})]),t._m(1),t._m(2),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"postWallPermissions"}},[t._v(" Кто может оставлять записи на стене ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative pl-4 "},[i("i",{staticClass:"fas fa-lock d-inline-block mr-2"}),i("div",{staticClass:"w-100 position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.postWallPermissions,expression:"form.postWallPermissions"}],staticClass:"form-control border-0 pl-2",attrs:{id:"postWallPermissions"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"postWallPermissions",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.form.postWallPermissions,"postWallPermissions")}]}},[i("option",{attrs:{value:"0",selected:"",disabled:""}},[t._v("Выберите вариант")]),i("option",{attrs:{value:"1"}},[t._v("Только друзья")]),i("option",{attrs:{value:"2"}},[t._v("Только я")]),i("option",{attrs:{value:"3"}},[t._v("Все пользователи")]),i("option",{attrs:{value:"4"}},[t._v("Выбранные друзья из списка")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"viewWallPermissions"}},[t._v(" Кто может видеть записи на стене ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative pl-4 "},[i("i",{staticClass:"fas fa-lock d-inline-block mr-2"}),i("div",{staticClass:"w-100 position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.viewWallPermissions,expression:"form.viewWallPermissions"}],staticClass:"form-control border-0 pl-2",attrs:{id:"viewWallPermissions"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"viewWallPermissions",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.form.viewWallPermissions,"viewWallPermissions")}]}},[i("option",{attrs:{value:"0",selected:"",disabled:""}},[t._v("Выберите вариант")]),i("option",{attrs:{value:"1"}},[t._v("Все пользователи")]),i("option",{attrs:{value:"2"}},[t._v("Только друзья")]),i("option",{attrs:{value:"3"}},[t._v("Выбранные друзья из списка")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"viewFriendsPermissions"}},[t._v(" Кто может видеть мой список друзей ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative pl-4 "},[i("div",{staticClass:"w-100 position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.viewFriendsPermissions,expression:"form.viewFriendsPermissions"}],staticClass:"form-control border-0 pl-2",attrs:{id:"viewFriendsPermissions"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"viewFriendsPermissions",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.form.viewFriendsPermissions,"viewFriendsPermissions")}]}},[i("option",{attrs:{value:"0",selected:"",disabled:""}},[t._v("Выберите вариант")]),i("option",{attrs:{value:"1"}},[t._v("Все пользователи")]),i("option",{attrs:{value:"2"}},[t._v("Только друзья")]),i("option",{attrs:{value:"3"}},[t._v("Только друзья и друзья друзей")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})])])])])},ed=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings-header row border-bottom"},[i("div",{staticClass:"d-flex"},[i("h6",{staticClass:"title-settings mb-0"},[t._v("Приватность")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group row border-bottom d-none"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"writeMessagesPermissions"}},[t._v(" Вас могут ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative pl-4 "},[i("div",{staticClass:"w-100"},[i("select",{staticClass:"form-control border-0 pl-2",attrs:{id:"writeMessagesPermissions"}},[i("option",{attrs:{selected:""}},[t._v("Добавить в друзья")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group row border-bottom d-none"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"writeMessagesPermissions"}},[t._v(" Раздел сообщества ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative pl-4 "},[i("i",{staticClass:"fas fa-lock d-inline-block mr-2"}),i("div",{staticClass:"w-100"},[i("select",{staticClass:"form-control border-0 pl-2",attrs:{id:"writeMessagesPermissions"}},[i("option",{attrs:{selected:""}},[t._v("Закрыт")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})])}],id=i("ade3"),sd={name:"AccountSettingsPrivacy",computed:{userData:function(){return this.$root.$auth.user}},data:function(){return{form:{pageType:this.$root.$auth.user.privacySettings.pageType,writeMessagesPermissions:this.$root.$auth.user.privacySettings.writeMessagesPermissions,postWallPermissions:this.$root.$auth.user.privacySettings.postWallPermissions,viewWallPermissions:this.$root.$auth.user.privacySettings.viewWallPermissions,viewFriendsPermissions:this.$root.$auth.user.privacySettings.viewFriendsPermissions}}},methods:{accountStartSaveData:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=null,s.prev=1,s.next=4,i.$root.$api.updateUserPrivacy(Object(id["a"])({},e,t));case 4:a=s.sent,s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](1),console.log(s.t0.detailMessage);case 10:a&&(i.$root.$auth.user.updateAuthUser(a),i.$root.$auth.storeUserData());case 11:case"end":return s.stop()}}),s,null,[[1,7]])})))()}}},ad=sd,nd=Object(b["a"])(ad,td,ed,!1,null,null,null),rd=nd.exports,od=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings bg-white-br20 plz-mb20 container-fluid",attrs:{id:"accountSettingsSecurity"}},[i("form",{staticClass:"plz-account-settings-form pb-0 px-3 mb-0"},[t._m(0),i("div",{staticClass:"plz-account-settings-body"},[i("div",{staticClass:"form-group row border-bottom d-none"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"twoFactorAuthEnabled"}},[t._v(" Двухэтапная аутентификация ")]),i("div",{staticClass:"plz-account-settings-body-field  col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative pl-4"},[1===Number(t.form.twoFactorAuthEnabled)?i("i",{staticClass:"fas fa-check mr-2"}):t._e(),i("div",{staticClass:"w-100 position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.twoFactorAuthEnabled,expression:"form.twoFactorAuthEnabled"}],staticClass:"form-control border-0 pl-0",attrs:{id:"twoFactorAuthEnabled"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"twoFactorAuthEnabled",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.form.twoFactorAuthEnabled,"twoFactorAuthEnabled")}]}},[i("option",{attrs:{value:"0"}},[t._v("Выключена")]),i("option",{attrs:{value:"1"}},[t._v("Включена")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})]),i("div",{staticClass:"form-group row border-bottom d-none"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"smsConfirm"}},[t._v(" Подтверждение через SMS ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative pl-4"},[1===Number(t.form.smsConfirm)?i("i",{staticClass:"fas fa-check mr-2"}):t._e(),i("div",{staticClass:"w-100  position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.form.smsConfirm,expression:"form.smsConfirm"}],staticClass:"form-control border-0 pl-0",attrs:{id:"smsConfirm"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"smsConfirm",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.form.smsConfirm,"smsConfirm")}]}},[i("option",{attrs:{value:"0"}},[t._v("Выключено")]),i("option",{attrs:{value:"1"}},[t._v("Включено")])]),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-lg-4",attrs:{for:"email"}},[t._v("Email")]),i("div",{staticClass:"plz-account-settings-body-action justify-content-end justify-content-sm-start col-6 text-right text-sm-right pl-1"},[i("button",{staticClass:"btn btn-link",attrs:{type:"button",id:"email"},on:{click:t.openChangeEmailModal}},[t._v(" Изменить ")])]),i("div",{staticClass:"col-3"})]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-lg-4 ",attrs:{for:"password"}},[t._v("Пароль")]),i("div",{staticClass:"plz-account-settings-body-action justify-content-end justify-content-sm-start col-6 text-right text-sm-right pl-1"},[i("button",{staticClass:"btn btn-link",attrs:{type:"button",id:"password"},on:{click:t.openChangePasswordModal}},[t._v(" Изменить ")])]),i("div",{staticClass:"col-3"})])])]),t.changePasswordModal.isVisible?i("ChangePasswordModal",{on:{hideModal:t.hideChangePasswordModal}}):t._e(),t.changeEmailModal.isVisible?i("ChangeEmailModal",{on:{hideModal:t.hideChangeEmailModal}}):t._e()],1)},ld=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings-header row border-bottom"},[i("div",{staticClass:"d-flex"},[i("h6",[t._v("Безопасность")])])])}],cd=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"changePasswordModal",tabindex:"-1",role:"dialog","aria-labelledby":"changePasswordModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[t._m(0),i("div",{staticClass:"modal-body p-4"},[i("form",{attrs:{id:"refreshPassword",novalidate:"novalidate"}},[i("div",{staticClass:"form-group"},[i("i",{staticClass:"icon icon-key"}),i("label",{staticClass:"d-none",attrs:{for:"old_password"}},[t._v("Старый пароль")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.passwords.oldPassword,expression:"passwords.oldPassword"}],staticClass:"lr-input form-control",class:{"is-invalid":t.oldPasswordError},attrs:{type:"password",id:"old_password",placeholder:"Старый пароль"},domProps:{value:t.passwords.oldPassword},on:{input:[function(e){e.target.composing||t.$set(t.passwords,"oldPassword",e.target.value)},function(e){t.oldPasswordError&&(t.formErrors.oldPassword=null)}]}}),t.oldPasswordError?i("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.oldPasswordError)+" ")]):t._e()]),i("div",{staticClass:"form-group"},[i("i",{staticClass:"icon icon-key"}),i("label",{staticClass:"d-none",attrs:{for:"new_password"}},[t._v("Новый пароль")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.passwords.newPassword,expression:"passwords.newPassword"}],staticClass:"lr-input form-control",class:{"is-invalid":t.newPasswordError},attrs:{type:"password",id:"new_password",placeholder:"Новый пароль"},domProps:{value:t.passwords.newPassword},on:{input:[function(e){e.target.composing||t.$set(t.passwords,"newPassword",e.target.value)},function(e){t.newPasswordError&&(t.formErrors.newPassword=null)}]}}),t.newPasswordError?i("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.newPasswordError)+" ")]):t._e()]),i("div",{staticClass:"form-group"},[i("i",{staticClass:"icon icon-key"}),i("label",{staticClass:"d-none",attrs:{for:"new_password_confirmation"}},[t._v("Подтвердите новый пароль")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.passwords.newPasswordConfirmation,expression:"passwords.newPasswordConfirmation"}],staticClass:"lr-input form-control",class:{"is-invalid":t.newPasswordConfirmationError},attrs:{type:"password",placeholder:"Подтвердите новый пароль",id:"new_password_confirmation"},domProps:{value:t.passwords.newPasswordConfirmation},on:{input:[function(e){e.target.composing||t.$set(t.passwords,"newPasswordConfirmation",e.target.value)},function(e){t.newPasswordConfirmationError&&(t.formErrors.newPasswordConfirmation=null)}]}}),t.newPasswordConfirmationError?i("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.newPasswordConfirmationError)+" ")]):t._e()]),t.isFormSuccess?i("div",{staticClass:"text-success mb-3"},[t._v(" "+t._s(t.formSuccess)+" ")]):t._e(),i("div",{staticClass:"form-group"},[i("button",{staticClass:"btn plz-btn btn-primary btn-submit",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.changePassword(e)}}},[t._v(" Обновить ")])])])])])])])},ud=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header border-0  justify-content-center pb-0"},[i("h5",{staticClass:"modal-title ",attrs:{id:"changePasswordModalTitle"}},[t._v("Обновление пароля")])])}],dd={name:"ChangePasswordModal",computed:{oldPasswordError:function(){return this.formErrors&&this.formErrors.oldPassword?this.formErrors.oldPassword[0]:null},newPasswordError:function(){return this.formErrors&&this.formErrors.newPassword?this.formErrors.newPassword[0]:null},newPasswordConfirmationError:function(){return this.formErrors&&this.formErrors.newPasswordConfirmation?this.formErrors.newPasswordConfirmation[0]:null},isFormSuccess:function(){return!!this.formSuccess}},data:function(){return{passwords:{oldPassword:null,newPassword:null,newPasswordConfirmation:null},formErrors:null,formSuccess:null}},methods:{hideModal:function(){this.$emit("hideModal")},changePassword:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.formErrors=null,t.formSuccess=null,i=null,e.prev=3,e.next=6,t.$root.$api.changePassword({oldPassword:t.passwords.oldPassword,newPassword:t.passwords.newPassword,newPasswordConfirmation:t.passwords.newPasswordConfirmation});case 6:i=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](3),t.formErrors=e.t0.data.errors,console.log(e.t0.detailMessage);case 13:i&&(t.formSuccess=i.message);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))()}}},md=dd,pd=Object(b["a"])(md,cd,ud,!1,null,null,null),hd=pd.exports,fd=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"changeEmailModal",tabindex:"-1",role:"dialog","aria-labelledby":"changeEmailModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[t._m(0),i("div",{staticClass:"modal-body p-4"},[i("form",{attrs:{id:"refreshPassword",novalidate:"novalidate"}},[i("div",{staticClass:"form-group"},[i("i",{staticClass:"icon icon-key"}),i("label",{staticClass:"d-none",attrs:{for:"oldEmail"}},[t._v("Старый email")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email.oldEmail,expression:"email.oldEmail"}],staticClass:"lr-input form-control",class:{"is-invalid":t.oldEmailError},attrs:{type:"email",id:"oldEmail",placeholder:"Старый email"},domProps:{value:t.email.oldEmail},on:{input:[function(e){e.target.composing||t.$set(t.email,"oldEmail",e.target.value)},function(e){t.oldEmailError&&(t.formErrors.oldEmail=null)}]}}),t.oldEmailError?i("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.oldEmailError)+" ")]):t._e()]),i("div",{staticClass:"form-group"},[i("i",{staticClass:"icon icon-key"}),i("label",{staticClass:"d-none",attrs:{for:"newEmail"}},[t._v("Новый email")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email.newEmail,expression:"email.newEmail"}],staticClass:"lr-input form-control",class:{"is-invalid":t.newEmailError},attrs:{type:"email",id:"newEmail",placeholder:"Новый email"},domProps:{value:t.email.newEmail},on:{input:[function(e){e.target.composing||t.$set(t.email,"newEmail",e.target.value)},function(e){t.newEmailError&&(t.formErrors.newEmail=null)}]}}),t.newEmailError?i("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.newEmailError)+" ")]):t._e()]),i("div",{staticClass:"form-group"},[i("i",{staticClass:"icon icon-key"}),i("label",{staticClass:"d-none",attrs:{for:"newEmailConfirmation"}},[t._v("Подтвердите новый email")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.email.newEmailConfirmation,expression:"email.newEmailConfirmation"}],staticClass:"lr-input form-control",class:{"is-invalid":t.newEmailConfirmationError},attrs:{type:"email",placeholder:"Подтвердите новый email",id:"newEmailConfirmation"},domProps:{value:t.email.newEmailConfirmation},on:{input:[function(e){e.target.composing||t.$set(t.email,"newEmailConfirmation",e.target.value)},function(e){t.newEmailConfirmationError&&(t.formErrors.newEmailConfirmation=null)}]}}),t.newEmailConfirmationError?i("div",{staticClass:"invalid-feedback"},[t._v(" "+t._s(t.newEmailConfirmationError)+" ")]):t._e()]),t.isFormSuccess?i("div",{staticClass:"text-success mb-3"},[t._v(" "+t._s(t.formSuccess)+" ")]):t._e(),i("div",{staticClass:"form-group"},[i("button",{staticClass:"btn plz-btn btn-primary btn-submit",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.changeEmail(e)}}},[t._v(" Обновить ")])])])])])])])},vd=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header border-0  justify-content-center pb-0"},[i("h5",{staticClass:"modal-title ",attrs:{id:"changeEmailModalTitle"}},[t._v("Обновление email")])])}],gd={name:"ChangeEmailModal",computed:{oldEmailError:function(){return this.formErrors&&this.formErrors.oldEmail?this.formErrors.oldEmail[0]:null},newEmailError:function(){return this.formErrors&&this.formErrors.newEmail?this.formErrors.newEmail[0]:null},newEmailConfirmationError:function(){return this.formErrors&&this.formErrors.newEmailConfirmation?this.formErrors.newEmailConfirmation[0]:null},isFormSuccess:function(){return!!this.formSuccess}},data:function(){return{email:{oldEmail:null,newEmail:null,newEmailConfirmation:null},formErrors:null,formSuccess:null}},methods:{hideModal:function(){this.$emit("hideModal")},changeEmail:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.formErrors=null,t.formSuccess=null,i=null,e.prev=3,e.next=6,t.$root.$api.$users.changeEmail({oldEmail:t.email.oldEmail,newEmail:t.email.newEmail,newEmailConfirmation:t.email.newEmailConfirmation});case 6:i=e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](3),t.formErrors=e.t0.data.errors,console.log(e.t0.detailMessage);case 13:i&&(t.formSuccess=i.message);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))()}}},bd=gd,Cd=Object(b["a"])(bd,fd,vd,!1,null,"b8083378",null),yd=Cd.exports,wd={name:"AccountSettingsSecurity",components:{ChangePasswordModal:hd,ChangeEmailModal:yd},data:function(){return{form:{twoFactorAuthEnabled:this.$root.$auth.user.privacySettings.twoFactorAuthEnabled,smsConfirm:this.$root.$auth.user.privacySettings.smsConfirm},changePasswordModal:{isVisible:!1},changeEmailModal:{isVisible:!1}}},methods:{openChangePasswordModal:function(){this.changePasswordModal.isVisible=!0},hideChangePasswordModal:function(){this.changePasswordModal.isVisible=!1},openChangeEmailModal:function(){this.changeEmailModal.isVisible=!0},hideChangeEmailModal:function(){this.changeEmailModal.isVisible=!1},accountStartSaveData:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=null,s.prev=1,s.next=4,i.$root.$api.updateUserPrivacy(Object(id["a"])({},e,t));case 4:a=s.sent,s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](1),console.log(s.t0.detailMessage);case 10:a&&(i.$root.$auth.user.updateAuthUser({profile:a}),i.$root.$auth.storeUserData());case 11:case"end":return s.stop()}}),s,null,[[1,7]])})))()}}},xd=wd,kd=Object(b["a"])(xd,od,ld,!1,null,null,null),_d=kd.exports,$d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white-br20",attrs:{id:"accountSettingsSideMenu"}},[i("div",{staticClass:"list-group border-0 py-3"},t._l(t.menuItems,(function(e,s){return i("router-link",{key:s,staticClass:"list-group-item list-group-item-action border-0 py-2",class:{active:e.isActive},attrs:{tag:"a",to:e.path},nativeOn:{click:function(e){return t.anchorHashCheck(e)}}},[t._v(" "+t._s(e.title)+" ")])})),1)])},Md=[],Id={name:"AccountSettingsSideMenu",data:function(){return{menuItems:[{path:"#accountSettingsMain",title:"Основные",isActive:!0},{path:"#accountSettingsPrivacy",title:"Приватность",isActive:!1},{path:"#accountSettingsSecurity",title:"Безопасность",isActive:!1},{path:"/black-list",title:"Чёрный список",isActive:!1},{path:{name:"ActiveSessionsPage"},title:"Активные сессии",isActive:!1}]}},methods:{anchorHashCheck:function(){var t=this;if(window.location.hash===this.$route.hash){var e=document.getElementById(this.$route.hash.slice(1));e&&(window.scrollTo(0,e.offsetTop),this.menuItems.map((function(e){e.isActive=e.path===t.$route.hash})))}}}},Pd=Id,Sd=Object(b["a"])(Pd,$d,Md,!1,null,null,null),Ld=Sd.exports,Rd={name:"AccountPage",components:{AccountToolbarLeft:ks,AccountSettingsMain:Qu,AccountSettingsPrivacy:rd,AccountSettingsSecurity:_d,AccountSettingsSideMenu:Ld,FavoriteFriends:sr},data:function(){return{}},methods:{}},Nd=Rd,Ad=Object(b["a"])(Nd,qu,Ku,!1,null,null,null),Fd=Ad.exports,zd=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-9 col-xl-8 px-0 px-md-3"},[i("BlackListUsers",{key:"blackList-"+t.blackListUpdater,attrs:{blockedUsers:t.blockedUsers,isBlacklistDataReady:t.isBlacklistDataReady},on:{RemoveFromBlackList:t.onRemoveFromBlackList}})],1),i("div",{staticClass:"d-none d-xl-block col-sm-2 col-md-2 col-lg-2 col-xl-2  px-0 px-md-3"},[i("BlackListSideMenu")],1),i("div",{staticClass:"col-md-2 col-lg-2 col-xl-1 d-none d-md-block pr-0  px-0 px-md-3"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},Ed=[],jd=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings bg-white-br20 plz-mb20 container-fluid",attrs:{id:"blackList"}},[i("form",{staticClass:"plz-account-settings-form pb-0 px-3 mb-0"},[t._m(0),i("div",{staticClass:"plz-account-settings-body"},[t.isBlacklistDataReady&&t.blockedUsers.length?i("div",{staticClass:"form-group row border-bottom border-top flex-column"},t._l(t.blockedUsers.asArray(),(function(e){return i("BlackListItem",{key:"blockedUserItem-"+e.id,attrs:{userItem:e},on:{RemoveFromBlackList:t.onRemoveFromBlackList}})})),1):i("div",{staticClass:"row"},[i("div",{staticClass:"alert alert-info w-100"},[t._v(" Ваш чёрный список пуст ")])])])])])},Dd=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings-header row "},[i("div",{staticClass:"d-flex"},[i("h6",[t._v("Чёрный список")])])])}],Od=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-friend-item-user media m-0 py-4 pl-4 pr-2"},[i("div",{staticClass:"plizi-friend-item d-flex w-100 align-items-center"},[i("router-link",{staticClass:"plizi-friend-item-pic mr-3 ",attrs:{to:"/user-"+t.userItem.id,tag:"div"}},[i("img",{staticClass:"plizi-friend-item-img rounded-circle overflow-hidden",attrs:{src:t.userItem.userPic,alt:t.userItem.fullName}}),t.userItem.isOnline?i("span",{staticClass:"plizi-friend-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-friend-item-isoffline"})]),i("div",{staticClass:"plizi-friend-item-body m-0 "},[i("router-link",{staticClass:"plizi-friend-item-top d-flex align-items-end justify-content-between mb-2",attrs:{to:"/user-"+t.userItem.id,tag:"div"}},[i("h6",{staticClass:"plizi-friend-item-name my-0"},[t._v(t._s(t.userItem.fullName))])]),i("div",{staticClass:"plizi-friend-item-body-bottom d-flex "},[i("p",{staticClass:"plizi-friend-item-desc p-0 my-0 d-inline"},[i("IconLocation",{staticStyle:{height:"14px"}}),t.userItem.location&&t.userItem.city.title&&t.userItem.country.title?i("span",[t._v(" "+t._s(t.userItem.city.title.ru+", "+t.userItem.country.title.ru)+" ")]):i("span",[t._v(" Не указано ")])],1)])],1),i("button",{staticClass:"btn btn-link mb-auto ml-auto",attrs:{type:"button",title:"Удалить из чёрного списка"},on:{click:t.onClickRemoveFromBlackList}},[i("i",{staticClass:"fas fa-times",staticStyle:{"font-size":"20px"}})])],1)])},Td=[],Hd=(i("da60"),function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return i}(Qi["a"])),Ud={name:"BlackListItem",components:{IconLocation:Fl},props:{userItem:Hd},methods:{onClickRemoveFromBlackList:function(){this.$emit("RemoveFromBlackList",{userId:this.userItem.id})}}},Vd=Ud,Bd=Object(b["a"])(Vd,Od,Td,!1,null,null,null),Yd=Bd.exports,qd={name:"BlackListUsers",components:{BlackListItem:Yd},props:{blockedUsers:null|re["a"],isBlacklistDataReady:Boolean},methods:{onRemoveFromBlackList:function(t){this.$emit("RemoveFromBlackList",t)}},mounted:function(){console.log(this.blockedUsers.length)}},Kd=qd,Gd=Object(b["a"])(Kd,jd,Dd,!1,null,null,null),Wd=Gd.exports,Jd=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white-br20",attrs:{id:"blackListSideMenu"}},[i("div",{staticClass:"list-group border-0 py-3"},t._l(t.menuItems,(function(e,s){return i("router-link",{key:s,staticClass:"list-group-item list-group-item-action border-0 py-2",class:{active:e.isActive},attrs:{tag:"a",to:e.path}},[t._v(" "+t._s(e.title)+" ")])})),1)])},Zd=[],Xd={name:"BlackListSideMenu",data:function(){return{menuItems:[{path:"/account",title:"Основные",isActive:!1},{path:"/black-list",title:"Чёрный список",isActive:!0}]}},methods:{}},Qd=Xd,tm=Object(b["a"])(Qd,Jd,Zd,!1,null,null,null),em=tm.exports,im={name:"BlackListPage",components:{BlackListSideMenu:em,AccountToolbarLeft:ks,BlackListUsers:Wd,FavoriteFriends:sr},mixins:[Ul],data:function(){return{blockedUsers:new re["a"],isBlacklistDataReady:!1,blackListUpdater:0}},methods:{onRemoveFromBlackList:function(t){this.deleteFromBlacklist(t.userId),this.blockedUsers.delete(t.userId),this.blackListUpdater++},getBlacklist:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$users.blacklist();case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i&&(t.blockedUsers.receive(i,Hd),t.isBlacklistDataReady=!0);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getBlacklist();case 2:case"end":return e.stop()}}),e)})))()}},sm=im,am=Object(b["a"])(sm,zd,Ed,!1,null,null,null),nm=am.exports,rm=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row",class:{"is-chatPage":"ChatsListPage"===this.$root.$router.currentRoute.name}},[i("div",{staticClass:"chat-page-height chat-page-height-aside col-12 col-md-1 overflow-hidden px-0 px-md-3 "},[i("AccountToolbarLeft")],1),t.isFreshUser(t.freshUpdater)?i("div",{staticClass:"fresh-user-block chat-page-height chat-page-height-body col-12 col-md-11 "},[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("p",{staticClass:"alert alert-info w-100 text-center p-5 mb-0"},[t._v(" Вы ещё ни с кем не общались, потому здесь пока никого нет."),i("br"),t._v(" Находите себе новых "),i("router-link",{staticClass:"btn-link mx-0 px-0",attrs:{tag:"a",to:"/friends"}},[t._v("друзей")]),t._v(", вступайте в "),i("router-link",{staticClass:"btn-link mx-0 px-0",attrs:{tag:"a",to:"/popular-communities"}},[t._v(" сообщества")]),t._v("! ")],1)])]):i("div",{staticClass:"chat-page-height chat-page-height-body col-12 col-md-11 px-0 pl-md-3 f-flex align-items-stretch"},[t.isDialogsLoaded?i("div",{staticClass:"d-flex flex-column flex-lg-row flex bg-white-br20 overflow-hidden in-shadow",attrs:{id:"chatMain"}},[t.isShowDialogsBlock?i("ChatDialogs",{ref:"chatDialogs",attrs:{currentDialogID:t.currentDialogID},on:{SwitchToChat:t.onSwitchToChat}}):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMessageBlock,expression:"isShowMessageBlock"}],staticClass:"col-12 col-lg-8 bg-light d-lg-flex flex-column p-0",attrs:{id:"chatMessagesWrapper"}},[t.currentDialog?i("ChatHeader",{ref:"chatHeader",attrs:{currentDialog:t.getCurrentDialog()},on:{SwitchToChat:t.onSwitchToChat,ChatMessagesFilter:t.onUpdateMessagesFilterText}}):t._e(),i("div",{staticClass:"position-relative",attrs:{id:"chatMessagesWrapperBody"}},[t.isMessagesLoaded?i("ChatMessages",{key:t.getChatMessagesKey(),ref:"chatMessages",style:"padding-bottom: "+t.changedHeight,attrs:{messagesList:t.messagesList,filter:t.filter,currentDialog:t.currentDialog,keyUpdater:t.$root.$messagesKeyUpdater,isMessagesLazyLoad:t.isMessagesLazyLoad,isCanLoadMoreMessages:t.isCanLoadMoreMessages},on:{ClearFilters:t.clearChatMessagesFilters,ScrollToTop:t.onScrollToTop,RemoveMessageInList:t.removeMessageInList}}):i("Spinner",{attrs:{message:"Сообщения загружаются,<br />можно выбрать другой диалог"}}),t.currentDialog?i("ChatFooter",{ref:"ChatFooter",style:"height: "+t.changedHeight,attrs:{currentDialog:t.currentDialog},on:{chatFooterEditorChangedHeight:t.onChatFooterEditorChangedHeight}}):t._e()],1)],1)],1):i("div",{staticClass:"row bg-white-br20"},[t.isDialogsLoaded?i("div",{staticClass:"col-12  col-lg-4 py-5 px-5 text-center"},[i("h3",{staticClass:"text-info"},[t._v("Вы ещё ни с кем не общались.")])]):i("Spinner")],1)])])])},om=[],lm=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chat-dialogs-list col-sm-12 col-md-12 col-lg-4 col-xl-4 col-auto px-0 d-flex flex-column align-items-stretch "},[i("ChatDialogsFilter",{on:{ChatDialogsFilter:t.onChatDialogsFilter}}),i("div",{staticClass:"chat-list-scroll pb-0 pb-lg-0"},[i("vue-custom-scrollbar",{staticClass:"chat-list-scroll-scroll w-100",attrs:{settings:t.customScrollBarSettings}},[i("ul",{staticClass:"list-unstyled mb-0",attrs:{id:"chatDialogsList"}},t._l(t.dialogsList(),(function(e){return i("ChatListItem",{key:e.id+"-"+t.$root.$dialogsKeyUpdater+"-"+t.$root.$messagesKeyUpdater,attrs:{id:"dialogItem-"+e.id,dialog:e,currentDialogID:t.currentDialogID},on:{PickChat:t.onSwitchToChat}})})),1)])],1)],1)},cm=[],um=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"find-in-dialogs-form d-flex align-items-center w-100 border-bottom py-3"},[i("div",{staticClass:"d-flex w-100 align-items-center position-relative px-4"},[i("button",{staticClass:"btn-group-chat btn btn-group-chat rounded-circle position-relative p-0 mr-3",on:{click:function(e){return e.stopPropagation(),t.onAddDialogClick(e)}}},[i("IconFriends",{staticClass:"w-50 h-50 "})],1),i("div",{staticClass:"find-in-chat-list  position-relative "},[i("label",{staticClass:"sr-only d-none",attrs:{for:"txtFindInChatList"}},[t._v("Поиск")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.filterText,expression:"filterText"}],ref:"txtFindInChatList",staticClass:"chat-search-input form-control rounded-pill px-4",attrs:{type:"text",id:"txtFindInChatList",placeholder:"Поиск в собеседниках"},domProps:{value:t.filterText},on:{keydown:function(e){return e.stopPropagation(),t.dialogSearchKeyDownCheck(e)},input:function(e){e.target.composing||(t.filterText=e.target.value)}}}),i("button",{staticClass:"find-in-chat-list-btn btn btn-search h-100 shadow-none",attrs:{type:"submit"},on:{click:t.startDialogFilter}},[i("IconSearch")],1)])])])},dm=[],mm=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-friend",attrs:{viewBox:"0 0 518 483",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M311.25 0.781503C292.456 3.3305 272.273 11.9745 257.647 23.739C252.843 27.603 244.393 36.142 243.674 37.859C241.676 42.629 243.528 44.719 253.083 48.4755C256.75 49.917 263.165 52.8765 267.339 55.0525C278.223 60.7275 279.386 60.749 288.052 55.441C297.526 49.6385 308.294 45.2125 317.604 43.294C322.507 42.284 329.455 42.279 334.396 43.2825C339.928 44.4065 349.508 47.6765 354.838 50.2615C361.156 53.325 369.634 59.0995 373.345 62.8655C379.483 69.095 385.483 79.609 389.4 91.003C392.375 99.657 393.222 103.941 393.159 110C393.044 121.038 387.329 136.838 378.894 149.436C374.272 156.341 370.163 159.827 353.5 170.986C345.113 176.602 337.205 182.174 335.929 183.367C332.463 186.605 331.444 189.438 330.931 197.25C330.697 200.825 330.054 206.271 329.503 209.352C328.324 215.937 328.232 219.889 329.202 222.211C330.766 225.953 336.134 230.39 341.501 232.376C343.014 232.936 350.777 235.318 358.751 237.671C381.235 244.303 390.426 247.697 403.071 254.036C418.537 261.789 435.34 273.326 444.514 282.49C454.269 292.234 465.452 310.019 470.715 324.159C474.012 333.017 475.206 338.202 475.229 343.76C475.249 348.43 475.139 348.996 473.615 352.092C472.716 353.919 471.187 356.11 470.218 356.961C463.854 362.548 445.359 367.108 422.25 368.788C415.05 369.311 412.233 371.058 411.656 375.356C411.517 376.397 411.884 380.104 412.473 383.591C413.062 387.079 413.715 393.266 413.924 397.341C414.621 410.898 415.999 411.784 434.014 410.267C463.432 407.79 481.137 403.003 494.991 393.78C499.86 390.539 505.495 385.118 508.432 380.849C511.284 376.703 514.474 369.387 516.104 363.25C517.687 357.29 517.698 357.168 517.708 345C517.717 333.1 517.671 332.532 516.107 325.113C510.983 300.799 499.546 279.21 480.869 258.601C460.924 236.593 434.658 218.733 404.301 206.538C395.962 203.188 394 201.776 394 199.124C394 198.195 394.256 196.943 394.568 196.342C394.88 195.741 398.501 191.905 402.614 187.816C413.354 177.14 419.306 168.82 425.564 155.738C436.161 133.585 438.711 107.871 432.702 83.75C428.741 67.8505 421.286 52.7255 411.519 40.7735C407.261 35.5625 397.975 26.427 393.332 22.882C377.556 10.835 359.383 3.25 340.349 0.769003C333.114 -0.173997 318.246 -0.167497 311.25 0.781503ZM178.25 71.7815C159.462 74.3295 139.359 82.937 124.647 94.731C119.736 98.6685 109.584 109.016 105.988 113.75C93.404 130.315 86.176 148.567 83.7135 170C80.603 197.074 89.75 227.527 107.527 249.283C109.22 251.354 113.607 256.019 117.279 259.65C128.39 270.637 128.175 272.124 114.69 277.541C98.688 283.969 80.8945 293.619 68.8095 302.422C38.2765 324.664 17.1615 351.645 6.9235 381.5C-0.818997 404.079 -0.985998 428.396 6.4925 444.354C16.672 466.077 39.3045 477.105 81.75 481.025C94.9995 482.248 108.552 482.638 135.625 482.574C172.136 482.489 214.478 482.491 250.875 482.578C291.893 482.677 310.351 481.425 330.741 477.165C351.143 472.903 367.207 463.803 375.432 451.849C378.284 447.703 381.473 440.387 383.103 434.25C384.687 428.29 384.697 428.168 384.707 416C384.717 404.1 384.671 403.532 383.108 396.113C377.984 371.799 366.546 350.21 347.869 329.601C327.924 307.593 301.658 289.733 271.301 277.538C262.962 274.188 261 272.776 261 270.124C261 269.195 261.256 267.943 261.568 267.342C261.88 266.742 265.501 262.904 269.614 258.815C280.354 248.139 286.306 239.82 292.564 226.738C303.161 204.585 305.711 178.871 299.702 154.75C295.741 138.851 288.286 123.725 278.519 111.773C274.261 106.562 264.975 97.427 260.332 93.882C244.556 81.835 226.383 74.25 207.35 71.769C200.115 70.826 185.246 70.8325 178.25 71.7815ZM201.396 114.283C206.928 115.407 216.508 118.676 221.838 121.261C228.155 124.325 236.635 130.099 240.346 133.865C246.484 140.095 252.483 150.609 256.4 162.003C259.375 170.657 260.222 174.941 260.159 181C260.044 192.038 254.329 207.838 245.894 220.436C241.264 227.353 237.188 230.802 220 242.346C211.337 248.165 202.9 254.085 201.25 255.501C195.94 260.06 193.189 260.896 189.605 259.039C188.585 258.51 186.4 256.918 184.75 255.501C183.1 254.085 174.663 248.165 166 242.346C148.272 230.439 144.622 227.291 139.512 219.5C131.559 207.373 125.769 190.877 125.824 180.5C125.896 166.728 135.653 144.061 146.005 133.615C153.86 125.689 170.577 117.261 184.262 114.329C188.894 113.337 196.633 113.316 201.396 114.283ZM196.15 295.812C197.03 296.259 198.65 297.349 199.75 298.234C204.924 302.399 206.121 302.88 225.751 308.671C248.235 315.303 257.426 318.697 270.071 325.035C285.537 332.788 302.34 344.326 311.514 353.49C321.269 363.234 332.452 381.019 337.715 395.159C341.012 404.017 342.206 409.202 342.229 414.76C342.249 419.43 342.139 419.996 340.615 423.092C339.716 424.919 338.187 427.11 337.218 427.961C330.572 433.796 313.258 437.918 286.25 440.095C275.903 440.929 119.309 441.286 107 440.504C81.173 438.862 61.8705 435.39 53.25 430.835C42.692 425.256 41.236 415.661 48.0015 396.25C52.8975 382.203 64.5065 363.602 74.8045 353.305C83.0575 345.052 101.282 332.415 114.608 325.706C127.99 318.969 138.267 315.176 163.176 307.783C178.54 303.222 181.165 302.166 185.5 298.79C190.552 294.856 192.947 294.186 196.15 295.812Z"}})])},pm=[],hm={name:"IconFriends"},fm=hm,vm=Object(b["a"])(fm,mm,pm,!1,null,null,null),gm=vm.exports,bm={name:"ChatDialogsFilter",components:{IconSearch:zs,IconFriends:gm},props:{},data:function(){return{filterText:""}},methods:{onAddDialogClick:function(){this.$root.$emit("ChatDialogsNew",{})},dialogSearchKeyDownCheck:function(t){if(8===t.keyCode||13===t.keyCode||46===t.keyCode)return this.startDialogFilter()},startDialogFilter:function(){var t=this.filterText.trim();this.$emit("ChatDialogsFilter",{text:t})}}},Cm=bm,ym=Object(b["a"])(Cm,um,dm,!1,null,null,null),wm=ym.exports,xm=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"chat-list-user media m-0 px-4 py-2",class:{"bg-light":t.dialog.id===t.currentDialogID,"bg-white":t.dialog.id!==t.currentDialogID}},[i("div",{staticClass:"user-friend d-flex w-100 px-0 --overflow-hidden",on:{click:function(e){return e.preventDefault(),t.pickChat()}}},[t.dialog.isPrivate?i("div",{staticClass:"user-friend-pic mr-3"},[i("img",{staticClass:"user-friend-img rounded-circle overflow-hidden",attrs:{src:t.dialog.companion.userPic,alt:t.dialog.companion.fullName}}),t.isTyper?i("div",{staticClass:"writing"},[i("span"),i("span"),i("span")]):i("div",{},[t.dialog.companion.isOnline?i("span",{staticClass:"user-friend-isonline",attrs:{title:t.dialog.companion.firstName+" онлайн"}}):i("span",{staticClass:"user-friend-isoffline"})])]):t._e(),t.dialog.isGroup?[i("div",{staticClass:"is-group-chat position-relative mr-3"},t._l(t.threeAttendess(),(function(t){return i("div",{staticClass:"user-friend-pic"},[i("img",{key:t.id,staticClass:"user-friend-img rounded-circle overflow-hidden",attrs:{src:t.userPic,alt:t.fullName}})])})),0)]:t._e(),i("div",{staticClass:"user-friend-body flex-fill m-0"},[i("div",{staticClass:"user-friend-body-top d-flex align-items-end justify-content-between"},[t.dialog.isPrivate?i("h6",{staticClass:"user-friend-name my-0"},[t._v(t._s(t.dialog.companion.fullName))]):t._e(),t.dialog.isGroup?i("h6",{staticClass:"user-friend-name my-0 group-chat-name"},[t._v(t._s(t.groupDialogName))]):t._e(),t.dialog.isRead?i("small",{staticClass:"mr-1 ml-auto mb-1"},[i("IconCheckedDouble",{attrs:{clazz:"mb-2"}})],1):t._e(),i("time",{attrs:{datetime:t.lastMessageDT}},[t._v(" "+t._s(t.showDialogTime)+" ")])]),i("div",{staticClass:"user-friend-body-bottom d-flex"},[t.isLastFromMe?i("span",{staticClass:"user-friend-details mr-1"},[t._v("Вы:")]):t._e(),i("p",{staticClass:"user-friend-desc p-0 my-0 d-inline",domProps:{innerHTML:t._s(t.lastMsgText)}})])])],2)])},km=[],_m={name:"ChatListItem",components:{IconCheckedDouble:ua},props:{dialog:{type:Bs,required:!0},currentDialogID:{type:String,required:!0,default:"unknown"}},data:function(){return{typingTimeout:null,isTyper:!1,lastMessageText:this.dialog.lastMessageText,lastMessageDT:this.dialog.lastMessageDT,isLastFromMe:this.dialog.isLastFromMe}},computed:{lastMsgText:function(){if(!this.lastMessageText)return'<span class="text-black-50">вы ещё ничего на написали друг другу</span>';var t=this.lastMessageText||"";return t=t.replace(/<br\/>/g,"&nbsp;"),this.$options.filters.stripTags(t)},groupDialogName:function(){return this.dialog.name?this.dialog.name:"Вы, "+this.dialog.attendeesName.join(", ")},showDialogTime:function(){return null===this.lastMessageDT||0===this.lastMessageDT.valueOf()?"":this.$options.filters.lastMessageTime(this.lastMessageDT)}},methods:{threeAttendess:function(){return this.dialog.attendees.slice(0,2)},pickChat:function(){this.$emit("PickChat",{chatId:this.dialog.id})},onCompanionTyping:function(t){var e=this;this.dialog.companion.id===t.user.id&&this.dialog.id===t.chatId&&(this.typingTimeout&&clearTimeout(this.typingTimeout),this.isTyper=!0,this.typingTimeout=setTimeout((function(){e.isTyper=!1}),1e3))}},mounted:function(){var t=this;this.$root.$on("DialogsIsUpdated",(function(e){e.id===t.dialog.id&&(t.lastMessageText=e.lastMessageText,t.lastMessageDT=e.lastMessageDT,t.isLastFromMe=e.isLastFromMe,t.$forceUpdate())})),this.$root.$on("userIsTyping",this.onCompanionTyping)}},$m=_m,Mm=Object(b["a"])($m,xm,km,!1,null,null,null),Im=Mm.exports,Pm={name:"ChatDialogs",components:{ChatDialogsFilter:wm,ChatListItem:Im,VueCustomScrollbar:Ce.a},props:{currentDialogID:String},data:function(){return{listFilled:!1,dialogKeyUpdater:0,dialogFilter:{text:""},customScrollBarSettings:{maxScrollbarLength:60,useBothWheelAxes:!1,suppressScrollX:!0,wheelPropagation:!1}}},computed:{isMessagesAutoLoad:function(){return this.$root.$isLG()||this.$root.$isXL()}},methods:{dialogsList:function(){var t=this,e=this.$root.$auth.dm.asArray();return this.dialogFilter.text.length<3?e:e.filter((function(e){return e.checkInAttendees(t.dialogFilter.text)}))},onSwitchToChat:function(t){this.$emit("SwitchToChat",t)},onChatDialogsFilter:function(t){this.dialogFilter.text=t.text?t.text.trim():""},onRemoveChatDialog:function(t){if(this.$root.$auth.dm.onRemoveDialog(t.chatId),this.$root.$dialogsKeyUpdater++,this.$root.$auth.dm.size>0){var e=this.$root.$auth.dm.firstDialog.id;this.$emit("SwitchToChat",{chatId:e})}else window.console.info("нет диалогов")},onUpdateChatDialog:function(t){var e=t.message.body;if(""===t.message.body||"<p></p>"===t.message.body){var i=this.$root.$messagesList.last.id,s=this.$root.$messagesList.get(i),a=this.$root.$messagesList.nodes.get(i);while(1){if(null===a.prev)break;if(i=a.self,a=this.$root.$messagesList.nodes.get(a.prev),s=this.$root.$messagesList.get(i),""!==s.body)break}e=s.body}var n={lastMessageDT:t.message.createdAt,lastMessageText:e,isLastFromMe:!!t.message.isMine,isRead:!!t.message.isRead,userId:t.message.userId};this.$root.$auth.dm.dialogStateUpdated(t.chatId,n),this.$root.$messagesKeyUpdater++},remoteCreateDialog:function(t){var e=new Bs(t.data);e.removeAttendee(this.$root.$auth.user.id),this.$root.$auth.dm.onAddNewDialog(e.toJSON()),this.$root.$dialogsKeyUpdater++},remoteAddAttendee:function(t){return this.remoteCreateDialog(t)},remoteRemoveAttendee:function(t){t.userId===this.$root.$auth.user.id&&this.onRemoveChatDialog(t)},loadDialogsList:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isDialogsLoaded=!0,i=window.localStorage.getItem("pliziActiveDialog"),t.currentDialog=t.$root.$auth.dm.get(i),"undefined"===typeof t.currentDialog&&(t.currentDialog=t.$root.$auth.dm.firstDialog),t.currentDialog&&window.localStorage.setItem("pliziActiveDialog",t.currentDialog.id),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})))()},onDialogsListLoad:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.listFilled){t.next=2;break}return t.abrupt("return");case 2:return e.dialogKeyUpdater++,t.next=5,e.loadDialogsList();case 5:e.listFilled=!0,e.currentDialog?e.isMessagesAutoLoad&&e.onSwitchToChat({chatId:e.currentDialog.id}):window.console.warn("Условие не сработало!");case 7:case"end":return t.stop()}}),t)})))()}},created:function(){var t=this;this.$root.$on(this.$root.$auth.dm.loadEventName,(function(){t.onDialogsListLoad(t.$root.$auth.dm.loadEventName)})),this.$root.$on(this.$root.$auth.dm.restoreEventName,(function(){t.onDialogsListLoad(t.$root.$auth.dm.restoreEventName)})),this.$root.$on("RemoveChatDialog",this.onRemoveChatDialog),this.$root.$on("UpdateChatDialog",this.onUpdateChatDialog),this.$root.$on("remoteCreateDialog",this.remoteCreateDialog),this.$root.$on("remoteRemoveDialog",this.onRemoveChatDialog),this.$root.$on("remoteAddAttendee",this.remoteAddAttendee),this.$root.$on("remoteRemoveAttendee",this.remoteRemoveAttendee)},beforeDestroy:function(){var t=this;this.$root.$off(this.$root.$auth.dm.loadEventName,(function(){t.onDialogsListLoad(t.$root.$auth.dm.loadEventName)})),this.$root.$off(this.$root.$auth.dm.restoreEventName,(function(){t.onDialogsListLoad(t.$root.$auth.dm.restoreEventName)})),this.$root.$off("RemoveChatDialog",this.onRemoveChatDialog),this.$root.$off("UpdateChatDialog",this.onUpdateChatDialog)},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.listFilled){e.next=3;break}return e.next=3,t.onDialogsListLoad("mounted");case 3:case"end":return e.stop()}}),e)})))()}},Sm=Pm,Lm=Object(b["a"])(Sm,lm,cm,!1,null,null,null),Rm=Lm.exports,Nm=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white w-100 border-bottom d-flex justify-content-between",attrs:{id:"chatHeader"}},[i("div",{staticClass:"col-11 col-md-6 d-flex"},[t.meIsChatAdmin?i("ChatHeaderAttendeePlus",{on:{ShowAddAttendeeModal:t.onShowAttendeesModal}}):t._e(),i("vue-custom-scrollbar",{staticClass:"plz-latest-entries-list d-flex justify-content-between justify-content-sm-start pb-3",attrs:{settings:t.customScrollbarSettings}},[t.currentDialog.isPrivate?i("ChatHeaderCompanion",{attrs:{companion:t.companion}}):t._e(),t.currentDialog.isGroup?i("GroupChatAttendeesList",{key:"groupChatAttendeesList"+t.attendeeKeyUpdater,ref:"groupChatAttendeesList",attrs:{currentDialog:t.currentDialog,keyUpdater:t.attendeeKeyUpdater},on:{ShowAddAttendeeModal:t.onShowAttendeesModal}}):t._e()],1)],1),i("div",{staticClass:"col-1 col-md-6 d-flex p-0 px-md-3"},[i("div",{staticClass:"d-flex align-items-center justify-content-end w-100"},[i("div",{staticClass:"form-row align-items-center justify-content-end flex-nowrap"},[i("div",{staticClass:"col-auto d-none d-md-block position-relative"},[i("label",{staticClass:"sr-only d-none",attrs:{for:"txtFindInChat"}},[t._v("Поиск")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.chatFilterText,expression:"chatFilterText"}],ref:"txtFindInChat",staticClass:"chat-search-input form-control rounded-pill px-4",attrs:{id:"txtFindInChat",type:"text",placeholder:"Поиск в чате"},domProps:{value:t.chatFilterText},on:{focus:t.onFocusSearch,keydown:function(e){return e.stopPropagation(),t.chatSearchKeyDownCheck(e)},input:function(e){e.target.composing||(t.chatFilterText=e.target.value)}}}),i("button",{staticClass:"btn btn-search h-100 shadow-none",attrs:{type:"submit"},on:{click:function(e){return t.onClickStartChatFilter()}}},[i("IconSearch",{staticStyle:{width:"15px",height:"15px"}})],1)]),t.showDatePicker?i("div",{staticClass:"col-auto"},[i("ChatDatePicker",{ref:"chatDatePicker",on:{dateSelected:t.dateSelected}}),i("button",{staticClass:"btn bg-transparent shadow-none",on:{click:t.clearFilters}},[i("i",{staticClass:"far fa-times-circle"})])],1):t._e(),i("div",{staticClass:"col-md-auto"},[i("ChatHeaderMenu",{attrs:{currentDialog:t.currentDialog},on:{ShowRemoveCurrentChatModal:t.onShowRemoveCurrentChatModal,ShowCreateGroupChatModal:t.onShowCreateGroupChatModal,ShowAttendeeListModal:t.onShowAttendeesModal,ShowAddAttendeeModal:t.onShowAttendeesModal,ShowRemoveAttendeeModal:t.onShowAttendeesModal}})],1)])])]),t.createGroupChatModalShow?i("CreateGroupChatModal",{attrs:{currentDialog:t.currentDialog},on:{SwitchToChat:t.onSwitchToChat,HideCreateGroupChatModal:t.onHideCreateGroupChatModal}}):t._e(),t.removeDialogModalShow?i("RemoveCurrentDialogModal",{attrs:{currentDialog:t.currentDialog},on:{HideRemoveDialogModal:t.onHideRemoveDialogModal}}):t._e(),t.showAttendeesModal?i("GroupChatAttendeesModal",{key:"groupChatAttendeesModal"+t.attendeeKeyUpdater,ref:"groupChatAttendeesModal",attrs:{currentDialog:t.currentDialog},on:{HideGroupChatAttendeesModal:t.onHideAttendeesModal,AddAttendeeToDialog:t.onChangeAttendeeList,RemoveAttendeeFromDialog:t.onChangeAttendeeList}}):t._e()],1)},Am=[],Fm=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("DatePicker",{attrs:{mode:"range",popover:{placement:"bottom",visibility:"click"}},on:{input:t.dateSelected},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}},[i("button",{staticClass:"btn",class:t.btnStyle},[i("i",{staticClass:"far fa-calendar-alt"})])])},zm=[],Em={name:"ChatDatePicker",components:{Calendar:V.a,DatePicker:Y.a},computed:{btnStyle:function(){var t=this.range.start&&this.range.end;return[t?"plz-btn-primary":"isDisabled"]}},data:function(){return{range:{start:null,end:null}}},methods:{dateSelected:function(t){var e=t;e.start.getTime()===e.end.getTime()&&(e.isSameDate=!0),e.end.setHours(23,59,59),this.$emit("dateSelected",e)},clearDateSelected:function(){this.range.start=this.range.end=null}}},jm=Em,Dm=(i("b436"),Object(b["a"])(jm,Fm,zm,!1,null,null,null)),Om=Dm.exports,Tm=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chat-header-action-menu"},[t._m(0),i("div",{staticClass:"dropdown-menu dropdown-menu-right py-3",attrs:{"aria-labelledby":"chatHeaderMenu"}},[i("div",{staticClass:"nav-item"},[i("span",{staticClass:"dropdown-item px-3 py-1 cursor-pointer",on:{click:function(e){return e.preventDefault(),t.onCreateGroupChatClick(e)}}},[t._v(" Создать групповой чат ")])]),i("div",{staticClass:"dropdown-divider"}),t.meIsChatAdmin?i("div",{staticClass:"nav-item"},[i("span",{staticClass:"dropdown-item px-3 py-1 cursor-pointer",on:{click:function(e){return e.preventDefault(),t.onAddAttendeeClick(e)}}},[t._v(" Добавить собеседника в чат ")])]):t._e(),t.meIsChatAdmin?i("div",{staticClass:"nav-item"},[i("span",{staticClass:"dropdown-item px-3 py-1 cursor-pointer",on:{click:function(e){return e.preventDefault(),t.onRemoveAttendeeClick(e)}}},[t._v(" Удалить собеседника из чата ")])]):t._e(),t.meIsChatAdmin?t._e():i("div",{staticClass:"nav-item"},[i("span",{staticClass:"dropdown-item px-3 py-1 cursor-pointer",on:{click:function(e){return e.preventDefault(),t.onAttendeeListClick(e)}}},[t._v(" Собеседники в чате ")])]),t.currentDialog.isPrivate||t.currentDialog.isGroup&&t.meIsChatAdmin?i("div",{staticClass:"dropdown-divider"}):t._e(),i("div",{staticClass:"nav-item"},[t.currentDialog.isPrivate||t.currentDialog.isGroup&&t.meIsChatAdmin?i("span",{staticClass:"dropdown-item px-3 py-1 cursor-pointer",on:{click:function(e){return e.preventDefault(),t.onRemoveCurrentChatClick(e)}}},[t._v(" Удалить этот чат ")]):t._e()])])])},Hm=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"btn btn-link --plizi-friend-item-settings",attrs:{id:"chatHeaderMenu",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[i("i",{staticClass:"dots-vertical"})])}],Um={computed:{meIsChatAdmin:function(){var t=this.currentDialog.getAdmin();return!t}}},Vm={name:"ChatHeaderMenu",mixins:[Um],props:{currentDialog:Bs},methods:{onCreateGroupChatClick:function(){this.$emit("ShowCreateGroupChatModal",{})},onRemoveCurrentChatClick:function(){this.$emit("ShowRemoveCurrentChatModal",{})},onAttendeeListClick:function(){this.$emit("ShowAttendeeListModal",{})},onAddAttendeeClick:function(){this.$emit("ShowAddAttendeeModal",{})},onRemoveAttendeeClick:function(){this.$emit("ShowRemoveAttendeeModal",{})}}},Bm=Vm,Ym=Object(b["a"])(Bm,Tm,Hm,!1,null,null,null),qm=Ym.exports,Km=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"createGroupChatModal",tabindex:"-1",role:"dialog","aria-labelledby":"createGroupChatModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideCreateGroupChatModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body d-flex flex-column p-4",attrs:{id:"createGroupChatBody"}},[i("h5",{staticClass:"resend-message-title text-left mb-4"},[t._v("Создание группового чата")]),i("form",{staticClass:"mb-4",attrs:{id:"createGroupChatForm",novalidate:"novalidate"}},[i("div",{staticClass:"form-group",class:{"has-error":t.$v.model.chatName.$error,"has-success":!t.$v.model.chatName.$invalid}},[i("label",{attrs:{for:"chatName"}},[t._v("Название чата")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.chatName,expression:"model.chatName"}],ref:"chatName",staticClass:"form-control",class:{"is-invalid":t.$v.model.chatName.$error,"is-valid":!t.$v.model.chatName.$invalid},attrs:{type:"text",id:"chatName",placeholder:""},domProps:{value:t.model.chatName},on:{blur:function(e){return t.$v.model.chatName.$touch()},input:function(e){e.target.composing||t.$set(t.model,"chatName",e.target.value)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.$v.model.chatName.$error,expression:"$v.model.chatName.$error"}],staticClass:"invalid-feedback"},[t.$v.model.chatName.required?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите название чата")]),t.$v.model.chatName.minLength?t._e():i("p",{staticClass:"text-danger"},[t._v(" Название чата не может быть короче "+t._s(t.$v.model.chatName.$params.minLength.min)+" символов")]),t.$v.model.chatName.maxLength?t._e():i("p",{staticClass:"text-danger"},[t._v(" Название чата не может быть длиннее "+t._s(t.$v.model.chatName.$params.maxLength.max)+" символов")])])]),i("div",{staticClass:"form-group"},[i("label",{},[t._v("Участники чата")]),i("multiselect",{attrs:{options:t.getFriendsCombo,label:"fullName","track-by":"fullName",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!0,placeholder:"Выберите новых собеседников"},scopedSlots:t._u([{key:"option",fn:function(e){return[i("div",{staticClass:"plz-receivers-item d-flex align-items-center py-2 px-3"},[i("span",{staticClass:"plz-receiver-userpic text-body"},[i("img",{staticClass:"plz-short-userpic rounded-circle",attrs:{src:e.option.userPic,alt:e.option.firstName}}),e.option.isOnline?i("span",{staticClass:"plz-short-isonline",attrs:{title:"в сети"}}):i("span",{staticClass:"plz-short-isoffline",attrs:{title:"не в сети"}})]),i("div",{staticClass:"plz-receiver-title flex align-items-center mr-auto "},[i("span",{staticClass:"plz-receiver-name"},[t._v(" "+t._s(e.option.fullName)+" ")])])])]}}]),model:{value:t.model.selectedRecipients,callback:function(e){t.$set(t.model,"selectedRecipients",e)},expression:"model.selectedRecipients"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.hasNoAttendees,expression:"hasNoAttendees"}]},[i("p",{staticClass:"text-danger"},[t._v("Выберите собеседников")])])],1)]),i("button",{staticClass:"btn plz-btn btn-block plz-btn-primary mt-auto w-100",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.addAttendeesAndClose()}}},[t._v(" Создать чат с этими собеседниками ")])])])])])},Gm=[],Wm={name:"CreateGroupChatModal",components:{},props:{currentDialog:Bs|Object},data:function(){return{recipients:new un,model:{chatName:"",selectedRecipients:null},hasNoAttendees:!1}},validations:function(){return{model:{chatName:{required:R["required"],minLength:Object(R["minLength"])(3),maxLength:Object(R["maxLength"])(20)}}}},methods:{addAttendeesAndClose:function(){this.checkChatForm()&&this.addToChatDialog()},hideCreateGroupChatModal:function(){this.$emit("HideCreateGroupChatModal",{})},checkChatForm:function(){return this.$v.$touch(),this.hasNoAttendees=!1,this.model.selectedRecipients?this.model.selectedRecipients&&0===this.model.selectedRecipients.length?(this.hasNoAttendees=!0,!1):!this.$v.$invalid:(this.hasNoAttendees=!0,!1)},addToChatDialog:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,s=t.model.selectedRecipients.map((function(t){return t.id})),e.prev=2,e.next=5,t.$root.$api.$chat.dialogOpen(t.model.chatName,s);case 5:i=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](2),window.console.warn(e.t0.detailMessage),e.t0;case 12:i&&(i.lastMessageDT=(new Date).valueOf()/1e3>>>0,i.lastMessageText='<i class="text-black-50">новый групповой чат</ic>',t.$root.$emit("NewChatDialog",i),window.localStorage.setItem("pliziActiveDialog",i.id),t.hideCreateGroupChatModal(),i.chatId=i.id,t.$emit("SwitchToChat",i));case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))()}},computed:{getFriendsCombo:function(){var t=this;return this.$root.$auth.dm.asArray().map((function(e){t.recipients.add(e.companion,e.id)})),this.$root.$auth.frm.asArray().map((function(e){t.recipients.add(e,null)})),this.recipients.asArray()}},mounted:function(){var t=this;setTimeout((function(){t.$refs.chatName&&t.$refs.chatName.focus()}),100)}},Jm=Wm,Zm=Object(b["a"])(Jm,Km,Gm,!1,null,null,null),Xm=Zm.exports,Qm=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"removeCurrentDialogModal",tabindex:"-1",role:"dialog","aria-labelledby":"removeCurrentDialogModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideRemoveCurrentDialogModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered justify-content-center",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body p-4",attrs:{id:"resendMessageModalBody"}},[i("h5",{staticClass:"resend-message-title text-left mb-3"},[t.currentDialog.isGroup?i("span",{},[t._v("Удалить групповой чат с")]):i("span",{},[t._v("Удалить приватный чат с")])]),i("div",{staticClass:"form",attrs:{id:"resendMessageModalForm"}},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"d-flex flex-column align-items-start --h-100"},t._l(t.currentDialog.attendees,(function(t){return i("ChatHeaderCompanion",{key:t.id,attrs:{companion:t}})})),1)])]),i("button",{staticClass:"btn plz-btn plz-btn-primary mt-4",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.startRemoveDialog()}}},[t._v(" Да, удалить этот чат ")])])])])])},tp=[],ep=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex align-items-center --h-100"},[i("router-link",{staticClass:"mr-3 cursor-pointer position-relative",attrs:{to:"/user-"+t.companion.id,tag:"div"}},[i("div",{staticClass:"media-pic border rounded-circle "},[i("img",{attrs:{src:t.companion.userPic,alt:t.companion.fullName}})]),t.isTyper?[i("div",{staticClass:"writing"},[i("span"),i("span"),i("span")])]:[t.companion.isOnline?i("span",{staticClass:"user-friend-isonline",attrs:{title:t.companion.fullName+" онлайн"}}):i("span",{staticClass:"user-friend-isoffline"})]],2),i("div",{staticClass:"media-body"},[i("router-link",{staticClass:"chatHeader-title align-self-start mt-2 pb-0 mb-0 pull-left text-body cursor-pointer",attrs:{to:"/user-"+t.companion.id,tag:"h6"}},[t._v(" "+t._s(t.companion.fullName)+" ")]),t.companion.lastActivity?i("p",{staticClass:"chatHeader-subtitle p-0 mb-0 mt-1 w-100 d-block"},[t._v(" "+t._s(t._f("lastEventTime")(t.companion.lastActivity))+" ")]):i("p",{staticClass:"chatHeader-subtitle p-0 mb-0 mt-1 w-100 d-block"},[t._v(" давно ")])],1)],1)},ip=[],sp={name:"ChatHeaderCompanion",props:{companion:Vs},data:function(){return{typingTimeout:null,isTyper:!1}},methods:{onCompanionTyping:function(t){var e=this;this.companion.id===t.user.id&&(this.typingTimeout&&clearTimeout(this.typingTimeout),this.isTyper=!0,this.typingTimeout=setTimeout((function(){e.isTyper=!1}),3e3))}},mounted:function(){this.$root.$on("userIsTyping",this.onCompanionTyping)}},ap=sp,np=Object(b["a"])(ap,ep,ip,!1,null,null,null),rp=np.exports,op=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("router-link",{staticClass:"mr-3 cursor-pointer position-relative",attrs:{to:"/user-"+t.attendee.id,tag:"div",title:t.attendee.fullName}},[t.attendee.isAdmin?i("span",{staticClass:"plz-chat-attendee-admin ",attrs:{title:"администратор чата"}},[i("i",{staticClass:"fas fa-star"})]):t._e(),i("div",{staticClass:"media-pic border rounded-circle"},[i("img",{attrs:{src:t.attendee.userPic,alt:t.attendee.fullName}})]),t.isTyper?[i("div",{staticClass:"writing"},[i("span"),i("span"),i("span")])]:[t.attendee.isOnline?i("span",{staticClass:"user-friend-isonline",attrs:{title:t.attendee.fullName+" онлайн"}}):i("span",{staticClass:"user-friend-isoffline"})]],2)],1)},lp=[],cp={name:"ChatHeaderAttendeeItem",props:{attendee:Vs,keyUpdater:Number},data:function(){return{typingTimeout:null,isTyper:!1}},methods:{onCompanionTyping:function(t){var e=this;this.attendee.id===t.user.id&&(this.typingTimeout&&clearTimeout(this.typingTimeout),this.isTyper=!0,this.typingTimeout=setTimeout((function(){e.isTyper=!1}),3e3))}},mounted:function(){this.$root.$on("userIsTyping",this.onCompanionTyping)}},up=cp,dp=Object(b["a"])(up,op,lp,!1,null,null,null),mp=dp.exports,pp={name:"RemoveCurrentDialogModal",components:{ChatHeaderCompanion:rp,ChatHeaderAttendeeItem:mp},props:{currentDialog:Object},methods:{startRemoveDialog:function(){this.removeChat()},hideRemoveCurrentDialogModal:function(){this.$emit("HideRemoveDialogModal",{})},removeChat:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$chat.dialogRemove(t.currentDialog.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i&&(t.$root.$emit("RemoveChatDialog",{chatId:t.currentDialog.id}),t.hideRemoveCurrentDialogModal());case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}},hp=pp,fp=Object(b["a"])(hp,Qm,tp,!1,null,null,null),vp=fp.exports,gp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"groupChatAttendeesModal",tabindex:"-1",role:"dialog","aria-labelledby":"groupChatAttendeesModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideGroupChatAttendeesModal(e)}}},[i("div",{staticClass:"chat-pick-attendees-document modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("div",{staticClass:"modal-body d-flex flex-column p-4",attrs:{id:"groupChatAttendeesModalBody"}},[i("h5",{staticClass:"resend-message-title text-left mb-4"},[t._v("Участники группового чата")]),i("form",{staticClass:"chat-pick-attendees-form mb-4",attrs:{id:"chatPickAttendeesForm",novalidate:"novalidate"}},[i("GroupChatMembersList",{ref:"attendeesList",attrs:{attendees:t.getAttendeesList(t.keyUpdater),isCanDelete:t.isCanDelete,meIsChatAdmin:t.meIsChatAdmin,keyUpdater:t.keyUpdater},on:{RemoveAttendeeFromChat:t.onRemoveAttendeeFromChat}}),t.meIsChatAdmin?i("div",{staticClass:"form-group"},[i("label",{},[t._v("Добавить нового участника")]),i("multiselect",{attrs:{options:t.getFriendsCombo,label:"fullName","track-by":"fullName",searchable:!0,"close-on-select":!0,"show-labels":!1,multiple:!1,placeholder:"Выберите нового участника чата"},on:{select:t.onPickNewAttendee},scopedSlots:t._u([{key:"option",fn:function(e){return[i("div",{staticClass:"plz-receivers-item d-flex align-items-center py-2 px-3"},[i("span",{staticClass:"plz-receiver-userpic text-body"},[i("img",{staticClass:"plz-short-userpic rounded-circle",attrs:{src:e.option.userPic,alt:e.option.firstName}}),e.option.isOnline?i("span",{staticClass:"plz-short-isonline",attrs:{title:"в сети"}}):i("span",{staticClass:"plz-short-isoffline",attrs:{title:"не в сети"}})]),i("div",{staticClass:"plz-receiver-title flex align-items-center mr-auto "},[i("span",{staticClass:"plz-receiver-name"},[t._v(" "+t._s(e.option.fullName)+" ")])])])]}}],null,!1,4210322886),model:{value:t.model.selectedRecipients,callback:function(e){t.$set(t.model,"selectedRecipients",e)},expression:"model.selectedRecipients"}})],1):t._e()],1)])])])])},bp=[],Cp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group",attrs:{id:"groupChatAttendeesModalMembers"}},[i("vue-custom-scrollbar",{staticClass:"chat-members-scroll py-4",attrs:{settings:t.customScrollbarSettings}},[i("div",{key:"attendeesList-"+t.keyUpdater,staticClass:"d-flex flex-column align-items-start"},t._l(t.attendees,(function(e){return i("ChatAttendeeItem",{key:"attendeeItem-"+e.id+"-"+t.keyUpdater,attrs:{companion:e,meIsChatAdmin:t.meIsChatAdmin,isCanDelete:t.isCanDelete},on:{RemoveAttendeeFromChat:t.onRemoveAttendeeFromChat}})})),1)])],1)},yp=[],wp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex align-items-start mb-3 w-100 pr-3"},[i("div",{staticClass:"mr-3 position-relative"},[t.companion.isAdmin?i("span",{staticClass:"plz-chat-attendee-admin",attrs:{title:"администратор чата"}},[i("i",{staticClass:"fas fa-star"})]):t._e(),i("div",{staticClass:"media-pic border rounded-circle"},[i("img",{attrs:{src:t.companion.userPic,alt:t.companion.fullName}})]),t.isTyper?[t._m(0)]:[t.companion.isOnline?i("span",{staticClass:"user-friend-isonline",attrs:{title:t.companion.fullName+" онлайн"}}):i("span",{staticClass:"user-friend-isoffline"})]],2),i("div",{staticClass:"media-body mr-auto w-auto"},[i("h6",{staticClass:"chatHeader-title align-self-start mt-2 pb-0 mb-0 text-body"},[t._v(" "+t._s(t.companion.fullName)+" ")]),i("p",{staticClass:"chatHeader-subtitle p-0 mb-0 mt-1 w-100 d-block"},[t._v(" "+t._s(t._f("lastEventTime")(t.companion.lastActivity))+" ")])]),i("div",{staticClass:"align-self-end ml-5 mt-0"},[t.isCanDelete&&t.meIsChatAdmin?i("button",{staticClass:"btn btn-link border-0",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.onRemoveAttendeeClick(e)}}},[i("IconUserX",{staticStyle:{height:"20px"}})],1):t._e()])])},xp=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"writing"},[i("span"),i("span"),i("span")])}],kp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-user-x",attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve"}},[i("g",[i("g",[i("path",{attrs:{d:"M407.672,280.596c-21.691-15.587-45.306-27.584-70.182-35.778C370.565,219.986,392,180.449,392,136\n                C392,61.01,330.991,0,256,0S120,61.01,120,136c0,44.504,21.488,84.084,54.633,108.911c-30.368,9.998-58.863,25.555-83.803,46.069\n                c-45.732,37.617-77.529,90.086-89.532,147.743c-3.762,18.066,0.745,36.622,12.363,50.908C25.222,503.847,42.365,512,60.693,512\n                H267c11.046,0,20-8.954,20-20c0-11.046-8.954-20-20-20H60.693c-8.538,0-13.689-4.766-15.999-7.606\n                c-3.989-4.905-5.533-11.29-4.236-17.519c20.756-99.695,108.691-172.521,210.24-174.977c1.759,0.068,3.526,0.102,5.302,0.102\n                c1.788,0,3.569-0.035,5.341-0.104c44.466,1.052,86.883,15.236,122.988,41.182c8.969,6.446,21.467,4.399,27.913-4.569\n                C418.688,299.539,416.642,287.042,407.672,280.596z M260.869,231.878c-1.621-0.03-3.244-0.045-4.869-0.045\n                c-1.614,0-3.228,0.016-4.84,0.046C200.465,229.35,160,187.312,160,136c0-52.935,43.065-96,96-96s96,43.065,96,96\n                C352,187.302,311.55,229.334,260.869,231.878z"}})])]),i("g",[i("g",[i("path",{staticClass:"icon-user-x-del",attrs:{d:"M455.285,427l50.857-50.857c7.811-7.811,7.811-20.475,0-28.285c-7.811-7.811-20.474-7.811-28.284,0L427,398.715\n                l-50.858-50.858c-7.811-7.811-20.474-7.811-28.284,0c-7.81,7.811-7.811,20.475,0,28.285L398.715,427l-50.857,50.857\n                c-7.811,7.811-7.811,20.475,0,28.285C351.763,510.048,356.881,512,362,512c5.119,0,10.237-1.952,14.142-5.857L427,455.285\n                l50.858,50.858C481.763,510.048,486.881,512,492,512c5.119,0,10.237-1.952,14.142-5.857c7.811-7.811,7.811-20.475,0-28.285\n                L455.285,427z"}})])])])},_p=[],$p={name:"IconUserX"},Mp=$p,Ip=Object(b["a"])(Mp,kp,_p,!1,null,null,null),Pp=Ip.exports,Sp={name:"ChatAttendeeItem",components:{IconUserX:Pp},props:{companion:Vs,meIsChatAdmin:Boolean,isCanDelete:Boolean},data:function(){return{typingTimeout:null,isTyper:!1}},methods:{onRemoveAttendeeClick:function(){this.$emit("RemoveAttendeeFromChat",{userId:this.companion.id,fullName:this.companion.fullName})},onCompanionTyping:function(t){var e=this;this.companion.id===t.user.id&&(this.typingTimeout&&clearTimeout(this.typingTimeout),this.isTyper=!0,this.typingTimeout=setTimeout((function(){e.isTyper=!1}),3e3))}},mounted:function(){this.$root.$on("userIsTyping",this.onCompanionTyping)}},Lp=Sp,Rp=Object(b["a"])(Lp,wp,xp,!1,null,null,null),Np=Rp.exports,Ap={name:"GroupChatMembersList",components:{ChatAttendeeItem:Np,VueCustomScrollbar:Ce.a},props:{attendees:Array,isCanDelete:Boolean,meIsChatAdmin:Boolean,keyUpdater:Number},data:function(){return{customScrollbarSettings:{suppressScrollX:!0,wheelPropagation:!1}}},methods:{onRemoveAttendeeFromChat:function(t){this.$emit("RemoveAttendeeFromChat",t)}}},Fp=Ap,zp=Object(b["a"])(Fp,Cp,yp,!1,null,null,null),Ep=zp.exports,jp={name:"GroupChatAttendeesModal",components:{GroupChatMembersList:Ep},mixins:[Um],props:{currentDialog:Bs},data:function(){return{recipients:new un,model:{chatName:"",selectedRecipients:null},hasNoAttendees:!1,keyUpdater:0}},computed:{isCanDelete:function(){return this.getAttendeesList().length>=2},getFriendsCombo:function(){var t=this,e=this.currentDialog.attendeesIds;return this.$root.$auth.dm.asArray().map((function(i){e.includes(i.companion.id)||t.recipients.add(i.companion,i.id)})),this.$root.$auth.frm.asArray().map((function(i){e.includes(i.id)||t.recipients.add(i,null)})),this.recipients.asArray()}},methods:{getAttendeesList:function(){return this.currentDialog.attendees.slice()},hideGroupChatAttendeesModal:function(){this.$emit("HideGroupChatAttendeesModal",{})},onPickNewAttendee:function(t){this.addAttendeeToChat(t)},onRemoveAttendeeFromChat:function(t){this.removeAttendeeFromChat(t.userId)},addAttendeeToChat:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=e.currentDialog.getAttendee(t.id),!s){i.next=4;break}return e.$root.$alert("".concat(t.fullName," уже есть в этом чате!"),"bg-danger",5),i.abrupt("return");case 4:return a=null,i.prev=5,i.next=8,e.$root.$api.$chat.addAttendee(e.currentDialog.id,t.id);case 8:a=i.sent,i.next=15;break;case 11:throw i.prev=11,i.t0=i["catch"](5),window.console.warn(i.t0.detailMessage),i.t0;case 15:a&&(e.$emit("AddAttendeeToDialog",{chatId:e.currentDialog.id,userId:t.id}),e.$root.$auth.dm.addAttendeeToDialog(e.currentDialog.id,t));case 16:case"end":return i.stop()}}),i,null,[[5,11]])})))()},removeAttendeeFromChat:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$chat.removeAttendee(e.currentDialog.id,t);case 4:s=i.sent,i.next=11;break;case 7:throw i.prev=7,i.t0=i["catch"](1),window.console.warn(i.t0.detailMessage),i.t0;case 11:s&&(e.$emit("RemoveAttendeeFromDialog",{chatId:e.currentDialog.id,userId:t}),e.$root.$auth.dm.removeAttendeeFromDialog(e.currentDialog.id,t));case 12:case"end":return i.stop()}}),i,null,[[1,7]])})))()}},created:function(){var t=this;this.$root.$on(this.$root.$auth.dm.updateEventName,(function(){t.$root.$emit("UpdateCurrentDialog",{}),t.$root.$dialogsKeyUpdater++,t.keyUpdater++,t.$refs&&t.$refs.attendeesList&&t.$refs.attendeesList.$forceUpdate()}))},beforeDestroy:function(){this.$root.$off(this.$root.$auth.dm.updateEventName,(function(){}))}},Dp=jp,Op=Object(b["a"])(Dp,gp,bp,!1,null,null,null),Tp=Op.exports,Hp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mr-3 mt-3 cursor-pointer"},[i("div",{staticClass:"media-pic border rounded-circle position-relative",on:{click:function(e){return e.preventDefault(),t.onPlusClick(e)}}},[i("IconUserPlus",{staticClass:"w-50 h-50 "})],1)])},Up=[],Vp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-user-plus",staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve"}},[i("g",[i("path",{attrs:{d:"M255.501,0.499c-81.448,0-147.711,66.264-147.711,147.711c0,50.449,25.429,95.065,64.137,121.724\n            c-36.139,12.471-69.263,33.071-97.091,60.899C26.577,379.093,0,443.254,0,511.501h39.922\n            c0-118.871,96.708-215.579,215.579-215.579c81.448,0,147.711-66.264,147.711-147.712S336.949,0.499,255.501,0.499z M255.501,256\n            c-59.435,0-107.789-48.354-107.789-107.789S196.066,40.421,255.501,40.421S363.29,88.775,363.29,148.211S314.936,256,255.501,256z\n            "}})]),i("g",[i("polygon",{staticClass:"icon-user-plus-plus",attrs:{points:"428.164,387.743 428.164,303.906 388.242,303.906 388.242,387.743 304.405,387.743 304.405,427.665\n            388.242,427.665 388.242,511.501 428.164,511.501 428.164,427.665 512,427.665 512,387.743 \t\t"}})])])},Bp=[],Yp={name:"IconUserPlus"},qp=Yp,Kp=Object(b["a"])(qp,Vp,Bp,!1,null,null,null),Gp=Kp.exports,Wp={name:"ChatHeaderAttendeePlus",components:{IconUserPlus:Gp},methods:{onPlusClick:function(){this.$emit("ShowAddAttendeeModal",{})}}},Jp=Wp,Zp=Object(b["a"])(Jp,Hp,Up,!1,null,null,null),Xp=Zp.exports,Qp=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex align-items-center"},t._l(t.currentDialog.attendees,(function(e){return i("ChatHeaderAttendeeItem",{key:"chatHeaderAttendeeItem-"+e.id+"-"+t.keyUpdater,attrs:{attendee:e,keyUpdater:t.keyUpdater}})})),1)},th=[],eh={name:"GroupChatAttendeesList",components:{ChatHeaderAttendeeItem:mp},props:{currentDialog:Bs,keyUpdater:Number},methods:{onShowAttendeesModal:function(){this.$emit("ShowAddAttendeeModal",{})}}},ih=eh,sh=Object(b["a"])(ih,Qp,th,!1,null,null,null),ah=sh.exports,nh={name:"ChatHeader",components:{GroupChatAttendeesList:ah,IconSearch:zs,ChatHeaderCompanion:rp,ChatDatePicker:Om,ChatHeaderMenu:qm,CreateGroupChatModal:Xm,RemoveCurrentDialogModal:vp,GroupChatAttendeesModal:Tp,vueCustomScrollbar:Ce.a,ChatHeaderAttendeePlus:Xp},mixins:[Um],props:{currentDialog:{type:null|Bs,required:!0}},data:function(){return{chatFilterText:"",showDatePicker:!1,dateRange:null,createGroupChatModalShow:!1,removeDialogModalShow:!1,showAttendeesModal:!1,attendeeKeyUpdater:0,customScrollbarSettings:{maxScrollbarLength:60,suppressScrollY:!0,wheelPropagation:!1}}},computed:{companion:function(){return this.currentDialog&&this.currentDialog.companion?this.currentDialog.companion:{userPic:this.$defaultAvatarPath,firstName:"пользователь",lastActivity:(new Date).valueOf()/1e3}}},methods:{onSwitchToChat:function(t){this.$emit("SwitchToChat",t)},onShowRemoveCurrentChatModal:function(){this.removeDialogModalShow=!0},onHideRemoveDialogModal:function(){this.removeDialogModalShow=!1},onShowCreateGroupChatModal:function(){this.createGroupChatModalShow=!0},onHideCreateGroupChatModal:function(){this.createGroupChatModalShow=!1},onShowAttendeesModal:function(){this.showAttendeesModal=!0},onHideAttendeesModal:function(){this.showAttendeesModal=!1},onChangeAttendeeList:function(){this.attendeeKeyUpdater++,this.$refs.groupChatAttendeesModal&&this.$refs.groupChatAttendeesModal.$forceUpdate(),this.$refs.groupChatAttendeesList&&this.$refs.groupChatAttendeesList.$forceUpdate()},chatSearchKeyDownCheck:function(t){var e=this.chatFilterText.trim();if(8===t.keyCode||13===t.keyCode||46===t.keyCode)return this.startChatFilter(e)},onClickStartChatFilter:function(){var t=this.chatFilterText.trim();return this.startChatFilter(t)},startChatFilter:function(t){this.$emit("ChatMessagesFilter",{text:t,range:this.dateRange})},onFocusSearch:function(){this.showDatePicker=!0},dateSelected:function(t){this.dateRange=t,this.startChatFilter(null)},clearFilters:function(){this.chatFilterText="",this.showDatePicker=!1,this.$refs.chatDatePicker.clearDateSelected()}},created:function(){this.$root.$on("ChatDialogsNew",this.onShowCreateGroupChatModal)},beforeDestroy:function(){this.$root.$off("ChatDialogsNew",(function(){}))}},rh=nh,oh=Object(b["a"])(rh,Nm,Am,!1,null,null,null),lh=oh.exports,ch={name:"ChatsListPage",components:{ChatDialogs:Rm,AccountToolbarLeft:ks,Spinner:Gi,ChatHeader:lh,ChatMessages:Tn,ChatFooter:qn},mixins:[Qa["a"]],data:function(){return{componentKey:0,chatCarrier:null,currentDialog:null,messagesList:new En,isMessagesLoaded:!1,isMessagesLazyLoad:!1,isCanLoadMoreMessages:!0,filter:{text:"",range:null},dialogsSearchedList:null,changedHeight:"",isChatPicked:!1,freshUpdater:0}},computed:{isShowDialogsBlock:function(){return!(!this.$root.$isLG()&&!this.$root.$isXL())||!this.isChatPicked},isShowMessageBlock:function(){return!(!this.$root.$isLG()&&!this.$root.$isXL())||this.isChatPicked},currentDialogID:function(){return this.currentDialog?this.currentDialog.id:"unknown"},isDialogsLoaded:function(){return this.$root.$auth.dm.isLoad}},methods:{getCurrentDialog:function(){return this.$root.$auth.dm.get(this.currentDialog.id)},onScrollToTop:function(t){this.lazyLoadMessages(t.chatId,t.offset,t.limit)},getChatMessagesKey:function(){return"chatMessages-"+this.$root.$messagesKeyUpdater},isFreshUser:function(){return 0===this.$root.$auth.fm.size&&0===this.$root.$auth.dm.size},onUpdateMessagesFilterText:function(t){this.filter.text=t.text?t.text.trim():"",this.filter.range=t.range&&t.range.start&&t.range.end?t.range:null,this.$forceUpdate()},onChatFooterEditorChangedHeight:function(t){this.changedHeight=t.changedHeight+"px",this.$refs&&this.$refs.chatMessages&&this.$refs.chatMessages.scrollToEnd()},clearChatMessagesFilters:function(){this.$refs.chatHeader.clearFilters(),this.onUpdateMessagesFilterText({text:"",range:null})},removeMessageInList:function(t){if("ChatsListPage"===this.$root.$router.currentRoute.name&&this.currentDialog.id===t.chatId){this.$root.$messagesKeyUpdater++,this.messagesList.delete(t.messageId);var e=this.messagesList.last;this.updateDialogsList(t.chatId,{message:e}),this.$refs&&this.$refs.chatMessages&&this.$refs.chatMessages.scrollToEnd()}},updateDialogsList:function(t,e){e.chatId=t,this.$root.$emit("UpdateChatDialog",e)},onSwitchToChat:function(t){this.chatSelect(t.chatId)},chatSelect:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,e.isMessagesLoaded=!1,e.currentDialog=e.$root.$auth.dm.get(t),i.prev=3,i.next=6,e.$root.$api.$chat.messages(t,0,10);case 6:s=i.sent,i.next=13;break;case 9:throw i.prev=9,i.t0=i["catch"](3),window.console.warn(i.t0.detailMessage),i.t0;case 13:window.localStorage.setItem("pliziActiveDialog",t),e.messagesList.clear(),s.map((function(t){e.appendMessageToMessagesList(t)})),e.isMessagesLoaded=!0,e.isChatPicked=!0;case 18:case"end":return i.stop()}}),i,null,[[3,9]])})))()},addNewChatMessageToList:function(t){"ChatsListPage"===this.$root.$router.currentRoute.name&&(this.currentDialog&&this.currentDialog.id===t.chatId&&this.appendMessageToMessagesList(t.message),this.$refs&&this.$refs.chatMessages&&(this.$refs.chatMessages.$forceUpdate(),this.$refs.chatMessages.scrollToEnd()),this.updateDialogsList(t.chatId,t))},appendMessageToMessagesList:function(t){this.messagesList.append(t),this.$root.$messagesKeyUpdater++},remoteCreateFirstDialog:function(t){var e=this,i=new Bs(t.data);i.removeAttendee(this.$root.$auth.user.id),this.$root.$auth.dm.onAddNewDialog(i.toJSON()),this.$root.$dialogsKeyUpdater++,this.freshUpdater++,this.$root.$on("DialogsIsUpdated",(function(){e.$refs&&e.$refs.chatDialogs&&e.$refs.chatDialogs.$forceUpdate()}))},remoteAddFirstAttendee:function(t){return this.remoteCreateFirstDialog(t)},addListeners:function(){var t=this;this.$root.$on("DialogsIsUpdated",(function(){t.$refs&&t.$refs.chatDialogs&&t.$refs.chatDialogs.$forceUpdate()})),this.$root.$on("GoToChat",(function(){t.isChatPicked=!1})),this.$root.$on("newMessageInDialog",this.addNewChatMessageToList),this.$root.$on("UpdateCurrentDialog",(function(){t.currentDialog=t.$root.$auth.dm.get(t.currentDialog.id)})),this.$root.$on("removeMessageInDialog",(function(e){t.removeMessageInList&&t.removeMessageInList(e)})),this.$root.$once("remoteCreateDialog",this.remoteCreateFirstDialog),this.$root.$once("remoteAddAttendee",this.remoteAddFirstAttendee)}},created:function(){this.$root.$messagesList=this.messagesList,this.addListeners()}},uh=ch,dh=Object(b["a"])(uh,rm,om,!1,null,null,null),mh=dh.exports,ph=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3"},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-9 col-lg-9 col-xl-10  px-0 px-md-3"},[i("div",{staticClass:"col-12 offset-xl-2 col-xl-8 bg-white-br20 p-4 mb-3"},[t.isDataReady?i("div",{staticClass:"plizi-search-results-list"},[i("h4",[t._v("Люди")]),i("hr"),t.searchResults&&t.searchResults.length>0?i("ul",{staticClass:"list-unstyled mb-0"},t._l(t.searchResults,(function(t,e){return i("SearchResultItem",{key:e,attrs:{srItem:t}})})),1):i("div",[i("div",{staticClass:"alert alert-info"},[t._v(' По Вашему запросу "'),i("b",[t._v(t._s(t.$root.$lastSearch))]),t._v('" ничего не найдено ')])])]):i("Spinner",{attrs:{clazz:"d-flex flex-row"}})],1),i("div",{staticClass:"col-12 offset-xl-2 col-xl-8 bg-white-br20 p-4"},[t.isCommunityDataReady?i("div",{staticClass:"plizi-search-results-list"},[i("h4",[t._v("Сообщества")]),i("hr"),t.communitySearchResults&&t.communitySearchResults.length>0?i("ul",{staticClass:"list-unstyled mb-0"},t._l(t.communitySearchResults,(function(t,e){return i("CommunitySearchResultItem",{key:e,attrs:{community:t}})})),1):i("div",[i("div",{staticClass:"alert alert-info"},[t._v(' По Вашему запросу "'),i("b",[t._v(t._s(t.$root.$lastSearch))]),t._v('" ничего не найдено ')])])]):i("Spinner",{attrs:{clazz:"d-flex flex-row"}})],1)]),i("div",{staticClass:"col-md-2 col-lg-2 col-xl-1 d-none d-md-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},hh=[],fh=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-sr-item-user media m-0 py-4 px-4"},[i("div",{staticClass:"plizi-sr-item d-flex w-100 align-items-center"},[i("router-link",{staticClass:"plizi-sr-item-pic mr-3 ",attrs:{to:"/user-"+t.srItem.id,tag:"div"}},[i("img",{staticClass:"plizi-sr-item-img rounded-circle overflow-hidden",attrs:{src:t.srItem.userPic,alt:t.srItem.fullName}}),t.srItem.isOnline?i("span",{staticClass:"plizi-sr-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-sr-item-isoffline"})]),i("div",{staticClass:"plizi-sr-item-body m-0 pr-5 "},[i("router-link",{staticClass:"plizi-sr-item-top d-flex align-items-end justify-content-between mb-2",attrs:{to:"/user-"+t.srItem.id,tag:"div"}},[i("h6",{staticClass:"plizi-sr-item-name my-0",domProps:{innerHTML:t._s(t.toHighlightFullname)}})]),i("div",{staticClass:"plizi-sr-item-body-bottom d-flex pr-5"},[i("p",{staticClass:"plizi-sr-item-desc p-0 my-0  d-inline "},[i("IconLocation",{staticStyle:{height:"14px"}}),t.locationLabel?i("span",{domProps:{innerHTML:t._s(t.toHighlightLocation)}}):i("span",[t._v(" Не указано ")])],1)])],1),i("button",{staticClass:"plz-short-friend-is-active btn btn-link text-body mr-2 ml-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.goToDialogWithFriend()}}},[t.isInRedirecting?i("IconSpinner"):i("IconMessageShort")],1),i("a",{staticClass:"text-body",on:{click:function(e){return t.sendFriendshipInvitation(t.srItem.id,t.srItem.fullName)}}},[i("IconAddUser",{staticStyle:{width:"24px",height:"24px"}})],1)],1)])},vh=[],gh=(i("4d63"),{name:"SearchResultItem",components:{IconMessageShort:ml,IconAddUser:du,IconMessage:Ee["a"],IconSpinner:bl,IconLocation:Fl},mixins:[Hl,Wn],props:{srItem:Qi["a"]},data:function(){return{isInRedirecting:!1}},computed:{toHighlightFullname:function(){var t=this.srItem.fullName,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},toHighlightLocation:function(){var t=this.locationLabel,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},locationLabel:function(){var t,e,i,s,a,n=[],r=null===(t=this.srItem.location)||void 0===t||null===(e=t.country)||void 0===e?void 0:e.title.ru;r&&n.push(r);var o=null===(i=this.srItem.location)||void 0===i||null===(s=i.region)||void 0===s?void 0:s.title.ru;o&&n.push(o);var l=null===(a=this.srItem.location)||void 0===a?void 0:a.title.ru;return l&&n.push(l),n.join(", ")}},methods:{goToDialogWithFriend:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isInRedirecting=!0,e.next=3,t.openDialogWithFriend(t.srItem);case 3:t.$root.$router.push("/chats");case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){}}),bh=gh,Ch=Object(b["a"])(bh,fh,vh,!1,null,null,null),yh=Ch.exports,wh=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-sr-item-user plizi-sr-item col-12 --col-lg-6 media px-2 py-3 mb-3 align-items-stretch"},[i("div",{staticClass:"plizi-community-item d-flex flex-column flex-lg-row align-items-center justify-content-between --bg-white-br20 w-100 --px-4 --py-4"},[i("router-link",{staticClass:"plizi-sr-item-pic mr-auto ml-auto mr-lg-3 ml-lg-3 mb-3 mb-lg-0 rounded-circle overflow-hidden align-self-start",attrs:{to:"/community-"+t.community.id,tag:"a"}},[i("img",{staticClass:"plizi-community-item-img ",attrs:{src:t.avatar,alt:t.community.name,title:t.community.name}})]),i("div",{staticClass:"plizi-sr-item-body "},[i("router-link",{staticClass:"plizi-community-item-top d-flex align-items-end justify-content-between mb-2  ",attrs:{to:"/community-"+t.community.id,tag:"a"}},[i("h6",{staticClass:"plizi-community-item-name my-0"},[t._v(" "+t._s(t.community.name)+" ")])]),i("PrivacyLabel",{attrs:{community:t.community}}),i("div",{staticClass:"plizi-community-item-body-middle mb-2"},[t.community.description?i("p",{staticClass:"plizi-community-item-desc p-0 mb-1"},[t._v(" "+t._s(t.community.description)+" ")]):t.community.notice?i("p",{staticClass:"plizi-community-item-notice p-0 my-0 text-secondary"},[t._v(t._s(t.community.notice))]):i("p",{staticClass:"plizi-community-item-location p-0 my-0 text-secondary"},[t._v(t._s(t.locationLabel))]),i("p",{staticClass:"plizi-community-item-members-number p-0 my-0"},[t._v(t._s(t.community.totalMembers)+" участников ")])]),i("div",{staticClass:"plizi-community-item-body-bottom d-flex flex-column-reverse flex-lg-row align-items-center justify-content-between mt-3 mt-lg-0"},[t.community.totalFriends?i("div",{staticClass:"plizi-community-item-body-friends d-flex flex-wrap align-items-center justify-content-between ml-1"},[i("div",{staticClass:"plizi-community-item-body-friends-pics mr-1 my-1"},t._l(t.community.friends,(function(e){return i("div",{key:e.id,staticClass:"plizi-community-item-body-friends-pic position-relative rounded-circle"},[i("img",{attrs:{src:t.getAvatar(e),alt:e.profile.fullName,title:e.profile.fullName}})])})),0),i("p",{staticClass:"plizi-community-item-desc my-1"},[t._v(t._s(t.community.totalFriends)+" друзей")])]):t._e()])],1),"new"===t.subscribeType?i("button",{staticClass:"btn plz-btn-outline  plizi-community-btn rounded-pill",on:{click:function(e){return t.subscribeInvite(t.community)}}},[t._v(" Подписаться ")]):"request"===t.subscribeType?i("button",{staticClass:"btn plz-btn-outline  plizi-community-btn rounded-pill",on:{click:function(e){return t.sendRequest(t.community)}}},[t._v(" Запрос ")]):"exists"===t.subscribeType?i("button",{staticClass:"btn btn-outline-danger plizi-community-btn  rounded-pill",on:{click:function(e){return t.unsubscribeInvite(t.community)}}},[t._v(" Отписаться ")]):"author"===t.subscribeType?i("router-link",{staticClass:"btn btn-outline-danger plizi-community-btn  rounded-pill",attrs:{to:{name:"CommunitySettingsPage",params:{id:t.community.id}}}},[t._v(" Управление ")]):t._e()],1)])},xh=[],kh={name:"CommunitySearchResultItem",components:{PrivacyLabel:bu,IconMessageShort:ml,IconAddUser:du,IconMessage:Ee["a"],IconLocation:Fl},mixins:[mu],props:{community:rs},computed:{toHighlightName:function(){var t=this.community.name,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},toHighlightCommunityLocation:function(){var t=this.locationLabel,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},toHighlightDescription:function(){var t=this.community.description,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},toHighlightNotice:function(){var t=this.community.notice,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},avatar:function(){var t;return(null===(t=this.community.avatar)||void 0===t?void 0:t.image.thumb.path)||this.community.primaryImage},subscribeType:function(){return this.getSubscribeType(this.community)},locationLabel:function(){var t,e,i,s=[],a=null===(t=this.community.location)||void 0===t?void 0:t.country.title.ru;a&&s.push(a);var n=null===(e=this.community.location)||void 0===e?void 0:e.region.title.ru;n&&s.push(n);var r=null===(i=this.community.location)||void 0===i?void 0:i.title.ru;return r&&s.push(r),s.join(", ")}},methods:{getAvatar:function(t){var e;return(null===(e=t.profile.avatar)||void 0===e?void 0:e.image.thumb.path)||t.profile.userPic}}},_h=kh,$h=Object(b["a"])(_h,wh,xh,!1,null,null,null),Mh=$h.exports,Ih={name:"SearchResultsPage",components:{CommunitySearchResultItem:Mh,SearchResultItem:yh,AccountToolbarLeft:ks,FavoriteFriends:sr,Spinner:Gi},data:function(){return{searchResultsList:[],isDataReady:!1,communitySearchResultsList:[],isCommunityDataReady:!1}},computed:{searchResults:function(){return this.searchResultsList},communitySearchResults:function(){return this.communitySearchResultsList}},methods:{searchProcess:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.userSearchProcess();case 2:return e.next=4,t.communitySearchProcess();case 4:case"end":return e.stop()}}),e)})))()},userSearchProcess:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isDataReady=!0,t.searchResultsList=[],""!==t.$root.$lastSearch){e.next=4;break}return e.abrupt("return");case 4:return t.isDataReady=!1,i=null,e.prev=6,e.next=9,t.$root.$api.$users.search(t.$root.$lastSearch);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),window.console.warn(e.t0.detailMessage);case 15:null!==i&&(t.searchResultsList=[],i.map((function(e){t.searchResultsList.push(new Qi["a"](e))})),t.isDataReady=!0);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))()},communitySearchProcess:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isCommunityDataReady=!0,t.communitySearchResultsList=[],""!==t.$root.$lastSearch){e.next=4;break}return e.abrupt("return");case 4:return t.isCommunityDataReady=!1,i=null,e.prev=6,e.next=9,t.$root.$api.$communities.loadCommunities(t.$root.$lastSearch);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),window.console.warn(e.t0.detailMessage);case 15:null!==i&&(t.communitySearchResultsList=[],i.map((function(e){t.communitySearchResultsList.push(new rs(e))})),t.isCommunityDataReady=!0);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))()}},beforeMount:function(){this.$root.$on("searchStart",this.searchProcess)},mounted:function(){var t=localStorage.getItem("pliziLastSearch");t&&""!==t&&(this.$root.$lastSearch=t,this.searchProcess())}},Ph=Ih,Sh=(i("7669"),Object(b["a"])(Ph,ph,hh,!1,null,null,null)),Lh=Sh.exports,Rh=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3"},[i("FriendsListHeader",{on:{filterSearch:t.filterSearch}}),i("div",{staticClass:"d-flex flex-wrap align-items-start"},[i("div",{staticClass:"col-12 --order-1 --order-md-0 col-md-7 col-lg-8 col-xl-8 bg-white-br20"},[i("div",{staticClass:"row border-bottom px-4",attrs:{id:"friendsListFilter"}},[i("div",{staticClass:"col-12 d-flex align-items-center justify-content-between px-0"},[i("nav",{staticClass:"nav profile-filter-links",attrs:{role:"tablist"}},[i("span",{staticClass:"nav-link position-relative py-2 py-sm-3  py-lg-4 px-1 mr-2 mr-lg-4",class:{active:"all"===t.wMode},attrs:{id:"tabAllFriends",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.friendsListSelect("all")}}},[t._v("Все друзья")]),i("span",{staticClass:"nav-link position-relative py-2 py-sm-3  py-lg-4 px-1 mr-2 mr-lg-4",class:{active:"online"===t.wMode},attrs:{id:"tabOnlineFriends",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.friendsListSelect("online")}}},[t._v("Друзья онлайн")]),i("span",{staticClass:"nav-link position-relative py-2 py-sm-3  py-lg-4 px-1 mr-2 mr-lg-4",class:{active:"recent"===t.wMode},attrs:{id:"tabRecentFriends",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.friendsListSelect("recent")}}},[t._v("Новые друзья")]),i("span",{staticClass:"nav-link position-relative py-2 py-sm-3  py-lg-4 px-1 mr-2 mr-lg-4",class:{active:"favorites"===t.wMode},attrs:{id:"tabFavoritesFriends",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.friendsListSelect("favorites")}}},[t._v("Избранные")])])])]),t.isFriendsLoaded?i("FriendsAllList",{attrs:{friends:t.friendsListFilter(),friendsKey:t.friendsListKey,wMode:t.wMode,frmSize:t.frmSize,hasFriends:t.hasFriends}}):i("Spinner")],1),i("div",{staticClass:"col-12 col-md-5 col-lg-4 col-xl-4"},[t.possibleFriends&&t.possibleFriends.length?i("PotentialFriends",{attrs:{blockName:"Возможные друзья",friends:t.possibleFriends}}):t._e(),t.recommendedFriends&&t.recommendedFriends.length?i("PotentialFriends",{attrs:{blockName:"Рекомендуемые друзья",friends:t.recommendedFriends}}):t._e()],1)])],1),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},Nh=[],Ah=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{key:t.friendsKey,staticClass:"row plizi-friends-list"},[t.friends&&t.friends.length>0?i("ul",{key:t.calcFriendsKey+t.frmSize,staticClass:"d-block w-100 p-0"},[i("transition-group",{attrs:{name:"slide-fade",duration:700}},t._l(t.getFriends(),(function(e){return i("FriendListItem",{key:e.id+"-"+t.calcFriendsKey,attrs:{friend:e},on:{FriendRemoveFromFavorites:t.changesInFriends,FriendAddToFavorites:t.changesInFriends,FriendshipStop:t.changesInFriends}})})),1)],1):i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},["all"===t.wMode?i("p",[t._v("Вы ещё ни с кем не подружились.")]):t._e(),"recent"===t.wMode?i("p",[t._v("Вы давно никого не добавляли в друзья.")]):t._e(),"online"===t.wMode?i("p",[t._v("Сейчас все друзей оффлайн.")]):t._e(),"favorites"===t.wMode?i("p",[t._v("Вы никого не добавили в Избранные.")]):t._e()])])},Fh=[],zh=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-friend-item-user media m-0 py-4 px-4",class:{"bg-danger":t.isPrepareToRemoved,"d-none":t.isRemoved}},[i("div",{staticClass:"plizi-friend-item d-flex w-100 align-items-center"},[i("router-link",{staticClass:"plizi-friend-item-pic mr-3 ",attrs:{to:"/user-"+t.friend.id,tag:"div"}},[i("img",{staticClass:"plizi-friend-item-img rounded-circle overflow-hidden",attrs:{src:t.friend.userPic,alt:t.friend.fullName}}),t.isFavorite?i("span",{staticClass:"plizi-friend-item-isfavorite",attrs:{title:t.favoriteTitle}},[i("i",{staticClass:"fas fa-star"})]):t._e(),t.friend.isOnline?i("span",{staticClass:"plizi-friend-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-friend-item-isoffline"})]),i("div",{staticClass:"plizi-friend-item-body m-0 "},[i("router-link",{staticClass:"plizi-friend-item-top d-flex align-items-end justify-content-between mb-2",attrs:{to:"/user-"+t.friend.id,tag:"div"}},[i("h6",{staticClass:"plizi-friend-item-name my-0"},[t._v(t._s(t.friend.fullName))])]),i("div",{staticClass:"plizi-friend-item-body-bottom d-flex "},[i("p",{staticClass:"plizi-friend-item-desc p-0 my-0 d-inline"},[i("IconLocation",{staticStyle:{height:"14px"}}),t._v(" "+t._s(t.friend.locationText)+" ")],1)])],1),i("button",{staticClass:"btn btn-link ml-auto",attrs:{type:"button",title:"Перейти к диалогу с "+t.friend.fullName},on:{click:function(e){return e.preventDefault(),t.goToDialogWithFriend()}}},[t.isInRedirecting?i("IconSpinner"):i("IconMessageShort")],1),i("FriendListItemMenu",{attrs:{friend:t.friend,isFavorite:t.isFavorite},on:{FriendAddToFavorites:t.onFriendAddToFavorites,FriendRemoveFromFavorites:t.onFriendRemoveFromFavorites,FriendshipStop:t.onFriendshipStop}})],1)])},Eh=[],jh=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plizi-friend-item-actions ml-3"},[i("button",{staticClass:"btn btn-link plizi-friend-item-settings",attrs:{id:"friend"+this.friend.id,type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[i("i",{staticClass:"dots-vertical"})]),i("div",{staticClass:"dropdown-menu dropdown-menu-right py-3",attrs:{"aria-labelledby":"friend"+this.friend.id}},[i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-3 py-1",attrs:{tag:"a",to:"/user-"+t.friend.id}},[t._v(" Смотреть профиль ")])],1),t.isFavorite?i("div",{staticClass:"nav-item"},[i("span",{staticClass:"dropdown-item px-3 py-1",on:{click:function(e){return e.preventDefault(),t.onRemoveFromFavoritesClick(e)}}},[t._v(" Удалить из Избранных ")])]):i("div",{staticClass:"nav-item"},[i("span",{staticClass:"dropdown-item px-3 py-1",on:{click:function(e){return e.preventDefault(),t.onAddToFavoritesClick(e)}}},[t._v(" Добавить в Избранные ")])]),i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-3 py-1",attrs:{tag:"a",to:"/chats"}},[t._v(" Начать общение ")])],1),i("div",{staticClass:"nav-item"},[i("span",{staticClass:"dropdown-item px-3 py-1",on:{click:function(e){return e.preventDefault(),t.onStopFriendClick(e)}}},[t._v(" Не дружить ")])])])])},Dh=[],Oh={name:"FriendListItemMenu",props:{friend:Kn,isFavorite:Boolean},methods:{onStopFriendClick:function(){this.$emit("FriendshipStop",{friendId:this.friend.id})},onAddToFavoritesClick:function(){this.$emit("FriendAddToFavorites",{friendId:this.friend.id})},onRemoveFromFavoritesClick:function(){this.$emit("FriendRemoveFromFavorites",{friendId:this.friend.id})}}},Th=Oh,Hh=Object(b["a"])(Th,jh,Dh,!1,null,null,null),Uh=Hh.exports,Vh={name:"FriendListItem",components:{FriendListItemMenu:Uh,IconMessageShort:ml,IconSpinner:bl,IconLocation:Fl},mixins:[Wn,Gn,Hl],props:{friend:Kn},data:function(){return{isPrepareToRemoved:!1,isRemoved:!1,isFavorite:!1,isInRedirecting:!1}},computed:{favoriteTitle:function(){return"f"===this.friend.sex?"избранная":"избранный"}},methods:{goToDialogWithFriend:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isInRedirecting=!0,e.next=3,t.openDialogWithFriend(t.friend);case 3:t.$root.$router.push("/chats");case 4:case"end":return e.stop()}}),e)})))()},checkIsFavorite:function(){var t=this;this.isFavorite=!!this.$root.$auth.fm.asArray().find((function(e){return e.id===t.friend.id}))},onFriendRemoveFromFavorites:function(){this.removeFriendFromFavorites()},removeFriendFromFavorites:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$friend.removeFromFavorites(t.friend.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i?(t.$root.$auth.fm.removeFromFavorites(t.friend.id),t.$emit("FriendRemoveFromFavorites",{friendId:t.friend.id})):(s="Не получилось удалить <b>".concat(t.friend.fullName,"</b> из Избранных"),t.$root.$alert(s,"bg-warning",3));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onFriendAddToFavorites:function(){this.addFriendToFavorites()},addFriendToFavorites:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$friend.addToFavorites(t.friend.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i?(s=t.friend.toJSON(),t.$root.$auth.fm.onAddToFavorites(s),t.$emit("FriendAddToFavorites",{friendId:t.friend.id})):(a="Не получилось добавить <b>".concat(t.friend.fullName,"</b> в Избранные"),t.$root.$alert(a,"bg-warning",3));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onFriendshipStop:function(){this.stopFriendship(this.friend.id)}},beforeMount:function(){this.checkIsFavorite()}},Bh=Vh,Yh=Object(b["a"])(Bh,zh,Eh,!1,null,null,null),qh=Yh.exports,Kh={name:"FriendsAllList",components:{FriendListItem:qh},props:{friends:Array,friendsKey:String,frmSize:Number,wMode:String,hasFriends:Boolean},data:function(){return{friendsKeyCounter:0,localUpdateKey:(new Date).getMilliseconds()}},computed:{calcFriendsKey:function(){return this.friendsKey+"-"+this.localUpdateKey}},methods:{getFriends:function(){return this.friends.slice()},changesInFriends:function(){this.friendsKeyCounter+=1,this.localUpdateKey=this.friendsKeyCounter+"-"+(new Date).getMilliseconds()}},created:function(){var t=this;this.$root.$on(this.$root.$auth.frm.updateEventName,(function(){t.changesInFriends()}))}},Gh=Kh,Wh=Object(b["a"])(Gh,Ah,Fh,!1,null,null,null),Jh=Wh.exports,Zh=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex bg-white-br20 mb-4 py-0 px-4 flex-column-reverse flex-lg-row",attrs:{id:"FriendsFilter"}},[i("div",{staticClass:"col-12 col-lg-8 d-flex align-items-center justify-content-between px-0"},[i("nav",{staticClass:"nav profile-filter-links d-flex w-100 mt-2 mt-lg-0",attrs:{role:"tablist"}},[i("router-link",{staticClass:"nav-link py-2 py-sm-2 py-xl-4 px-1 mr-2 mr-lg-4",class:{active:"FriendsListPage"===this.$root.$router.currentRoute.name},attrs:{to:"/friends",tag:"span",role:"tab"}},[t._v(" Мои друзья ")]),i("router-link",{staticClass:"nav-link py-2 py-sm-2 py-xl-4 px-1 mr-2 mr-lg-4",class:{active:"InvitationsPage"===this.$root.$router.currentRoute.name},attrs:{to:"/invitations",tag:"span",role:"tab"}},[t._v(" Заявки в друзья ")]),i("router-link",{staticClass:"nav-link py-2 py-sm-2 py-xl-4 px-1 mr-2 mr-lg-4",class:{active:"FollowListPage"===this.$root.$router.currentRoute.name},attrs:{to:{name:"FollowListPage"},tag:"span",role:"tab"}},[t._v(" На кого я подписан ")])],1)]),i("div",{staticClass:"col-12 col-lg-4 d-flex align-items-center form-inline pl-0 pl-lg-4 pr-0 mt-3 mt-lg-0 position-relative overflow-hidden rounded-pill",attrs:{id:"friendsListSearch"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],ref:"friendsListSearchinput",staticClass:"top-search form-control form-control  w-100",attrs:{id:"friendsListSearchinput",type:"search",placeholder:"Поиск","aria-label":"Поиск"},domProps:{value:t.searchTerm},on:{keydown:function(e){return e.stopPropagation(),t.chatSearchKeyDownCheck(e)},input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),i("button",{staticClass:"btn btn-search h-100",attrs:{type:"button"}},[i("IconSearch",{staticStyle:{width:"15px",height:"15px"}})],1)])])},Xh=[],Qh={name:"FriendsListHeader",components:{IconSearch:zs},data:function(){return{searchTerm:""}},methods:{chatSearchKeyDownCheck:function(t){8!==t.keyCode&&13!==t.keyCode&&46!==t.keyCode||this.filterFriends()},filterFriends:function(){this.$emit("filterSearch",{searchTerm:this.searchTerm.trim()})}}},tf=Qh,ef=Object(b["a"])(tf,Zh,Xh,!1,null,null,null),sf=ef.exports,af=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-potential-friends --overflow-hidden mb-5",attrs:{id:"potentialFriends"}},[i("div",{staticClass:"d-flex flex-row justify-content-start pb-3 --pt-5"},[i("h6",{staticClass:"plz-sf-title w-auto mt-2 ml-3"},[t._v(t._s(t.blockName))])]),i("div",{staticClass:"plz-potential-friends-list pb-2"},t._l(t.friendsList,(function(t){return i("PotentialFriendItem",{key:t.id,attrs:{friend:t}})})),1)])},nf=[],rf=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-potential-friends-item d-flex align-items-center py-2 px-3"},[i("router-link",{staticClass:"plz-potential-friend-userpic text-body",attrs:{tag:"a",to:"/user-"+t.friend.id}},[i("img",{staticClass:"plz-potential-userpic rounded-circle",attrs:{src:t.friend.userPic,alt:t.friend.firstName}}),t.friend.isOnline?i("span",{staticClass:"plz-potential-isonline",attrs:{title:"в сети"}}):i("span",{staticClass:"plz-potential-isoffline",attrs:{title:t.getSexTitle()}})]),i("div",{staticClass:"plz-potential-friend-title flex align-items-center mr-auto "},[i("router-link",{staticClass:"plz-potential-friend-name",attrs:{to:"/user-"+t.friend.id}},[t._v(" "+t._s(t.friend.firstName)+" ")]),i("div",{staticClass:"plz-potential-friend-status"},[i("p",{domProps:{innerHTML:t._s(t.$options.filters.mutualFriendsText(t.friend.mutualFriendsCount))}})])],1),i("a",{staticClass:"plz-potential-friend-is-active text-body",on:{click:function(e){return t.sendFriendshipInvitation(t.friend.id,t.friend.fullName)}}},[i("IconAddUser")],1)],1)},of=[],lf={name:"ShortFriendItem",components:{IconAddUser:du},mixins:[Hl],props:{friend:Object},methods:{getSexTitle:function(){return"m"===this.friend.sex?"был давно":"f"===this.friend.sex?"была давно":"был(а) давно"}}},cf=lf,uf=Object(b["a"])(cf,rf,of,!1,null,null,null),df=uf.exports,mf={name:"PotentialFriends",components:{PotentialFriendItem:df},props:{blockName:String,friends:Array},computed:{friendsList:function(){return this.friends?this.friends.slice(0,5):[]}}},pf=mf,hf=Object(b["a"])(pf,af,nf,!1,null,null,null),ff=hf.exports;function vf(t){if(t){t=t.map((function(t){return t}));for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),s=[t[i],t[e]];t[e]=s[0],t[i]=s[1]}}return t}var gf={components:{IconSearch:zs,AccountToolbarLeft:ks,FavoriteFriends:sr,Spinner:Gi,FriendsListHeader:sf,PotentialFriends:ff},data:function(){return{potentialList:[],possibleFriends:null,recommendedFriends:null}},methods:{shuffle:vf,loadPossibleFriends:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$friend.getPossibleFriends();case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 9:i&&(t.possibleFriends=[],i.map((function(e){t.possibleFriends.push(new Kn(e))})),t.$root.$emit("loadPossibleFriends"));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()},loadRecommendedFriends:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$friend.getRecommendedFriends();case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 9:i&&(t.recommendedFriends=[],i.map((function(e){t.recommendedFriends.push(new Kn(e))})),t.$root.$emit("loadRecommendedFriends"));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()}},created:function(){this.loadPossibleFriends(),this.loadRecommendedFriends()}},bf={name:"FriendsListPage",components:{FriendsAllList:Jh},mixins:[gf],data:function(){return{allMyFriends:null,isFriendsLoaded:!0,wMode:"all",searchTerm:"",lazyLoadStarted:!1,noMoreFriends:!1,friendsListKey:"friendsListKey"}},computed:{hasFriends:function(){return this.$root.$auth.frm.size>0},frmSize:function(){return this.$root.$auth.frm.size}},methods:{friendsListFilter:function(){var t=this,e=[];if("all"===this.wMode&&(e=this.$root.$auth.frm.asArray()),"online"===this.wMode&&this.$root.$auth.frm.asArray().map((function(t){!0===t.isOnline&&e.push(t)})),"recent"===this.wMode&&this.$root.$auth.frm.asArray().map((function(t){t.friendshipLivingTime<=259200&&e.push(t)})),"favorites"===this.wMode&&this.$root.$auth.frm.asArray().map((function(i){t.$root.$auth.fm.checkIsFavorite(i.id)&&e.push(i)})),this.searchTerm.length>2){var i=this.searchTerm.toLocaleLowerCase();e=e.filter((function(t){return t.fullName.toLowerCase().includes(i)}))}return e},friendsListSelect:function(t){this.wMode=t},loadMyFriends:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$friend.friendsList();case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 9:i&&(t.allMyFriends=new re["a"](i,Kn),t.isFriendsLoaded=!0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()},filterSearch:function(t){var e=t.searchTerm;this.searchTerm=e},onScrollYPage:function(){window.scrollY>=document.body.scrollHeight-document.documentElement.clientHeight-document.documentElement.clientHeight/2&&this.friendsLazyLoad()},friendsLazyLoad:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.lazyLoadStarted&&!t.noMoreFriends){e.next=2;break}return e.abrupt("return");case 2:return t.lazyLoadStarted=!0,e.next=5,t.$root.$auth.frm.additionalLoad();case 5:i=e.sent,t.$root.$auth.frm.collection.has((new Date).getMilliseconds()+""),t.friendsListKey="friendsListKey-"+t.$root.$auth.frm.size+"-"+(new Date).getMilliseconds(),t.$forceUpdate(),0===i&&(t.noMoreFriends=!0),t.lazyLoadStarted=!1,t.onScrollYPage();case 12:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;window.addEventListener("scroll",this.onScrollYPage),"#favorites"===this.$route.hash&&(this.wMode="favorites"),this.$root.$on(this.$root.$auth.frm.updateEventName,(function(){t.friendsListKey="friendsListKey-"+t.$root.$auth.frm.size+"-"+(new Date).getMilliseconds()}))}},Cf=bf,yf=Object(b["a"])(Cf,Rh,Nh,!1,null,null,null),wf=yf.exports,xf=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3"},[i("FriendsListHeader"),i("div",{staticClass:"d-flex flex-wrap align-items-start"},[i("div",{staticClass:"col-12 --order-1 --order-md-0 col-md-7 col-lg-8 col-xl-8 bg-white-br20"},[t.isDataReady?i("InvitationsList",{key:"invitationsList-"+t.invitationsNumber+"-"+t.invitationsKeyUpdater,attrs:{invitations:t.getInvitations(),invitationsNumber:t.invitationsNumber},on:{InvitationDecline:t.onInvitationAction,InvitationAccept:t.onInvitationAction}}):i("Spinner",{attrs:{clazz:"d-flex flex-row"}})],1),i("div",{staticClass:"col-12 col-md-5 col-lg-4 col-xl-4"},[t.possibleFriends&&t.possibleFriends.length?i("PotentialFriends",{attrs:{blockName:"Возможные друзья",friends:t.shuffle(t.possibleFriends)}}):t._e(),t.recommendedFriends&&t.recommendedFriends.length?i("PotentialFriends",{attrs:{blockName:"Рекомендуемые друзья",friends:t.shuffle(t.recommendedFriends)}}):t._e()],1)])],1),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},kf=[],_f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plizi-search-results-list"},[t.invitationsNumber>0?i("ul",{staticClass:"list-unstyled mb-0"},t._l(t.invitations,(function(e){return i("InvitationItem",{key:e.id,attrs:{invitation:e},on:{InvitationDecline:t.onInvitationDecline,InvitationAccept:t.onInvitationAccept}})})),1):i("div",{staticClass:"p-3"},[i("div",{staticClass:"alert alert-info text-center mb-0"},[t._v(" Нет приглашений подружиться. ")])])])},$f=[],Mf=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-invitation-item-user --media m-0 px-4 py-2 w-100",class:t.calcClazz()},[i("div",{staticClass:"plizi-invitation-item d-flex w-100 "},[i("router-link",{staticClass:"plizi-invitation-item-pic mr-3",attrs:{to:"/user-"+t.invitation.id,tag:"div"}},[i("img",{staticClass:"plizi-invitation-item-img rounded-circle overflow-hidden",attrs:{src:t.invitation.userPic,alt:t.invitation.fullName}}),t.invitation.isOnline?i("span",{staticClass:"plizi-invitation-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-invitation-item-isoffline"})]),i("div",{staticClass:"plizi-invitation-item-body m-0  pr-3 pr-md-5"},[i("div",{staticClass:"plizi-invitation-item-top d-flex align-items-start justify-content-between"},[i("router-link",{staticClass:"plizi-invitation-item-name my-0",attrs:{to:"/user-"+t.invitation.id,tag:"h6",title:t.invitation.fullName}},[t._v(" "+t._s(t.invitation.fullName)+" ")])],1),t._m(0),i("div",{staticClass:"plizi-invitation-item-body-bottom d-flex pr-3 pr-md-5"},[i("p",{staticClass:"plizi-invitation-item-subdesc p-0 my-0  d-inline-block "},[i("time",{attrs:{datetime:t.invitation.lastActivity}},[t._v(" "+t._s(t._f("lastEventTime")(t.invitation.lastActivity))+" ")])])])]),i("div",{staticClass:"align-self-center ml-auto"},[i("div",{staticClass:"btn-group"},[i("button",{staticClass:"btn btn-sm rounded",on:{click:function(e){return t.acceptInvitation()}}},[i("IconUserPlus",{staticStyle:{height:"20px"}})],1),i("button",{staticClass:"btn btn-sm ml-2 rounded",on:{click:function(e){return t.declineInvitation()}}},[i("IconUserX",{staticStyle:{height:"20px"}})],1)])])],1)])},If=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plizi-invitation-item-top d-flex align-items-end justify-content-between"},[i("p",{staticClass:"plizi-invitation-item-desc mb-1"},[t._v("хочет к Вам в друзья")])])}],Pf=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){return Object(Nt["a"])(this,i),e.apply(this,arguments)}return i}(Qi["a"]),Sf={name:"InvitationItem",components:{IconUserX:Pp,IconUserPlus:Gp},props:{invitation:{type:Pf,required:!0}},data:function(){return{isAccepted:!1,isDeclined:!1}},methods:{acceptInvitation:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$friend.invitationAccept(t.invitation.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:null!=i?(t.isAccepted=!0,s=t.invitation.toJSON(),t.$root.$auth.im.removeInvitation(t.invitation.id),t.$root.$auth.frm.onAddAcceptFriendsShip(s),t.$root.$auth.friendsIncrease(),t.$root.$friendsKeyUpdater++):window.console.info(i);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()},declineInvitation:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$friend.invitationDecline(t.invitation.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:null!=i?(t.isDeclined=!0,t.$root.$auth.im.removeInvitation(t.invitation.id),t.$emit("InvitationDecline",{invitationId:t.invitation.id})):window.console.info(i);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()},calcClazz:function(){return{"bg-success":this.isAccepted,"bg-danger":this.isDeclined}}}},Lf=Sf,Rf=Object(b["a"])(Lf,Mf,If,!1,null,null,null),Nf=Rf.exports,Af={name:"InvitationsList",components:{InvitationItem:Nf},props:{invitations:Array,invitationsNumber:Number},data:function(){return{keyUpdater:1}},methods:{onInvitationDecline:function(t){this.$emit("InvitationDecline",t)},onInvitationAccept:function(t){this.$emit("InvitationAccept",t)}}},Ff=Af,zf=Object(b["a"])(Ff,_f,$f,!1,null,null,null),Ef=zf.exports,jf={name:"InvitationsPage",components:{InvitationsList:Ef},mixins:[gf],data:function(){return{isDataReady:!0,invitationsKeyUpdater:1}},computed:{invitationsNumber:function(){return this.$root.$auth.im.size}},methods:{getInvitations:function(){return this.$root.$auth.im.asArray()},onInvitationAction:function(){this.invitationsKeyUpdater+=1}},mounted:function(){var t=this;this.$root.$on(this.$root.$auth.im.updateEventName,(function(){t.invitationsKeyUpdater+=1,0===t.$root.$auth.im.size&&t.$router.push({path:"/friends"})}))}},Df=jf,Of=Object(b["a"])(Df,xf,kf,!1,null,null,null),Tf=Of.exports,Hf=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3 "},[i("FriendsListHeader"),i("div",{staticClass:"d-flex flex-wrap align-items-start"},[i("div",{staticClass:"col-12 --order-1 --order-md-0 col-md-7 col-lg-8 col-xl-8 bg-white-br20"},[t.isDataReady?i("div",{staticClass:"plizi-search-results-list"},[t._m(0)]):i("Spinner",{attrs:{clazz:"d-flex flex-row"}})],1),i("div",{staticClass:"col-12 col-md-5 col-lg-4 col-xl-4"},[t.possibleFriends&&t.possibleFriends.length?i("PotentialFriends",{attrs:{blockName:"Возможные друзья",friends:t.shuffle(t.possibleFriends)}}):t._e(),t.recommendedFriends&&t.recommendedFriends.length?i("PotentialFriends",{attrs:{blockName:"Рекомендуемые друзья",friends:t.shuffle(t.recommendedFriends)}}):t._e()],1)])],1),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},Uf=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"p-3"},[i("div",{staticClass:"alert alert-info text-center mb-0"},[t._v(" Тут будет красивый список тех, с кем мы недавно подружились. ")])])}],Vf={name:"FriendsRecentPage",components:{InvitationItem:Nf},mixins:[gf],data:function(){return{isDataReady:!0}}},Bf=Vf,Yf=Object(b["a"])(Bf,Hf,Uf,!1,null,null,null),qf=Yf.exports,Kf=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-9 col-lg-9 col-xl-10 "},[i("div",{staticClass:"row"},[i("div",{staticClass:"offset-2 col-8 bg-white-br20 p-4"},[t.isNotificationsReady?i("div",{staticClass:"plizi-notifications-list"},[t.notificationsList&&t.notificationsList.length>0?i("ul",{staticClass:"list-unstyled mb-0"},t._l(t.notificationsList,(function(t){return i("NotificationItem",{key:t.id,attrs:{notification:t}})})),1):i("div",{},[i("div",{staticClass:"alert alert-info"},[t._v(" Пока нет никаких нотификаций ")])])]):i("Spinner",{attrs:{clazz:"d-flex flex-row"}})],1)])]),i("div",{staticClass:"col-md-2 col-lg-2 col-xl-1 d-none d-md-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},Gf=[],Wf=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-notification-item-user m-0 px-4 py-2"},[i("div",{staticClass:"plizi-notification-item d-flex"},[t.notification.isHumanNotification?i("router-link",{staticClass:"plizi-notification-item-pic mr-3",attrs:{to:{name:"PersonalPage",params:{id:t.notification.senderId}},tag:"div"}},[i("img",{staticClass:"plizi-notification-item-img rounded-circle overflow-hidden",attrs:{src:t.notification.senderPic,alt:t.notification.senderFullName}})]):i("router-link",{staticClass:"plizi-notification-item-pic mr-3",attrs:{to:{name:"CommunityPage",params:{id:t.notification.communityId}},tag:"div"}},[i("img",{staticClass:"plizi-notification-item-img rounded-circle overflow-hidden",attrs:{src:t.notification.communityPic,alt:t.notification.communityName}})]),i("div",{staticClass:"plizi-notification-item-body m-0 pr-5"},[i("div",{staticClass:"plizi-notification-item-top d-flex align-items-start justify-content-between"},[t.notification.isHumanNotification?i("router-link",{staticClass:"plizi-notification-item-name my-0",attrs:{to:{name:"PersonalPage",params:{id:t.notification.senderId}},tag:"h6",title:t.notification.senderFullName}},[t._v(" "+t._s(t.notification.senderFullName)+" ")]):i("router-link",{staticClass:"plizi-notification-item-name my-0",attrs:{to:{name:"CommunityPage",params:{id:t.notification.communityId}},tag:"h6",title:t.notification.communityName}},[t._v(" "+t._s(t.notification.communityName)+" ")])],1),i("div",{staticClass:"plizi-notification-item-top d-flex align-items-end justify-content-between"},[i("p",{staticClass:"plizi-notification-item-desc mb-1"},[t._v(" "+t._s(t.notification.notifMessage)+" ")])]),i("div",{staticClass:"plizi-notification-item-body-bottom"},[i("p",{staticClass:"plizi-notification-item-subdesc p-0 my-0 d-inline-block"},[i("time",{attrs:{datetime:t.notification.createdAt}},[t._v(" "+t._s(t._f("lastMessageTime")(t.notification.createdAt))+" ")])])])])],1)])},Jf=[],Zf=function(){function t(e){Object(Nt["a"])(this,t),this.__defaultAvatarPath="/images/noavatar-256.png",this._id=null,this._firstName="",this._lastName="",this._userPic="",this._sex="n",this._id=e.id||null,this._firstName=e.firstName||"",this._lastName=e.lastName||"",this._sex=e.sex||"n",this._userPic=e.userPic||""}return Object(At["a"])(t,[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){return{id:this._id,firstName:this._firstName,lastName:this._lastName,sex:this._sex,userPic:this._userPic}}},{key:"id",get:function(){return this._id}},{key:"firstName",get:function(){return this._firstName}},{key:"lastName",get:function(){return this._lastName}},{key:"fullName",get:function(){return this._firstName+" "+this._lastName}},{key:"sex",get:function(){return this._sex}},{key:"userPic",get:function(){return""!==this._userPic?this._userPic:this.__defaultAvatarPath}}]),t}(),Xf=function(){function t(e){Object(Nt["a"])(this,t),this.__defaultAvatarPath="/images/plizi-noPrimaryImage-256.png",this._id=null,this._postName="",this._postId=null,this._name="",this._primaryImage="",this._id=e.id,this._postId=e.postId,this._postName=e.postName,this._name=e.name,this._primaryImage=e.primaryImage||""}return Object(At["a"])(t,[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){return{id:this.id,postId:this.postId,postName:this.postName,name:this.name,primaryImage:this._primaryImage}}},{key:"id",get:function(){return this._id}},{key:"postId",get:function(){return this._postId}},{key:"postName",get:function(){return this._postName}},{key:"name",get:function(){return this._name}},{key:"primaryImage",get:function(){return this._primaryImage?this._primaryImage:this.__defaultAvatarPath}}]),t}(),Qf=function(){function t(e){Object(Nt["a"])(this,t),this._body="",this._sender=null,this._community=null,this._notificationType=null,this._types=["friendships.sent","friendships.accepted","friendships.denied","user.post.created","user.profile.image.updated","community.post.created"],this._body=e.body,this._sender=e.sender?new Zf(e.sender):e.sender,this._community=e.community?new Xf(e.community):e.community,e.sender||e.community||window.console.error("Нет ни notifData.sender ни notifData.community"),this._notificationType=e.notificationType}return Object(At["a"])(t,[{key:"isCommunity",value:function(){return!!this._community}},{key:"isHuman",value:function(){return!!this._sender}},{key:"isUser",value:function(){return this.isHuman()}},{key:"toJSON",value:function(){var t={body:this.body,notificationType:this.notificationType};return this.isHuman()&&(t.sender=this.sender.toJSON()),this.isCommunity()&&(t.community=this.community.toJSON()),t}},{key:"body",get:function(){return this._body}},{key:"sender",get:function(){return this._sender}},{key:"community",get:function(){return this._community}},{key:"notificationType",get:function(){return this._notificationType}},{key:"message",get:function(){if("friendships.sent"===this.notificationType)switch(this.sender.sex){case"f":return"".concat(this.sender.fullName," хочет с Вам подружиться");case"m":return"".concat(this.sender.fullName," хочет с Вам подружиться");case"n":return"Пользователь ".concat(this.sender.fullName," хочет с Вам подружиться")}if("friendships.accepted"===this.notificationType)switch(this.sender.sex){case"f":return"".concat(this.sender.fullName," одобрила Ваш запрос на дружбу");case"m":return"".concat(this.sender.fullName," одобрил Ваш запрос на дружбу");case"n":return"Пользователь ".concat(this.sender.fullName," одобрил Ваш запрос на дружбу")}if("friendships.denied"===this.notificationType)switch(this.sender.sex){case"f":return"".concat(this.sender.fullName," отказалась дружить с Вами");case"m":return"".concat(this.sender.fullName," отказался дружить с Вами");case"n":return"Пользователь ".concat(this.sender.fullName," отклонил Вашу дружбу")}if("user.post.created"===this.notificationType)switch(this.sender.sex){case"f":return"Ваш друг ".concat(this.sender.fullName," опубликовала новость");case"m":return"Ваш друг ".concat(this.sender.fullName," опубликовал новость");case"n":return"Ваш друг пользователь ".concat(this.sender.fullName," опубликовал новость")}if("user.profile.image.updated"===this.notificationType)switch(this.sender.sex){case"f":return"Ваш друг ".concat(this.sender.fullName," обновила фото своего профиля");case"m":return"Ваш друг ".concat(this.sender.fullName," обновил фото своего профиля");case"n":return"Ваш друг пользователь ".concat(this.sender.fullName," обновил фото своего профиля")}if("user.profile.image.created"===this.notificationType)switch(this.sender.sex){case"f":return"Ваш друг ".concat(this.sender.fullName," добавила новое фото");case"m":return"Ваш друг ".concat(this.sender.fullName," добавил новое фото");case"n":return"Ваш друг пользователь ".concat(this.sender.fullName," добавил новое фото")}if("friendships.cancelled"===this.notificationType)switch(this.sender.sex){case"f":return"".concat(this.sender.fullName," отклонила Ваш запрос на дружбу");case"m":return"".concat(this.sender.fullName," отклонил Ваш запрос на дружбу");case"n":return"Пользователь ".concat(this.sender.fullName," отклонил Ваш запрос на дружбу")}if("post.liked"===this.notificationType)switch(this.sender.sex){case"f":return"".concat(this.sender.fullName," лайкнула Ваш пост");case"m":return"".concat(this.sender.fullName," лайкнул Ваш пост");case"n":return"Пользователь ".concat(this.sender.fullName," лайкнул Ваш пост")}return"community.post.created"===this.notificationType?'В сообществе "'.concat(this.community.name,'" опубликован новый пост "').concat(this.community.postName,'"'):"community.request.accepted"===this.notificationType?"В сообществе «".concat(this.community.name,"» одобрили Ваше вступление в сообщество"):"community.request.rejected"===this.notificationType?"В сообществе «".concat(this.community.name,"»  отклонили Ваше вступление в сообщество"):this.body}}]),t}(),tv=function(){function t(e){Object(Nt["a"])(this,t),this._id=null,this._createdAt=null,this._readAt=null,this._data=null,this._id=e.id||"",this.createdAt=e.createdAt,this._readAt=e.readAt?new Date(e.readAt):null,this._data=e.data?new Qf(e.data):null}return Object(At["a"])(t,[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){return{id:this._id,createdAt:this._createdAt?this.createdAt.getTime()/1e3>>>0:null,reedAt:this._readAt?this.readAt.getTime()/1e3>>>0:null,data:this._data?this.data.toJSON():null}}},{key:"id",get:function(){return this._id}},{key:"createdAt",get:function(){return this._createdAt},set:function(t){this._createdAt=t?"number"!==typeof t?new Date(t):new Date(1e3*t):null}},{key:"readAt",get:function(){return this._readAt}},{key:"data",get:function(){return this._data}},{key:"senderId",get:function(){return this.data.sender.id}},{key:"communityId",get:function(){try{return this.data.community.id}catch(t){void 0!==console&&console.error&&console.error(t)}}},{key:"senderFirstName",get:function(){return this.data.sender.firstName}},{key:"senderLastName",get:function(){return this.data.sender.lastName}},{key:"senderFullName",get:function(){return this.data.sender.fullName}},{key:"communityName",get:function(){try{return this.data.community.name}catch(t){void 0!==console&&console.error&&console.error(t)}}},{key:"senderPic",get:function(){return this.data.sender.userPic}},{key:"communityPic",get:function(){try{return this.data.community.primaryImage}catch(t){void 0!==console&&console.error&&console.error(t)}}},{key:"notifType",get:function(){return this.data.notificationType}},{key:"notifBody",get:function(){return this.data.body}},{key:"notifMessage",get:function(){return this.data.message}},{key:"isCommunityNotification",get:function(){try{return!!this.data.community}catch(t){void 0!==console&&console.error&&console.error(t)}}},{key:"isHumanNotification",get:function(){return!!this.data.sender}}]),t}(),ev={name:"NotificationItem",props:{notification:tv},data:function(){return{isRead:!1}}},iv=ev,sv=Object(b["a"])(iv,Wf,Jf,!1,null,null,null),av=sv.exports,nv={name:"NotificationsPage",components:{AccountToolbarLeft:ks,FavoriteFriends:sr,Spinner:Gi,NotificationItem:av},data:function(){return{isNotificationsReady:!0}},computed:{notificationsList:function(){return this.$root.$auth.nm.asArray()}},methods:{markNotificationsAsRead:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.console.log("markNotificationsAsRead"),i=t.$root.$auth.nm.idsList,i){e.next=4;break}return e.abrupt("return");case 4:if(!(i.length<=0)){e.next=6;break}return e.abrupt("return");case 6:return window.console.log("markNotificationsAsRead 22"),null,e.prev=8,e.next=11,t.$root.$api.$notifications.markAsRead(i);case 11:e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](8),window.console.warn(e.t0.detailMessage||e.t0);case 17:case"end":return e.stop()}}),e,null,[[8,14]])})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.$auth.nm.load();case 2:t.markNotificationsAsRead();case 3:case"end":return e.stop()}}),e)})))()}},rv=nv,ov=Object(b["a"])(rv,Kf,Gf,!1,null,null,null),lv=ov.exports,cv=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3  "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3  "},[i("div",{staticClass:"row"},[i("CommunitiesListHeader",{attrs:{list:"my"}}),i("CommunityCreateBlock")],1),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-lg-8 col-xl-9 mb-4 px-4 py-0"},[t.isCommunitiesLoaded?i("div",{staticClass:"row"},[t.communitiesList&&t.communitiesList.length>0?i("ul",{staticClass:"plizi-communities-list w-100 d-flex justify-content-between flex-wrap p-0"},t._l(t.communitiesList,(function(t,e){return i("CommunityItem",{key:e,attrs:{community:t}})})),1):t.enabledLoader?t._e():i("div",{staticClass:"container px-2 "},[i("div",{staticClass:" bg-white-br20 p-3"},[0===t.searchString.length?i("div",{staticClass:"alert alert-info w-100 py-4 text-center m-0"},[t._v(" Вы ещё не присодинились ни к одному сообществу. ")]):i("div",{staticClass:"alert alert-info w-100 py-4 text-center m-0"},[t._v(" По Вашему запросу ничего не найдено. ")])])])]):t._e(),t.enabledLoader?[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2),i("div",{staticClass:"col-12 col-lg-4 col-xl-3  mb-4  d-flex pl-3 pl-lg-0 "},[t.isRecommendedCommunitiesDataReady?i("CommunitiesSmallBlock",{attrs:{title:"Рекомендованные",communities:t.recommendedCommunities}}):t._e()],1)])]),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0 px-0 pl-md-3 "},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},uv=[],dv={name:"CommunitiesListPage",components:{SmallSpinner:J["a"]},mixins:[zu],data:function(){return{list:"my"}},methods:{},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadCommunities(30);case 2:return e.next=4,t.loadRecommendedCommunities();case 4:case"end":return e.stop()}}),e)})))()}},mv=dv,pv=Object(b["a"])(mv,cv,uv,!1,null,null,null),hv=pv.exports,fv=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3 "},[i("div",{staticClass:"row"},[i("CommunitiesListHeader",{attrs:{list:"owner"}}),i("CommunityCreateBlock")],1),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-lg-8 col-xl-9 mb-4 px-4 py-0"},[t.isManagedCommunitiesLoaded?i("div",{staticClass:"row"},[t.managedCommunities&&t.managedCommunities.length>0?i("ul",{staticClass:"plizi-communities-list w-100 d-flex justify-content-between flex-wrap p-0"},t._l(t.managedCommunities,(function(t,e){return i("CommunityItem",{key:e,attrs:{community:t}})})),1):t.enabledLoader?t._e():i("div",{staticClass:"container px-2 "},[i("div",{staticClass:" bg-white-br20 p-3"},[0===t.searchString.length?i("div",{staticClass:"alert alert-info w-100 py-4 text-center m-0"},[t._v(" У Вас нет сообществ для модерации. ")]):i("div",{staticClass:"alert alert-info w-100 py-4 text-center m-0"},[t._v(" По Вашему запросу ничего не найдено. ")])])])]):t._e(),t.enabledLoader?[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2),i("div",{staticClass:"col-12 col-lg-4 col-xl-3  mb-4  d-flex pl-3 pl-lg-0 "},[t.isRecommendedCommunitiesDataReady?i("CommunitiesSmallBlock",{attrs:{title:"Рекомендованные",communities:t.recommendedCommunities}}):t._e()],1)])]),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0 px-0 px-md-3 "},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},vv=[],gv={name:"CommunitiesManagePage",components:{SmallSpinner:J["a"]},mixins:[zu],data:function(){return{list:"owner"}},methods:{},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadManagedCommunities(30);case 2:return e.next=4,t.loadRecommendedCommunities();case 4:case"end":return e.stop()}}),e)})))()}},bv=gv,Cv=Object(b["a"])(bv,fv,vv,!1,null,null,null),yv=Cv.exports,wv=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3 "},[i("div",{staticClass:"row"},[i("CommunitiesListHeader",{attrs:{list:"popular"}}),i("CommunityCreateBlock")],1),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-lg-8 col-xl-9 mb-4 px-4 py-0"},[t.isPopularCommunitiesLoaded?i("div",{staticClass:"row"},[t.popularCommunities&&t.popularCommunities.length>0?i("ul",{staticClass:"plizi-communities-list w-100 d-flex justify-content-between flex-wrap p-0"},t._l(t.popularCommunities,(function(t,e){return i("CommunityItem",{key:e,attrs:{community:t}})})),1):t.enabledLoader?t._e():i("div",{staticClass:"container px-2"},[i("div",{staticClass:" bg-white-br20 p-3"},[0===t.searchString.length?i("div",{staticClass:"alert alert-info w-100 py-4 text-center m-0"},[t._v(" Нет ни одного популярного сообщества. ")]):i("div",{staticClass:"alert alert-info w-100 py-4 text-center m-0"},[t._v(" По Вашему запросу ничего не найдено. ")])])])]):t._e(),t.enabledLoader?[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2),i("div",{staticClass:"col-12 col-lg-4 col-xl-3  mb-4  d-flex pl-3 pl-lg-0 "},[t.isRecommendedCommunitiesDataReady?i("CommunitiesSmallBlock",{attrs:{title:"Рекомендованные",communities:t.recommendedCommunities}}):t._e()],1)])]),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},xv=[],kv={name:"CommunitiesPopularPage",components:{SmallSpinner:J["a"]},mixins:[zu],data:function(){return{list:"popular"}},methods:{},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadPopularCommunities(30);case 2:return e.next=4,t.loadRecommendedCommunities();case 4:case"end":return e.stop()}}),e)})))()}},_v=kv,$v=Object(b["a"])(_v,wv,xv,!1,null,null,null),Mv=$v.exports,Iv=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-sm-12 col-md-11 col-lg-9 col-xl-10"},[i("CommunityHeader",{attrs:{community:t.communityData,subscribeType:t.subscribeType}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 --col-sm-7 col-lg-8 col-xl-8"},[t.isDataReady&&(t.communityData.description||t.communityData.website)?i("div",{staticClass:"plz-community-info-block bg-white-br20 d-none d-lg-block py-3 px-4 mb-4 text-left",attrs:{id:"communityInfoBlock"}},[i("h4",{staticClass:"plz-community-header-title"},[t._v("Информация")]),i("p",{staticClass:"plz-community-info-desc"},[t._v(t._s(t.communityData.description))]),i("p",[i("a",{staticClass:"plz-community-info-desc",attrs:{href:t.communityData.website,target:"_blank"}},[t._v(t._s(t.communityData.website))])])]):t.isDataReady?t._e():i("Spinner"),t.canPost?i("CommunityEditor",{class:"mx-0 ",attrs:{"community-id":t.communityData.id},on:{addNewPost:t.addNewPost}}):t._e(),i("CommunityPostsList",{attrs:{community:t.communityData,"has-access":t.hasAccess,"is-started":t.isStarted,posts:t.posts,"subscribe-type":t.subscribeType},on:{openVideoModal:t.openVideoModal}}),t.isStarted&&t.hasAccess?[i("div",{staticClass:"plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2),i("div",{staticClass:"col-12 --col-sm-5 col-lg-4"},[t.isAuthor?t._e():i("CommunityUserActionBlock",{attrs:{community:t.communityData}}),i("CommunityFriendsInformer",{attrs:{community:t.communityData}}),t.isDataReady?i("CommunityShortMembers",{attrs:{community:t.communityData}}):t._e(),t.isDataReady&&t.hasAccess?i("CommunityVideoBlock",{key:"cv"+t.communityData.id,attrs:{avatarMedium:t.avatarMedium,communityId:parseInt(t.id)},on:{openVideoModal:t.openVideoModal}}):t._e()],1)])],1),i("div",{staticClass:"col-sm-2  col-lg-2 col-xl-1 d-none d-lg-block"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1),t.postVideoModal.isVisible?i("PostVideoModal",{attrs:{videoLink:t.postVideoModal.content.videoLink},on:{hideVideoModal:t.hideVideoModal}}):t._e()],1)},Pv=[],Sv=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isFriendsInCommunity?i("div",{staticClass:"bg-white-br20 mb-4 py-3 px-4",attrs:{id:"communityParticipants"}},[i("div",{staticClass:"d-flex flex-row justify-content-start mb-1"},[i("h6",{staticClass:"plz-community-participants-title w-auto "},[t._v("Друзья "),i("span",{staticClass:"plz-community-participants-subtitle ml-2"},[t._v(t._s(t.community.totalFriends))])])]),i("div",{staticClass:"plz-short-friends-list pb-2"},t._l(t.friendsMembers,(function(t){return i("CommunityShortMemberItem",{key:t.id,attrs:{member:t}})})),1),t.isMoreFriends?i("div",{staticClass:"text-center"},[i("router-link",{staticClass:"plz-community-header-desc ",attrs:{tag:"a",to:"/community-friends-"+t.community.id}},[i("small",[t._v("Смотреть ещё")])])],1):t._e()]):t._e()},Lv=[],Rv=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-community-members-item d-flex align-items-center py-1 px-0"},[i("router-link",{staticClass:"plz-favorit-friend-userpic mr-2",attrs:{tag:"a",to:"/user-"+t.member.id}},[i("img",{staticClass:"plz-favorit-userpic rounded-circle",attrs:{src:t.member.userPic,alt:t.member.firstName}}),t.member.isOnline?i("span",{staticClass:"plz-favorit-isonline",attrs:{title:"в сети"}}):i("span",{staticClass:"plz-favorit-isoffline"})]),i("div",{staticClass:"plz-favorit-friend-title flex align-items-center mr-auto text-left "},[i("router-link",{staticClass:"plz-community-header-title text-bold",attrs:{to:"/user-"+t.member.id}},[t._v(" "+t._s(t.member.firstName)+" ")]),i("div",{staticClass:"plz-short-member-status m-0 text-left"},[i("p",{staticClass:"plz-community-info-desc m-0"},[t._v(t._s(t._f("calcAge")(t.member.birthDate))+" лет ")])])],1)],1)},Nv=[],Av={name:"CommunityShortMemberItem",components:{},props:{member:ts},data:function(){return{isInRedirecting:!1}}},Fv=Av,zv=Object(b["a"])(Fv,Rv,Nv,!1,null,null,null),Ev=zv.exports,jv={name:"CommunityFriendsInformer",components:{CommunityShortMemberItem:Ev},props:{community:rs},computed:{friendsMembers:function(){var t;return(null===(t=this.community)||void 0===t?void 0:t.friends)||[]},isMoreFriends:function(){return this.friendsMembers.length<parseInt(this.community.totalFriends)},isFriendsInCommunity:function(){return this.community&&this.community.totalFriends>0}}},Dv=jv,Ov=Object(b["a"])(Dv,Sv,Lv,!1,null,null,null),Tv=Ov.exports,Hv=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isFriendsInCommunity?i("div",{staticClass:"bg-white-br20 mb-4 py-3 px-4 d-none d-lg-block",attrs:{id:"communityParticipants"}},[i("div",{staticClass:"d-flex flex-row justify-content-start mb-1"},[i("h6",{staticClass:"plz-community-participants-title w-auto "},[t._v("Участники "),i("span",{staticClass:"plz-community-participants-subtitle ml-2"},[t._v(t._s(t.community.totalMembers))])])]),i("div",{staticClass:"plz-short-friends-list pb-2"},t._l(t.friendsMembers,(function(t){return i("CommunityShortMemberItem",{key:t.id,attrs:{member:t}})})),1),t.community.totalMembers>t.friendsMembers.length?i("div",{staticClass:"text-center"},[i("router-link",{staticClass:"plz-community-header-desc ",attrs:{tag:"a",to:"/members-"+t.community.id}},[i("small",[t._v("Все участники")])])],1):t._e()]):t._e()},Uv=[],Vv={name:"CommunityShortMembers",components:{CommunityShortMemberItem:Ev},props:{community:rs},data:function(){return{}},computed:{friendsMembers:function(){return this.community?this.community.members:[]},isFriendsInCommunity:function(){return this.community&&this.community.totalMembers>0}}},Bv=Vv,Yv=Object(b["a"])(Bv,Hv,Uv,!1,null,null,null),qv=Yv.exports,Kv=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white-br20 mb-4 py-3 px-4 d-none d-lg-block",attrs:{id:"communityUserActions"}},[i("button",{staticClass:"btn btn-primary btn-block mx-auto px-3 py-2 text-uppercase text-center rounded-pill",attrs:{type:"button"},on:{click:t.onSendMessagetoAdminClick}},[t._v(" Написать сообщение ")]),t.isShowAdminMessageDialog?i("MessageForAdminsModal",{attrs:{community:t.community},on:{HideAdminMsgModal:t.onHideAdminMsgModal,SendAdminMessage:t.handleAdminMessage}}):t._e()],1)},Gv=[],Wv=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal show",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"Modal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideAdminMsgModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[t._m(0),i("div",{staticClass:"modal-body"},[i("div",{staticClass:"user-friend d-flex"},[i("div",{staticClass:"user-friend-pic mr-3 "},[i("img",{staticClass:"user-friend-img rounded-circle overflow-hidden",attrs:{src:t.community.primaryImage,alt:t.community.name}})]),i("div",{staticClass:" user-friend-body m-0 col-12 pr-5 "},[i("div",{staticClass:"user-friend-body-top d-flex align-items-end justify-content-between"},[i("h6",{staticClass:"user-friend-name my-0"},[t._v(t._s(t.community.name))])])])]),i("div",{staticClass:"form mt-3"},[i("TextEditor",{ref:"messageToCommunityAdmins",attrs:{id:"messageToCommunityAdmins",workMode:"adminMessage",showAvatar:!1,dropToDown:!0,clazz:"row plz-text-editor mb-4 pl-2 h-auto align-items-start",inModal:!0},on:{editorPost:t.startAdminsMessage}})],1),i("div",{staticClass:"form-group row mb-0 pt-3 border-top"},[i("div",{staticClass:"col-12"},[i("button",{staticClass:"btn plz-btn plz-btn-primary",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.startAdminsMessage()}}},[t._v("Отправить")])])])])])])])},Jv=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal-header"},[i("h4",{staticClass:"modal-title p-2"},[t._v("Для администрации")])])}],Zv={name:"MessageForAdminsModal",props:{community:rs},components:{TextEditor:_a["a"]},mixins:[Wn],methods:{hideAdminMsgModal:function(){this.$emit("HideAdminMsgModal",{})},startAdminsMessage:function(t){t||(t=this.$refs.messageToCommunityAdmins.getContent()),""!==t.postText&&"<p></p>"!==t.postText&&this.$emit("SendAdminMessage",{message:t})}},mounted:function(){var t=this;setTimeout((function(){t.$refs.messageToCommunityAdmins.focus()}),100)}},Xv=Zv,Qv=Object(b["a"])(Xv,Wv,Jv,!1,null,null,null),tg=Qv.exports,eg={name:"CommunityUserActionBlock",components:{MessageForAdminsModal:tg},mixins:[Wn],props:{community:rs},data:function(){return{isShowAdminMessageDialog:!1}},methods:{onSendMessagetoAdminClick:function(){this.isShowAdminMessageDialog=!0},handleAdminMessage:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return window.console.log(t,"handleAdminMessage"),e.onHideAdminMsgModal(),e.$root.$once("NewChatDialog",(function(i){e.sendMessageToAdminChat(i,t.message)})),s=e.community.name.length<16?e.community.name:e.community.name.substr(0,12),s+=": "+e.$root.$auth.user.fullName,i.next=7,e.openDialogWithAdmins(s,e.community.adminsIds,e.$root.$auth.user.id);case 7:setTimeout((function(){e.$root.$router.push({path:"/chats"})}),200);case 8:case"end":return i.stop()}}),i)})))()},sendMessageToAdminChat:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a={chatId:t.id,body:e.postText,attachments:e.attachments,event:"new.message"},i.$root.$api.sendToChannel(a);case 2:case"end":return s.stop()}}),s)})))()},onHideAdminMsgModal:function(){this.isShowAdminMessageDialog=!1}}},ig=eg,sg=Object(b["a"])(ig,Kv,Gv,!1,null,null,null),ag=sg.exports,ng=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[t.community?i("div",{staticClass:"plz-community-header bg-white-br20 mb-4 text-left overflow-hidden",attrs:{id:"communityHeader"}},[i("div",{staticClass:"plz-community-header-pic position-relative overflow-hidden"},[i("img",{attrs:{src:t.headerImage,alt:"image"}})]),i("div",{staticClass:"plz-community-header-bottom d-flex flex-wrap align-items-start justify-content-between py-3 px-4"},[i("div",{staticClass:"plz-community-header-details d-flex align-items-start flex-wrap flex-sm-nowrap justify-content-center justify-content-sm-start"},[t.isAuthor?[i("label",{staticClass:"community-primary-image cursor-pointer plz-community-header-logo position-relative mb-2 mb-sm-0 mx-0 mr-sm-3",attrs:{for:"communityPrimaryImage"}},[i("img",{ref:"communityAvatar",attrs:{src:t.avatarMedium,alt:t.community.name}})]),i("input",{ref:"communityPrimaryImage",staticClass:"d-none",attrs:{id:"communityPrimaryImage",type:"file"},on:{change:function(e){return t.uploadPrimaryImage()}}})]:[i("div",{staticClass:"plz-community-header-logo position-relative mr-3"},[i("img",{ref:"communityAvatar",attrs:{src:t.avatarThumb,alt:t.community.name}})])],i("div",{staticClass:"plz-community-header-details-text pt-2"},[i("h1",{staticClass:"plz-community-header-title mb-2"},[i("router-link",{attrs:{to:"/community-"+t.community.id,tag:"a"}},[t._v(" "+t._s(t.community.name)+" ")])],1),i("PrivacyLabel",{attrs:{community:t.community}}),i("p",{staticClass:"plz-community-header-desc mb-0"},[t._v(" "+t._s(t.community.notice)+" ")])],1)],2),i("div",{staticClass:"plz-community-subscribe file-label d-flex align-items-center mt-4 justify-content-between mx-auto mx-md-0"},["new"===t.subscribeType?i("button",{staticClass:"btn align-items-center justify-content-center d-flex w-75 border-right m-0",on:{click:function(e){return t.subscribeInvite(t.community)}}},[t._v(" подписаться ")]):"request"===t.subscribeType?i("button",{staticClass:"btn align-items-center justify-content-center d-flex w-75 border-right m-0",on:{click:function(e){return t.sendRequest(t.community)}}},[t._v(" запрос ")]):"exists"===t.subscribeType?i("button",{staticClass:"btn align-items-center justify-content-center d-flex w-75 border-right m-0",on:{click:function(e){return t.unsubscribeInvite(t.community)}}},[t._v(" отписаться ")]):"author"===t.subscribeType?i("router-link",{staticClass:"btn align-items-center justify-content-center d-flex w-75 border-right m-0",attrs:{to:{name:"CommunitySettingsPage",params:{id:t.community.id}}}},[t._v(" управление ")]):t._e(),t._m(0),i("div",{staticClass:"dropdown-menu dropdown-menu-right py-3",attrs:{"aria-labelledby":"CommunityOptions"}},[t.isAuthor?i("CommunityAuthorOptions",{attrs:{community:t.community}}):i("CommunityUserOptions",{attrs:{community:t.community}})],1)],1)])]):i("Spinner")],1)])},rg=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"btn align-items-center justify-content-center d-flex w-25",attrs:{title:"опции",type:"button",id:"CommunityOptions","data-toggle":"dropdown","data-offset":"0,5","aria-haspopup":"true","aria-expanded":"false"}},[i("span",{staticClass:"ps-dot"}),i("span",{staticClass:"ps-dot"}),i("span",{staticClass:"ps-dot"})])}],og=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"communityAuthorOptions"}},[i("div",{staticClass:"nav-item"},[2===parseInt(t.community.privacy)?i("router-link",{staticClass:"community-options-link position-relative px-3 py-1",attrs:{to:{name:"CommunityRequestsPage",params:{id:t.community.id}}}},[i("i",{staticClass:"fas fa-user-cog mr-2"}),t._v("Запросы "),t.community.requestsCount>0?i("small",{staticClass:"counter-info"},[t._v(t._s(t.community.requestsCount))]):t._e()]):t._e()],1),i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"community-options-link px-3 py-1",attrs:{to:{name:"CommunityMembersPage",params:{id:t.community.id}}}},[i("i",{staticClass:"fas fa-user mr-2"}),t._v("Состав группы ")])],1),i("div",{staticClass:"nav-item"},[i("span",{staticClass:"community-options-link px-3 py-1 cursor-pointer",on:{click:t.onMessageClick}},[i("i",{staticClass:"fas fa-mail-bulk mr-2"}),t._v("Сообщения ")])]),t.community.totalVideos>0?i("div",{staticClass:"nav-item border-top d-block"},[i("router-link",{staticClass:"community-options-link px-3 py-1",attrs:{to:{name:"CommunityVideosPage",params:{id:t.community.id}}}},[t._v(" Видео сообщества ")])],1):t._e()])},lg=[],cg={name:"CommunityAuthorOptions",props:{community:rs},methods:{onMessageClick:function(){this.$root.$alert("Сообщение","bg-info",3)}}},ug=cg,dg=Object(b["a"])(ug,og,lg,!1,null,null,null),mg=dg.exports,pg=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"communityUserOptions"}},[i("div",{staticClass:"nav-item"},[i("span",{staticClass:"community-options-link px-3 py-1 cursor-pointer",on:{click:t.onAddPostClick}},[t._v(" Написать сообщение ")])]),i("div",{staticClass:"nav-item"},[t.community.subscribed?i("span",{staticClass:"community-options-link px-3 py-1 cursor-pointer",on:{click:t.onNotificationDisableClick}},[t._v(" Отключить уведомления ")]):i("span",{staticClass:"community-options-link px-3 py-1 cursor-pointer",on:{click:t.onNotificationEnableClick}},[t._v(" Включить уведомления ")])]),i("div",{staticClass:"nav-item"},[i("span",{staticClass:"community-options-link px-3 py-1 cursor-pointer",on:{click:t.onFriendInformationClick}},[t._v(" Рассказать друзьям ")])]),t.community.totalVideos>0?i("div",{staticClass:"nav-item border-top d-block"},[i("router-link",{staticClass:"community-options-link px-3 py-1",attrs:{to:{name:"CommunityVideosPage",params:{id:t.community.id}}}},[t._v(" Видео сообщества ")])],1):t._e(),i("div",{staticClass:"nav-item  d-block"},[i("router-link",{staticClass:"community-options-link px-3 py-1",attrs:{to:{name:"CommunityMembersPage",params:{id:t.community.id}}}},[t._v(" Участники сообщества ")])],1)])},hg=[],fg={name:"CommunityUserOptions",props:{community:rs},methods:{onAddPostClick:function(){this.$root.$alert("Тут наверное будет модалка для добавления поста","bg-info",3)},onMentionClick:function(){this.$root.$alert("Упоминание","bg-info",3)},onNotificationEnableClick:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$communities.subscribeNotify(t.community.id);case 4:i=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),t.$root.$alert("Не получилось включить нотификации","bg-warning",3),e.t0;case 12:return i?(t.community.subscribed=!0,t.$root.$alert("Включение нотификаций","bg-success",3)):t.$root.$alert("Не получилось включить нотификации","bg-warning",3),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onNotificationDisableClick:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$communities.unsubscribeNotify(t.community.id);case 4:i=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),t.$root.$alert("Не получилось отключить нотификации","bg-warning",3),e.t0;case 12:return i?(t.community.subscribed=!1,t.$root.$alert("Отключение нотификаций","bg-success",3)):t.$root.$alert("Не получилось отключить нотификации","bg-warning",3),e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onFriendInformationClick:function(){this.$root.$alert("Рассказываю друзьям","bg-info",3)}}},vg=fg,gg=Object(b["a"])(vg,pg,hg,!1,null,null,null),bg=gg.exports,Cg={name:"CommunityHeader",components:{Spinner:Gi,CommunityUserOptions:bg,CommunityAuthorOptions:mg,PrivacyLabel:bu},mixins:[mu],props:{community:rs,subscribeType:String},computed:{isAuthor:function(){var t;return"author"===(null===(t=this.community)||void 0===t?void 0:t.role)},headerImage:function(){var t,e;return(null===(t=this.community)||void 0===t||null===(e=t.headerImage)||void 0===e?void 0:e.image.normal.path)||"images/community-header-bg.jpg"},avatarThumb:function(){var t,e,i;return(null===(t=this.community)||void 0===t||null===(e=t.avatar)||void 0===e?void 0:e.image.thumb.path)||(null===(i=this.community)||void 0===i?void 0:i.primaryImage)},avatarMedium:function(){var t,e,i;return(null===(t=this.community)||void 0===t||null===(e=t.avatar)||void 0===e?void 0:e.image.medium.path)||(null===(i=this.community)||void 0===i?void 0:i.primaryImage)}},methods:{getFormData:function(){var t=this.$refs.communityPrimaryImage.value,e=t.split(".").pop().toLowerCase(),i=["png","jpg","jpeg","bmp","webp","gif"];if(!i.includes(e))return this.$alert('<h4 class="text-white">Ошибка</h4>\n<div class="alert alert-danger">\nНедопустимое расширение у файла <b>'.concat(t,'</b><br />\nДопустимы только: <b class="text-success">').concat(i.join(", "),"</b>\n</div>"),"bg-danger",30),!1;var s=new FormData;return s.append("file",this.$refs.communityPrimaryImage.files[0]),s.append("id",this.community.id),this.$refs.communityPrimaryImage.value="",s},showErrorOnLargeFile:function(){this.$alert('<h4 class="text-white">Ошибка</h4>\n                <div class="alert alert-danger">\n                    Превышен максимальный размер файла.\n                    <br />\n                    Максимальный размер файла:\n                    <b class="text-success">2 MB</b>\n                </div>',"bg-danger",30)},uploadPrimaryImage:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isAuthor){e.next=2;break}return e.abrupt("return");case 2:if(i=t.getFormData(),i){e.next=5;break}return e.abrupt("return");case 5:if(s=i.get("file"),a=s.size,!(a>2e6)){e.next=9;break}return t.showErrorOnLargeFile(),e.abrupt("return");case 9:return n=null,e.prev=10,e.next=13,t.$root.$api.$communities.updatePrimaryImage(i);case 13:n=e.sent,e.next=22;break;case 16:if(e.prev=16,e.t0=e["catch"](10),422!==e.t0.status){e.next=21;break}return t.showErrorOnLargeFile(),e.abrupt("return");case 21:window.console.warn(e.t0.detailMessage);case 22:n&&(t.community.avatar=new ss(n.data));case 23:case"end":return e.stop()}}),e,null,[[10,16]])})))()}}},yg=Cg,wg=Object(b["a"])(yg,ng,rg,!1,null,null,null),xg=wg.exports,kg=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.videos.length>0?i("div",{staticClass:"bg-white-br20 mb-5 mb-4 py-3 px-4 d-none d-lg-block",attrs:{id:"communityVideos"}},[i("h6",{staticClass:"plz-community-participants-title w-auto mb-4"},[t._v("Видео ")]),t._l(t.videos,(function(e){return i("div",{staticClass:"videos-item mb-4"},[i("CommunityVideoItem",{key:e.id,attrs:{link:e.link},on:{openVideoModal:t.openVideoModal}})],1)})),t.totalCount>t.videos.length?i("div",{staticClass:"text-center"},[i("router-link",{staticClass:"plz-community-header-desc ",attrs:{tag:"a",to:"/community-videos-"+t.communityId}},[i("small",[t._v("Все видео")])])],1):t._e()],2):t._e()},_g=[],$g=(i("9911"),function(){function t(e){Object(Nt["a"])(this,t),this._id=null,this._link=null,this._user=null,this._post=null,this._createdAt=null,this.id=e.id,this.link=e.link,this.user=e.user?new Qi["a"](e):null,this.post=e.post?new zr(e.post):null,this.createdAt=e.createdAt}return Object(At["a"])(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"link",get:function(){return this._link},set:function(t){this._link=t}},{key:"user",get:function(){return this._user},set:function(t){this._user=t}},{key:"post",get:function(){return this._post},set:function(t){this._post=t}},{key:"createdAt",get:function(){return this._createdAt},set:function(t){this._createdAt=t}}]),Object(At["a"])(t,[{key:"isYoutubeLink",get:function(){var t=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*?[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi;return!!this.link.match(t)}},{key:"youtubeId",get:function(){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,e=this.link.match(t);return!(!e||11!==e[7].length)&&e[7]}}]),t}()),Mg=$g,Ig=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.livePreview&&"object"===typeof t.livePreview?i("span",[t.livePreview.text?i("p",{staticClass:"post-main-text mb-0",domProps:{innerHTML:t._s(t.livePreview.text)}}):t._e(),t.livePreview.videoLinks?[i("div",{staticClass:"youtube-video-link d-flex justify-content-center"},[i("p",{staticClass:"post-main-text  mt-2",domProps:{innerHTML:t._s(t.livePreview.videoLinks)},on:{click:function(e){return e.stopPropagation(),t.openVideoModal(!0)}}}),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1)])]:t._e()],2):t._e()},Pg=[],Sg={name:"CommunityVideoItem",components:{IconYoutube:ka},mixins:[qa["a"]],props:{link:String},computed:{livePreview:function(){var t=this.link.replace(/<\/?[^>]+>/g,"").trim();return this.transformStrWithLinks(t)}},methods:{openVideoModal:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=this.detectYoutubeLinks(this.link.replace(/<\/?[^>]+>/g,"").trim())[0];this.$emit("openVideoModal",{videoLink:t})}}},Lg=Sg,Rg=Object(b["a"])(Lg,Ig,Pg,!1,null,null,null),Ng=Rg.exports,Ag={name:"CommunityVideoBlock",components:{CommunityVideoItem:Ng},data:function(){return{totalCount:0,videos:[],isLoaded:!0}},props:{communityId:Number,avatarMedium:String},methods:{getVideoList:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoaded=!1,e.prev=1,e.next=4,t.$root.$api.$communities.videos(t.communityId,2);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.warn(e.t0.detailMessage);case 10:i&&(t.totalCount=i.totalCount,i.list.map((function(e){t.videos.push(new Mg(e))})),t.isLoaded=!0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},openVideoModal:function(t){this.$emit("openVideoModal",t)}},mounted:function(){this.getVideoList()}},Fg=Ag,zg=Object(b["a"])(Fg,kg,_g,!1,null,null,null),Eg=zg.exports,jg={components:{PostVideoModal:Lo,CommunityVideoBlock:Eg,CommunityShortMembers:qv,CommunityFriendsInformer:Tv,CommunityUserActionBlock:ag,CommunityHeader:xg,Spinner:Gi,SmallSpinner:J["a"]},data:function(){return{isDataReady:!1,communityData:null,postVideoModal:{isVisible:!1,content:{videoLink:null}}}},methods:{openVideoModal:function(t){t.videoLink&&(this.postVideoModal.isVisible=!0,this.postVideoModal.content.videoLink=t.videoLink)},hideVideoModal:function(){this.postVideoModal.isVisible=!1}}},Dg=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("TextEditor",{attrs:{id:"communityEditor",clazz:"row plz-text-editor mb-4 p-4 h-auto  align-items-start bg-white-br20",editorPlaceholder:"Введите текст ...",dropToDown:!0,workMode:"post"},on:{editorPost:t.onTextPost}})},Og=[],Tg={name:"CommunityEditor",components:{TextEditor:_a["a"]},mixins:[Qa["a"]],props:{communityId:{type:Number,default:null}},methods:{onTextPost:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:s=t.postText.trim(),""!==s||t.videoLink?(a="<br/>",s=s.replace(/<p><\/p>/g,a),s=e.killBrTrail(s),""!==s||t.videoLink?e.savePost(s,t.attachments,t.videoLink,t.workMode):t.attachments.length>0&&e.savePost("<p></p>",t.attachments,t.videoLink,t.workMode)):t.attachments.length>0&&e.savePost("",t.attachments);case 2:case"end":return i.stop()}}),i)})))()},savePost:function(t,e){var i=arguments,s=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n,r,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:null,r=i.length>3&&void 0!==i[3]?i[3]:null,l={},l.body=n||t.trim(),e&&e.length&&(l.attachmentIds=e),a.prev=5,a.next=8,s.$root.$api.$post.storePostByCommunity(s.communityId,l);case 8:o=a.sent,a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](5),console.warn(a.t0.detailMessage);case 14:o&&(s.$emit("addNewPost",o),s.storeVideo(n,r,o.id));case 15:case"end":return a.stop()}}),a,null,[[5,11]])})))()},storeVideo:function(t,e,i){var s=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t&&e&&i){a.next=2;break}return a.abrupt("return");case 2:return r={link:t,workMode:e,id:i},a.prev=3,a.next=6,s.$root.$api.$video.storeVideo(r);case 6:n=a.sent,a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](3),console.warn(a.t0.detailMessage);case 12:n&&console.log(n);case 13:case"end":return a.stop()}}),a,null,[[3,9]])})))()}}},Hg=Tg,Ug=Object(b["a"])(Hg,Dg,Og,!1,null,null,null),Vg=Ug.exports,Bg=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.posts&&t.posts.length>0?i("div",{staticClass:"pb-5 mb-4 --text-center",attrs:{id:"communityPostsBlock"}},t._l(t.posts,(function(e){return i("Post",{directives:[{name:"waypoint",rawName:"v-waypoint",value:{active:!0,callback:function(i){i.el;var s=i.going,a=i.direction;t.postIsRead(e,s,a)},options:{threshold:[.5]}},expression:"{ active: true, callback: ({ el, going, direction })=>{ postIsRead(postItem, going, direction); }, options: { threshold: [0.5] } }"}],key:e.id,class:"mx-0",attrs:{post:e,isCommunity:!0,isAdmin:["admin","author"].includes(t.community.role)},on:{onShare:t.onSharePost,onDeletePost:t.onDeletePost,onRestorePost:t.onRestorePost,onEditPost:t.onEditPost,openVideoModal:t.openVideoModal,onShowUsersLikes:t.openLikeModal}})})),1):t.hasAccess?t.isStarted?t._e():i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},[t._v(" Извините, но сейчас нечего показывать. ")])]):i("div",{staticClass:"plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},[t._v(" У Вас нет доступа. "),"request"===t.subscribeType?i("p",[t._v(" Отправьте "),i("a",{attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),t.sendRequest(t.community)}}},[t._v("запрос")]),t._v(" на вступление в сообщество ")]):t._e()])]),t.postEditModal.isVisible?i("PostEditModal",{attrs:{post:t.postForEdit},on:{hidePostEditModal:t.hidePostEditModal}}):t._e(),t.postRepostModal.isVisible?i("PostRepostModal",{attrs:{community:t.community,post:t.postForRepost},on:{hidePostRepostModal:t.hidePostRepostModal}}):t._e(),t.postLikeModal.isVisible?i("PostLikeModal",{attrs:{postId:t.postLikeModal.content.postId},on:{hideLikeModal:t.hideLikeModal}}):t._e()],1)},Yg=[],qg={name:"CommunityPostsList",components:{PostVideoModal:Lo,PostLikeModal:Go,PostRepostModal:Uo,PostEditModal:_o,Post:Hr},mixins:[mu,Jo],props:{community:rs,posts:Array,hasAccess:Boolean,isStarted:Boolean,subscribeType:String},data:function(){return{postEditModal:{isVisible:!1},postForEdit:null,postRepostModal:{isVisible:!1},postForRepost:null,postLikeModal:{isVisible:!1,content:{postId:null}}}},computed:{privacyLabel:function(){var t;return Wc.getPrivacyLabel(null===(t=this.community)||void 0===t?void 0:t.privacy)}},methods:{onSharePost:function(t){this.postRepostModal.isVisible=!0,this.postForRepost=t},onDeletePost:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.deletePost(t);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 9:s&&(a=e.posts.find((function(e){return e.id===t})),a.deleted=!0,e.startTimer(a));case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()},startTimer:function(t){var e=this;setTimeout((function(){var i=e.posts.findIndex((function(e){return e.id===t.id}));e.posts.splice(i,1)}),5e3)},onRestorePost:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.restorePost(t);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 9:s&&(a=e.posts.find((function(e){return e.id===t})),a.deleted=!1);case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()},onEditPost:function(t){this.postEditModal.isVisible=!0,this.postForEdit=t},hidePostEditModal:function(){this.postEditModal.isVisible=!1,this.postForEdit=null},openVideoModal:function(t){this.$emit("openVideoModal",t)},openLikeModal:function(t){this.postLikeModal.isVisible=!0,this.postLikeModal.content.postId=t},hidePostRepostModal:function(){this.postRepostModal.isVisible=!1,this.postForRepost=null},hideLikeModal:function(){this.postLikeModal.isVisible=!1,this.postLikeModal.content.postId=null}}},Kg=qg,Gg=Object(b["a"])(Kg,Bg,Yg,!1,null,null,null),Wg=Gg.exports,Jg={name:"CommunityPage",props:{id:Number|String},mixins:[mu,Wo,Jo,fs,jg],components:{CommunityPostsList:Wg,AccountToolbarLeft:ks,FavoriteFriends:sr,CommunityEditor:Vg},data:function(){return{currentId:null,posts:[]}},watch:{$route:"afterRouteUpdate"},computed:{isAuthor:function(){var t;return"author"===(null===(t=this.communityData)||void 0===t?void 0:t.role)},subscribeType:function(){return this.getSubscribeType(this.communityData)},canPost:function(){return this.communityData&&null!==this.communityData.role},avatarMedium:function(){var t,e,i;return(null===(t=this.communityData)||void 0===t||null===(e=t.avatar)||void 0===e?void 0:e.image.medium.path)||(null===(i=this.communityData)||void 0===i?void 0:i.primaryImage)},hasAccess:function(){var t,e;return!this.communityData||(1===(null===(t=this.communityData)||void 0===t?void 0:t.privacy)||!!(null===(e=this.communityData)||void 0===e?void 0:e.role))}},methods:{afterRouteUpdate:function(t){this.currentId=t.params.id,this.posts=[],this.getCommunityInfo(),window.scrollTo(0,0)},addNewPost:function(t){this.posts.unshift(new zr(t))},getPosts:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:50,a=t.length>1&&void 0!==t[1]?t[1]:0,n=null,e.isStarted=!0,0===a&&(e.posts=[]),i.prev=5,i.next=8,e.$root.$api.$communities.posts(e.currentId,s,a);case 8:n=i.sent,i.next=14;break;case 11:i.prev=11,i.t0=i["catch"](5),e.isStarted=!1;case 14:if(null===n){i.next=18;break}return e.isStarted=!1,n.map((function(t){e.posts.push(new zr(t))})),i.abrupt("return",n.length);case 18:case"end":return i.stop()}}),i,null,[[5,11]])})))()},onNeedAddCommunityToHot:function(t){if(t.communityId===this.currentId){this.keyUpdater++;var e=this.communityData||null;this.addCommunityToFavorites(t.communityId,e),this.$refs&&this.$refs.hotCommunitiesBlock&&this.$refs.hotCommunitiesBlock.$forceUpdate()}},setPageTitle:function(){this.communityData&&this.communityData.name?document.title="Plizi: ".concat(this.communityData.name):document.title="Plizi: Сообщества"},getCommunityInfo:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$communities.getCommunity(t.currentId);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i&&(t.communityData=new rs(i),t.isDataReady=!0,t.setPageTitle(),setTimeout((function(){var e=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPosts();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.hasAccess?(e(),t.noMore=!1):t.noMore=!0}),100));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()}},created:function(){this.currentId=this.id,this.$root.$on("NeedAddCommunityToHot",this.onNeedAddCommunityToHot)},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getCommunityInfo();case 2:window.scrollTo(0,0);case 3:case"end":return e.stop()}}),e)})))()}},Zg=Jg,Xg=Object(b["a"])(Zg,Iv,Pv,!1,null,null,null),Qg=Xg.exports,tb=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-1 col-md-1 col-lg-1 col-xl-1 pl-0"},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-sm-10 col-md-9 col-lg-8 col-xl-8 pl-0"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("Error404Message")],1)])]),i("div",{staticClass:"col-sm-3 col-md-3 col-lg-3 col-xl-3 pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!1}}),i("ShortFriends",{attrs:{friends:t.allMyFriends}})],1)])},eb=[],ib=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},sb=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"plz-post-item mb-4 mx-auto bg-white-br20 w-100 p-4"},[s("div",{staticClass:"error-image mx-auto w-50"},[s("img",{attrs:{src:i("c063")}})]),s("div",{staticClass:"alert text-center"},[t._v(" Извините! "),s("br"),t._v(" Страница, которую Вы ищете, не может быть найдена. ")])])}],nb={name:"Error404Message"},rb=nb,ob=Object(b["a"])(rb,ib,sb,!1,null,null,null),lb=ob.exports,cb={data:function(){return{allMyFriends:null}},methods:{loadMyFriends:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$friend.friendsList();case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 9:i&&(t.allMyFriends=new re["a"](i,Kn));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}},ub={name:"Error404Page",components:{ShortFriends:Ml,FavoriteFriends:sr,AccountToolbarLeft:ks,Error404Message:lb},mixins:[cb],created:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$root.$isAuth){e.next=4;break}return e.next=3,t.$router.push({name:"Guest404Page"});case 3:return e.abrupt("return");case 4:return e.next=6,t.loadMyFriends();case 6:case"end":return e.stop()}}),e)})))()}},db=ub,mb=Object(b["a"])(db,tb,eb,!1,null,null,null),pb=mb.exports,hb=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"error-page d-flex"},[i("Error404Message")],1)},fb=[],vb={name:"Guest404Page",components:{Error404Message:lb}},gb=vb,bb=Object(b["a"])(gb,hb,fb,!1,null,null,null),Cb=bb.exports,yb=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-1 col-md-1 col-lg-1 col-xl-1 pl-0"},[i("AccountToolbarLeft")],1),t._m(0),i("div",{staticClass:"col-sm-3 col-md-3 col-lg-3 col-xl-3 pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!1}}),i("ShortFriends",{attrs:{friends:t.allMyFriends}})],1)])},wb=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-sm-10 col-md-9 col-lg-8 col-xl-8 pl-0"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},[t._v(" Тут правила для сообществ ")])])])])}],xb={name:"CommunityRulesPage",components:{ShortFriends:Ml,FavoriteFriends:sr,AccountToolbarLeft:ks},mixins:[cb]},kb=xb,_b=Object(b["a"])(kb,yb,wb,!1,null,null,null),$b=_b.exports,Mb=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("PhotoalbumsPageFilter")],1),i("div",{staticClass:"col-12"},[i("div",{staticClass:"videos-content w-100"},[i("div",{staticClass:"card mb-4"},[i("div",{staticClass:"card-body py-0"},[i("div",{staticClass:"row"},[t.photoAlbums&&t.photoAlbums.length?t._l(t.photoAlbums,(function(t,e){return i("div",{key:e,staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("PhotoalbumItem",{key:t.id,attrs:{album:t}})],1)})):i("div",{staticClass:"alert alert-info bg-transparent border-0 text-secondary w-100 p-5 text-center mb-0"},[t._v(" Нет альбомов. ")])],2)])])])])])]),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},Ib=[],Pb=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white-br20  col-12 d-flex flex-wrap flex-sm-nowrap align-items-center justify-content-between mb-4 pb-3 pb-sm-0",attrs:{id:"photoalbumPageFilter"}},[i("nav",{staticClass:"videos-filter-links col-lg-7 nav mb-2 mb-sm-0 pt-2 pt-sm-0",attrs:{role:"tablist"}},[i("span",{staticClass:"nav-link py-2 py-sm-3 py-xl-4 px-1 mr-2 mr-xl-4",class:{active:"my"===t.wMode},attrs:{id:"tabMyPhotoalbums",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.ontabChange(e)}}},[t._v("Мои альбомы")])]),i("div",{staticClass:"additionalBtns col-12 col-sm-5 d-flex justify-content-between justify-content-sm-end px-0  "},["my"===t.wMode?[i("PhotoalbumCreateBlock")]:[i("button",{staticClass:"btn plz-btn plz-btn-primary p-0 mx-auto mr-sm-0",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.onAttachBtnClick(e)}}},[t._v(" Добавить фотографию "),i("input",{ref:"editorFiler",staticClass:"plz-text-editor-file-picker d-none",attrs:{type:"file",multiple:""},on:{change:t.onSelect}})])]],2)])},Sb=[],Lb=i("b85c"),Rb=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mx-auto mr-sm-0",attrs:{id:"createCommunityBlock"}},[i("button",{staticClass:"btn plz-btn plz-btn-primary p-0 ",attrs:{type:"button"},on:{click:t.showPhotoalbumCreateModal}},[t._v(" Создать альбом ")]),t.photoalbumCreateModalShow?i("PhotoalbumCreateModal",{on:{HidePhotoalbumCreateModal:t.onHidePhotoalbumCreateModal}}):t._e()],1)},Nb=[],Ab=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal community-create-modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"communityCreateModal",tabindex:"-1",role:"dialog","aria-labelledby":"communityCreateModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hidePhotoalbumCreateModal(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20 overflow-auto"},[i("div",{staticClass:"modal-body p-0 pt-3 w-100"},[t._m(0),i("form",{staticClass:"form community-create-modal-form p-0  w-100 overflow-hidden",attrs:{novalidate:"novalidate"},on:{submit:function(e){return e.preventDefault(),t.startCreatePhotoalbum(e)}}},[i("div",{staticClass:"form-group d-flex align-items-center mb-4 px-5 row position-relative"},[i("label",{staticClass:"col-4 community-create-modal-label  text-right",attrs:{for:"photoTitle"}},[t._v("Название:")]),i("div",{staticClass:"col-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.title,expression:"model.title"}],ref:"photoTitle",staticClass:"form-control community-create-modal-select",attrs:{type:"text",id:"photoTitle",required:""},domProps:{value:t.model.title},on:{blur:function(e){return t.$v.model.title.$touch()},input:function(e){e.target.composing||t.$set(t.model,"title",e.target.value)}}})]),i("div",{staticClass:"col-4"}),t.$v.model.title.$error?i("div",{staticClass:"col-8 invalid-feedback"},[t.$v.model.title.required?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите название альбома")]),t.$v.model.title.minLength?t._e():i("p",{staticClass:"text-danger"},[t._v("Название не может быть короче "),i("b",[t._v("четырёх")]),t._v(" символов")])]):t._e()]),i("div",{staticClass:"form-group d-flex align-items-center mb-4 px-5 row position-relative"},[i("label",{staticClass:"col-4 community-create-modal-label  text-right",attrs:{for:"photoDescription"}},[t._v("Описание:")]),i("div",{staticClass:"col-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.description,expression:"model.description"}],ref:"photoDescription",staticClass:"form-control community-create-modal-select",attrs:{type:"text",id:"photoDescription"},domProps:{value:t.model.description},on:{blur:function(e){return t.$v.model.description.$touch()},input:function(e){e.target.composing||t.$set(t.model,"description",e.target.value)}}})]),i("div",{staticClass:"col-4"}),t.$v.model.description.$error?i("div",{staticClass:"col-8 invalid-feedback"},[t.$v.model.description.isValidDescription?t._e():i("p",{staticClass:"text-danger"},[t._v("Описание не может быть короче "),i("b",[t._v("четырёх")]),t._v(" символов")])]):t._e()]),t._m(1)])])])])])},Fb=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"community-create-modal-box p-4 w-100 overflow-hidden"},[i("h5",{staticClass:"community-create-modal-title text-center mb-2"},[t._v("Создать альбом")]),i("div",{staticClass:"d-flex align-items-center justify-content-center"},[i("img",{attrs:{src:"images/icons/icon-communities.png",alt:"image"}})]),i("p",{staticClass:"community-create-modal-desc text-center mb-4 mt-3"},[t._v(" Создайте альбом для своих фотографий ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-group d-flex flex-column align-items-center px-5 py-4 community-create-modal-footer mb-0 row"},[i("div",{staticClass:"col-12 col-md-5 d-flex align-items-center justify-content-end px-0 mx-auto"},[i("button",{staticClass:"btn w-100 btn-primary rounded-pill",attrs:{type:"submit"}},[t._v(" Создать альбом ")])])])}],zb={name:"PhotoalbumCreateModal",props:{},data:function(){return{model:{title:"",description:""}}},validations:function(){return{model:{title:{required:R["required"],minLength:Object(R["minLength"])(4)},description:{isValidDescription:function(t){return!t||t.length>=4}}}}},methods:{hidePhotoalbumCreateModal:function(){this.$emit("HidePhotoalbumCreateModal",{})},startCreatePhotoalbum:function(){this.$v.$touch(),this.$v.model.$invalid||this.createPhotoalbum()},createPhotoalbum:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,s={title:t.model.title.trim(),description:t.model.description.trim()},e.prev=2,e.next=5,t.$root.$api.$photoalbums.createPhotoalbum(s);case 5:i=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),console.warn(e.t0.detailMessage);case 11:i&&(s.id=i.id,t.$root.$emit("onAddPhotoAlbum",s),t.hidePhotoalbumCreateModal(),t.$notify("Альбом успешно создан."));case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))()}},mounted:function(){var t=this;setTimeout((function(){t.$refs.photoTitle.focus()}),100)}},Eb=zb,jb=(i("c6b1"),Object(b["a"])(Eb,Ab,Fb,!1,null,"cd4efad8",null)),Db=jb.exports,Ob={name:"PhotoalbumCreateBlock",components:{PhotoalbumCreateModal:Db},data:function(){return{photoalbumCreateModalShow:!1}},methods:{showPhotoalbumCreateModal:function(){this.photoalbumCreateModalShow=!0},onHidePhotoalbumCreateModal:function(){this.photoalbumCreateModalShow=!1}}},Tb=Ob,Hb=Object(b["a"])(Tb,Rb,Nb,!1,null,null,null),Ub=Hb.exports,Vb=i("d2aa"),Bb=i("3b32"),Yb=i("4fb8"),qb={name:"PhotoalbumsPageFilter",components:{PhotoalbumCreateBlock:Ub},props:{photoAlbum:bc},data:function(){return{wMode:"my",attachFiles:[],attachmentsData:new re["a"]}},methods:{onAttachBtnClick:function(t){var e=null;e="BUTTON"===t.target.tagName.toUpperCase()?$(t.target):$(t.target).closest("button.attach-file");var i=e.find("input.plz-text-editor-file-picker");i.click()},ontabChange:function(){"PhotoalbumsListPage"!==this.$route.name&&(this.$router.push({path:"/photoalbums-list"}),this.wMode="album")},onSelect:function(){this.addUploadAttachment(Object(ei["a"])(this.$refs.editorFiler.files))},addUploadAttachment:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n,r,o,l,c,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=t.length+e.attachFiles.length,!(s>e.maxFilesCount)){i.next=4;break}return e.$alert('\n                <h4 class="text-white">Ошибка</h4>\n                <div class="alert alert-danger">\n                Превышен лимит загрузки файлов\n                <br />\n                Допустимый максимальный лимит файлов: <b class="text-success">'.concat(e.maxFilesCount,"</b>\n                </div>"),"bg-danger",30),i.abrupt("return");case 4:a=[].concat(Object(ei["a"])(Vb["b"]),Object(ei["a"])(Vb["a"])),n=Object(Lb["a"])(t);try{for(o=function(){var i=r.value;Object(Bb["a"])(i,a)&&Object(Bb["b"])(i)||(e.$alert('\n                    <h4 class="text-white">Ошибка</h4>\n                    <div class="alert alert-danger">\n                        Недопустимое расширение у файла <b>'.concat(i.name,'</b>\n                        <br />\n                        Допустимые расширения файлов: <b class="text-success">').concat(a.join(", "),"</b>\n                    </div>"),"bg-danger",30),t=t.filter((function(t){return t.name!==i.name})))},n.s();!(r=n.n()).done;)o()}catch(d){n.e(d)}finally{n.f()}if(0!==t.length){i.next=9;break}return i.abrupt("return");case 9:l=Object(Lb["a"])(t),i.prev=10,u=regeneratorRuntime.mark((function t(){var i,s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=c.value,s=new FileReader,s.onload=function(){var t=new Yb["a"](!0,Object(Bb["a"])(i,Vb["b"]),i.name);t.isBlob=!0,t.fileBlob=s.result,e.$emit("uploadingImage",t)},s.readAsDataURL(i),a=[],n=function(t){return new Promise((function(e){return setTimeout(e,t)}))},t.next=8,n(1e3);case 8:return t.next=10,e.$root.$api.$photoalbums.uploadImagesInPhotoAlbum(e.photoAlbum.id,[i]);case 10:a=t.sent,a.map((function(t){e.$emit("addNewImages",t)}));case 12:case"end":return t.stop()}}),t)})),l.s();case 13:if((c=l.n()).done){i.next=17;break}return i.delegateYield(u(),"t0",15);case 15:i.next=13;break;case 17:i.next=22;break;case 19:i.prev=19,i.t1=i["catch"](10),l.e(i.t1);case 22:return i.prev=22,l.f(),i.finish(22);case 25:case"end":return i.stop()}}),i,null,[[10,19,22,25]])})))()}},mounted:function(){"PhotoalbumsListPage"!==this.$route.name&&(this.wMode="album")}},Kb=qb,Gb=Object(b["a"])(Kb,Pb,Sb,!1,null,null,null),Wb=Gb.exports,Jb=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"chatVideoModal",tabindex:"-1",role:"dialog","aria-labelledby":"chatVideoModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideVideoModal(e)}}},[i("div",{staticClass:"modal-dialog modal-xl modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("VideoPlayer",{attrs:{videoLink:t.videoLink}})],1)])])},Zb=[],Xb={name:"PhotoalbumsPageModal",props:{videoLink:{type:String,default:null}},components:{VideoPlayer:Sn},methods:{hideVideoModal:function(){this.$emit("hideVideoModal")}}},Qb=Xb,tC=Object(b["a"])(Qb,Jb,Zb,!1,null,null,null),eC=tC.exports,iC=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"photoalbum-item d-flex my-0 mx-auto"},[i("router-link",{staticClass:"photoalbum-item-link position-relative",attrs:{to:{path:"/photoalbum-"+t.album.id},tag:"a",album:t.album}},[i("img",{staticClass:"photoalbum-item-img",attrs:{src:t.image,alt:t.album.title,title:t.album.title}}),i("div",{staticClass:"photoalbum-item-title"},[i("h6",[t._v(" "+t._s(t.album.title)+" ")])])])],1)},sC=[],aC={name:"PhotoalbumItem",props:{album:Object},computed:{image:function(){return this.album.lastImage?this.album.lastImage.image.original.path:"../../images/noavatar-256.png"}},methods:{}},nC=aC,rC=Object(b["a"])(nC,iC,sC,!1,null,null,null),oC=rC.exports,lC={name:"PhotoalbumsListPage",components:{AccountToolbarLeft:ks,FavoriteFriends:sr,PhotoalbumsPageFilter:Wb,PhotoalbumsPageModal:eC,PhotoalbumItem:oC,SmallSpinner:J["a"]},data:function(){return{photoAlbums:null,filterMode:"my"}},methods:{onAddPhotoAlbum:function(t){this.photoAlbums.unshift(new bc(t))},getPhotoAlbums:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$photoalbums.list();case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.warn(e.t0.detailMessage);case 10:i&&(t.photoAlbums=i.map((function(t){return new bc(t)})));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPhotoAlbums();case 2:t.$root.$on("onAddPhotoAlbum",t.onAddPhotoAlbum);case 3:case"end":return e.stop()}}),e)})))()}},cC=lC,uC=Object(b["a"])(cC,Mb,Ib,!1,null,null,null),dC=uC.exports,mC=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("PhotoalbumsPageFilter",{attrs:{photoAlbum:t.photoAlbum},on:{addNewImages:t.addNewImages,uploadingImage:t.uploadingImage}})],1),i("div",{staticClass:"col-12"},[i("div",{staticClass:"photoalbum-images-content  pt-4 mb-4 bg-white-br20"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"photo-album-description-block"},[i("PhotoalbumEditBlock",{attrs:{photoAlbum:t.photoAlbum}})],1),i("div",{staticClass:"row"},[t.photoAlbum&&t.photoAlbum.images&&t.photoAlbum.images.length?i("GridGallery",{attrs:{type:"album",images:t.photoAlbum.images,isOwner:!0},on:{onDelete:t.onDeleteImage}}):i("div",{staticClass:"alert alert-info bg-transparent border-0 text-secondary w-100 p-5 text-center mb-0"},[t._v(" Нет изображений. ")])],1)])])])])]),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},pC=[],hC=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.photoAlbum?i("div",{staticClass:"photoalbum-page-description text-center"},[i("h6",{staticClass:"photoalbum-page-album-name"},[t._v(t._s(t.photoAlbum.title))]),i("p",{staticClass:"photoalbum-page-album-desc"},[t._v(t._s(t.photoAlbum.description))]),i("div",{staticClass:"photoalbum-page-album-btns d-flex flex-wrap justify-content-center mb-4"},[i("button",{staticClass:"btn plz-btn plz-btn-primary edit-album mx-3 mb-2",on:{click:t.showPhotoalbumEditModal}},[t._v(" Редактировать альбом ")]),i("button",{staticClass:"btn plz-btn plz-btn-outline btn-registration delete-album mx-3 mt-0 mb-2",on:{click:t.onShowDeletePhotoAlbumModal}},[t._v(" Удалить альбом ")])]),t.photoalbumEditModalShow?i("PhotoalbumEditModal",{attrs:{photoAlbum:t.photoAlbum},on:{HidePhotoalbumEditModal:t.onHidePhotoalbumEditModal}}):t._e(),t.deletePhotoAlbumModal.isVisible?i("DeletePhotoAlbumModal",{attrs:{id:t.deletePhotoAlbumModal.content.id,isShipped:t.isShippedDelete},on:{onSuccessDelete:t.deletePhotoAlbum,onHide:t.onHideDeletePhotoAlbumModal}}):t._e()],1):t._e()},fC=[],vC=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal community-create-modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"communityCreateModal",tabindex:"-1",role:"dialog","aria-labelledby":"communityCreateModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.onHide(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20 overflow-auto"},[i("div",{staticClass:"modal-body p-0 pt-3 w-100"},[t._m(0),i("form",{staticClass:"form community-create-modal-form p-0  w-100 overflow-hidden",attrs:{novalidate:"novalidate"},on:{submit:function(e){return e.preventDefault(),t.startEditPhotoAlbum(e)}}},[i("div",{staticClass:"form-group d-flex align-items-center mb-4 px-5 row position-relative"},[i("label",{staticClass:"col-4 community-create-modal-label  text-right",attrs:{for:"photoTitle"}},[t._v("Название:")]),i("div",{staticClass:"col-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.title,expression:"model.title"}],ref:"commName",staticClass:"form-control community-create-modal-select",attrs:{type:"text",id:"photoTitle",required:""},domProps:{value:t.model.title},on:{input:[function(e){e.target.composing||t.$set(t.model,"title",e.target.value)},function(e){return t.onInput("title")}],blur:function(e){return t.$v.model.title.$touch()}}})]),i("div",{staticClass:"col-4"}),t.$v.model.title.$error?i("div",{staticClass:"col-8 invalid-feedback"},[t.$v.model.title.required?t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите название альбома")]),t.$v.model.title.minLength?t._e():i("p",{staticClass:"text-danger"},[t._v("Название не может быть короче "),i("b",[t._v("четырёх")]),t._v(" символов")])]):t._e()]),i("div",{staticClass:"form-group d-flex align-items-center mb-4 px-5 row position-relative"},[i("label",{staticClass:"col-4 community-create-modal-label  text-right",attrs:{for:"photoDescription"}},[t._v("Описание:")]),i("div",{staticClass:"col-8"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.description,expression:"model.description"}],ref:"commName",staticClass:"form-control community-create-modal-select",attrs:{type:"text",id:"photoDescription",required:""},domProps:{value:t.model.description},on:{input:[function(e){e.target.composing||t.$set(t.model,"description",e.target.value)},function(e){return t.onInput("description")}],blur:function(e){return t.$v.model.description.$touch()}}})]),i("div",{staticClass:"col-4"}),t.$v.model.description.$error?i("div",{staticClass:"col-8 invalid-feedback"},[t.$v.model.description.isValidDescription?t._e():i("p",{staticClass:"text-danger"},[t._v(" Укажите описание альбома ")])]):t._e()]),i("div",{staticClass:"form-group d-flex align-items-center px-5 py-4 community-create-modal-footer mb-0 row"},[i("div",{staticClass:"col-12 col-md-5 d-flex flex-column align-items-center justify-content-end px-0 mx-auto"},[i("button",{staticClass:"btn w-100 btn-primary rounded-pill",attrs:{type:"submit",disabled:t.isShipped}},[t._v(" Сохранить изменения ")])])])])])])])])},gC=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"community-create-modal-box p-4 w-100 overflow-hidden"},[i("h5",{staticClass:"community-create-modal-title text-center mb-2"},[t._v("Редактировать альбом")]),i("div",{staticClass:"d-flex align-items-center justify-content-center"},[i("img",{attrs:{src:"images/icons/icon-communities.png",alt:"image"}})]),i("p",{staticClass:"community-create-modal-desc text-center mb-4 mt-3"},[t._v(" Редактировать альбом ")])])}],bC={name:"PhotoalbumEditModal",props:{photoAlbum:bc},data:function(){return{model:{title:this.photoAlbum.title,description:this.photoAlbum.description},isShipped:!1,errors:null}},validations:function(){return{model:{title:{required:R["required"],minLength:Object(R["minLength"])(4)},description:{isValidDescription:function(t){return!t||t.length>=4}}}}},methods:{onHide:function(){this.$emit("HidePhotoalbumEditModal",{})},startEditPhotoAlbum:function(){this.$v.$touch(),this.$v.$invalid||this.editPhotoAlbum()},onInput:function(t){this.errors&&this.errors[t]&&(this.errors[t]=null)},editPhotoAlbum:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isShipped=!0,t.errors=null,i=null,s={title:t.model.title.trim(),description:t.model.description?t.model.description.trim():null},e.prev=4,e.next=7,t.$root.$api.$photoalbums.updatePhotoAlbum(t.photoAlbum.id,s);case 7:i=e.sent,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](4),t.isShipped=!1,422===e.t0.status&&(t.errors=e.t0.data.errors),console.warn(e.t0.detailMessage);case 15:i&&(t.$root.$emit("onUpdate",{title:t.model.title,description:t.model.description}),t.onHide(),t.$notify("Альбом успешно обновлен."));case 16:case"end":return e.stop()}}),e,null,[[4,10]])})))()}}},CC=bC,yC=(i("060e"),Object(b["a"])(CC,vC,gC,!1,null,"746d4e09",null)),wC=yC.exports,xC=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal show",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"Modal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideAlertModal(e)}}},[i("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"bg-white-br20 modal-content",class:t.alertClass||""},[i("div",{staticClass:"modal-body"},[i("div",{staticClass:"modal-inner-body p-5",domProps:{innerHTML:t._s(t.alertMessage)}})])])])])},kC=[],_C={name:"AlertModal",props:{alertMessage:String,alertClass:String,alertTimeout:Number},methods:{hideAlertModal:function(){this.$root.$emit("hideAlertModal",{})}},mounted:function(){var t=this;this.alertTimeout>0&&window.setTimeout((function(){t.$root.$emit("hideAlertModal",{})}),1e3*this.alertTimeout)}},$C=_C,MC=Object(b["a"])($C,xC,kC,!1,null,null,null),IC=MC.exports,PC=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"deletePhotoAlbumModal",tabindex:"-1",role:"dialog","aria-labelledby":"deletePhotoAlbumModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.onHide(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20 p-5"},[i("h6",{staticClass:"text-center mb-3"},[t._v("Вы уверены что хотите удалить фотоальбом?")]),i("div",{staticClass:"d-flex"},[i("button",{staticClass:"btn plz-btn plz-btn-primary p-0 mr-3",attrs:{disabled:t.isShipped},on:{click:function(e){return e.stopPropagation(),t.onSuccessDelete(e)}}},[t._v(" Да ")]),i("button",{staticClass:"btn plz-btn plz-btn-primary p-0 mr-3",attrs:{disabled:t.isShipped},on:{click:function(e){return e.stopPropagation(),t.onHide(e)}}},[t._v(" Нет ")])])])])])},SC=[],LC={name:"DeletePhotoAlbumModal",props:{id:Number,isShipped:Boolean},methods:{onHide:function(){this.$emit("onHide")},onSuccessDelete:function(){this.$emit("onSuccessDelete")}}},RC=LC,NC=Object(b["a"])(RC,PC,SC,!1,null,"70119870",null),AC=NC.exports,FC={name:"PhotoalbumEditBlock",components:{PhotoalbumEditModal:wC,AlertModal:IC,DeletePhotoAlbumModal:AC},props:{photoAlbum:bc},data:function(){return{photoalbumEditModalShow:!1,deletePhotoAlbumModal:{isVisible:!1,content:{id:null}},isSuccessDelete:!1,isShippedDelete:!1}},methods:{showPhotoalbumEditModal:function(){this.photoalbumEditModalShow=!0},onHidePhotoalbumEditModal:function(){this.photoalbumEditModalShow=!1},onShowDeletePhotoAlbumModal:function(){this.deletePhotoAlbumModal.content.id=this.photoAlbum.id,this.deletePhotoAlbumModal.isVisible=!0},onHideDeletePhotoAlbumModal:function(){this.deletePhotoAlbumModal.isVisible=!1,this.deletePhotoAlbumModal.content.id=null},deletePhotoAlbum:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isShippedDelete=!0,i=null,e.prev=2,e.next=5,t.$root.$api.$photoalbums.deleteAlbum(t.deletePhotoAlbumModal.content.id);case 5:i=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](2),t.isShippedDelete=!1,console.warn(e.t0.detailMessage);case 12:if(!i){e.next=16;break}return t.$notify('Альбом "'.concat(t.photoAlbum.title,'" успешно удален.')),e.next=16,t.$router.push({path:"/photoalbums-list"});case 16:case"end":return e.stop()}}),e,null,[[2,8]])})))()}}},zC=FC,EC=Object(b["a"])(zC,hC,fC,!1,null,null,null),jC=EC.exports,DC=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-delete",attrs:{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 515.556 515.556",viewBox:"0 0 515.556 515.556"}},[i("path",{attrs:{d:"m64.444 451.111c0 35.526 28.902 64.444 64.444 64.444h257.778c35.542 0 64.444-28.918 64.444-64.444v-322.222h-386.666z"}}),i("path",{attrs:{d:"m322.222 32.222v-32.222h-128.889v32.222h-161.111v64.444h451.111v-64.444z"}})])},OC=[],TC={name:"IconDelete"},HC=TC,UC=Object(b["a"])(HC,DC,OC,!1,null,"22e0be41",null),VC=UC.exports,BC=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.images?i("div",{staticClass:"gallery grid-gallery col-12"},[i("div",{staticClass:"row"},t._l(t.images,(function(e){return i("div",{key:e.id,staticClass:"gallery-item col-12 col-sm-6 col-xl-3 my-3 d-flex align-items-stretch position-relative"},[e.image&&e.image.original.path?i("div",{staticClass:"gallery-image-wrapper d-flex flex-column position-relative overflow-hidden"},[i("img",{staticClass:"gallery-image img-fluid",attrs:{src:e.image.original.path,alt:""},on:{click:function(i){return t.showImage(e)}}})]):i("div",{staticClass:"gallery-image-wrapper d-flex flex-column position-relative overflow-hidden"},[i("img",{staticClass:"gallery-image img-fluid",attrs:{src:e.fileBlob,alt:""}}),i("div",{staticClass:"spinner-wrap"},[e.isBlob?i("SmallSpinner",{attrs:{clazz:"media__spinner","hide-text":!0}}):t._e()],1)]),t.isOwner?i("button",{staticClass:"delete-button",attrs:{type:"button","aria-label":"Удалить изображение"},on:{click:function(i){return i.preventDefault(),t.$emit("onDelete",e.id)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})]):t._e()])})),0),t.activeImage?i("div",{staticClass:"plz-gallery__show"},[i("GalleryViewer",{attrs:{images:t.images,"active-image":t.activeImage},on:{showImage:t.showImage,close:t.closeModal}}),i("GalleryDescription",{attrs:{comments:t.comments,post:{id:0},image:t.activeImage,type:t.type},on:{updateComments:t.updateComments}})],1):t._e()]):t._e()},YC=[],qC={name:"GridGallery",components:{GalleryDescription:Ql["a"],GalleryViewer:Xl["a"],SmallSpinner:J["a"]},props:{type:{type:String},images:{type:Array,default:null},isOwner:Boolean},data:function(){return{activeImage:null,comments:[]}},methods:{getCommentsOfAlbum:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.getAlbumComments(t);case 3:s=i.sent,e.comments=s.data.list.map((function(t){return new jr["a"](t)})),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()},updateComments:function(t){var e=t.comments,i=t.id;this.activeImage.id===i&&(this.comments=e)},showImage:function(t){this.getCommentsOfAlbum(t.id),this.activeImage=this.images.find((function(e){return e.id===t.id}));var e="".concat(this.$router.currentRoute.path,"?activeImageId=").concat(t.id,"&galleryType=").concat(this.type);history.pushState({url:e},"",e)},closeModal:function(){var t=this.$router.currentRoute.path;history.pushState({url:t},"",t),this.activeImage=null}},created:function(){var t=this.$router.history.current.query.activeImageId,e=this.$router.history.current.query.galleryType;if(e===this.type&&t){var i=this.images.find((function(e){return e.id.toString()===t}));i&&this.showImage(i)}}},KC=qC,GC=Object(b["a"])(KC,BC,YC,!1,null,null,null),WC=GC.exports,JC={name:"PhotoalbumPage",components:{AccountToolbarLeft:ks,FavoriteFriends:sr,PhotoalbumsPageFilter:Wb,PhotoalbumsPageModal:eC,PhotoalbumItem:oC,PhotoalbumEditBlock:jC,IconDelete:VC,SmallSpinner:J["a"],GridGallery:WC},data:function(){return{photoAlbumId:this.$route.params.id,photoAlbum:null}},methods:{onUpdatePhotoAlbum:function(t){var e=t.title,i=t.description;this.photoAlbum.title=e,this.photoAlbum.description=i},addNewImages:function(t){this.photoAlbum.images||(this.photoAlbum.images=[]);var e=this.photoAlbum.images.findIndex((function(e){return e.originalName===t.originalName&&e.isBlob}));Vue.set(this.photoAlbum.images,e,new Ea["a"](t));var i=JSON.parse(localStorage.getItem("pliziUser"));i.data.stats.imageCount?i.data.stats.imageCount++:i.data.stats.imageCount=1,localStorage.setItem("pliziUser",JSON.stringify(i))},uploadingImage:function(t){this.photoAlbum.images||(this.photoAlbum.images=[]),this.photoAlbum.images.unshift(t)},onDeleteImage:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=null,i.prev=1,i.next=4,e.$root.$api.$photoalbums.deleteImage(t);case 4:s=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](1),console.warn(i.t0.detailMessage);case 10:s&&(a=e.photoAlbum.images.findIndex((function(e){return e.id===t})),e.photoAlbum.images.splice(a,1),n=JSON.parse(localStorage.getItem("pliziUser")),n.data.stats.imageCount?n.data.stats.imageCount--:n.data.stats.imageCount=0,localStorage.setItem("pliziUser",JSON.stringify(n)));case 11:case"end":return i.stop()}}),i,null,[[1,7]])})))()},getPhotoAlbum:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$photoalbums.getPhotoAlbum(t.photoAlbumId);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.warn(e.t0.detailMessage);case 10:i&&(t.photoAlbum=new bc(i));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPhotoAlbum();case 2:t.$root.$on("onUpdate",t.onUpdatePhotoAlbum);case 3:case"end":return e.stop()}}),e)})))()}},ZC=JC,XC=Object(b["a"])(ZC,mC,pC,!1,null,null,null),QC=XC.exports,ty=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("VideosPageFilter",{on:{wallPostsSelect:t.wallPostsSelectHandler}})],1),i("div",{staticClass:"col-12"},[i("div",{staticClass:"videos-content w-100 pt-4 px-3 mb-4 bg-white-br20"},["my"===t.filterMode?[i("div",{staticClass:"row"},[t.userVideos&&t.userVideos.length?t._l(t.userVideos,(function(e,s){return i("div",{key:s,staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[e.isYoutubeLink?i("div",{staticClass:"videos-item"},[i("div",{staticClass:"video mb-2"},[i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"//img.youtube.com/vi/"+e.youtubeId+"/mqdefault.jpg"},on:{click:function(i){return i.stopPropagation(),t.openVideoModal(e.link)}}})]),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("button",{staticClass:"btn btn-close btn-link border-0 border-danger bg-danger text-white rounded-circle delete-button",attrs:{type:"button","aria-label":"Удалить видео"},on:{click:function(i){return i.preventDefault(),t.onDelete(e.id)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})]),i("div",{staticClass:"video-time d-none"},[t._v("0:32")])]),i("a",{staticClass:"video-desc d-none mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise")])]):t._e()])})):i("div",{staticClass:"alert alert-info bg-transparent border-0 text-secondary w-100 p-5 text-center mb-0"},[t._v(" Нет видео. ")])],2)]:[i("div",{staticClass:"card mb-4"},[i("div",{staticClass:"card-header pb-0 bg-white border-bottom-0"},[t._v("Мои видео")]),i("div",{staticClass:"card-body py-0 pr-0"},[i("div",{staticClass:"ml-n3 clearfix"},[i("div",{staticClass:"col-12 col-xl-6 my-3 float-left "},[i("div",{staticClass:"videos-item videos-item-wide"},[i("div",{staticClass:"video mb-2"},[t._m(0),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3 float-left "},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(1),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconPlayVideo")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3 float-left "},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(2),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3 float-left "},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(3),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconPlayVideo")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3 float-left "},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(4),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconPlayVideo")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])])])])]),i("div",{staticClass:"card mb-4"},[i("div",{staticClass:"card-header pb-0 bg-white border-bottom-0"},[t._v("Прямые трансляции")]),i("div",{staticClass:"card-body py-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(5),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(6),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconPlayVideo")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(7),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(8),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconPlayVideo")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])])])])]),i("div",{staticClass:"card mb-4"},[i("div",{staticClass:"card-header pb-0 bg-white border-bottom-0"},[t._v("Рекомендуемое видео")]),i("div",{staticClass:"card-body py-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(9),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(10),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconPlayVideo")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(11),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(12),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconPlayVideo")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])])])])]),i("div",{staticClass:"card mb-4"},[i("div",{staticClass:"card-header pb-0 bg-white border-bottom-0"},[t._v("Лучшее за неделю")]),i("div",{staticClass:"card-body py-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(13),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(14),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconPlayVideo")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(15),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])]),i("div",{staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("div",{staticClass:"videos-item "},[i("div",{staticClass:"video mb-2"},[t._m(16),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconPlayVideo")],1),i("div",{staticClass:"video-time"},[t._v("0:32")])]),i("a",{staticClass:"video-desc mb-0",attrs:{href:"/user-1"}},[t._v("Sunrise ")])])])])])])]],2)])])]),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)]),t.videoModal.isVisible?i("VideoPageModal",{attrs:{videoLink:t.videoModal.content.videoLink},on:{hideVideoModal:t.hideVideoModal}}):t._e(),t.deleteVideoModal.isVisible?i("DeleteVideoModal",{attrs:{id:t.deleteVideoModal.content.id},on:{onHideDeleteVideoModal:t.hideDeleteVideoModal,onSuccessDeleteVideoModal:t.onSuccessDeleteVideoModal}}):t._e()],1)},ey=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"https://cdn.pixabay.com/photo/2019/06/27/06/49/plane-4301615_960_720.png"}})])}],iy=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-play-video",attrs:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 41.999 41.999","xml:space":"preserve"}},[i("path",{attrs:{d:"M36.068,20.176l-29-20C6.761-0.035,6.363-0.057,6.035,0.114C5.706,0.287,5.5,0.627,5.5,0.999v40\n\tc0,0.372,0.206,0.713,0.535,0.886c0.146,0.076,0.306,0.114,0.465,0.114c0.199,0,0.397-0.06,0.568-0.177l29-20\n\tc0.271-0.187,0.432-0.494,0.432-0.823S36.338,20.363,36.068,20.176z M7.5,39.095V2.904l26.239,18.096L7.5,39.095z"}})])},sy=[],ay={name:"IconPlayVideo"},ny=ay,ry=Object(b["a"])(ny,iy,sy,!1,null,null,null),oy=ry.exports,ly=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white-br20 col-12 d-flex flex-wrap flex-sm-nowrap align-items-center justify-content-between mb-4",attrs:{id:"videoPageFilter"}},[i("nav",{staticClass:"videos-filter-links col-lg-7 nav pt-2 pt-sm-0",attrs:{role:"tablist"}},[i("span",{staticClass:"nav-link py-2 py-sm-3 py-xl-4 px-1 mr-2 mr-xl-4",class:{active:"my"===t.wMode},attrs:{id:"tabMyVideos",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.wallPostsSelect("my")}}},[t._v("Мои видео")]),i("span",{staticClass:"nav-link py-2 py-sm-3 py-xl-4 px-1 mr-2 mr-xl-4 d-none",class:{active:"all"===t.wMode},attrs:{id:"tabAllVideos",role:"tab"},on:{click:function(e){return e.stopPropagation(),t.wallPostsSelect("all")}}},[t._v("Видеокаталог")])]),i("div",{staticClass:"additionalBtns col-12 col-sm-5 d-flex justify-content-between justify-content-sm-end px-0  my-3 my-sm-0"},[i("button",{staticClass:"btn plz-btn plz-btn-primary p-0 mr-0",on:{click:t.openAddVideoModal}},[t._v(" Добавить видео ")])]),t.addVideoModal.isVisible?i("AddVideoModal",{on:{onHide:t.hideAddVideoModal}}):t._e()],1)},cy=[],uy=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"chatVideoModal",tabindex:"-1",role:"dialog","aria-labelledby":"chatVideoModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.onHide(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("form",{staticClass:"p-5",on:{submit:function(e){return e.preventDefault(),t.store(e)}}},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"link"}},[t._v("Ссылка на видео")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.form.link,expression:"form.link"}],ref:"videoLink",staticClass:"form-control",class:{"is-invalid":t.isLinkError},attrs:{type:"text",id:"link"},domProps:{value:t.form.link},on:{input:[function(e){e.target.composing||t.$set(t.form,"link",e.target.value)},function(e){return t.onInput("link")}],blur:function(e){return t.$v.form.link.$touch()}}}),t.isLinkError?i("div",{staticClass:"invalid-feedback"},[this.errors&&this.errors.link?i("p",[t._v(" "+t._s(this.errors.link[0])+" ")]):this.$v.form.link.required?this.$v.form.link.url?this.$v.form.link.isValidYoutubeLink?t._e():i("p",[t._v(" Значение поле Ссылка на видео не является корректной ссылкой на сервис youtube. ")]):i("p",[t._v(" Значение поле Ссылка на видео не является корректной ссылкой. ")]):i("p",[t._v(" Поле Ссылка на видео обязательно для заполнения. ")])]):t._e()]),i("button",{staticClass:"btn plz-btn plz-btn-primary",attrs:{type:"submit",disabled:t.$v.$invalid}},[t._v(" Сохранить ")])])])])])},dy=[],my={name:"AddVideoModal",mixins:[qa["a"]],data:function(){return{form:{link:null},errors:null,isStoreRequest:!1}},validations:function(){return{form:{link:{required:R["required"],url:R["url"],isValidYoutubeLink:O}}}},computed:{isLinkError:function(){return this.errors&&this.errors.link||this.$v.form.link.$error}},methods:{onHide:function(){this.$emit("onHide")},onInput:function(t){this.errors&&this.errors[t]&&(this.errors[t]=null)},store:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isStoreRequest&&!t.$v.$invalid){e.next=2;break}return e.abrupt("return");case 2:return t.isStoreRequest=!0,t.errors=null,s={link:t.form.link},e.prev=5,e.next=8,t.$root.$api.$video.storeVideo(s);case 8:i=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](5),console.warn(e.t0.detailMessage),t.errors=e.t0.data.errors;case 15:i?(t.onHide(),t.$root.$emit("onAddVideo",{id:i.id,link:t.form.link}),t.$notify("Видео успешно добавлено."),t.$root.$auth.videosIncrease()):t.isStoreRequest=!1;case 16:case"end":return e.stop()}}),e,null,[[5,11]])})))()}},mounted:function(){var t=this;setTimeout((function(){t.$refs.videoLink.focus()}),100)}},py=my,hy=Object(b["a"])(py,uy,dy,!1,null,null,null),fy=hy.exports,vy={name:"VideosPageFilter",components:{AddVideoModal:fy},data:function(){return{wMode:"my",addVideoModal:{isVisible:!1}}},methods:{wallPostsSelect:function(t){this.wMode=t,this.$emit("wallPostsSelect",{wMode:t})},openAddVideoModal:function(){this.addVideoModal.isVisible=!0},hideAddVideoModal:function(){this.addVideoModal.isVisible=!1}}},gy=vy,by=Object(b["a"])(gy,ly,cy,!1,null,null,null),Cy=by.exports,yy=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"chatVideoModal",tabindex:"-1",role:"dialog","aria-labelledby":"chatVideoModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.hideVideoModal(e)}}},[i("div",{staticClass:"modal-dialog modal-xl modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20"},[i("VideoPlayer",{attrs:{videoLink:t.videoLink}})],1)])])},wy=[],xy={name:"VideoPageModal",components:{VideoPlayer:Sn},props:{videoLink:{type:String,default:null}},methods:{hideVideoModal:function(){this.$emit("hideVideoModal")}}},ky=xy,_y=Object(b["a"])(ky,yy,wy,!1,null,null,null),$y=_y.exports,My=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal",staticStyle:{display:"block","background-color":"rgba(0, 0, 0, .7)"},attrs:{id:"chatVideoModal",tabindex:"-1",role:"dialog","aria-labelledby":"chatVideoModal","aria-hidden":"true"},on:{click:function(e){return e.stopPropagation(),t.onHide(e)}}},[i("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"},on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"modal-content bg-white-br20 p-5"},[i("h6",{staticClass:"text-center mb-3"},[t._v("Вы уверены что хотите удалить видео?")]),i("div",{staticClass:"d-flex"},[i("button",{staticClass:"btn plz-btn plz-btn-primary p-0 ml-auto mr-2",on:{click:function(e){return e.stopPropagation(),t.deleteVideo(e)}}},[t._v(" Да ")]),i("button",{staticClass:"btn plz-btn plz-btn-outline btn-registration p-0 mt-0 ml-2 mr-auto",on:{click:function(e){return e.stopPropagation(),t.onHide(e)}}},[t._v(" Нет ")])])])])])},Iy=[],Py={name:"DeleteVideoModal",props:{id:Number,isSuccess:Boolean},methods:{onHide:function(){this.$emit("onHideDeleteVideoModal")},deleteVideo:function(){this.$emit("onSuccessDeleteVideoModal")}}},Sy=Py,Ly=Object(b["a"])(Sy,My,Iy,!1,null,null,null),Ry=Ly.exports,Ny={name:"VideosPage",components:{IconPlayVideo:oy,IconYoutube:ka,AccountToolbarLeft:ks,FavoriteFriends:sr,VideosPageFilter:Cy,VideoPageModal:$y,IconDelete:VC,DeleteVideoModal:Ry},mixins:[qa["a"]],data:function(){return{filterMode:"my",userVideos:[],videoModal:{isVisible:!1,content:{videoLink:null}},deleteVideoModal:{isVisible:!1,content:{id:null}},isSuccess:!1,isDeleteRequest:!1}},methods:{wallPostsSelectHandler:function(t){this.filterMode=t.wMode},openVideoModal:function(t){this.videoModal.isVisible=!0,this.videoModal.content.videoLink=t},hideVideoModal:function(){this.videoModal.isVisible=!1},onAddVideo:function(t){this.userVideos.unshift(new Mg(t))},openDeleteVideoModal:function(t){this.deleteVideoModal.isVisible=!0,this.deleteVideoModal.content.id=t},hideDeleteVideoModal:function(){this.deleteVideoModal.isVisible=!1},onDelete:function(t){this.openDeleteVideoModal(t)},onSuccessDeleteVideoModal:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isDeleteRequest){e.next=2;break}return e.abrupt("return");case 2:return t.isDeleteRequest=!0,e.prev=3,e.next=6,t.$root.$api.$video.deleteVideo(t.deleteVideoModal.content.id);case 6:i=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),console.log(e.t0.detailMessage);case 12:i?(s=t.userVideos.findIndex((function(e){return e.id===t.deleteVideoModal.content.id})),t.userVideos.splice(s,1),t.hideDeleteVideoModal(),t.isDeleteRequest=!1,t.$notify("Видео успешно удалено."),t.$root.$auth.videosDecrease()):t.isDeleteRequest=!1;case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()},getUserVideo:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$video.getUserVideo();case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0.detailMessage);case 9:i&&(i.map((function(e){t.userVideos.push(new Mg(e))})),t.$root.$auth.setVideosNumber(t.userVideos.length));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUserVideo();case 2:t.$root.$on("onAddVideo",t.onAddVideo);case 3:case"end":return e.stop()}}),e)})))()}},Ay=Ny,Fy=Object(b["a"])(Ay,ty,ey,!1,null,null,null),zy=Fy.exports,Ey=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-1 col-md-1 col-lg-1 col-xl-1 pl-0"},[i("AccountToolbarLeft")],1),t._m(0),i("div",{staticClass:"col-sm-3 col-md-3 col-lg-3 col-xl-3 pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!1}}),i("ShortFriends",{attrs:{friends:t.allMyFriends}})],1)])},jy=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-sm-10 col-md-9 col-lg-8 col-xl-8 pl-0"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},[t._v(" Тут будут друзья из сообщества ")])])])])}],Dy={name:"CommunityRulesPage",components:{ShortFriends:Ml,FavoriteFriends:sr,AccountToolbarLeft:ks},mixins:[cb]},Oy=Dy,Ty=Object(b["a"])(Oy,Ey,jy,!1,null,null,null),Hy=Ty.exports,Uy=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 "},[i("AccountToolbarLeft")],1),t.isDataReady?i("div",{staticClass:"col-12 col-md-9 col-xl-8 "},[i("CommunitySettingsMain",{attrs:{community:t.communityData}}),i("CommunitySettingsAdditional",{attrs:{community:t.communityData}})],1):i("div",{staticClass:"col-12 col-md-9 col-xl-8 "},[i("Spinner")],1),i("div",{staticClass:"d-none d-xl-block col-sm-2 col-md-2 col-lg-2 col-xl-2"},[i("CommunitySettingsSideMenu",{attrs:{id:t.id}})],1),i("div",{staticClass:"col-md-2 col-lg-2 col-xl-1 d-none d-md-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},Vy=[],By=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings bg-white-br20 plz-mb20 container-fluid",attrs:{id:"communitySettingsMain"}},[i("div",{staticClass:"plz-account-settings-form pb-0 px-3 mb-0"},[t._m(0),i("div",{staticClass:"plz-account-settings-body "},[i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4 ",attrs:{for:"name"}},[t._v(" Название ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6 "},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.name,expression:"model.name"}],ref:"name",staticClass:"w-100 w-sm-75",class:[t.isEdit.name?"form-control":"form-control-plaintext",{"is-invalid":t.$v.model.name.$error||t.serverRegMessages.name,"is-valid":t.isSuccessName}],attrs:{type:"text",id:"name",readonly:!t.isEdit.name},domProps:{value:t.model.name},on:{input:[function(e){e.target.composing||t.$set(t.model,"name",e.target.value)},function(e){return t.inputFieldEdit(e,"name")}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clickField("name")},blur:function(e){return t.clickField("name")}}}),t.$v.model.name.$error||t.serverRegMessages.name?i("div",{staticClass:"invalid-feedback"},[t.$v.model.name.required?t.$v.model.name.minLength?t.$v.model.name.maxLength?t.serverRegMessages.name?i("p",{staticClass:"text-danger"},[t._v(t._s(t.serverRegMessages.name))]):t._e():i("p",{staticClass:"text-danger"},[t._v("Слишком длинное название.")]):i("p",{staticClass:"text-danger"},[t._v(" Врядли у Вас такое короткое название? ")]):i("p",{staticClass:"text-danger"},[t._v("Укажите название сообщества.")])]):t._e()]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 d-flex"},[i("button",{staticClass:"btn btn-link",class:{"text-primary":t.isEdit.name},attrs:{type:"button"},on:{click:function(e){return t.clickField("name")}}},[t._v(" "+t._s(t.isEdit.name?"Сохранить":"Изменить")+" ")])])]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4 ",attrs:{for:"notice"}},[t._v(" Короткое описание ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6 "},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.notice,expression:"model.notice"}],ref:"notice",staticClass:"w-100 w-sm-75",class:[t.isEdit.notice?"form-control":"form-control-plaintext",{"is-invalid":t.$v.model.notice.$error||t.serverRegMessages.notice,"is-valid":t.isSuccessNotice}],attrs:{type:"text",id:"notice",readonly:!t.isEdit.notice},domProps:{value:t.model.notice},on:{input:[function(e){e.target.composing||t.$set(t.model,"notice",e.target.value)},function(e){return t.inputFieldEdit(e,"notice")}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clickField("notice")},blur:function(e){return t.clickField("notice")}}}),t.$v.model.notice.$error||t.serverRegMessages.notice?i("div",{staticClass:"invalid-feedback"},[t.$v.model.notice.maxLength?t.serverRegMessages.notice?i("p",{staticClass:"text-danger"},[t._v(t._s(t.serverRegMessages.notice))]):t._e():i("p",{staticClass:"text-danger"},[t._v("Слишком длинное название.")])]):t._e()]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 d-flex"},[i("button",{staticClass:"btn btn-link",class:{"text-primary":t.isEdit.notice},attrs:{type:"button"},on:{click:function(e){return t.clickField("notice")}}},[t._v(" "+t._s(t.isEdit.notice?"Сохранить":"Изменить")+" ")])])]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4 ",attrs:{for:"description"}},[t._v(" Описание ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6 "},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.model.description,expression:"model.description"}],ref:"description",staticClass:"w-100 w-sm-75",class:[t.isEdit.description?"form-control":"form-control-plaintext",{"is-invalid":t.$v.model.description.$error||t.serverRegMessages.description,"is-valid":t.isSuccessDescription}],attrs:{type:"text",id:"description",placeholder:"Добавьте описание",readonly:!t.isEdit.description},domProps:{value:t.model.description},on:{blur:function(e){return t.clickField("description")},input:function(e){e.target.composing||t.$set(t.model,"description",e.target.value)}}}),t.$v.model.description.$error||t.serverRegMessages.description?i("div",{staticClass:"invalid-feedback"},[t.$v.model.description.maxLength?t.serverRegMessages.description?i("p",{staticClass:"text-danger"},[t._v(t._s(t.serverRegMessages.description))]):t._e():i("p",{staticClass:"text-danger"},[t._v("Слишком длинное название.")])]):t._e()]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 d-flex"},[i("button",{staticClass:"btn btn-link",class:{"text-primary":t.isEdit.description},attrs:{type:"button"},on:{click:function(e){return t.clickField("description")}}},[t._v(" "+t._s(t.isEdit.description?"Сохранить":"Изменить")+" ")])])]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4 ",attrs:{for:"headerImage"}},[t._v(" Обложка сообщества ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6 "},[i("label",{staticClass:"community-primary-image mr-3 cursor-pointer",attrs:{for:"headerImage"}},[i("img",{ref:"headerImage",staticClass:"img-thumbnail rounded",staticStyle:{width:"242px",height:"63px"},attrs:{src:t.headerImage,alt:t.community.name}})]),i("input",{ref:"headerImage",staticClass:"d-none",attrs:{id:"headerImage",type:"file"},on:{change:function(e){return t.uploadImage()}}})]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 d-flex"})]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4 ",attrs:{for:"url"}},[t._v(" Адрес страницы ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6 "},[t._m(1),i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.url,expression:"model.url"}],ref:"url",staticClass:"px-1",class:[t.isEdit.url?"form-control":"form-control-plaintext",{"is-invalid":t.$v.model.url.$error||t.serverRegMessages.url,"is-valid":t.isSuccessUrl}],attrs:{type:"text",id:"url",readonly:!t.isEdit.url},domProps:{value:t.model.url},on:{input:[function(e){e.target.composing||t.$set(t.model,"url",e.target.value)},function(e){return t.inputFieldEdit(e,"url")}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clickField("url")},blur:function(e){return t.clickField("url")}}}),t.$v.model.url.$error||t.serverRegMessages.url?i("div",{staticClass:"invalid-feedback w-100"},[t.$v.model.url.maxLength?t.$v.model.url.isCorrectSlug?t.serverRegMessages.url?i("p",{staticClass:"text-danger"},[t._v(t._s(t.serverRegMessages.url))]):t._e():i("p",{staticClass:"text-danger"},[t._v(" Только латиница, цифры, подчеркивание и дефис (первая буква). ")]):i("p",{staticClass:"text-danger"},[t._v("Слишком длинный адрес.")])]):t._e()]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 d-flex"},[i("button",{staticClass:"btn btn-link",class:{"text-primary":t.isEdit.url},attrs:{type:"button"},on:{click:function(e){return t.clickField("url")}}},[t._v(" "+t._s(t.isEdit.url?"Сохранить":"Изменить")+" ")])])]),i("div",{staticClass:"form-group row border-bottom"},[i("div",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4 "},[t._v(" Верификация ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6 "},[i("a",{attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),t.onRequestClick(e)}}},[t._v("Подать заявку")])]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 d-flex"})]),i("div",{staticClass:"form-group row border-bottom d-flex "},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4",attrs:{for:"location"}},[t._v(" Месторасположение ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 pl-4 col-6 col-lg-8  d-flex align-items-center"},[i("i",{staticClass:"fas fa-map-marker-alt"}),i("multiselect",{staticClass:"w-100 w-sm-75 ml-1 border-0 form-control p-0 position-relative",attrs:{id:"location",options:t.geoLocations,showLabels:!1,"track-by":"title",label:"title",placeholder:"Выберите местоположение","custom-label":t.locationLabel},on:{select:t.accountStartSaveData,"search-change":t.getLocations},model:{value:t.model.location,callback:function(e){t.$set(t.model,"location",e)},expression:"model.location"}},[i("template",{slot:"noOptions"},[t._v("Результатов нет.")]),i("template",{slot:"noResult"},[t._v("Такого города не существует.")])],2)],1)])])])])},Yy=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings-header row border-bottom"},[i("div",{staticClass:"d-flex"},[i("h6",{staticClass:"title-settings mb-0"},[t._v("Основные")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-group-prepend plz-prepend-w140 "},[i("span",{staticClass:"input-group-text"},[t._v("http://plizi.com/")])])}],qy={methods:{getRef:function(t){for(var e=0,i=Object.entries(this.$refs);e<i.length;e++){var s=Object(L["a"])(i[e],2),a=s[0],n=s[1];if(t===a)return n}return null},clickField:Tc((function(t){this.serverRegMessages[t]=null,this.isEdit[t]=!this.isEdit[t],console.log(t,this.isEdit,"clickField"),this.isEdit[t]?this.startFieldEdit(t):this.finishFieldEdit(t)}),200),startFieldEdit:function(t){var e=this.getRef(t);e?e.focus():window.console.warn("Ошибка редактирования поля","s",t)},finishFieldEdit:function(t){var e=this;this.$v.model[t].$touch();var i=this.getRef(t);this.$v.model[t].$error?this.isEdit[t]=!0:setTimeout((function(){i?(i.blur(),e.isSend[t]||e.accountStartSaveData(e.model[t],t)):window.console.warn("Ошибка редактирования поля","f",t)}),50)},formatFormData:function(t,e){var i={};return i[e]=t,i},inputFieldEdit:function(t,e){this.serverRegMessages[e]=null,this.$v.model[e].$touch()}}},Ky={name:"CommunitySettingsMain",props:{community:rs},mixins:[qy],computed:{headerImage:function(){var t;return(null===(t=this.community.headerImage)||void 0===t?void 0:t.image.thumb.path)||"/images/community-header-bg.jpg"},geoLocations:function(){var t=[];if(this.locations)return this.locations.forEach((function(e){t.push({id:e.id,title:{ru:e.title.ru,ua:e.title.ua,en:e.title.en},region:e.region,country:e.country})})),t},isSuccessName:function(){return(!this.$v.model.name.$invalid||!this.serverRegMessages.name)&&!!this.model.name},isSuccessNotice:function(){return(!this.$v.model.notice.$invalid||!this.serverRegMessages.notice)&&!!this.model.notice},isSuccessDescription:function(){return(!this.$v.model.description.$invalid||!this.serverRegMessages.description)&&!!this.model.description},isSuccessUrl:function(){return(!this.$v.model.url.$invalid||!this.serverRegMessages.url)&&!!this.model.url}},data:function(){return{model:{name:this.community.name,notice:this.community.notice||"",description:this.community.description||"",url:this.community.url,location:this.community.location},isEdit:{name:!1,notice:!1,description:!1,url:!1,location:!1},isSend:{name:!1,notice:!1,description:!1,url:!1,location:!1},serverRegMessages:{name:null,notice:null,description:null,url:null},locations:[]}},validations:function(){return{model:{name:{required:R["required"],minLength:Object(R["minLength"])(2),maxLength:Object(R["maxLength"])(100)},notice:{maxLength:Object(R["maxLength"])(100)},description:{maxLength:Object(R["maxLength"])(1e3)},url:{maxLength:Object(R["maxLength"])(100),isCorrectSlug:z}}}},methods:{showErrorOnLargeFile:function(){this.$alert('<h4 class="text-white">Ошибка</h4>\n        <div class="alert alert-danger">\n            Превышен максимальный размер файла.\n            <br />\n            Максимальный размер файла:\n            <b class="text-success">2 MB</b>\n        </div>',"bg-danger",30)},formatFormData:function(t,e){var i={};return"location"===e?i={location:t.id}:i[e]=t,i},locationLabel:function(t){var e=t.title,i=t.region,s=t.country;if(e)return i?"".concat(s.title.ru,", ").concat(i?i.title.ru:null,", ").concat(e.ru):"".concat(s.title.ru,", ").concat(e.ru)},accountStartSaveData:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a,n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(i.isSend[e]=!0,!i["".concat(e,"Error")]){s.next=4;break}return i.model[e]=i.community[e],s.abrupt("return");case 4:return a=i.formatFormData(t,e),null,s.prev=6,s.next=9,i.$root.$api.$communities.update(i.community.id,a);case 9:s.sent,s.next=16;break;case 12:s.prev=12,s.t0=s["catch"](6),console.warn(s.t0.detailMessage),422===s.t0.status&&(r=i.getRef(e),r&&r.focus(),i.isEdit[e]=!0,i.serverRegMessages[e]=null===(n=s.t0.data)||void 0===n?void 0:n.errors[e][0]);case 16:setTimeout((function(){i.isSend[e]=!1}),200);case 17:case"end":return s.stop()}}),s,null,[[6,12]])})))()},getLocations:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.getLocationsByInput(t);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 9:s&&(e.locations=s);case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))()},getFileFormData:function(){var t=this.$refs.headerImage.value,e=t.split(".").pop().toLowerCase(),i=["png","jpg","jpeg","bmp","webp","gif"];if(!i.includes(e))return this.$alert('<h4 class="text-white">Ошибка</h4>\n<div class="alert alert-danger">\nНедопустимое расширение у файла <b>'.concat(t,'</b><br />\nДопустимы только: <b class="text-success">').concat(i.join(", "),"</b>\n</div>"),"bg-danger",30),!1;var s=new FormData;return s.append("file",this.$refs.headerImage.files[0]),s.append("id",this.community.id),this.$refs.headerImage.value="",s},uploadImage:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.getFileFormData(),i){e.next=3;break}return e.abrupt("return");case 3:if(s=i.get("file"),a=s.size,!(a>2e6)){e.next=7;break}return t.showErrorOnLargeFile(),e.abrupt("return");case 7:return n=null,e.prev=8,e.next=11,t.$root.$api.$communities.updateHeaderImage(i);case 11:n=e.sent,e.next=20;break;case 14:if(e.prev=14,e.t0=e["catch"](8),422!==e.t0.status){e.next=19;break}return t.showErrorOnLargeFile(),e.abrupt("return");case 19:window.console.warn(e.t0.detailMessage);case 20:n&&(t.community.headerImage=new ss(n.data));case 21:case"end":return e.stop()}}),e,null,[[8,14]])})))()},onRequestClick:function(){this.$root.$alert("Заявка","bg-info",3)}}},Gy=Ky,Wy=Object(b["a"])(Gy,By,Yy,!1,null,null,null),Jy=Wy.exports,Zy=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white-br20",attrs:{id:"accountSettingsSideMenu"}},[i("div",{staticClass:"list-group border-0 py-3"},[t._l(t.menuItems,(function(e,s){return i("router-link",{key:s,staticClass:"list-group-item list-group-item-action border-0 py-2",class:{active:e.isActive},attrs:{tag:"a",to:e.path},nativeOn:{click:function(e){return t.anchorHashCheck(e)}}},[t._v(" "+t._s(e.title)+" ")])})),i("hr"),i("router-link",{staticClass:"list-group-item list-group-item-action border-0 py-2",attrs:{tag:"a",to:{name:"CommunityPage",params:{id:t.id}}}},[i("i",{staticClass:"fa fa-share mr-2"}),t._v("Назад ")])],2)])},Xy=[],Qy={name:"CommunitySettingsSideMenu",props:{id:Number|String},data:function(){return{menuItems:[{path:"#communitySettingsMain",title:"Основная информация",isActive:!0},{path:"#communitySettingsAdditional",title:"Дополнительная информация",isActive:!1}]}},methods:{anchorHashCheck:function(){var t=this;if(window.location.hash===this.$route.hash){var e=document.getElementById(this.$route.hash.slice(1));e&&(window.scrollTo(0,e.offsetTop),this.menuItems.map((function(e){e.isActive=e.path===t.$route.hash})))}}}},tw=Qy,ew=Object(b["a"])(tw,Zy,Xy,!1,null,null,null),iw=ew.exports,sw=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings bg-white-br20 plz-mb20 container-fluid",attrs:{id:"communitySettingsAdditional"}},[i("div",{staticClass:"plz-account-settings-form pb-0 px-3 mb-0"},[t._m(0),i("div",{staticClass:"plz-account-settings-body "},[i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"privacy"}},[t._v(" Тип сообщества ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative"},[1!==Number(t.model.privacy)?i("i",{staticClass:"fas fa-lock mr-2"}):i("i",{staticClass:"fas fa-unlock mr-2"}),i("div",{staticClass:"w-100 position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.model.privacy,expression:"model.privacy"}],staticClass:"form-control border-0 pl-2",attrs:{id:"privacy"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.model,"privacy",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.model.privacy,"privacy")}]}},t._l(t.privacyList,(function(e){return i("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.title)+" ")])})),0),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-sm-6 col-md-6 col-lg-4 col-xl-4",attrs:{for:"themeId"}},[t._v(" Тематика сообщества ")]),i("div",{staticClass:"plz-account-settings-body-field col-sm-6 col-md-6 col-lg-6 col-xl-6"},[i("div",{staticClass:"d-flex align-items-center w-100 position-relative"},[i("div",{staticClass:"w-100 position-relative ml-n2"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.model.themeId,expression:"model.themeId"}],ref:"themeId",staticClass:"form-control border-0 pl-2",attrs:{id:"themeId"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.model,"themeId",e.target.multiple?i:i[0])},function(e){return t.accountStartSaveData(t.model.themeId,"themeId")}]}},[i("option",{attrs:{value:"0",disabled:""}},[t._v("Выберите тематику")]),t._l(t.themes,(function(e){return i("optgroup",{key:e.id,attrs:{label:e.name}},t._l(e.children,(function(e){return i("option",{domProps:{value:e.id}},[t._v(t._s(e.name)+" ")])})),0)}))],2),i("i",{staticClass:"fas fa-chevron-down"}),i("i",{staticClass:"fas fa-chevron-down px-2 d-flex align-items-center h-100 "})])])]),i("div",{staticClass:"col-3"})]),i("div",{staticClass:"form-group row border-bottom"},[i("label",{staticClass:"plz-account-settings-body-label col-6 col-sm-4 col-lg-4 ",attrs:{for:"website"}},[t._v(" Сайт ")]),i("div",{staticClass:"plz-account-settings-body-field order-1 order-sm-0 col-12 col-sm-5 col-lg-6 "},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.model.website,expression:"model.website"}],ref:"website",staticClass:"w-100 w-sm-75",class:[t.isEdit.website?"form-control":"form-control-plaintext",{"is-invalid":t.$v.model.website.$error||t.serverRegMessages.website,"is-valid":t.isSuccessWebsite}],attrs:{type:"text",id:"website",readonly:!t.isEdit.website},domProps:{value:t.model.website},on:{input:[function(e){e.target.composing||t.$set(t.model,"website",e.target.value)},function(e){return t.inputFieldEdit(e,"website")}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.clickField("website")},blur:function(e){return t.clickField("website")}}}),t.$v.model.website.$error||t.serverRegMessages.website?i("div",{staticClass:"invalid-feedback w-100"},[t.$v.model.website.or?t.serverRegMessages.website?i("p",{staticClass:"text-danger"},[t._v(t._s(t.serverRegMessages.website))]):t._e():i("p",{staticClass:"text-danger"},[t._v("Укажите корректный адрес сайта сообщества.")])]):t._e()]),i("div",{staticClass:"plz-account-settings-body-action col-6 col-sm-3 col-lg-2 d-flex"},[i("button",{staticClass:"btn btn-link",class:{"text-primary":t.isEdit.website},attrs:{type:"button"},on:{click:function(e){return t.clickField("website")}}},[t._v(" "+t._s(t.isEdit.website?"Сохранить":"Изменить")+" ")])])])])])])},aw=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-account-settings-header row border-bottom"},[i("div",{staticClass:"d-flex"},[i("h6",{staticClass:"title-settings mb-0"},[t._v("Дополнительная информация")])])])}],nw={name:"CommunitySettingsAdditional",props:{community:rs},mixins:[qy],computed:{isSuccessWebsite:function(){return(!this.$v.model.website.$invalid||!this.serverRegMessages.website)&&!!this.model.website}},data:function(){return{model:{privacy:this.community.privacy,themeId:this.community.themeId,website:this.community.website},isEdit:{website:!1},isSend:{website:!1},serverRegMessages:{website:null},themes:[],privacyList:Wc.privacyList,types:Wc.types}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,t.popularCommunities=null,e.prev=2,e.next=5,t.$root.$api.$communities.getThemes();case 5:i=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](2),window.console.warn(e.t0.detailMessage),e.t0;case 12:t.themes=i.data;case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))()},validations:function(){return{model:{website:{or:Object(R["or"])(R["url"],(function(t){return""===t}),E)}}}},methods:{getRef:function(t){for(var e=0,i=Object.entries(this.$refs);e<i.length;e++){var s=Object(L["a"])(i[e],2),a=s[0],n=s[1];if(t===a)return n}return null},accountStartSaveData:function(t,e){var i=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){var a,n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(i.isSend[e]=!0,!i["".concat(e,"Error")]){s.next=4;break}return i.model[e]=i.community[e],s.abrupt("return");case 4:return a=i.formatFormData(t,e),null,s.prev=6,s.next=9,i.$root.$api.$communities.update(i.community.id,a);case 9:s.sent,s.next=16;break;case 12:s.prev=12,s.t0=s["catch"](6),console.warn(s.t0.detailMessage),422===s.t0.status&&(r=i.getRef(e),r&&r.focus(),i.isEdit[e]=!0,i.serverRegMessages[e]=null===(n=s.t0.data)||void 0===n?void 0:n.errors[e][0]);case 16:setTimeout((function(){i.isSend[e]=!1}),200);case 17:case"end":return s.stop()}}),s,null,[[6,12]])})))()}}},rw=nw,ow=Object(b["a"])(rw,sw,aw,!1,null,null,null),lw=ow.exports,cw={name:"CommunitySettingsPage",props:{id:Number|String},components:{CommunitySettingsAdditional:lw,CommunitySettingsSideMenu:iw,Spinner:Gi,CommunitySettingsMain:Jy,AccountToolbarLeft:ks,AccountSettingsMain:Qu,AccountSettingsPrivacy:rd,AccountSettingsSecurity:_d,AccountSettingsSideMenu:Ld,FavoriteFriends:sr},data:function(){return{isDataReady:!1,communityData:null}},methods:{getCommunityInfo:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,t.isDataReady=!1,e.prev=2,e.next=5,t.$root.$api.$communities.getCommunity(t.id);case 5:i=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](2),window.console.warn(e.t0.detailMessage),e.t0;case 12:i&&(t.communityData=new rs(i),t.isDataReady=!0);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))()}},mounted:function(){this.getCommunityInfo()}},uw=cw,dw=Object(b["a"])(uw,Uy,Vy,!1,null,null,null),mw=dw.exports,pw=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 "},[i("AccountToolbarLeft")],1),t.isDataReady?i("div",{staticClass:"col-12 col-md-9 col-xl-8 "},[this.requests.length>0?i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("ul",{staticClass:"d-block w-100 p-0"},t._l(t.requests,(function(e){return i("CommunityRequestItem",{key:e.id,attrs:{request:e,communityId:t.id},on:{accepted:t.refreshList,rejected:t.refreshList}})})),1)]):i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},[t._v(" Нет новых запросов на вступление в сообщество ")])])]):i("div",{staticClass:"col-12 col-md-9 col-xl-8 "},[i("Spinner")],1),i("div",{staticClass:"d-none d-xl-block col-sm-2 col-md-2 col-lg-2 col-xl-2"},[i("CommunityRequestsSideMenu",{attrs:{id:t.id}})],1),i("div",{staticClass:"col-md-2 col-lg-2 col-xl-1 d-none d-md-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},hw=[],fw=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg-white-br20",attrs:{id:"accountSettingsSideMenu"}},[i("div",{staticClass:"list-group border-0 py-3"},[t._l(t.menuItems,(function(e,s){return i("router-link",{key:s,staticClass:"list-group-item list-group-item-action border-0 py-2",class:{active:e.isActive},attrs:{tag:"a",to:e.path},nativeOn:{click:function(e){return t.anchorHashCheck(e)}}},[t._v(" "+t._s(e.title)+" ")])})),i("router-link",{staticClass:"list-group-item list-group-item-action border-0 py-2",attrs:{tag:"a",to:{name:"CommunityPage",params:{id:t.id}}}},[i("i",{staticClass:"fa fa-share mr-2"}),t._v("Назад ")])],2)])},vw=[],gw={name:"CommunityRequestsSideMenu",props:{id:Number|String},data:function(){return{menuItems:[]}},methods:{anchorHashCheck:function(){var t=this;if(window.location.hash===this.$route.hash){var e=document.getElementById(this.$route.hash.slice(1));e&&(window.scrollTo(0,e.offsetTop),this.menuItems.map((function(e){e.isActive=e.path===t.$route.hash})))}}}},bw=gw,Cw=Object(b["a"])(bw,fw,vw,!1,null,null,null),yw=Cw.exports,ww=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-friend-item-user media m-0 py-4 px-4"},[i("div",{staticClass:"plizi-friend-item d-flex w-100 align-items-center"},[i("router-link",{staticClass:"plizi-friend-item-pic mr-3 ",attrs:{to:"/user-"+t.friend.id,tag:"div"}},[i("img",{staticClass:"plizi-friend-item-img rounded-circle overflow-hidden",attrs:{src:t.friend.userPic,alt:t.friend.fullName}}),t.friend.isOnline?i("span",{staticClass:"plizi-friend-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-friend-item-isoffline"})]),i("div",{staticClass:"plizi-friend-item-body m-0 "},[i("router-link",{staticClass:"plizi-friend-item-top d-flex align-items-end justify-content-between mb-2",attrs:{to:"/user-"+t.friend.id,tag:"div"}},[i("h6",{staticClass:"plizi-friend-item-name my-0"},[t._v(t._s(t.friend.fullName))])]),i("div",{staticClass:"plizi-friend-item-body-bottom d-flex "},[i("p",{staticClass:"plizi-friend-item-desc p-0 my-0 d-inline"},[i("IconLocation",{staticStyle:{height:"14px"}}),t.friend.location&&t.friend.city.title&&t.friend.country.title?i("span",[t._v(" "+t._s(t.friend.city.title.ru+", "+t.friend.country.title.ru)+" ")]):i("span",[t._v(" Не указано ")])],1)])],1),i("button",{staticClass:"btn btn-link ml-auto",attrs:{type:"button",title:"Перейти к диалогу с "+t.friend.fullName},on:{click:function(e){return e.preventDefault(),t.goToDialogWithFriend()}}},[i("IconMessageShort")],1),i("button",{staticClass:"btn btn-link ml-0",attrs:{type:"button",title:"Принять запрос"},on:{click:function(e){return e.preventDefault(),t.acceptRequest()}}},[i("IconUserPlus",{staticStyle:{height:"20px"}})],1),i("button",{staticClass:"btn btn-link ml-0",attrs:{type:"button",title:"Отклонить запрос"},on:{click:function(e){return e.preventDefault(),t.rejectRequest()}}},[i("IconUserX",{staticStyle:{height:"20px"}})],1)],1)])},xw=[],kw=function(){function t(e){Object(Nt["a"])(this,t),this._id=null,this._created_at=null,this._description=null,this._user=null,this._id=e.id,this._created_at=e.created_at,this._description=e.description,this._user=e.user?new Qi["a"](e.user):null}return Object(At["a"])(t,[{key:"id",get:function(){return this._id}},{key:"createdAt",get:function(){return this._created_at}},{key:"description",get:function(){return this._description}},{key:"user",get:function(){return this._user}}]),Object(At["a"])(t,[{key:"toJSON",value:function(){return{id:this.id,created_at:this.createdAt,description:this.description,user:this.user?this.user.toJSON():null}}}]),t}(),_w={name:"CommunityRequestItem",components:{IconUserPlus:Gp,IconAddUser:du,IconUserX:Pp,IconMessageShort:ml,IconLocation:Fl},mixins:[Wn],props:{request:kw,communityId:Number},data:function(){return{}},computed:{friend:function(){var t;return(null===(t=this.request)||void 0===t?void 0:t.user)||{}}},methods:{goToDialogWithFriend:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.openDialogWithFriend(t.friend);case 2:t.$root.$router.push("/chats");case 3:case"end":return e.stop()}}),e)})))()},acceptRequest:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$communities.requestAccept(t.communityId,t.request.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i?(t.$emit("accepted"),t.$root.$notify(i.message)):t.$root.$alert("Ошибка отправки запроса","bg-warning",3);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()},rejectRequest:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$communities.requestReject(t.communityId,t.request.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i?(t.$emit("rejected"),t.$root.$notify(i.message)):t.$root.$alert("Ошибка отправки запроса","bg-warning",3);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}},$w=_w,Mw=Object(b["a"])($w,ww,xw,!1,null,null,null),Iw=Mw.exports,Pw={name:"CommunityRequestsPage",props:{id:Number|String},components:{Spinner:Gi,AccountToolbarLeft:ks,FavoriteFriends:sr,CommunityRequestsSideMenu:yw,CommunityRequestItem:Iw},data:function(){return{isDataReady:!1,requests:[]}},methods:{getCommunityRequestsList:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,t.isDataReady=!1,e.prev=2,e.next=5,t.$root.$api.$communities.requestList(t.id);case 5:i=e.sent,e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](2),window.console.warn(e.t0.detailMessage),e.t0;case 12:i&&(t.requests=[],i.data.list.map((function(e){t.requests.push(new kw(e))})),t.isDataReady=!0);case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))()},refreshList:function(){this.getCommunityRequestsList()}},mounted:function(){this.getCommunityRequestsList()}},Sw=Pw,Lw=Object(b["a"])(Sw,pw,hw,!1,null,null,null),Rw=Lw.exports,Nw=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-11 col-lg-9 col-xl-10 px-0 px-md-3 "},[i("FriendsListHeader"),i("div",{staticClass:"d-flex flex-wrap align-items-start"},[i("div",{staticClass:"col-12 --order-1 --order-md-0 col-md-7 col-lg-8 col-xl-8 bg-white-br20"},[t.isDataReady?i("FollowList",{attrs:{follows:t.followList,followsNumber:t.followsNumber},on:{unFollow:t.unFollow}}):i("Spinner",{attrs:{clazz:"d-flex flex-row"}})],1),i("div",{staticClass:"col-12 col-md-5 col-lg-4 col-xl-4"},[t.possibleFriends&&t.possibleFriends.length?i("PotentialFriends",{attrs:{blockName:"Возможные друзья",friends:t.shuffle(t.possibleFriends)}}):t._e(),t.recommendedFriends&&t.recommendedFriends.length?i("PotentialFriends",{attrs:{blockName:"Рекомендуемые друзья",friends:t.shuffle(t.recommendedFriends)}}):t._e()],1)])],1),i("div",{staticClass:"col-lg-2 col-xl-1 d-none d-lg-block pr-0"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},Aw=[],Fw=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plizi-search-results-list"},[t.followsNumber>0?i("ul",{staticClass:"d-block w-100 p-0 pt-2"},t._l(t.follows,(function(e){return i("FollowItem",{key:e.id,attrs:{follow:e},on:{unFollow:t.unFollow}})})),1):i("div",{staticClass:"p-3"},[i("div",{staticClass:"alert alert-info text-center mb-0"},[t._v(" Вы не подписаны ни на одного пользователя ")])])])},zw=[],Ew=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-friend-item-user media m-0 py-4 px-4"},[i("div",{staticClass:"plizi-friend-item d-flex w-100 align-items-center"},[i("router-link",{staticClass:"plizi-friend-item-pic mr-3 ",attrs:{to:"/user-"+t.follow.id,tag:"div"}},[i("img",{staticClass:"plizi-friend-item-img rounded-circle overflow-hidden",attrs:{src:t.follow.userPic,alt:t.follow.fullName}}),t.follow.isOnline?i("span",{staticClass:"plizi-friend-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-friend-item-isoffline"})]),i("div",{staticClass:"plizi-friend-item-body m-0 "},[i("router-link",{staticClass:"plizi-friend-item-top d-flex align-items-end justify-content-between mb-2",attrs:{to:"/user-"+t.follow.id,tag:"div"}},[i("h6",{staticClass:"plizi-friend-item-name my-0"},[t._v(t._s(t.follow.fullName))])]),i("div",{staticClass:"plizi-friend-item-body-bottom d-flex "},[i("p",{staticClass:"plizi-friend-item-desc p-0 my-0 d-inline"},[i("IconLocation",{staticStyle:{height:"14px"}}),t.follow.location&&t.follow.city.title&&t.follow.country.title?i("span",[t._v(" "+t._s(t.follow.city.title.ru+", "+t.follow.country.title.ru)+" ")]):i("span",[t._v(" Не указано ")])],1)])],1),i("button",{staticClass:"btn btn-link ml-auto",attrs:{type:"button",title:"Отписаться"},on:{click:function(e){return e.preventDefault(),t.unFollow()}}},[i("IconUserX",{staticStyle:{height:"20px"}})],1)],1)])},jw=[],Dw={name:"FollowItem",components:{IconLocation:Fl,IconUserX:Pp},props:{follow:{type:Qi["a"],required:!0}},data:function(){return{}},methods:{unFollow:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$users.unFollow(t.follow.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i?i.status&&422===i.status?t.$root.$alert(i.message,"bg-info",3):(t.$emit("unFollow",{id:t.follow.id}),t.$root.$notify(i.message)):t.$root.$alert("Не получилось отписаться","bg-warning",3);case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}},Ow=Dw,Tw=Object(b["a"])(Ow,Ew,jw,!1,null,null,null),Hw=Tw.exports,Uw={name:"FollowList",components:{FollowItem:Hw},props:{follows:Array,followsNumber:Number},data:function(){return{}},methods:{unFollow:function(t){this.$emit("unFollow",t)}}},Vw=Uw,Bw=Object(b["a"])(Vw,Fw,zw,!1,null,null,null),Yw=Bw.exports,qw={name:"FollowListPage",components:{FollowList:Yw,InvitationsList:Ef},mixins:[gf],data:function(){return{followList:[],isDataReady:!1,followsNumber:0}},methods:{unFollow:function(){this.getList()},getList:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isDataReady=!1,e.prev=1,e.next=4,t.$root.$api.$users.followList();case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.warn(e.t0.detailMessage);case 10:i&&(t.followList=[],t.followsNumber=i.totalCount,i.list.map((function(e){t.followList.push(new Qi["a"](e))}))),t.isDataReady=!0;case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()}},mounted:function(){this.getList()}},Kw=qw,Gw=Object(b["a"])(Kw,Nw,Aw,!1,null,null,null),Ww=Gw.exports,Jw=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activeSessionsPage container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-12 col-md-9 col-xl-9 px-0 px-md-3"},[i("div",{staticClass:"container-fluid bg-white-br20 plz-mb20",attrs:{id:"activeSessions"}},[i("h4",{staticClass:"py-3"},[t._v("Активные сессии")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("div",{staticClass:"d-flex align-items-baseline mb-3"},[i("button",{staticClass:"btn btn-primary mr-3",on:{click:function(e){return e.preventDefault(),t.closeActiveSessions(e)}}},[t._v(" Завершить все сеансы кроме текущего ")]),t.isSuccess?i("p",{staticClass:"text-success"},[t._v(" Сеансы были успешно завершены. ")]):t._e()]),t.activeSessions&&t.activeSessions.length?i("ul",{staticClass:"list-group mb-3"},t._l(t.activeSessions,(function(e,s){return i("li",{key:s,staticClass:"list-group-item"},[i("span",[t._v(" "+t._s(t._f("lastEventTime")(1e3*e.createdAt))+" - браузер "+t._s(e.userAgent)+". IP адрес: "+t._s(e.ip)+" ")]),e.isCurrent?i("span",{staticClass:"text-primary"},[t._v(" - Текущая сессия. ")]):t._e()])})),0):t._e()])])])]),i("div",{staticClass:"col-md-2 col-lg-2 col-xl-1 d-none d-md-block pr-0  px-0 px-md-3"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)])])},Zw=[],Xw={name:"ActiveSessionsPage",components:{AccountToolbarLeft:ks,FavoriteFriends:sr},data:function(){return{activeSessions:[],isSuccess:!1}},methods:{getActiveSessions:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$users.getActiveSessions();case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 9:i&&(t.activeSessions=i);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()},closeActiveSessions:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$users.closeActiveSessions();case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 9:i&&(t.isSuccess=!0,setTimeout((function(){t.isSuccess=!1}),3e3));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getActiveSessions();case 2:case"end":return e.stop()}}),e)})))()}},Qw=Xw,tx=Object(b["a"])(Qw,Jw,Zw,!1,null,null,null),ex=tx.exports,ix=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid px-0 px-sm-3"},[i("div",{staticClass:"row justify-content-center",attrs:{id:"AboutPage"}},[i("div",{staticClass:"col-12 col-md-11 px-4 p-3 bg-white-br20"},[i("div",{staticClass:"col-12 offset-xl-2 col-xl-8 bg-white-br20 p-4 mb-3"},[t.isDataReady?i("div",{staticClass:"plizi-search-results-list"},[i("h4",[t._v("Люди")]),i("hr"),t.searchResults&&t.searchResults.length>0?i("ul",{staticClass:"list-unstyled mb-0"},t._l(t.searchResults,(function(t,e){return i("GuestSearchResultItem",{key:e,attrs:{srItem:t}})})),1):i("div",[i("div",{staticClass:"alert alert-info"},[t._v(' По Вашему запросу "'),i("b",[t._v(t._s(t.$root.$lastSearch))]),t._v('" ничего не найдено ')])])]):i("Spinner",{attrs:{clazz:"d-flex flex-row"}})],1),i("div",{staticClass:"col-12 offset-xl-2 col-xl-8 bg-white-br20 p-4"},[t.isCommunityDataReady?i("div",{staticClass:"plizi-search-results-list"},[i("h4",[t._v("Сообщества")]),i("hr"),t.communitySearchResults&&t.communitySearchResults.length>0?i("ul",{staticClass:"list-unstyled mb-0"},t._l(t.communitySearchResults,(function(t,e){return i("GuestCommunitySearchResultItem",{key:e,attrs:{community:t}})})),1):i("div",[i("div",{staticClass:"alert alert-info"},[t._v(' По Вашему запросу "'),i("b",[t._v(t._s(t.$root.$lastSearch))]),t._v('" ничего не найдено ')])])]):i("Spinner",{attrs:{clazz:"d-flex flex-row"}})],1)])])])},sx=[],ax=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-sr-item-user plizi-sr-item col-12 --col-lg-6 media px-2 py-3 mb-3 align-items-stretch"},[i("div",{staticClass:"plizi-community-item d-flex flex-column flex-lg-row align-items-center justify-content-between --bg-white-br20 w-100 --px-4 --py-4"},[i("router-link",{staticClass:"plizi-sr-item-pic mr-auto ml-auto mr-lg-3 ml-lg-3 mb-3 mb-lg-0 rounded-circle overflow-hidden align-self-start",attrs:{to:"/community-"+t.community.id,tag:"a"}},[i("img",{staticClass:"plizi-community-item-img ",attrs:{src:t.avatar,alt:t.community.name,title:t.community.name}})]),i("div",{staticClass:"plizi-sr-item-body "},[i("router-link",{staticClass:"plizi-community-item-top d-flex align-items-end justify-content-between mb-2  ",attrs:{to:"/community-"+t.community.id,tag:"a"}},[i("h6",{staticClass:"plizi-community-item-name my-0"},[t._v(" "+t._s(t.community.name)+" ")])]),i("PrivacyLabel",{attrs:{community:t.community}}),i("div",{staticClass:"plizi-community-item-body-middle mb-2"},[t.community.description?i("p",{staticClass:"plizi-community-item-desc p-0 mb-1"},[t._v(" "+t._s(t.community.description)+" ")]):t.community.notice?i("p",{staticClass:"plizi-community-item-notice p-0 my-0 text-secondary"},[t._v(t._s(t.community.notice))]):i("p",{staticClass:"plizi-community-item-location p-0 my-0 text-secondary"},[t._v(t._s(t.locationLabel))]),i("p",{staticClass:"plizi-community-item-members-number p-0 my-0"},[t._v(t._s(t.community.totalMembers)+" участников ")])]),i("div",{staticClass:"plizi-community-item-body-bottom d-flex flex-column-reverse flex-lg-row align-items-center justify-content-between mt-3 mt-lg-0"},[t.community.totalFriends?i("div",{staticClass:"plizi-community-item-body-friends d-flex flex-wrap align-items-center justify-content-between ml-1"},[i("div",{staticClass:"plizi-community-item-body-friends-pics mr-1 my-1"},t._l(t.community.friends,(function(e){return i("div",{key:e.id,staticClass:"plizi-community-item-body-friends-pic position-relative rounded-circle"},[i("img",{attrs:{src:t.getAvatar(e),alt:e.profile.fullName,title:e.profile.fullName}})])})),0),i("p",{staticClass:"plizi-community-item-desc my-1"},[t._v(t._s(t.community.totalFriends)+" друзей")])]):t._e()])],1)],1)])},nx=[],rx={name:"GuestCommunitySearchResultItem",components:{PrivacyLabel:bu,IconMessageShort:ml,IconAddUser:du,IconMessage:Ee["a"],IconLocation:Fl},props:{community:rs},computed:{toHighlightName:function(){var t=this.community.name,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},toHighlightCommunityLocation:function(){var t=this.locationLabel,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},toHighlightDescription:function(){var t=this.community.description,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},toHighlightNotice:function(){var t=this.community.notice,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},avatar:function(){var t;return(null===(t=this.community.avatar)||void 0===t?void 0:t.image.thumb.path)||this.community.primaryImage},locationLabel:function(){var t,e,i,s=[],a=null===(t=this.community.location)||void 0===t?void 0:t.country.title.ru;a&&s.push(a);var n=null===(e=this.community.location)||void 0===e?void 0:e.region.title.ru;n&&s.push(n);var r=null===(i=this.community.location)||void 0===i?void 0:i.title.ru;return r&&s.push(r),s.join(", ")}},methods:{getAvatar:function(t){var e;return(null===(e=t.profile.avatar)||void 0===e?void 0:e.image.thumb.path)||t.profile.userPic}}},ox=rx,lx=Object(b["a"])(ox,ax,nx,!1,null,null,null),cx=lx.exports,ux=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-sr-item-user media m-0 py-4 px-4"},[i("div",{staticClass:"plizi-sr-item d-flex w-100 align-items-center"},[i("router-link",{staticClass:"plizi-sr-item-pic mr-3 ",attrs:{to:"/user-"+t.srItem.id,tag:"div"}},[i("img",{staticClass:"plizi-sr-item-img rounded-circle overflow-hidden",attrs:{src:t.srItem.userPic,alt:t.srItem.fullName}}),t.srItem.isOnline?i("span",{staticClass:"plizi-sr-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-sr-item-isoffline"})]),i("div",{staticClass:"plizi-sr-item-body m-0 pr-5 "},[i("router-link",{staticClass:"plizi-sr-item-top d-flex align-items-end justify-content-between mb-2",attrs:{to:"/user-"+t.srItem.id,tag:"div"}},[i("h6",{staticClass:"plizi-sr-item-name my-0",domProps:{innerHTML:t._s(t.toHighlightFullname)}})]),i("div",{staticClass:"plizi-sr-item-body-bottom d-flex pr-5"},[i("p",{staticClass:"plizi-sr-item-desc p-0 my-0  d-inline "},[i("IconLocation",{staticStyle:{height:"14px"}}),t.locationLabel?i("span",{domProps:{innerHTML:t._s(t.toHighlightLocation)}}):i("span",[t._v(" Не указано ")])],1)])],1)],1)])},dx=[],mx={name:"GuestSearchResultItem",components:{IconMessageShort:ml,IconAddUser:du,IconMessage:Ee["a"],IconSpinner:bl,IconLocation:Fl},props:{srItem:Qi["a"]},computed:{toHighlightFullname:function(){var t=this.srItem.fullName,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},toHighlightLocation:function(){var t=this.locationLabel,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},locationLabel:function(){var t,e,i,s,a,n=[],r=null===(t=this.srItem.location)||void 0===t||null===(e=t.country)||void 0===e?void 0:e.title.ru;r&&n.push(r);var o=null===(i=this.srItem.location)||void 0===i||null===(s=i.region)||void 0===s?void 0:s.title.ru;o&&n.push(o);var l=null===(a=this.srItem.location)||void 0===a?void 0:a.title.ru;return l&&n.push(l),n.join(", ")}},methods:{},mounted:function(){}},px=mx,hx=Object(b["a"])(px,ux,dx,!1,null,null,null),fx=hx.exports,vx={name:"GuestSearchResultsPage",components:{GuestCommunitySearchResultItem:cx,GuestSearchResultItem:fx,Spinner:Gi},data:function(){return{searchResultsList:[],isDataReady:!1,communitySearchResultsList:[],isCommunityDataReady:!1}},computed:{searchResults:function(){return this.searchResultsList},communitySearchResults:function(){return this.communitySearchResultsList}},methods:{searchProcess:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.userSearchProcess();case 2:return e.next=4,t.communitySearchProcess();case 4:case"end":return e.stop()}}),e)})))()},userSearchProcess:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isDataReady=!0,t.searchResultsList=[],""!==t.$root.$lastSearch){e.next=4;break}return e.abrupt("return");case 4:return t.isDataReady=!1,i=null,e.prev=6,e.next=9,t.$root.$api.$users.guestSearch(t.$root.$lastSearch);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),window.console.warn(e.t0.detailMessage);case 15:null!==i&&(t.searchResultsList=[],i.map((function(e){t.searchResultsList.push(new Qi["a"](e))})),t.isDataReady=!0);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))()},communitySearchProcess:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isCommunityDataReady=!0,t.communitySearchResultsList=[],""!==t.$root.$lastSearch){e.next=4;break}return e.abrupt("return");case 4:return t.isCommunityDataReady=!1,i=null,e.prev=6,e.next=9,t.$root.$api.$communities.guestLoadCommunities(t.$root.$lastSearch);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),window.console.warn(e.t0.detailMessage);case 15:null!==i&&(t.communitySearchResultsList=[],i.map((function(e){t.communitySearchResultsList.push(new rs(e))})),t.isCommunityDataReady=!0);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))()}},beforeMount:function(){this.$root.$on("searchStart",this.searchProcess)},mounted:function(){var t=localStorage.getItem("pliziLastSearch");t&&""!==t&&(this.$root.$lastSearch=t,this.searchProcess())}},gx=vx,bx=(i("ea90"),Object(b["a"])(gx,ix,sx,!1,null,null,null)),Cx=bx.exports,yx=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-sm-12 col-md-11 col-lg-9 col-xl-10"},[i("CommunityHeader",{attrs:{community:t.communityData,"subscribe-type":t.subscribeType}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 --col-sm-7 col-lg-8 col-xl-8"},[i("div",{staticClass:"col-12 order-1 order-md-0 bg-white-br20 py-2"},t._l(t.allMembers,(function(e){return t.isLoaded?i("CommunityMember",{key:e.id,attrs:{srItem:e,isAdmin:t.role&&"user"!==t.role,communityId:parseInt(t.id)}}):i("Spinner")})),1)]),i("div",{staticClass:"col-12 --col-sm-5 col-lg-4"},[t.isAuthor?t._e():i("CommunityUserActionBlock",{attrs:{community:t.communityData}}),i("CommunityFriendsInformer",{attrs:{community:t.communityData}}),t.isDataReady?i("CommunityShortMembers",{attrs:{community:t.communityData}}):t._e(),t.isDataReady&&t.hasAccess?i("CommunityVideoBlock",{key:"cv"+t.communityData.id,attrs:{avatarMedium:t.avatarMedium,communityId:parseInt(t.id)},on:{openVideoModal:t.openVideoModal}}):t._e()],1)])],1),i("div",{staticClass:"col-sm-2  col-lg-2 col-xl-1 d-none d-lg-block"},[i("FavoriteFriends",{attrs:{isNarrow:!0}})],1)]),t.postVideoModal.isVisible?i("PostVideoModal",{attrs:{videoLink:t.postVideoModal.content.videoLink},on:{hideVideoModal:t.hideVideoModal}}):t._e()],1)},wx=[],xx=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-sr-item-user media m-0 py-4 px-4"},[i("div",{staticClass:"plizi-sr-item d-flex w-100 align-items-center"},[i("router-link",{staticClass:"plizi-sr-item-pic mr-3 ",attrs:{to:"/user-"+t.srItem.id,tag:"div"}},[i("img",{staticClass:"plizi-sr-item-img rounded-circle overflow-hidden",attrs:{src:t.srItem.userPic,alt:t.srItem.fullName}}),t.srItem.isOnline?i("span",{staticClass:"plizi-sr-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-sr-item-isoffline"})]),i("div",{staticClass:"plizi-sr-item-body m-0 pr-5 "},[i("router-link",{staticClass:"plizi-sr-item-top d-flex align-items-end justify-content-between mb-2",attrs:{to:"/user-"+t.srItem.id,tag:"div"}},[i("h6",{staticClass:"plizi-sr-item-name my-0",domProps:{innerHTML:t._s(t.toHighlightFullname)}})]),i("div",{staticClass:"plizi-sr-item-body-bottom d-flex pr-5"},[i("p",{staticClass:"plizi-sr-item-desc p-0 my-0  d-inline "},[i("IconLocation",{staticStyle:{height:"14px"}}),t.locationLabel?i("span",{domProps:{innerHTML:t._s(t.toHighlightLocation)}}):i("span",[t._v(" Не указано ")])],1)])],1),i("button",{staticClass:"plz-short-friend-is-active btn btn-link text-body mr-2 ml-auto",attrs:{type:"button",title:"Написать сообщение"},on:{click:function(e){return e.preventDefault(),t.goToDialogWithFriend()}}},[t.isInRedirecting?i("IconSpinner"):i("IconMessageShort")],1),t.isAdmin&&"user"===t.srItem.role?i("ButtonsBecomeAdmin",{attrs:{srItem:t.srItem,communityId:t.communityId}}):t.isAdmin&&"admin"===t.srItem.role?i("ButtonsStopBeAdmin",{attrs:{srItem:t.srItem,communityId:t.communityId}}):t._e()],1)])},kx=[],_x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"text-body",attrs:{title:"Назначить администратором"},on:{click:function(e){return e.stopPropagation(),t.doClick(e)}}},[i("IconAdminAdd",{staticStyle:{height:"22px"}})],1)},$x=[],Mx=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-admin-add",attrs:{viewBox:"0 0 60 60",xmlns:"http://www.w3.org/2000/svg"}},[i("g",[i("path",{attrs:{d:"m46 32c-6.9982324.0118909-12.9144896 5.1857879-13.859 12.12-.7250904-.5676774-1.1464201-1.4391394-1.141-2.36v-2c-.0117361-.8381937.3398027-1.6404608.964-2.2 2.5488572-2.1120313 4.0242737-5.2498114 4.025-8.56 1.0644998.0055887 2.0873187-.4133702 2.8420123-1.1641223.7546935-.7507521 1.1790024-1.7713632 1.1789877-2.8358777v-3c.0025292-1.1482803-.4906411-2.2417842-1.353-3 1.039-4.542-.131-9.688-4.49-11.383-1.762-5.335-7.355-7.617-12.967-7.617-9.389 0-14.019 9.544-11.571 18.769-1.03313941.7516053-1.64277548 1.9533955-1.639 3.231v3c-.00001467 1.0645145.42429417 2.0851256 1.17898773 2.8358777.75469355.7507521 1.77751247 1.169711 2.84201227 1.1641223.0022081 3.3072142 1.4762608 6.4418669 4.022 8.553.6271679.5606008.9800123 1.3659034.967 2.207v2c.0076998 1.2490718-.7661889 2.369752-1.937 2.805l-9.749 3.72c-3.19203956 1.2307466-5.301925 4.2939318-5.314 7.715v3c0 .5522847.44771525 1 1 1h45c7.7319865 0 14-6.2680135 14-14s-6.2680135-14-14-14zm-44 26v-2c.00896595-2.5921569 1.60745546-4.9132621 4.026-5.846l9.747-3.718c1.9388699-.7417091 3.2213894-2.6001104 3.227-4.676v-2c.0178372-1.4309013-.5952079-2.7970847-1.676-3.735-2.2541014-1.8753528-3.4870341-4.7073147-3.324-7.635 0-.1 0-.214.006-.309.0226708-.2789479-.0725901-.5546313-.2626396-.7600748-.1900496-.2054436-.4574943-.3218449-.7373604-.3209252h-1.016c-1.1045695 0-2-.8954305-2-2v-3c-.00267637-.5312489.2071778-1.0415133.5828323-1.4171677.3756544-.3756545.8859188-.5855087 1.4171677-.5828323.5522847 0 1-.4477153 1-1s-.4477153-1-1-1c-.1577803.0064958-.3150473.0221891-.471.047-1.993-7.917 1.664-16.047 9.681-16.047 4.84 0 10.059 1.986 11.167 6.631.155.656.744.726 1.072.851 3.28 1.269 3.986 5.113 3.343 8.614-.2518203-.0671162-.5113902-.1007393-.772-.1-.5522847 0-1 .4477153-1 1s.4477153 1 1 1c1.1045695 0 2 .8954305 2 2v3c0 1.1045695-.8954305 2-2 2h-1.02c-.2798661-.0009197-.5473108.1154816-.7373604.3209252-.1900495.2054435-.2853104.4811269-.2626396.7600748.007.095.006.206.006.309.1629508 2.9288869-1.0711967 5.7618246-3.327 7.637-1.0787285.9396812-1.6891829 2.3065286-1.669 3.737v2c.0093126 1.9888786 1.1928554 3.7843958 3.017 4.577.118125 4.7984564 2.6884905 9.2011839 6.809 11.663zm44 0c-6.627417 0-12-5.372583-12-12s5.372583-12 12-12 12 5.372583 12 12c-.0071648 6.624447-5.375553 11.9928352-12 12z"}}),i("path",{attrs:{id:"Shape",d:"m53 43h-4v-4c0-1.1045695-.8954305-2-2-2h-2c-1.1045695 0-2 .8954305-2 2v4h-4c-1.1045695 0-2 .8954305-2 2v2c0 1.1045695.8954305 2 2 2h4v4c0 1.1045695.8954305 2 2 2h2c1.1045695 0 2-.8954305 2-2v-4h4c1.1045695 0 2-.8954305 2-2v-2c0-1.1045695-.8954305-2-2-2zm0 4h-4c-1.1045695 0-2 .8954305-2 2v4h-2v-4c0-1.1045695-.8954305-2-2-2h-4v-2h4c1.1045695 0 2-.8954305 2-2v-4h2v4c0 1.1045695.8954305 2 2 2h4z"}})])])},Ix=[],Px={name:"IconAdminAdd"},Sx=Px,Lx=Object(b["a"])(Sx,Mx,Ix,!1,null,null,null),Rx=Lx.exports,Nx={name:"ButtonsBecomeAdmin",components:{IconAdminAdd:Rx},props:{srItem:ts,communityId:Number},methods:{doClick:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$communities.becomeAdmin(t.communityId,t.srItem.id);case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 9:i&&(t.srItem.role="admin",t.$root.$notify("Пользователь ".concat(t.srItem.firstName," ").concat(t.srItem.lastName," назначен администратором сообщества")));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}},Ax=Nx,Fx=Object(b["a"])(Ax,_x,$x,!1,null,null,null),zx=Fx.exports,Ex=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"text-body",attrs:{title:"Снять полномочия администратора"},on:{click:function(e){return e.stopPropagation(),t.doClick(e)}}},[i("IconAdminRemove",{staticStyle:{height:"22px"}})],1)},jx=[],Dx=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-admin-remove",attrs:{viewBox:"0 0 60 60",xmlns:"http://www.w3.org/2000/svg"}},[i("g",[i("path",{attrs:{d:"m57 35h-2.382l-1.171-2.342c-.5055177-1.018598-1.5458642-1.6614957-2.683-1.658h-5.528c-1.1372028-.0037331-2.1776646.6392359-2.683 1.658l-1.171 2.342h-2.382c-1.6568542 0-3 1.3431458-3 3v1c.005823 1.2834447.8274483 2.421018 2.044 2.83l.266 4.787-5.376-2.053c-1.1694724-.4358706-1.9420359-1.5559678-1.934-2.804v-2c-.0117361-.8381937.3398027-1.6404608.964-2.2 2.5488572-2.1120313 4.0242737-5.2498114 4.025-8.56 1.0644998.0055887 2.0873187-.4133702 2.8420123-1.1641223.7546935-.7507521 1.1790024-1.7713632 1.1789877-2.8358777v-3c.0025292-1.1482803-.4906411-2.2417842-1.353-3 1.039-4.542-.131-9.688-4.49-11.383-1.762-5.335-7.355-7.617-12.967-7.617-9.389 0-14.019 9.544-11.571 18.769-1.03313941.7516053-1.64277548 1.9533955-1.639 3.231v3c-.00001467 1.0645145.42429417 2.0851256 1.17898773 2.8358777.75469355.7507521 1.77751247 1.169711 2.84201227 1.1641223.0022081 3.3072142 1.4762608 6.4418669 4.022 8.553.6271679.5606008.9800123 1.3659034.967 2.207v2c.0076998 1.2490718-.7661889 2.369752-1.937 2.805l-9.749 3.72c-3.19203956 1.2307466-5.301925 4.2939318-5.314 7.715v3c0 .5522847.44771525 1 1 1h52.153c2.0848148.037727 3.8369211-1.5577688 3.994-3.637l.808-14.533c1.2169466-.4086378 2.0390318-1.5462912 2.045-2.83v-1c0-1.6568542-1.3431458-3-3-3zm-12.658-1.447c.1681765-.3397203.514933-.5542129.894-.553h5.528c.3791342-.001451.7260065.2131132.894.553l.724 1.447h-8.764zm-42.342 22.447c.00896595-2.5921569 1.60745546-4.9132621 4.026-5.846l9.747-3.718c1.9388699-.7417091 3.2213894-2.6001104 3.227-4.676v-2c.0178372-1.4309013-.5952079-2.7970847-1.676-3.735-2.2541014-1.8753528-3.4870341-4.7073147-3.324-7.635.076052-.3761749-.0172058-.7667603-.255-1.068-.359-.389-.663-.322-1.755-.322-1.1045695 0-2-.8954305-2-2v-3c-.00267637-.5312489.2071778-1.0415133.5828323-1.4171677.3756544-.3756545.8859188-.5855087 1.4171677-.5828323.5522847 0 1-.4477153 1-1s-.4477153-1-1-1c-.1577803.0064958-.3150473.0221891-.471.047-1.993-7.917 1.664-16.047 9.681-16.047 4.84 0 10.059 1.986 11.167 6.631.155.656.744.726 1.072.851 3.28 1.269 3.986 5.113 3.343 8.614-.2518203-.0671162-.5113902-.1007393-.772-.1-.5522847 0-1 .4477153-1 1s.4477153 1 1 1c1.1045695 0 2 .8954305 2 2v3c0 1.1045695-.8954305 2-2 2-1.015 0-1.38-.084-1.755.322-.2383352.3025308-.3315879.6945574-.255 1.072.1629508 2.9288869-1.0711967 5.7618246-3.327 7.637-1.07914.938024-1.6909986 2.3032768-1.673 3.733v2c.005546 2.0747703 1.2866504 3.9324511 3.224 4.675l6.208 2.37c.469 8.442.329 8.161.921 9.2h-37.353zm53.151.252c-.0983293 1.0204887-.9755333 1.7871651-2 1.748h-10.305c-1.0244667.0391651-1.9016707-.7275113-2-1.748l-.789-14.252h15.886zm2.849-17.252c0 .5522847-.4477153 1-1 1h-18c-.5522847 0-1-.4477153-1-1v-1c0-.5522847.4477153-1 1-1h18c.5522847 0 1 .4477153 1 1z"}}),i("path",{attrs:{d:"m45 55c.28695.000206.5601617-.1228664.7501469-.3379151.1899852-.2150488.278435-.5013495.2428531-.7860849l-1-8c-.0800921-.5371264-.5742283-.9121552-1.1130995-.8447963-.5388713.0673589-.9254885.5524819-.8709005 1.0927963l1 8c.0624768.4999598.487152.8753539.991.876z"}}),i("path",{attrs:{d:"m50.876 54.992c.5478221.068322 1.0473712-.3202162 1.116-.868l1-8c.054588-.5403144-.3320292-1.0254374-.8709005-1.0927963-.5388712-.0673589-1.0330074.3076699-1.1130995.8447963l-1 8c-.068322.5478221.3202162 1.0473712.868 1.116z"}})])])},Ox=[],Tx={name:"IconAdminRemove"},Hx=Tx,Ux=Object(b["a"])(Hx,Dx,Ox,!1,null,null,null),Vx=Ux.exports,Bx={name:"ButtonsStopBeAdmin",components:{IconAdminRemove:Vx},props:{srItem:ts,communityId:Number},methods:{doClick:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$communities.stopBeAdmin(t.communityId,t.srItem.id);case 3:i=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 9:i&&(t.srItem.role="user",t.$root.$notify("Пользователь ".concat(t.srItem.firstName," ").concat(t.srItem.lastName," удален из администраторов сообщества")));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}},Yx=Bx,qx=Object(b["a"])(Yx,Ex,jx,!1,null,null,null),Kx=qx.exports,Gx={name:"CommunityMember",components:{IconMessageShort:ml,IconSpinner:bl,IconLocation:Fl,ButtonsBecomeAdmin:zx,ButtonsStopBeAdmin:Kx},mixins:[Hl,Wn],props:{srItem:ts,isAdmin:Boolean,communityId:Number},data:function(){return{isInRedirecting:!1}},computed:{toHighlightFullname:function(){var t=this.srItem.fullName,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},toHighlightLocation:function(){var t=this.locationLabel,e=this.$root.$lastSearch,i=t.replace(new RegExp("".concat(e),"ig"),(function(t){return'<span class="bg-warning">'.concat(t,"</span>")}));return i},locationLabel:function(){var t,e,i,s,a,n=[],r=null===(t=this.srItem.location)||void 0===t||null===(e=t.country)||void 0===e?void 0:e.title.ru;r&&n.push(r);var o=null===(i=this.srItem.location)||void 0===i||null===(s=i.region)||void 0===s?void 0:s.title.ru;o&&n.push(o);var l=null===(a=this.srItem.location)||void 0===a?void 0:a.title.ru;return l&&n.push(l),n.join(", ")}},methods:{goToDialogWithFriend:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isInRedirecting=!0,e.next=3,t.openDialogWithFriend(t.srItem);case 3:t.$root.$router.push("/chats");case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){}},Wx=Gx,Jx=Object(b["a"])(Wx,xx,kx,!1,null,null,null),Zx=Jx.exports,Xx={name:"CommunityMembersPage",mixins:[mu,jg],components:{FavoriteFriends:sr,FriendsAllList:Jh,AccountToolbarLeft:ks,CommunityMember:Zx,IconShare:da["a"]},props:{id:Number|String},data:function(){return{allMembers:[],isLoaded:!0,role:null,lazyLoadStarted:!1,noMore:!1}},computed:{isAuthor:function(){var t;return"author"===(null===(t=this.communityData)||void 0===t?void 0:t.role)},subscribeType:function(){return this.getSubscribeType(this.communityData)},avatarMedium:function(){var t,e,i;return(null===(t=this.communityData)||void 0===t||null===(e=t.avatar)||void 0===e?void 0:e.image.medium.path)||(null===(i=this.communityData)||void 0===i?void 0:i.primaryImage)},hasAccess:function(){var t,e;return 1===(null===(t=this.communityData)||void 0===t?void 0:t.privacy)||!!(null===(e=this.communityData)||void 0===e?void 0:e.role)}},methods:{getCommunityInfo:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$communities.getCommunity(t.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i&&(t.communityData=new rs(i),t.isDataReady=!0,document.title="Plizi: ".concat(null===(s=t.communityData)||void 0===s?void 0:s.name),setTimeout((function(){t.loadCommunityMembers()}),100));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()},loadCommunityMembers:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoaded=!1,e.prev=1,e.next=4,t.$root.$api.$communities.members(t.id);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.warn(e.t0.detailMessage);case 10:i&&(i.list.map((function(e){t.allMembers.push(new ts(e))})),t.role=i.role,t.isLoaded=!0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onScrollYPage:function(){window.scrollY>=document.body.scrollHeight-document.documentElement.clientHeight-document.documentElement.clientHeight/2&&this.membersLazyLoad()},membersLazyLoad:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.lazyLoadStarted&&!t.noMore){e.next=2;break}return e.abrupt("return");case 2:t.lazyLoadStarted=!0,i=0,0===i&&(t.noMore=!0),t.lazyLoadStarted=!1,t.onScrollYPage();case 7:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getCommunityInfo(),window.scrollTo(0,0)}},Qx=Xx,tk=Object(b["a"])(Qx,yx,wx,!1,null,null,null),ek=tk.exports,ik=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pl-md-0"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-md-1 px-0 px-md-3 "},[i("AccountToolbarLeft")],1),i("div",{staticClass:"col-sm-12 col-md-11 col-lg-9 col-xl-10"},[i("CommunityHeader",{attrs:{community:t.communityData,"subscribe-type":t.subscribeType}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 --col-sm-7 col-lg-8 col-xl-8"},[i("div",{staticClass:"col-12 order-1 order-md-0 bg-white-br20 py-2"},[t.videos?i("div",{staticClass:"card-body py-0"},[i("div",{staticClass:"row"},t._l(t.videos,(function(e){return i("div",{key:e.id,staticClass:"col-12 col-sm-6 col-xl-6 my-3"},[e.isYoutubeLink?i("div",{staticClass:"videos-item"},[i("div",{staticClass:"video mb-2"},[i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"//img.youtube.com/vi/"+e.youtubeId+"/mqdefault.jpg"},on:{click:function(i){return i.stopPropagation(),t.openVideoModal(e.link)}}})]),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time d-none"},[t._v("0:32")])])]):t._e()])})),0)]):i("Spinner")],1)]),i("div",{staticClass:"col-12 --col-sm-5 col-lg-4"},[t.isAuthor?t._e():i("CommunityUserActionBlock",{attrs:{community:t.communityData}}),i("CommunityFriendsInformer",{attrs:{community:t.communityData}}),t.isDataReady?i("CommunityShortMembers",{attrs:{community:t.communityData}}):t._e()],1)])],1)]),t.postVideoModal.isVisible?i("PostVideoModal",{attrs:{videoLink:t.postVideoModal.content.videoLink},on:{hideVideoModal:t.hideVideoModal}}):t._e()],1)},sk=[],ak={name:"CommunityVideosPage",mixins:[mu,jg],components:{IconYoutube:ka,FriendsAllList:Jh,AccountToolbarLeft:ks,CommunityMember:Zx,IconShare:da["a"]},props:{id:Number|String},data:function(){return{videos:[],isLoaded:!0,role:null,lazyLoadStarted:!1,noMore:!1}},computed:{isAuthor:function(){var t;return"author"===(null===(t=this.communityData)||void 0===t?void 0:t.role)},subscribeType:function(){return this.getSubscribeType(this.communityData)},avatarMedium:function(){var t,e,i;return(null===(t=this.communityData)||void 0===t||null===(e=t.avatar)||void 0===e?void 0:e.image.medium.path)||(null===(i=this.communityData)||void 0===i?void 0:i.primaryImage)},hasAccess:function(){var t,e;return 1===(null===(t=this.communityData)||void 0===t?void 0:t.privacy)||!!(null===(e=this.communityData)||void 0===e?void 0:e.role)}},methods:{getCommunityInfo:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$communities.getCommunity(t.id);case 4:i=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e["catch"](1),window.console.warn(e.t0.detailMessage),e.t0;case 11:i&&(t.communityData=new rs(i),t.isDataReady=!0,document.title="Plizi: Видео от сообзества ".concat(null===(s=t.communityData)||void 0===s?void 0:s.name),setTimeout((function(){t.getVideoList()}),100));case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))()},getVideoList:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoaded=!1,e.prev=1,e.next=4,t.$root.$api.$communities.videos(t.id,30);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.warn(e.t0.detailMessage);case 10:i&&(i.list.map((function(e){t.videos.push(new Mg(e))})),t.isLoaded=!0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},onScrollYPage:function(){window.scrollY>=document.body.scrollHeight-document.documentElement.clientHeight-document.documentElement.clientHeight/2&&this.membersLazyLoad()},membersLazyLoad:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.lazyLoadStarted&&!t.noMore){e.next=2;break}return e.abrupt("return");case 2:t.lazyLoadStarted=!0,i=0,0===i&&(t.noMore=!0),t.lazyLoadStarted=!1,t.onScrollYPage();case 7:case"end":return e.stop()}}),e)})))()},openVideoModal:function(t){this.postVideoModal.isVisible=!0,this.postVideoModal.content.videoLink=t},hideVideoModal:function(){this.postVideoModal.isVisible=!1}},mounted:function(){this.getCommunityInfo(),window.scrollTo(0,0)}},nk=ak,rk=Object(b["a"])(nk,ik,sk,!1,null,null,null),ok=rk.exports,lk=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row plizi-friends-list bg-white-br20 bg-white"},[i("h6",{staticClass:"w-100 media m-0 py-4 px-4 border-bottom"},[t._v("Список друзей")]),t.hasFriends?i("ul",{staticClass:"d-block w-100 p-0"},[t.isDataReady?t._l(t.friendsList,(function(t){return i("UserFriendsListItem",{key:t.id,attrs:{friend:t}})})):i("Spinner")],2):i("div",{staticClass:"alert alert-info w-100 p-5 text-center mb-0"},[i("p",[t._v("У этого пользователя нет ни одного друга.")])])])},ck=[],uk=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"plizi-sr-item-user media m-0 py-4 px-4"},[i("div",{staticClass:"plizi-sr-item d-flex w-100 align-items-center"},[t.isOwner?i("router-link",{staticClass:"plizi-sr-item-pic mr-3 ",attrs:{to:"/profile",tag:"div"}},[i("img",{staticClass:"plizi-sr-item-img rounded-circle overflow-hidden",attrs:{src:t.friend.profile.userPic,alt:t.friendFullName}}),t.friend.isOnline?i("span",{staticClass:"plizi-sr-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-sr-item-isoffline"})]):i("router-link",{staticClass:"plizi-sr-item-pic mr-3 ",attrs:{to:"/user-"+t.friend.id,tag:"div"}},[i("img",{staticClass:"plizi-sr-item-img rounded-circle overflow-hidden",attrs:{src:t.friend.profile.userPic,alt:t.friendFullName}}),t.friend.isOnline?i("span",{staticClass:"plizi-sr-item-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"plizi-sr-item-isoffline"})]),i("div",{staticClass:"plizi-sr-item-body m-0 pr-5 "},[t.isOwner?i("router-link",{staticClass:"plizi-sr-item-top d-flex align-items-end justify-content-between mb-2",attrs:{to:"/profile",tag:"div"}},[i("h6",{staticClass:"plizi-friend-item-name my-0"},[t._v(t._s(t.friendFullName))])]):i("router-link",{staticClass:"plizi-sr-item-top d-flex align-items-end justify-content-between mb-2",attrs:{to:"/user-"+t.friend.id,tag:"div"}},[i("h6",{staticClass:"plizi-friend-item-name my-0"},[t._v(t._s(t.friendFullName))])]),i("div",{staticClass:"plizi-friend-item-body-bottom d-flex "},[i("p",{staticClass:"plizi-friend-item-desc p-0 my-0 d-inline"},[i("IconLocation",{staticStyle:{height:"14px"}}),t.friend.profile.location?i("span",[t._v(" "+t._s(t.friend.profile.location.title.ru+", "+t.friend.profile.location.country.title.ru)+" ")]):i("span",[t._v(" Не указано ")])],1)])],1),i("button",{staticClass:"plz-short-friend-is-active btn btn-link text-body mr-2 ml-auto",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.goToDialogWithFriend()}}},[t.isInRedirecting?i("IconSpinner"):i("IconMessageShort")],1),i("a",{staticClass:"text-body",on:{click:function(e){return t.sendFriendshipInvitation(t.friend.id,t.friendFullName)}}},[i("IconAddUser",{staticStyle:{width:"24px",height:"24px"}})],1)],1)])},dk=[],mk={name:"UserFriendsListItem",components:{IconMessageShort:ml,IconAddUser:du,IconMessage:Ee["a"],IconSpinner:bl,IconLocation:Fl},mixins:[Hl,Wn],props:{friend:Object},data:function(){return{isInRedirecting:!1,friendTransformed:{id:this.friend.id,fullName:"".concat(this.friend.profile.firstName," ").concat(this.friend.profile.lastName)}}},computed:{isOwner:function(){return this.friend.id===this.$root.$auth.user.id},friendFullName:function(){var t="".concat(this.friend.profile.firstName," ").concat(this.friend.profile.lastName);return t}},methods:{goToDialogWithFriend:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isInRedirecting=!0,e.next=3,t.openDialogWithFriend(t.friendTransformed);case 3:t.$root.$router.push("/chats");case 4:case"end":return e.stop()}}),e)})))()}},mounted:function(){}},pk=mk,hk=Object(b["a"])(pk,uk,dk,!1,null,null,null),fk=hk.exports,vk={name:"UserFriendsAllList",components:{UserFriendsListItem:fk,Spinner:Gi},data:function(){return{friendsList:null,isDataReady:!1,hasFriends:!0}},computed:{getUserId:function(){return this.$route.params.id}},methods:{getUserFriends:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$friend.friendsList(t.getUserId);case 4:i=e.sent,e.next=12;break;case 7:throw e.prev=7,e.t0=e["catch"](1),t.isStarted=!1,window.console.warn(e.t0.detailMessage),e.t0;case 12:i&&(t.friendsList=i,t.isDataReady=!0,0===i.length&&(t.hasFriends=!1));case 13:case"end":return e.stop()}}),e,null,[[1,7]])})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUserFriends();case 2:case"end":return e.stop()}}),e)})))()}},gk=vk,bk=Object(b["a"])(gk,lk,ck,!1,null,null,null),Ck=bk.exports,yk=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[t.isDataReady?i("div",{staticClass:"row plz-post-item plz-box-shadow mb-4 bg-white-br20 p-4"},[i("h6",{staticClass:"w-100 media m-0 pb-4 px-4 border-bottom"},[t._v("Фотоальбомы")]),t.photoAlbums&&t.photoAlbums.length>0?i("div",{staticClass:"plizi-communities-list w-100 d-flex justify-content-between flex-wrap p-0"},[t.photoAlbums?i("div",{staticClass:"card-body py-0"},[i("div",{staticClass:"row"},t._l(t.photoAlbums,(function(e){return i("div",{key:e.id,staticClass:"col-12 col-sm-6 col-xl-3 my-3"},[i("UserPhotoalbumItem",{key:e.id,attrs:{album:e,userId:t.userId}})],1)})),0)]):t._e()]):i("div",{staticClass:"container px-2 "},[t._m(0)])]):[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]],2)])},wk=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:" bg-white-br20 p-3"},[i("div",{staticClass:"alert alert-info w-100 py-4 text-center m-0"},[t._v(" Пользователь еще не создал ни одного альбома. ")])])}],xk=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"photoalbum-item d-flex my-0 mx-auto"},[i("router-link",{staticClass:"photoalbum-item-link position-relative",attrs:{to:{path:"/user-"+t.userId+"/album-"+t.album.id,params:{userId:t.userId,albumId:t.album.id}},tag:"a",album:t.album}},[i("img",{staticClass:"photoalbum-item-img",attrs:{src:t.image,alt:t.album.title,title:t.album.title}}),i("div",{staticClass:"photoalbum-item-title"},[i("h6",[t._v(" "+t._s(t.album.title)+" ")])])])],1)},kk=[],_k={name:"PhotoalbumItem",props:{album:Object,userId:String},computed:{image:function(){return this.album.lastImage?this.album.lastImage.image.original.path:"../../images/noavatar-256.png"}}},$k=_k,Mk=Object(b["a"])($k,xk,kk,!1,null,null,null),Ik=Mk.exports,Pk={name:"UserPhotoalbumsList",components:{UserPhotoalbumItem:Ik,SmallSpinner:J["a"]},mixins:[Cc],data:function(){return{userId:null}},computed:{isOwner:function(){return this.userId===this.$root.$auth.user.id}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.userId=t.$route.params.id,e.next=3,t.getPhotoAlbums(t.userId);case 3:case"end":return e.stop()}}),e)})))()}},Sk=Pk,Lk=Object(b["a"])(Sk,yk,wk,!1,null,null,null),Rk=Lk.exports,Nk=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid pr-0 pl-md-0"},[i("div",{staticClass:"row"},[t.isAlbumDataReady?i("div",{staticClass:"row mr-0 ml-0 plz-box-shadow plz-post-item w-100 mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"user-photoalbum-header d-flex flex-row w-100 media m-0 pb-4 px-4 border-bottom"},[i("a",{staticClass:"position-absolute cursor-pointer text-black-50",on:{click:function(e){return t.$router.go(-1)}}},[i("i",{staticClass:"fas fa-arrow-left mr-1"}),t._v(" К списку альбомов")]),i("h6",{staticClass:"mx-auto my-auto"},[t._v(t._s(t.photoAlbum.title))])]),t.photoAlbum&&t.photoAlbum.images&&t.photoAlbum.images.length?i("GridGallery",{attrs:{isOwner:t.isOwner,images:t.photoAlbum.images}}):i("div",{staticClass:"alert alert-info bg-transparent border-0 text-secondary w-100 p-5 text-center mb-0"},[t._v(" Нет изображений. ")])],1):[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]],2)])},Ak=[],Fk={name:"UserPhotoalbum",components:{SmallSpinner:J["a"],GridGallery:WC},mixins:[Cc],data:function(){return{userId:null,photoAlbumId:this.$route.params.albumId}},computed:{isOwner:function(){return this.userId===this.$root.$auth.user.id}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.userId=t.$route.params.id,e.next=3,t.getPhotoAlbum(t.photoAlbumId);case 3:t.$root.$on("onUpdate",t.onUpdatePhotoAlbum);case 4:case"end":return e.stop()}}),e)})))()}},zk=Fk,Ek=Object(b["a"])(zk,Nk,Ak,!1,null,null,null),jk=Ek.exports,Dk=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[t.isUserCommunitiesDataReady?i("div",{staticClass:"row"},[t.userCommunities&&t.userCommunities.length>0?i("ul",{staticClass:"plizi-communities-list w-100 d-flex justify-content-between flex-wrap p-0"},t._l(t.userCommunities,(function(t){return i("CommunityItem",{key:"ucl_"+t.id,attrs:{community:t}})})),1):t.enabledLoader?t._e():i("div",{staticClass:"container px-2 "},[t._m(0)])]):t._e(),t.enabledLoader?[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2)])},Ok=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:" bg-white-br20 p-3"},[i("div",{staticClass:"alert alert-info w-100 py-4 text-center m-0"},[t._v(" Пользователь еще не присоединился ни к одному сообществу. ")])])}],Tk={name:"CommunityTemplate",components:{SmallSpinner:J["a"]},mixins:[zu],data:function(){return{userId:null}},computed:{getUserId:function(){return this.$route.params.id}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.userId=t.$route.params.id,e.next=3,t.getUserCommunitiesList(20);case 3:case"end":return e.stop()}}),e)})))()}},Hk=Tk,Uk=Object(b["a"])(Hk,Dk,Ok,!1,null,"0aed2d80",null),Vk=Uk.exports,Bk=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[t.isDataReady?i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("h6",{staticClass:"w-100 media m-0 py-4 px-4 border-bottom"},[t._v("Список видео")]),t.userVideoList&&t.userVideoList.length>0?i("div",{staticClass:"plizi-communities-list w-100 d-flex justify-content-between flex-wrap p-0"},[t.userVideoList?i("div",{staticClass:"card-body py-0"},[i("div",{staticClass:"row"},t._l(t.userVideoList,(function(e){return i("div",{key:"cvi_"+e.id,staticClass:"col-12 col-sm-6 col-xl-4 my-3"},[e.isYoutubeLink?i("div",{staticClass:"videos-item"},[i("div",{staticClass:"video mb-2"},[i("div",{staticClass:"video-wrap-pre"},[i("img",{attrs:{alt:"image",src:"//img.youtube.com/vi/"+e.youtubeId+"/mqdefault.jpg"},on:{click:function(i){return i.stopPropagation(),t.openVideoModal(e.link)}}})]),i("button",{staticClass:"video__button",attrs:{type:"button","aria-label":"Запустить видео"}},[i("IconYoutube")],1),i("div",{staticClass:"video-time d-none"},[t._v("0:32")])])]):t._e()])})),0)]):t._e()]):t.enabledLoader?t._e():i("div",{staticClass:"container px-2 "},[t._m(0)])]):t._e(),t.enabledLoader?[i("div",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2),t.videoModal.isVisible?i("PostVideoModal",{attrs:{videoLink:t.videoModal.content.videoLink},on:{hideVideoModal:t.hideVideoModal}}):t._e()],1)},Yk=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:" bg-white-br20 p-3"},[i("div",{staticClass:"alert alert-info w-100 py-4 text-center m-0"},[t._v(" Пользователь еще не загрузил ни одного видео. ")])])}],qk={components:{SmallSpinner:J["a"],PostVideoModal:Lo,IconYoutube:ka},data:function(){return{noMore:!1,enabledLoader:!0,isDataReady:!1,userVideoList:[],videoModal:{isVisible:!1,content:{videoLink:null}}}},mounted:function(){window.addEventListener("scroll",this.onScrollYPage)},beforeRouteLeave:function(t,e,i){window.removeEventListener("scroll",this.onScrollYPage),i()},methods:{onScrollYPage:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(window.scrollY>=document.body.scrollHeight-document.documentElement.clientHeight-document.documentElement.clientHeight/2)){e.next=4;break}if("userVideoList"!==t.$route.name){e.next=4;break}return e.next=4,t.lazyLoad("userVideoList");case 4:case"end":return e.stop()}}),e)})))()},loadUserVideoList:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:20,a=t.length>1&&void 0!==t[1]?t[1]:0,e.enabledLoader=!0,n=null,0===a&&(e.isDataReady=!1),i.prev=5,i.next=8,e.$root.$api.$video.getUserVideoById(e.userId,s,a);case 8:n=i.sent,i.next=16;break;case 11:throw i.prev=11,i.t0=i["catch"](5),e.enabledLoader=!1,window.console.warn(i.t0.detailMessage),i.t0;case 16:return i.abrupt("return",e.processApiResponse(a,n,"userVideoList"));case 17:case"end":return i.stop()}}),i,null,[[5,11]])})))()},processApiResponse:function(t,e,i){var s=this;return this.enabledLoader=!1,this.isDataReady=!0,e?(0===t&&(this[i]=[]),e.list.map((function(t){s[i].push(new Mg(t))})),e.list.length):0},lazyLoad:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e.noMore&&!e.enabledLoader){i.next=2;break}return i.abrupt("return");case 2:if(e.enabledLoader=!0,s=e[t].length,"userVideoList"!==t){i.next=9;break}if(!s){i.next=9;break}return i.next=8,e.loadUserVideoList(20,s+1);case 8:a=i.sent;case 9:0===a&&(e.noMore=!0),e.enabledLoader=!1;case 11:case"end":return i.stop()}}),i)})))()},openVideoModal:function(t){this.videoModal.isVisible=!0,this.videoModal.content.videoLink=t},hideVideoModal:function(){this.videoModal.isVisible=!1}}},Kk={name:"CommunityVideoList",mixins:[qk],data:function(){return{userId:null}},computed:{getUserId:function(){return this.$route.params.id}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.userId=t.$route.params.id,e.next=3,t.loadUserVideoList();case 3:case"end":return e.stop()}}),e)})))()}},Gk=Kk,Wk=Object(b["a"])(Gk,Bk,Yk,!1,null,"0a40e035",null),Jk=Wk.exports,Zk=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row plizi-friends-list bg-white-br20 bg-white"},[i("h6",{staticClass:"w-100 media m-0 py-4 px-4 border-bottom"},[t._v("На кого подписан")]),i("ul",{staticClass:"d-block w-100 p-0"},[t.isDataReady?t._l(t.followersList,(function(t){return i("UserFriendsListItem",{key:t.id,attrs:{friend:t}})})):t._e(),t.enabledLoader?[i("li",{staticClass:"row plz-post-item mb-4 bg-white-br20 p-4"},[i("div",{staticClass:"w-100 p-5 text-center mb-0"},[i("SmallSpinner")],1)])]:t._e()],2),t.isDataReady&&0===t.followersList.length?i("div",{staticClass:"alert alert-info w-100 p-5 text-center m-3"},[i("p",[t._v("Этот пользователь ни на кого не подписан.")])]):t._e()])},Xk=[],Qk={name:"CommunityFollowersList",components:{SmallSpinner:J["a"],UserFriendsListItem:fk},data:function(){return{noMore:!1,enabledLoader:!0,isDataReady:!1,followersList:[]}},computed:{getUserId:function(){return this.$route.params.id}},methods:{onScrollYPage:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(window.scrollY>=document.body.scrollHeight-document.documentElement.clientHeight-document.documentElement.clientHeight/2)){e.next=4;break}if("userVideoList"!==t.$route.name){e.next=4;break}return e.next=4,t.lazyLoad("userVideoList");case 4:case"end":return e.stop()}}),e)})))()},loadUserFollowList:function(){var t=arguments,e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:20,a=t.length>1&&void 0!==t[1]?t[1]:0,e.enabledLoader=!0,n=null,0===a&&(e.isDataReady=!1),i.prev=5,i.next=8,e.$root.$api.$users.userFollowList(e.userId,s,a);case 8:n=i.sent,i.next=16;break;case 11:throw i.prev=11,i.t0=i["catch"](5),e.enabledLoader=!1,window.console.warn(i.t0.detailMessage),i.t0;case 16:return i.abrupt("return",e.processApiResponse(a,n,"followersList"));case 17:case"end":return i.stop()}}),i,null,[[5,11]])})))()},processApiResponse:function(t,e,i){var s=this;return this.enabledLoader=!1,this.isDataReady=!0,e?(0===t&&(this[i]=[]),e.list.map((function(t){s[i].push(new Qi["a"](t))})),e.list.length):0},lazyLoad:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e.noMore&&!e.enabledLoader){i.next=2;break}return i.abrupt("return");case 2:return e.enabledLoader=!0,s=e[t].length,i.next=6,e.loadUserFollowList(20,s+1);case 6:a=i.sent,0===a&&(e.noMore=!0),e.enabledLoader=!1;case 9:case"end":return i.stop()}}),i)})))()}},mounted:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.userId=t.$route.params.id,e.next=3,t.loadUserFollowList();case 3:window.addEventListener("scroll",t.onScrollYPage);case 4:case"end":return e.stop()}}),e)})))()},beforeRouteLeave:function(t,e,i){window.removeEventListener("scroll",this.onScrollYPage),i()}},t_=Qk,e_=Object(b["a"])(t_,Zk,Xk,!1,null,null,null),i_=e_.exports,s_=[{path:"/",redirect:"/login",isGuest:!0},{path:"/",component:y,name:"HomePage",meta:{title:"Plizi: Стартовая",isGuest:!0}},{path:"/guest-search-results",component:Cx,name:"GuestSearchResultsPage",meta:{title:"Plizi: Результаты поиска",isGuest:!0}},{path:"/login",component:Ae,name:"LoginPage",meta:{title:"Plizi: Авторизация",isGuest:!0}},{path:"/logout",component:Xe,name:"LogoutPage",meta:{title:"Plizi: Выход",isGuest:!0}},{path:"/password/update",component:qe,name:"UpdatePasswordPage",meta:{title:"Plizi: Обновление пароля",props:!0,isGuest:!0}},{path:"/account",component:Fd,name:"AccountPage",meta:{title:"Plizi: Настройки аккаунта"},props:!0},{path:"/black-list",component:nm,name:"BlackList",meta:{title:"Plizi: Черный список"},props:!0},{path:"/profile",component:kc,name:"ProfilePage",meta:{title:"Plizi: Домашняя"},props:!0},{path:"/chats",component:mh,name:"ChatsListPage",meta:{title:"Plizi: Чаты"},props:!0},{path:"/search-results",component:Lh,name:"SearchResultsPage",meta:{title:"Plizi: Результаты поиска"},props:!0},{path:"/user-:id",component:function(t){return t(Yu)},name:"PersonalPage",meta:{title:"Plizi:"},props:!0,children:[{path:"",meta:{title:"Plizi: "},name:"PersonalPage",components:{userLastPhotos:uc,userLastPost:Hu}},{path:"friends",components:{userFriendsList:Ck},meta:{title:"Plizi: "}},{path:"communities",components:{userCommunities:Vk},name:"userCommunities",meta:{title:"Plizi: "}},{path:"albums",components:{userPhotoalbums:Rk},name:"userPhotoalbums",meta:{title:"Plizi: "}},{path:"/user-:id/album-:albumId",components:{userPhotoalbum:jk},name:"userPhotoalbum",meta:{title:"Plizi: "}},{path:"videos",components:{userVideoList:Jk},name:"userVideoList",meta:{title:"Plizi: "}},{path:"followers",components:{followersList:i_},name:"followersList",meta:{title:"Plizi: "}}]},{path:"/friends",component:wf,name:"FriendsListPage",meta:{title:"Plizi: мои друзья"},props:!0},{path:"/invitations",component:Tf,name:"InvitationsPage",meta:{title:"Plizi: приглашения дружбы"},props:!0},{path:"/friends-recent",component:qf,name:"FriendsRecentPage",meta:{title:"Plizi: новые друзья"},props:!0},{path:"/follow-list",component:Ww,name:"FollowListPage",meta:{title:"Plizi: на кого я подписан"},props:!0},{path:"/notifications",component:lv,name:"NotificationsPage",meta:{title:"Plizi: напоминания"},props:!0},{path:"/news",component:tl,name:"NewsPage",meta:{title:"Plizi: Новости",props:!0}},{path:"/communities",component:hv,name:"CommunitiesListPage",meta:{title:"Plizi: Мои сообщества"},props:!0},{path:"/community-rules",component:$b,name:"CommunityRulesPage",meta:{title:"Plizi: Правила сообществ"},props:!0},{path:"/manage-communities",component:yv,name:"CommunitiesManagePage",meta:{title:"Plizi: Управление сообществами"},props:!0},{path:"/community-settings-:id",component:mw,name:"CommunitySettingsPage",meta:{title:"Plizi: Управление сообществом"},props:!0},{path:"/community-videos-:id",component:ok,name:"CommunityVideosPage",meta:{title:"Plizi: Видео сообщества"},props:!0},{path:"/members-:id",component:ek,name:"CommunityMembersPage",meta:{title:"Plizi: Участники сообщества"},props:!0},{path:"/popular-communities",component:Mv,name:"CommunitiesPopularPage",meta:{title:"Plizi: Популярные сообщества"},props:!0},{path:"/community-friends-:id",component:Hy,name:"CommunityFriendsPage",meta:{title:"Plizi: Популярные сообщества"},props:!0},{path:"/community-requests-:id",component:Rw,name:"CommunityRequestsPage",meta:{title:"Plizi: Запросы на вытупление в сообщество"},props:!0},{path:"/community-:id",component:Qg,name:"CommunityPage",meta:{title:"Plizi: Популярные сообщества"},props:!0},{path:"*",component:pb,name:"Error404Page",meta:{title:"Page not found",isNotFound:!0}},{path:"/404",component:Cb,name:"Guest404Page",meta:{title:"Page not found",isNotFound:!0}},{path:"/photoalbums-list",component:dC,name:"PhotoalbumsListPage",meta:{title:"Plizi: Фотоальбомы"},props:!0},{path:"/photoalbum-:id",component:QC,name:"PhotoalbumPage",meta:{title:"Plizi: Фотоальбом"},props:!0},{path:"/videos",component:zy,name:"VideosPage",meta:{title:"Plizi: Видео"},props:!0},{path:"/active-sessions",component:ex,name:"ActiveSessionsPage",meta:{title:"Plizi: Активные сессии"},props:!0}],a_=new a["a"]({mode:"history",base:"/",routes:s_});function n_(t,e){window.localStorage.removeItem("pliziJWToken"),window.localStorage.removeItem("pliziUser"),window.localStorage.removeItem("pliziChatChannel"),window.localStorage.removeItem("pliziLastSearch"),window.localStorage.removeItem("pliziFriends"),window.localStorage.removeItem("pliziFavorites"),window.localStorage.removeItem("pliziDialogs"),window.localStorage.removeItem("pliziInvitations"),window.localStorage.removeItem("pliziNotifications"),window.localStorage.setItem("pliziRedirectTo",e.path),document.body.className="LoginPage",t({path:"/login",component:Ae,name:"LoginPage"})}function r_(t,e){document.title=t.meta.title,e(),document.body.className=t.name}function o_(t,e,i){return l_.apply(this,arguments)}function l_(){return l_=Object(p["a"])(regeneratorRuntime.mark((function t(e,i,s){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.meta.isGuest){t.next=2;break}return t.abrupt("return",r_(e,s));case 2:return t.next=4,Vue.nextTick();case 4:if(a=window.localStorage.getItem("pliziJWToken"),a+""==="null"||""===a){t.next=29;break}if(n=window.app.$root.$auth.restoreData(),!n){t.next=11;break}window.app.$root.$emit("AfterUserRestore",{user:n,token:a,save:!0}),t.next=27;break;case 11:return r=null,t.prev=12,t.next=15,window.app.$root.$api.$users.getUser();case 15:r=t.sent,t.next=22;break;case 18:return t.prev=18,t.t0=t["catch"](12),window.app.$root.$alert('<p class="text-white">Извините, но на сервере произошла ошибка и войти не получится.<br />Попробуйте через некоторое время.</p>',"bg-danger",10),t.abrupt("return",n_(s,e));case 22:if(!r){t.next=26;break}window.app.$root.$emit("AfterUserLoad",{user:r,token:a,save:!0}),t.next=27;break;case 26:return t.abrupt("return",n_(s,e));case 27:t.next=31;break;case 29:if(e.meta.isNotFound){t.next=31;break}return t.abrupt("return",n_(s,e));case 31:r_(e,s);case 32:case"end":return t.stop()}}),t,null,[[12,18]])}))),l_.apply(this,arguments)}a_.beforeEach(o_);var c_=a_,u_=(i("c975"),i("6612")),d_=i.n(u_);A.a.locale("ru"),s["default"].filter("toHM",(function(t){return A()(t).format("HH:mm")})),s["default"].filter("toLongDate",(function(t){return A()(t).format("DD MMMM YYYY г.")})),s["default"].filter("toFullDateTime",(function(t){return A()(t).format("YYYY-MM-DD HH:mm:ss")})),s["default"].filter("toDMYHM",(function(t){return A()(t).format("DD.MM.YYYY HH:mm")})),s["default"].filter("toDMY",(function(t){return A()(t).format("DD.MM.YYYY")})),s["default"].filter("calcAge",(function(t){var e=A()(),i=A()(t);return e.diff(i,"years")})),s["default"].filter("lastEventTime",(function(t){var e=A()(),i=A()().subtract(1,"days"),s=A()(t);if(e.format("YYYY-MM-DD")===s.format("YYYY-MM-DD")||i.format("YYYY-MM-DD")===s.format("YYYY-MM-DD"))return s.format("HH:mm");var a=A()().subtract(7,"days");if(+s.format("X")>=+a.format("X")){var n=s.format("dddd");return n.charAt(0).toUpperCase()+n.slice(1)}return s.format("DD.MM.YY")})),s["default"].filter("lastMessageTime",(function(t){var e=A()(),i=A()().subtract(1,"days"),s=A()(t);if(e.format("YYYY-MM-DD")===s.format("YYYY-MM-DD")||i.format("YYYY-MM-DD")===s.format("YYYY-MM-DD"))return s.format("HH:mm");var a=A()().subtract(7,"days");if(+s.format("X")>=+a.format("X")){var n=s.format("ddd");return n.charAt(0).toUpperCase()+n.slice(1)}return s.format("DD.MM.YY")})),s["default"].filter("lastPostTime",(function(t){var e=A()(),i=A()().subtract(1,"days"),s=A()(t);return s.isSame(e,"day")?s.format("HH:mm"):s.isSame(i,"day")?"Вчера":s.isSame(e,"week")?s.format("dddd"):s.format("DD.MM.YYYY")})),s["default"].filter("statsBeauty",(function(t,e){return e=e||2e3,t>=e?d_()(t).format("0 a").toUpperCase().replace(/\s/g,"&nbsp;"):t})),s["default"].filter("toBR",(function(t){return t.replace(/\n/g,"<br />")})),s["default"].filter("space1000",(function(t){return d_()(t).format("0,0").replace(/,/g," ")})),s["default"].filter("toYMD",(function(t){return A()(t).format("YYYY-MM-DD")})),s["default"].filter("mutualFriendsText",(function(t){if(0===+t)return'<span class="mutual-friends-number">нет</span> общих друзей';var e=(t+"").substr(-1,1),i='<span class="mutual-friends-number">есть</span> общие друзья';if(t<10){switch(t){case 1:i='<span class="mutual-friends-number">один</span> общий друг';break;case 2:case 3:case 4:i='<span class="mutual-friends-number">'.concat(t,"</span> общих друга");break;case 5:case 6:case 7:case 8:case 9:i='<span class="mutual-friends-number">'.concat(t,"</span> общих друзей");break}return i}if(t>=10&&t<=20)return'<span class="mutual-friends-number">'.concat(t,"</span> общих друзей");if(t>=21){switch(e){case"1":i='<span class="mutual-friends-number">'.concat(t,"</span> общий друг");break;case"2":case"3":case"4":i='<span class="mutual-friends-number">'.concat(t,"</span> общих друга");break;case"5":case"6":case"7":case"8":case"9":case"0":i='<span class="mutual-friends-number">'.concat(t,"</span> общих друзей");break}return i}return i})),s["default"].filter("stripTags",(function(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z0-9]*)\b[^>]*>?/gi,s=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,a=t+"";a="<"===a.substring(a.length-1)?a.substring(0,a.length-1):a;while(1){var n=a;if(a=n.replace(s,"").replace(i,(function(t,i){return e.indexOf("<"+i.toLowerCase()+">")>-1?t:""})),n===a)return a}})),window.fbAsyncInit=function(){FB.init({appId:pt.facebook,cookie:!0,xfbml:!0,version:"v6.0"}),FB.AppEvents.logPageView()},function(t,e,i){var s,a=t.getElementsByTagName(e)[0];t.getElementById(i)||(s=t.createElement(e),s.id=i,s.src="https://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(s,a))}(document,"script","facebook-jssdk");var m_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"pageWrapper"}},[t.isAuthorized()?i("div",{attrs:{id:"authPageWrapper"}},[i("AuthNavBar"),i("div",{staticClass:"--container-fluid container my-0 container-wide mx-auto"},[i("main",{staticClass:"container-fluid pb-sm-4 px-0",attrs:{id:t.containerID,role:"main"}},[i("transition",[i("router-view")],1)],1),"ChatsListPage"!==this.$root.$router.currentRoute.name?i("AuthFooter"):t._e()],1),i("AppNotifications",{attrs:{notifications:t.notifications},on:{removeNotification:t.removeNotification}}),t.mainModalVisible?i("AlertModal",{attrs:{alertMessage:t.mainModalMessage,alertClass:t.mainModalClass,alertTimeout:t.mainModalTimeOut}}):t._e()],1):i("div",{staticClass:"d-flex flex-column justify-content-center",attrs:{id:"guestPageWrapper"}},[i("div",{staticClass:"--container-fluid container px-md-0 my-0 pt-4"},[i("GuestNavBar"),i("main",{staticClass:"container-fluid pb-sm-5 pb-md-5",attrs:{id:t.containerID,role:"main"}},[i("transition",[i("router-view")],1)],1),i("GuestFooter")],1),t.mainModalVisible?i("AlertModal",{attrs:{alertMessage:t.mainModalMessage,alertClass:t.mainModalClass,alertTimeout:t.mainModalTimeOut}}):t._e()],1)])},p_=[],h_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",{staticClass:"navbar plz-guest-navbar"},[i("div",{staticClass:"container-fluid px-0 px-md-3 py-0 --w-100 my-0"},[i("div",{staticClass:"row w-100 px-0 mx-auto"},[i("div",{staticClass:"col-12 --col-sm-3 col-md-2 d-flex align-items-center justify-content-center pl-0 "},[i("router-link",{staticClass:"navbar-brand mx-auto ml-md-0 mr-md-auto mb-2 mb-md-0 --d-flex justify-content-center",attrs:{to:"/",tag:"a"}},[i("svg",{staticClass:"page-logo --w-100 --w-md-75",attrs:{viewBox:"0 0 1101 446",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{staticClass:"page-logo-bg",attrs:{d:"M16.9363 104.685C19.7716 46.0686 68.1225 0 126.808 0L1100.67 0L1084.86 341.094C1082.14 399.801 1033.75 446 974.981 446L0.426514 446L16.9363 104.685Z"}}),i("path",{attrs:{d:"M242.42 91C256.233 91 268.937 93.3433 280.53 98.03C292.123 102.717 302.237 109.253 310.87 117.64C319.503 125.78 326.163 135.647 330.85 147.24C335.783 158.587 338.25 171.043 338.25 184.61C338.25 198.177 335.783 210.757 330.85 222.35C326.163 233.697 319.503 243.563 310.87 251.95C302.237 260.337 292.123 266.873 280.53 271.56C268.937 276.247 256.233 278.59 242.42 278.59H203.57V350H132.16V91H242.42ZM233.91 216.06C243.283 216.06 250.807 213.223 256.48 207.55C262.153 201.63 264.99 193.983 264.99 184.61C264.99 175.483 262.153 167.96 256.48 162.04C250.807 156.12 243.283 153.16 233.91 153.16H203.57V216.06H233.91ZM534.917 284.51V350H370.637V91H442.787V284.51H534.917ZM567.199 91H639.349V350H567.199V91ZM878.019 283.4V350H673.039V335.2L768.869 157.6H679.329V91H873.579V107.28L778.119 283.4H878.019ZM912.629 91H984.779V350H912.629V91Z",fill:"white"}})])])],1),i("div",{staticClass:"col-12 order-1 order-md-0 col-md-7 d-flex align-items-center  ml-auto px-0 pl-md-3"},[i("NavBarSearch")],1),t._m(0)])])])},f_=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-5 col-md-3 px-md-0 mr-md-0 ml-auto",staticStyle:{display:"none"}},[i("div",{staticClass:"w-100 h-100 d-flex align-items-center justify-content-end"},[i("a",{staticClass:"to-english btn btn-link p-0",attrs:{id:"toEnglish",href:"#toEnglish"}},[t._v("Switch to English")])])])}],v_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-inline mt-1 mt-md-1 position-relative overflow-hidden rounded-pill w-100 ",class:{isFocused:t.isFocused}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$root.$lastSearch,expression:"$root.$lastSearch"}],ref:"topSearch",staticClass:"top-search form-control form-control  w-100",attrs:{id:"topSearch",type:"text",placeholder:"Поиск","aria-label":"Поиск"},domProps:{value:t.$root.$lastSearch},on:{keydown:function(e){return e.stopPropagation(),t.topSearchKeyDownCheck(e)},blur:t.onBlur,focus:t.onFocus,input:function(e){e.target.composing||t.$set(t.$root,"$lastSearch",e.target.value)}}}),i("button",{staticClass:"btn btn-search h-100 hot-communities",attrs:{type:"submit"},on:{click:function(e){return t.initSearch()}}},[i("IconSearch",{staticStyle:{width:"15px",height:"15px"}})],1)])},g_=[],b_={name:"NavBarSearch",components:{IconSearch:zs},props:{userData:rc},data:function(){return{isFocused:!1}},methods:{topSearchKeyDownCheck:function(t){var e=this.$refs.topSearch.value.trim();if(13===t.keyCode&&""!==e)return this.startSearch(e)},initSearch:function(){var t=this.$refs.topSearch.value.trim();if(window.console.log(t,"initSearch"),""!==t)return this.startSearch(t)},startSearch:function(t){window.localStorage.setItem("pliziLastSearch",t),this.$root.$emit("searchStart",{searchText:t,source:"topSearch"}),this.$root.$isAuth?"SearchResultsPage"!==this.$route.name&&this.$router.push({path:"/search-results"}):"GuestSearchResultsPage"!==this.$route.name&&this.$router.push({path:"/guest-search-results"})},onFocus:function(){this.isFocused=!0},onBlur:function(){this.isFocused=!1}}},C_=b_,y_=Object(b["a"])(C_,v_,g_,!1,null,null,null),w_=y_.exports,x_={name:"GuestNavBar",components:{NavBarSearch:w_},props:{isAuth:Boolean},data:function(){return{}},methods:{isActiveMenu:function(t){var e=this;return console.log(t),!!t.find((function(t){return e.$router.currentRoute.name===t}))}}},k_=x_,__=Object(b["a"])(k_,h_,f_,!1,null,null,null),$_=__.exports,M_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"fixed-top",class:{"page-has-offset-top":t.isShowNavBarShadow},attrs:{id:"authHeader"}},[i("nav",{staticClass:"auth-navbar navbar navbar-expand-lg container container-wide mx-auto  pl-md-0 pl-lg-3"},[i("div",{staticClass:"w-100 "},[i("div",{staticClass:"row "},[i("div",{staticClass:"d-flex align-items-center col-3 col-sm-2 col-md-1 pl-3 pr-0 px-lg-0 "},[t.isGotoLogin?i("router-link",{staticClass:"navbar-brand w-100 d-block text-center mx-auto h-auto my-0 py-0",attrs:{to:"/logout",tag:"a"}},[i("IconPliziLogo")],1):i("router-link",{staticClass:"navbar-brand w-100 d-block text-center mx-auto h-auto my-0 py-0",attrs:{to:{name:"NewsPage"},tag:"a"}},[i("IconPliziLogo")],1)],1),i("div",{staticClass:"col-sm-4 col-md-6 col-lg-5 d-none d-md-flex align-items-center "},[i("NavBarSearch")],1),i("div",{staticClass:"plz-top-watcher col-6 col-sm-4 col-lg-3 col-xl-2 w-auto m-auto text-center",attrs:{id:"watcherWrapper"}},[i("div",{staticClass:"--btn-block mt-2 d-inline-block"},[i("NavBarNotifications"),i("NavBarMessages"),i("NavBarFriends")],1)]),i("NavBarUserMenu")],1)])])])},I_=[],P_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"page-logo w-100",attrs:{viewBox:"0 0 1101 446",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{staticClass:"page-logo-bg",attrs:{d:"M16.9363 104.685C19.7716 46.0686 68.1225 0 126.808 0L1100.67 0L1084.86 341.094C1082.14 399.801 1033.75 446 974.981 446L0.426514 446L16.9363 104.685Z"}}),i("path",{attrs:{d:"M242.42 91C256.233 91 268.937 93.3433 280.53 98.03C292.123 102.717 302.237 109.253 310.87 117.64C319.503 125.78 326.163 135.647 330.85 147.24C335.783 158.587 338.25 171.043 338.25 184.61C338.25 198.177 335.783 210.757 330.85 222.35C326.163 233.697 319.503 243.563 310.87 251.95C302.237 260.337 292.123 266.873 280.53 271.56C268.937 276.247 256.233 278.59 242.42 278.59H203.57V350H132.16V91H242.42ZM233.91 216.06C243.283 216.06 250.807 213.223 256.48 207.55C262.153 201.63 264.99 193.983 264.99 184.61C264.99 175.483 262.153 167.96 256.48 162.04C250.807 156.12 243.283 153.16 233.91 153.16H203.57V216.06H233.91ZM534.917 284.51V350H370.637V91H442.787V284.51H534.917ZM567.199 91H639.349V350H567.199V91ZM878.019 283.4V350H673.039V335.2L768.869 157.6H679.329V91H873.579V107.28L778.119 283.4H878.019ZM912.629 91H984.779V350H912.629V91Z",fill:"white"}})])},S_=[],L_={name:"IconPliziLogo"},R_=L_,N_=Object(b["a"])(R_,P_,S_,!1,null,null,null),A_=N_.exports,F_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"btn-block d-inline-block mt-2 ",attrs:{id:"navbarPlayer"}},[i("a",{staticClass:"btn btn-link btn-sm",attrs:{href:"#prev",title:"предыдущий трек"}},[i("IconPlayerPrev")],1),i("a",{staticClass:"btn btn-link btn-sm",attrs:{href:"#play",title:"начать воспроизведение"}},[i("IconPlayerPlay")],1),i("a",{staticClass:"btn btn-link btn-sm",attrs:{href:"#next",title:"следующий трек"}},[i("IconPlayerNext")],1),t._m(0)])},z_=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"btn btn-link btn-song btn-sm",attrs:{href:"#track",title:"MASE - Psychoi"}},[i("span",{staticClass:"singer"},[t._v("MASE")]),t._v(" - "),i("span",{staticClass:"song"},[t._v("Psychoi")])])}],E_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-next",attrs:{viewBox:"0 0 124 141",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M98.377 0.799496C97.0385 1.211 95.2495 2.28349 94.2725 3.26049C91.3385 6.19449 91.0005 8.307 90.997 23.716C90.9955 31.1595 90.771 38.054 90.498 39.037C89.5115 42.588 86.2655 44.0265 82.484 42.589C81.794 42.3265 66.184 33.4 47.7955 22.752C29.407 12.104 13.3625 3.05199 12.141 2.63549C9.42902 1.71149 5.89251 2.0225 4.06801 3.346C3.34301 3.872 2.18751 5.4155 1.50001 6.776L0.250012 9.25L0.10751 70C0.00601049 113.285 0.124509 131.397 0.520009 133C1.93301 138.727 6.73401 141.284 12.3505 139.302C13.4375 138.919 21.0595 134.724 29.2885 129.98C37.5175 125.236 50.1 117.985 57.25 113.867C64.4 109.749 72.95 104.79 76.25 102.846C81.165 99.952 82.729 99.273 84.8995 99.0925C87.1545 98.905 87.732 99.0435 88.7755 100.024C89.45 100.658 90.225 101.98 90.498 102.963C90.771 103.946 90.9955 110.615 90.997 117.784C91.0005 132.641 91.3585 134.825 94.2665 137.733C96.761 140.227 99.8905 141 107.5 141C115.11 141 118.239 140.227 120.734 137.733C124.155 134.312 124 137.488 124 70.5C124 3.5125 124.155 6.6875 120.734 3.2665C118.199 0.731999 115.124 -0.00700004 107.284 0.035C103.068 0.0575 99.908 0.328496 98.377 0.799496Z"}})])},j_=[],D_={name:"IconPlayerNext"},O_=D_,T_=Object(b["a"])(O_,E_,j_,!1,null,null,null),H_=T_.exports,U_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-play",attrs:{viewBox:"0 0 382 383",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M172.01 0.551507C171.328 0.827507 167.841 1.49151 164.26 2.02751C105.226 10.8685 55.7515 44.274 25.5535 95.6835C14.9935 113.661 6.50051 137.267 3.04451 158.25C2.45551 161.825 1.59451 166.55 1.13051 168.75C-0.070995 174.449 -0.406995 206.387 0.691505 210.5C1.09501 212.013 1.68001 215.275 1.99051 217.75C4.21301 235.456 11.465 258.879 20.0455 276.066C23.8635 283.714 27.105 289.186 33.0415 298C50.531 323.969 75.352 346.085 103.284 360.59C121.38 369.986 143.295 376.994 163.879 379.965C167.721 380.52 171.473 381.204 172.215 381.487C174.035 382.179 207.965 382.179 209.785 381.487C210.527 381.204 214.279 380.52 218.121 379.965C238.705 376.994 260.621 369.986 278.716 360.59C297.451 350.861 313.887 338.43 329.427 322.233C345.496 305.486 359.003 284.761 367.38 264C372.856 250.428 376.847 236.555 378.956 223.75C379.545 220.175 380.409 215.45 380.876 213.25C381.587 209.902 381.725 206.273 381.725 191C381.725 175.727 381.587 172.098 380.876 168.75C380.409 166.55 379.545 161.825 378.956 158.25C375.5 137.267 367.007 113.661 356.447 95.6835C337.745 63.845 310.397 37.7895 278.25 21.18C262.06 12.8155 241.278 5.89601 223.75 3.03501C220.175 2.45151 215.45 1.59401 213.25 1.13001C209.997 0.444007 205.889 0.264507 191.25 0.168507C180.099 0.0955069 172.778 0.241507 172.01 0.551507ZM204.35 38.7535C220.04 40.082 226.478 41.307 237.183 44.998C254.264 50.8875 273.941 61.297 284.526 70.043C298.819 81.8525 309.973 93.7565 317.751 105.5C328.985 122.462 338.508 145.012 341.236 161.117C341.912 165.11 342.859 173.468 343.339 179.689C344.17 190.452 344.17 191.548 343.339 202.311C341.756 222.817 339.339 232.929 331.86 250.331C326.961 261.73 318.602 276.241 312.448 284.033C305.322 293.054 292.513 305.801 283.5 312.838C269.828 323.514 244.858 335.622 227.53 339.978C219.905 341.895 200.782 344 191 344C181.218 344 162.095 341.895 154.47 339.978C137.142 335.622 112.172 323.514 98.5 312.838C89.487 305.801 76.6775 293.054 69.552 284.033C60.349 272.382 50.2095 252.761 44.472 235.5C40.897 224.746 39.7425 217.893 38.4275 199.625C37.933 192.756 37.933 189.244 38.4275 182.375C39.7425 164.107 40.897 157.254 44.472 146.5C50.325 128.892 60.431 109.445 69.822 97.7185C80.036 84.9645 94.3635 71.5155 105.5 64.228C117.229 56.5535 131.383 49.63 144.817 44.998C155.249 41.401 162.059 40.076 176.75 38.7865C187.08 37.8795 193.931 37.8715 204.35 38.7535ZM149.208 122.711C147.15 123.607 145.658 125.597 144.749 128.66C144.102 130.839 144.001 139.34 144.003 191.216C144.005 233.07 144.171 251.855 144.552 253.25C146.067 258.794 150.846 261.245 156.354 259.302C157.443 258.918 165.852 254.267 175.042 248.967C262.881 198.31 262.166 198.739 264.371 195.407C265.332 193.955 265.693 192.765 265.693 191.044C265.693 187.861 264.174 185.527 260.33 182.803C256.047 179.766 158.881 123.59 156.395 122.713C153.894 121.831 151.232 121.83 149.208 122.711Z"}})])},V_=[],B_={name:"IconPlayerPlay"},Y_=B_,q_=Object(b["a"])(Y_,U_,V_,!1,null,null,null),K_=q_.exports,G_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-prev",attrs:{viewBox:"0 0 124 141",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"clip-rule":"evenodd",d:"M7.37698 0.799496C6.03848 1.211 4.24948 2.28349 3.27248 3.26049C-0.155524 6.68849 -2.27936e-05 3.498 -2.27936e-05 70.5C-2.27936e-05 137.488 -0.154521 134.312 3.26648 137.733C5.76098 140.227 8.89048 141 16.5 141C24.1095 141 27.239 140.227 29.7335 137.733C32.6415 134.825 32.9995 132.641 33.003 117.784C33.0045 110.615 33.229 103.946 33.502 102.963C33.775 101.98 34.55 100.658 35.2245 100.024C36.268 99.0435 36.8455 98.905 39.1005 99.0925C41.271 99.273 42.835 99.952 47.75 102.846C51.05 104.79 59.6 109.749 66.75 113.867C73.9 117.985 86.4825 125.236 94.7115 129.98C102.94 134.724 110.562 138.919 111.649 139.302C117.266 141.284 122.067 138.727 123.48 133C123.875 131.397 123.994 113.285 123.892 70L123.75 9.25L122.5 6.776C121.812 5.4155 120.657 3.872 119.932 3.346C118.107 2.0225 114.571 1.71149 111.859 2.63549C110.637 3.05199 94.593 12.104 76.2045 22.752C57.816 33.4 42.206 42.3265 41.516 42.589C37.7345 44.0265 34.4885 42.588 33.502 39.037C33.229 38.054 33.0045 31.1595 33.003 23.716C32.9995 8.3145 32.6605 6.194 29.7335 3.2665C27.1985 0.731999 24.1235 -0.00700004 16.284 0.035C12.068 0.0575 8.90798 0.328496 7.37698 0.799496Z"}})])},W_=[],J_={name:"IconPlayerPrev"},Z_=J_,X_=Object(b["a"])(Z_,G_,W_,!1,null,null,null),Q_=X_.exports,t$={name:"NavBarPlayer",components:{IconPlayerNext:H_,IconPlayerPlay:K_,IconPlayerPrev:Q_}},e$=t$,i$=Object(b["a"])(e$,F_,z_,!1,null,null,null),s$=i$.exports,a$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-top-watcher-item position-relative d-inline-block mr-0 mr-sm-2"},[i("div",{ref:"dropdown",staticClass:"btn btn-link my-auto text-body btn-sm cursor-pointer",attrs:{title:"Уведомления"}},[i("span",[i("router-link",{staticClass:"btn p-0 btn-link my-auto text-body btn-sm",attrs:{to:"/notifications",tag:"a"}},[i("IconBell")],1)],1),t.notificationsNumber()>0?i("span",{ref:"dropdownToggle",staticClass:"counter-info",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",id:"dropdownMenuLikes"},on:{click:function(e){return t.onShowNotifications()}}},[t._v(" "+t._s(t.notificationsNumber())+" ")]):t._e(),i("div",{staticClass:"notifications-likes-dropdown dropdown-menu dropdown-menu-right pt-3 pb-0 dropdown-white w-auto",class:{hidden:0===t.notificationsNumber()},attrs:{"aria-labelledby":"dropdownMenuLikes"}},[i("vue-custom-scrollbar",{staticClass:"notifications-likes-scroll",attrs:{settings:t.customScrollbarSettings}},[i("ul",{staticClass:"list-unstyled mb-0"},t._l(t.notificationsList(),(function(t){return i("NotificationItem",{key:t.id,attrs:{notification:t}})})),1)]),i("div",{staticClass:"notifications-likes-dropdown-footer border-top"},[i("router-link",{staticClass:"notifications-link d-block text-center pt-1 pb-3",attrs:{to:"/notifications",tag:"a"}},[t._v(" Посмотреть все ")])],1)],1)])])},n$=[],r$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-bell",attrs:{"enable-background":"new 0 0 443.295 443.295",viewBox:"0 0 443.295 443.295",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"m367.117 319.43c-4.613-11.499-6.94-23.62-6.94-36.012v-89.476c0-62.068-41.31-114.116-97.677-131.676-3.35-19.579-20.331-34.56-40.852-34.56s-37.502 14.981-40.852 34.56c-56.367 17.56-97.677 69.608-97.677 131.676v89.476c0 12.392-2.327 24.513-6.94 36.012l-19.779 49.459c-1.705 4.275-1.177 9.091 1.393 12.906 2.584 3.815 6.872 6.088 11.472 6.088h105.306c9.822 16.694 27.341 27.706 47.077 27.706s37.255-11.012 47.077-27.706h105.305c4.6 0 8.888-2.273 11.472-6.088 2.57-3.815 3.098-8.631 1.393-12.906.001 0-19.778-49.459-19.778-49.459zm-277.397 40.747 12.189-30.466c5.912-14.773 8.915-30.357 8.915-46.294v-89.476c0-61.121 49.716-110.824 110.824-110.824s110.823 49.703 110.823 110.824v89.476c0 15.936 3.003 31.521 8.915 46.294l12.189 30.466z"}}),i("path",{attrs:{d:"m26.096 117.344c-17.073 31.981-26.096 68.047-26.096 104.303s9.023 72.322 26.096 104.303l24.432-13.041c-15.138-28.382-22.822-59.091-22.822-91.262 0-32.17 7.684-62.879 22.822-91.262 0 0-24.432-13.041-24.432-13.041z"}}),i("path",{attrs:{d:"m417.199 117.344-24.432 13.041c15.138 28.382 22.822 59.091 22.822 91.262 0 32.17-7.684 62.879-22.822 91.262l24.432 13.041c17.073-31.981 26.096-68.047 26.096-104.303 0-36.255-9.023-72.322-26.096-104.303z"}})])},o$=[],l$={name:"IconBell"},c$=l$,u$=Object(b["a"])(c$,r$,o$,!1,null,null,null),d$=u$.exports,m$={name:"NavBarNotifications",components:{IconBell:d$,NotificationItem:av,vueCustomScrollbar:Ce.a},data:function(){return{customScrollbarSettings:{maxScrollbarLength:60,suppressScrollX:!0,wheelPropagation:!1}}},methods:{onShowNotifications:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.$root.$auth.nm.idsList,0!==i.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.$root.$api.$notifications.markAsRead(i);case 5:case"end":return e.stop()}}),e)})))()},updateNotifications:function(){this.$forceUpdate()},eventOnHideDropdown:function(){var t=this;$(this.$refs.dropdown).off("hidden.bs.dropdown").on("hidden.bs.dropdown",(function(){t.$root.$auth.nm.clear(),t.$root.$auth.nm.storeData(),t.updateNotifications()}))},notificationsNumber:function(){return this.$root.$auth.nm.size},notificationsList:function(){return this.$root.$auth.nm.asArray()}},created:function(){this.$root.$on(this.$root.$auth.nm.restoreEventName,this.updateNotifications),this.$root.$on(this.$root.$auth.nm.loadEventName,this.updateNotifications),this.$root.$on(this.$root.$auth.nm.updateEventName,this.updateNotifications)},mounted:function(){this.eventOnHideDropdown()},updated:function(){this.eventOnHideDropdown()}},p$=m$,h$=Object(b["a"])(p$,a$,n$,!1,null,null,null),f$=h$.exports,v$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-top-watcher-item position-relative d-inline-block  mr-0 mr-sm-2"},[i("router-link",{staticClass:"btn btn-link my-auto text-body btn-sm",attrs:{to:"/chats",tag:"a"},nativeOn:{click:function(e){return t.onGoToChat(e)}}},[i("IconMessageShort")],1),t.messagesNumber>0?i("span",{staticClass:"counter-info",attrs:{id:"dropdownMenuMessages",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.messagesNumber)+" ")]):t._e(),t.messagesNumber>0?i("div",{staticClass:"dropdown-menu dropdown-menu-right pt-3 pb-0  dropdown-white w-auto",attrs:{"aria-labelledby":"dropdownMenuMessages"}},[i("ul",{staticClass:"list-unstyled mb-0"},t._l(t.messagesList,(function(t,e){return i("MessageNotificationItem",{key:e,attrs:{message:t}})})),1),t._m(0)]):t._e()],1)},g$=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"notifications-likes-dropdown-footer border-top"},[i("a",{staticClass:"notifications-link d-block text-center pt-1 pb-3",attrs:{href:"#"}},[t._v("Посмотреть все")])])}],b$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"chat-list-user media m-0 px-4 py-2"},[i("div",{staticClass:"user-friend d-flex col-12",on:{click:function(e){return t.switchToChat()}}},[i("div",{staticClass:"user-friend-pic mr-3 "},[i("img",{staticClass:"user-friend-img rounded-circle overflow-hidden",attrs:{src:t.companionPic,alt:""}}),t.message.isOnline?i("span",{staticClass:"user-friend-isonline",attrs:{title:"онлайн"}}):i("span",{staticClass:"user-friend-isoffline"})]),i("div",{staticClass:" user-friend-body m-0 col-12 pr-5 "},[i("div",{staticClass:"user-friend-body-top d-flex align-items-end justify-content-between"},[i("h6",{staticClass:"user-friend-name my-0"},[t._v(t._s(t.companionName))]),i("time",{attrs:{datetime:t.message.lastMessageDT}},[t._v(" "+t._s(t._f("lastMessageTime")(t.message.lastMessageDT))+" ")])]),i("div",{staticClass:"user-friend-body-bottom d-flex pr-5"},[i("p",{staticClass:"user-friend-desc p-0 my-0  d-inline "},[t._v(" "+t._s(t.message.lastMessageText)+" ")])])])])])},C$=[],y$={name:"MessageNotificationItem",components:{IconCheckedDouble:ua},props:{message:Object},data:function(){return{}},methods:{switchToChat:function(){this.$root.$emit("switchToChat",{messageID:this.message.id})}},computed:{companionPic:function(){var t=this.$defaultAvatarPath;this.message&&this.message.attendees&&this.message.attendees[0]&&this.message.attendees[0].userPic&&this.message.attendees[0].userPic&&(t=this.message.attendees[0].userPic);var e=document.createElement("a");return e.href=t,"lorempixel.com"===e.hostname.toLowerCase()&&(t=this.$defaultAvatarPath),t},companionName:function(){var t="Кто-то неизвестный";return this.message&&this.message.attendees&&this.message.attendees[0]&&this.message.attendees[0].firstName&&this.message.attendees[0].firstName&&(t=this.message.attendees[0].firstName),t}}},w$=y$,x$=Object(b["a"])(w$,b$,C$,!1,null,null,null),k$=x$.exports,_$={name:"NavBarMessages",components:{IconMessageShort:ml,IconMessage:Ee["a"],MessageNotificationItem:k$},data:function(){return{messagesNumber:0,messagesLimit:10}},computed:{messagesList:function(){var t=this.$root.$auth.dialogs.filter((function(t){return!t.isLastFromMe&&!t.isRead}));return t.slice(0,this.messagesLimit)}},methods:{onGoToChat:function(){return this.$root.$emit("GoToChat",{}),!0},updateMessages:function(){var t=this;this.messagesNumber=0,this.$root.$auth.dialogs.map((function(e){e.isLastFromMe||e.isRead||t.messagesNumber++})),this.$forceUpdate()}},created:function(){this.$root.$on("dialogsLoad",this.updateMessages)}},$$=_$,M$=Object(b["a"])($$,v$,g$,!1,null,null,null),I$=M$.exports,P$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-top-watcher-item position-relative d-inline-block"},[i("router-link",{staticClass:"btn btn-link my-auto text-body btn-sm ",attrs:{to:"/friends",tag:"a"}},[i("IconFriends")],1),t.getInvitationsNumber()>0?i("span",{staticClass:"counter-info",attrs:{id:"dropdownMenuFriends","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.getInvitationsNumber())+" ")]):t._e(),t.getInvitationsNumber()>0?i("div",{staticClass:"invitations-dropdown dropdown-menu dropdown-menu-right pt-3 pb-0 dropdown-white w-auto",attrs:{"aria-labelledby":"dropdownMenuFriends"}},[i("vue-custom-scrollbar",{staticClass:"notifications-likes-scroll",attrs:{settings:t.customScrollbarSettings}},[i("ul",{staticClass:"list-unstyled mb-0"},[i("InvitationsList",{key:"invitationsList-"+t.getInvitationsNumber()+"-"+t.invitationsKeyUpdater,attrs:{invitations:t.getInvitations(),invitationsNumber:t.getInvitationsNumber()},on:{InvitationDecline:t.onInvitationAction,InvitationAccept:t.onInvitationAction}})],1)]),i("div",{staticClass:"invitations-dropdown-footer border-top"},[i("router-link",{staticClass:"invitations-link d-block text-center pt-1 pb-3",attrs:{to:"/invitations",tag:"a"}},[t._v("Посмотреть все")])],1)],1):t._e()],1)},S$=[],L$={name:"NavBarFriends",components:{IconFriends:gm,InvitationItem:Nf,InvitationsList:Ef,vueCustomScrollbar:Ce.a},data:function(){return{invitationsKeyUpdater:1,customScrollbarSettings:{maxScrollbarLength:60,suppressScrollX:!0,wheelPropagation:!1}}},methods:{onInvitationAction:function(){this.invitationsKeyUpdater+=1},updateInvitations:function(){this.$forceUpdate()},getInvitations:function(){return this.$root.$auth.im.asArray()},getInvitationsNumber:function(){return this.$root.$auth.im.size}},created:function(){this.$root.$on(this.$root.$auth.im.restoreEventName,this.updateInvitations),this.$root.$on(this.$root.$auth.im.loadEventName,this.updateInvitations),this.$root.$on(this.$root.$auth.im.updateEventName,this.updateInvitations)}},R$=L$,N$=Object(b["a"])(R$,P$,S$,!1,null,null,null),A$=N$.exports,F$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-auto col-md-1 col-lg-3 col-xl-2 px-0 profile-menu"},[i("router-link",{staticClass:"profile-menu-link d-none d-lg-block ",attrs:{to:"/profile",tag:"a"}},[t.isShowName?i("span",{ref:"navbarUserName"},[t._v(t._s(t.userData().firstName))]):t._e()]),i("div",{staticClass:"profile-menu-item p-0 m-0 d-flex align-items-center position-relative"},[i("router-link",{staticClass:"profile-menu-link profile-menu-pic procreateCommunityBlockfile-menu-pic d-block ",attrs:{to:"/profile",tag:"a"}},[t.isShowAvatar?i("img",{key:"navbarAvatar-"+t.avaUpdater,ref:"navbarAvatar",attrs:{src:t.userData().userPic,alt:t.userData().firstName}}):t._e()]),t._m(0),i("div",{staticClass:"dropdown-menu dropdown-menu-right py-3 px-3",attrs:{"aria-labelledby":"dropdownMenuUser"}},[i("div",{staticClass:"nav-item border-bottom"},[i("router-link",{staticClass:"dropdown-item px-0 py-1",attrs:{tag:"a",to:"/profile"}},[t._v("Моя страница")])],1),i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-0 py-1",attrs:{tag:"a",to:"/friends"}},[t._v("Мои друзья")])],1),i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-0 py-1",attrs:{tag:"a",to:"/communities"}},[t._v("Мои сообщества")])],1),i("div",{staticClass:"nav-item border-bottom"},[i("router-link",{staticClass:"dropdown-item px-0 py-1",attrs:{tag:"a",to:"/follow-list"}},[t._v("Мои подписки")])],1),i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-0 py-1",attrs:{tag:"a",to:"/black-list"}},[t._v("Чёрный список")])],1),i("div",{staticClass:"nav-item"},[i("router-link",{staticClass:"dropdown-item px-0 py-1",attrs:{tag:"a",to:"/account"}},[t._v("Настройки")])],1),i("div",{staticClass:"nav-item border-top"},[i("router-link",{staticClass:"dropdown-item px-0 py-1",attrs:{tag:"a",to:"/logout"}},[t._v("Выйти")])],1)])],1)],1)},z$=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"btn dropdown-menu-btn",attrs:{id:"dropdownMenuUser",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[i("i",{staticClass:"profile-menu-opener fa fas fa-chevron-down py-2 px-1"})])}],E$={name:"NavBarUserMenu",props:{},data:function(){return{isShowName:!0,isShowAvatar:!0,avaUpdater:0}},methods:{userData:function(){var t=this.$root.$auth.user;return t.profile||window.console.warn(t,"profile is null"),t},updateUserName:function(t){var e=this;this.isShowName=!1,setTimeout((function(){e.isShowName=!0}),10)},updateAvatar:function(t){var e=this;this.isShowAvatar=!1,this.avaUpdater++,setTimeout((function(){e.isShowAvatar=!0}),10)}},mounted:function(){this.$root.$on("updateUserAvatar",this.updateAvatar),this.$root.$on("updateUserName",this.updateUserName)}},j$=E$,D$=Object(b["a"])(j$,F$,z$,!1,null,null,null),O$=D$.exports,T$={name:"AuthNavBar",components:{IconPliziLogo:A_,NavBarSearch:w_,NavBarPlayer:s$,NavBarNotifications:f$,NavBarMessages:I$,NavBarFriends:A$,NavBarUserMenu:O$},props:{showShadow:{type:Boolean,required:!1,default:!1}},data:function(){return{isShowNavBarShadow:!1}},computed:{isGotoLogin:function(){return!!window.isTarga}},created:function(){var t=this;window.addEventListener("scroll",(function(){t.isShowNavBarShadow=window.scrollY>80&&"ChatsListPage"!==t.$root.$router.currentRoute.name}))}},H$=T$,U$=Object(b["a"])(H$,M_,I_,!1,null,null,null),V$=U$.exports,B$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("footer",{staticClass:" plz-footer col-12 col-md-11  offset-0 offset-md-1 container-fluid pl-md-0 pb-0 pb-md-4"},[i("div",{staticClass:"plz-bottom-links w-100 d-flex flex-wrap align-items-center justify-content-between  justify-content-md-start pr-md-3 pr-xl-0"},[i("div",{staticClass:"plz-bottom-link pr-0 px-md-3"},[i("router-link",{staticClass:"nav-item text-center text-md-left",attrs:{to:"/about",tag:"div"}},[i("a",{staticClass:"nav-link"},[t._v("О проекте")])])],1),i("div",{staticClass:"plz-bottom-link pr-0 px-md-3"},[i("router-link",{staticClass:"nav-item text-center text-md-left",attrs:{to:"/rules",tag:"div"}},[i("a",{staticClass:"nav-link"},[t._v("Правила")])])],1),i("div",{staticClass:"plz-bottom-link pr-0 px-md-3"},[i("router-link",{staticClass:"nav-item text-center text-md-left",attrs:{to:"/advertisement",tag:"div"}},[i("a",{staticClass:"nav-link"},[t._v("Реклама")])])],1),i("div",{staticClass:"plz-bottom-link pr-0 px-md-3"},[i("router-link",{staticClass:"nav-item text-center text-md-left",attrs:{to:"/for-developers",tag:"div"}},[i("a",{staticClass:"nav-link"},[t._v("Для разработчиков")])])],1),i("div",{staticClass:"plz-bottom-link text-center",staticStyle:{display:"none"}},[i("span",{staticClass:"nav-link dropdown-menu-btn  text-center text-md-left dropup d-inline-block",attrs:{id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Русский "),i("i",{staticClass:"fas fa-chevron-down ml-1"}),i("span",{staticClass:"dropdown-menu py-3 px-0",attrs:{"aria-labelledby":"dropdownMenuButton"}},[i("router-link",{staticClass:"nav-item",attrs:{to:"/switch-language",tag:"div"}},[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("English")])]),i("router-link",{staticClass:"nav-item",attrs:{to:"/switch-language",tag:"div"}},[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("German")])])],1)])]),i("div",{staticClass:"plz-bottom-link align-self-end text-center text-md-right ml-auto mr-0 pr-0 px-xl-3"},[i("router-link",{staticClass:"nav-item",attrs:{to:"/switch-language",tag:"div"}},[i("a",{staticClass:"nav-link plz-copy pr-0"},[t._v("© Plizi "+t._s((new Date).getFullYear()))])])],1)])])])},Y$=[],q$={name:"AuthFooter",data:function(){return{}}},K$=q$,G$=Object(b["a"])(K$,B$,Y$,!1,null,null,null),W$=G$.exports,J$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row"},[i("footer",{staticClass:"navbar plz-footer col-12 w-100 container-fluid m-0 px-0 px-sm-3"},[i("div",{staticClass:"plz-bottom-links w-100 d-flex flex-wrap  align-items-center justify-content-between justify-content-md-start  "},[i("div",{staticClass:"plz-bottom-link"},[i("router-link",{staticClass:"nav-item text-center text-md-left pl-md-0",attrs:{to:"/about",tag:"div"}},[i("a",{staticClass:"nav-link pl-md-0"},[t._v("О проекте")])])],1),i("div",{staticClass:"plz-bottom-link"},[i("router-link",{staticClass:"nav-item text-center text-md-left",attrs:{to:"/rules",tag:"div"}},[i("a",{staticClass:"nav-link"},[t._v("Правила")])])],1),i("div",{staticClass:"plz-bottom-link"},[i("router-link",{staticClass:"nav-item text-center text-md-left",attrs:{to:"/advertisement",tag:"div"}},[i("a",{staticClass:"nav-link"},[t._v("Реклама")])])],1),i("div",{staticClass:"plz-bottom-link"},[i("router-link",{staticClass:"nav-item text-center text-md-left",attrs:{to:"/for-developers",tag:"div"}},[i("a",{staticClass:"nav-link"},[t._v("Для разработчиков")])])],1),i("div",{staticClass:"plz-bottom-link text-center",staticStyle:{display:"none"}},[i("span",{staticClass:"nav-link dropdown-menu-btn  text-center text-md-left dropup d-inline-block",attrs:{id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" Русский "),i("i",{staticClass:"fas fa-chevron-down ml-1"}),i("span",{staticClass:"dropdown-menu py-3 px-0",attrs:{"aria-labelledby":"dropdownMenuButton"}},[i("router-link",{staticClass:"nav-item",attrs:{to:"/switch-language",tag:"div"}},[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("English")])]),i("router-link",{staticClass:"nav-item",attrs:{to:"/switch-language",tag:"div"}},[i("a",{staticClass:"dropdown-item",attrs:{href:"#"}},[t._v("German")])])],1)])]),i("div",{staticClass:"plz-bottom-link align-self-end text-center text-md-right ml-auto mr-0"},[i("router-link",{staticClass:"nav-item",attrs:{to:"/switch-language",tag:"div"}},[i("a",{staticClass:"nav-link plz-copy px-0"},[t._v("© Plizi "+t._s((new Date).getFullYear()))])])],1)])])])])},Z$=[],X$={name:"AuthFooter",data:function(){return{}}},Q$=X$,tM=Object(b["a"])(Q$,J$,Z$,!1,null,null,null),eM=tM.exports,iM=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"plzNotification"}},[i("transition-group",{attrs:{tag:"div",name:"slide-fade",duration:400}},t._l(t.notifications,(function(e){return i("div",{key:e.id,staticClass:"plz-notification d-flex  align-items-start p-4 mb-2"},[i("div",{staticClass:"plz-notification-pic mr-3"},[e.isHuman?i("img",{attrs:{src:e.userPic,alt:"image"}}):i("img",{attrs:{src:e.primaryImage,alt:"image"}})]),i("div",{staticClass:"plz-notification-body mr-3"},[e.isHuman?i("h6",{staticClass:"plz-notification-name mb-2"},[t._v(t._s(e.firstName)+" "+t._s(e.lastName))]):i("h6",{staticClass:"plz-notification-name mb-2"},[t._v(t._s(e.name)+" ")]),i("div",{staticClass:"plz-notification-text",domProps:{innerHTML:t._s(e.body)}})]),i("button",{staticClass:"btn btn-close pt-0 pr-0 ml-auto",on:{click:function(i){return t.removeNotification(e)}}},[i("i",{staticClass:"icon icon-close-notification"})])])})),0)],1)},sM=[],aM={name:"AppNotifications",props:{notifications:{type:Array,default:function(){return[]}}},methods:{removeNotification:function(t){this.$emit("removeNotification",t)}}},nM=aM,rM=Object(b["a"])(nM,iM,sM,!1,null,null,null),oM=rM.exports,lM=(i("a630"),i("5530")),cM=i("3fa2"),uM={data:function(){return{notifications:[],timeoutNotification:25,limitNotifications:5}},computed:{userData:function(){return this.$root.$auth.user}},methods:{addNotification:function(t){var e=this,i=Object(cM["b"])(),s={id:i,userPic:this.senderUserPic(t),firstName:t.data.sender?t.data.sender.firstName:null,lastName:t.data.sender?t.data.sender.lastName:null,name:t.data.name?t.data.name:null,isHuman:!0};"user.profile.image.created"===t.data.notificationType&&(s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"сменила аватарку":"сменил аватарку")),"user.profile.image.updated"===t.data.notificationType&&(s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"сменила аватарку":"сменил аватарку")),"friendships.accepted"===t.data.notificationType&&(s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"одобрила Вашу заявку в друзья":"одобрил Вашу заявку в друзья")),"friendships.sent"===t.data.notificationType&&(s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"отправила Вам заявку в друзья":"отправил Вам заявку в друзья")),"friendships.denied"===t.data.notificationType&&(s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"отклонила Вашу заявку в друзья":"отклонил Вашу заявку в друзья")),"friendships.cancelled"===t.data.notificationType&&(s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"удалила Вас из друзей":"удалил Вас из друзей")),"community.post.created"===t.data.notificationType&&(s.isHuman=!1,s.body='Сообщество <b class="community-name">'.concat(t.data.community.name,"</b> опубликовало новый пост"),s.primaryImage=t.data.community.primaryImage),"community.request.rejected"===t.data.notificationType&&(s.isHuman=!1,s.body='Сообщество <b class="community-name">'.concat(t.data.community.name,"</b> отклонило Ваш запрос"),s.primaryImage=t.data.community.primaryImage),"community.request.accepted"===t.data.notificationType&&(s.isHuman=!1,s.body='Сообщество <b class="community-name">'.concat(t.data.community.name,"</b> одобрило Ваш запрос"),s.primaryImage=t.data.community.primaryImage),"user.post.created"===t.data.notificationType&&(s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"опубликовала новость":"опубликовал новость")),"chat.created"===t.data.notificationType&&(t.attendees.length>=3?(s.isHuman=!1,s.primaryImage="/images/noavatar-256.png",s.body="Создан групповой чат ".concat(t.data.name," с Вами")):s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"создала чат с Вами":"создал чат с Вами")),"chat.removed"===t.data.notificationType&&(t.attendees.length>=3?(s.isHuman=!1,s.primaryImage="/images/noavatar-256.png",s.body="Вас удалили из группового чата ".concat(t.data.name)):s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"удалила чат с Вами":"удалил чат с Вами")),"chat.attendee.removed"===t.data.notificationType&&(t.attendees.length>=3?(s.isHuman=!1,s.primaryImage="/images/noavatar-256.png",s.body="Вас удалили из группового чата ".concat(t.data.name)):s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"удалила чат с Вами":"удалил чат с Вами")),"chat.attendee.appended"===t.data.notificationType&&(t.attendees.length>=3?(s.isHuman=!1,s.primaryImage="/images/noavatar-256.png",s.body="Вас добавили в групповой чат ".concat(t.data.name)):s.body=this.senderFullName(t)+("f"===t.data.sender.sex?"добавила Вас в групповой чат":"добавил Вас в групповой чат")),"message.new"===t.data.notificationType&&(s.body=t.data.sender.message),"app.notification"===t.data.notificationType&&(s.body=t.data.sender.message),this.notifications.push(Object(lM["a"])({},s,{uuid:i}));var a=this.notifications.length;a>this.limitNotifications&&(this.notifications=this.notifications.slice(a-this.limitNotifications)),this.timeoutNotification>0&&setTimeout((function(){e.removeNotification({uuid:i})}),1e3*this.timeoutNotification)},senderUserPic:function(t){return t.data.sender&&t.data.sender.userPic?t.data.sender.userPic:this.$root.$defaultAvatarPath},senderFullName:function(t){return"".concat(t.data.sender.firstName," ").concat(t.data.sender.lastName," ")},removeNotification:function(t){var e=t.uuid;this.notifications=this.notifications.filter((function(t){return t.uuid!==e}))},transformMessageToNotification:function(t){return{data:{notificationType:t.type,sender:{userPic:t.message.userPic,firstName:t.message.firstName?t.message.firstName:null,lastName:t.message.lastName?t.message.lastName:null,message:t.message.body}}}},transformNotifyToNotification:function(t){this.$root.$auth.user;return{data:{notificationType:t.type,sender:{userPic:"images/plizi-icon-64.png",message:t.message?t.message:null}}}},transformForChatRemovedToNotification:function(t,e){return this.isGroupChatforChatRemove(t,e)?{attendees:Array.from(t.attendees),data:{notificationType:e,name:t.name?t.name:null}}:{attendees:t.attendees,data:{notificationType:e||t.type,name:t.name?t.name:null,sender:{userPic:t.attendees[0].userPic?t.attendees[0].userPic:null,firstName:t.attendees[0].firstName?t.attendees[0].firstName:null,lastName:t.attendees[0].lastName?t.attendees[0].lastName:null,sex:t.attendees[0].sex?t.attendees[0].sex:null}}}},transformDialogToNotification:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isGroupChat(t,i))return{attendees:t.dialog.attendees,data:{notificationType:t.type,name:t.dialog.name?t.dialog.name:null}};var s=t.dialog.attendees.filter((function(t){return t.id!==e.userData.id}));return{attendees:t.dialog.attendees,data:{notificationType:i||t.type,name:t.name?t.name:null,sender:{userPic:s[0].userPic?s[0].userPic:null,firstName:s[0].firstName?s[0].firstName:null,lastName:s[0].lastName?s[0].lastName:null,sex:s[0].sex?s[0].sex:null}}}},isGroupChat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e||t.type;return"chat.removed"===i&&"chat.attendee.removed"===i&&t.dialog.attendees.length>=2||t.dialog.attendees.length>=3},isGroupChatforChatRemove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=e||t.type;return"chat.removed"===i&&"chat.attendee.removed"===i&&t.attendees.length>=2||t.attendees.length>=3}}},dM=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){var t;Object(Nt["a"])(this,i);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a)),t.localStorageKey="pliziFriends",t.restoreEventName="FriendsIsRestored",t.loadEventName="FriendsIsLoaded",t.updateEventName="FriendsIsUpdated",t.pageSize=10,t}return Object(At["a"])(i,[{key:"compare",value:function(t,e){return t.compareName===e.compareName?0:t.compareName<e.compareName?-1:1}},{key:"onAddAcceptFriendsShip",value:function(t){this.add(t),this.storeData(),this.restore(),this.emit(this.updateEventName,t)}},{key:"onAddAcceptOurInvitation",value:function(t){t.data&&t.data.user?(this.add(t.data.user),this.storeData(),this.restore(),this.emit(this.updateEventName,t.data.user)):window.console.warn("onAddAcceptOurInvitation: incorrect data structure")}},{key:"stopFriendship",value:function(t){this.delete(t),this.storeData(),this.restore(),this.emit(this.updateEventName,{friendId:t})}},{key:"checkIsFriend",value:function(t){var e=this.collection.get(t);return!!e}},{key:"new",value:function(t){return new Kn(t)}},{key:"get",value:function(t){return this.collection.get(t)}},{key:"asArray",value:function(){var t=[];return this.collection.forEach((function(e){t.push(e)})),t.sort(this.compare),t}},{key:"load",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.clear(),e=null,t.prev=2,t.next=5,this.api.$friend.friendsList();case 5:e=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),window.console.warn(t.t0.detailMessage);case 11:return e&&(e.map((function(t){i.add(t)})),this.storeData(),this.isLoad=!0,this.loadEventName&&this.emit(this.loadEventName)),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,this,[[2,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"additionalLoad",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.api.$friend.friendsList(null,this.pageSize,this.size+1);case 4:e=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),window.console.warn(t.t0.detailMessage);case 10:return i=0,e&&(e.map((function(t){s.add(t),s.collection.has("xxx"),i++})),this.storeData(),this.isLoad=!0,this.loadEventName&&this.emit(this.loadEventName)),t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateOnlineStatus",value:function(t){var e=this.get(t);e&&(e.lastActivity=(new Date).valueOf()/1e3,e.isOnline=!0,this.add(e),this.storeData())}},{key:"favorites",get:function(){return this.asArray().slice(0,10)}}]),i}(oe),mM=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){var t;Object(Nt["a"])(this,i);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a)),t.localStorageKey="pliziFavorites",t.restoreEventName="FavoritesIsRestored",t.loadEventName="FavoritesIsLoaded",t.updateEventName="FavoritesIsUpdated",t}return Object(At["a"])(i,[{key:"compare",value:function(t,e){return t.fullName===e.fullName?0:t.fullName>e.fullName?-1:1}},{key:"onAddToFavorites",value:function(t){this.add(t),this.storeData(),this.restore(),this.emit(this.updateEventName,t)}},{key:"removeFromFavorites",value:function(t){this.delete(t),this.storeData(),this.restore(),this.emit(this.updateEventName,{friendId:t})}},{key:"checkIsFavorite",value:function(t){var e=this.collection.get(t);return!!e}},{key:"new",value:function(t){return new Kn(t)}},{key:"get",value:function(t){return this.collection.get(t)}},{key:"asArray",value:function(){var t=[];return this.collection.forEach((function(e){t.push(e)})),t}},{key:"load",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.clear(),e=null,t.prev=2,t.next=5,this.api.$friend.favorites();case 5:e=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),window.console.warn(t.t0.detailMessage);case 11:return e&&(e.map((function(t){i.add(t)})),this.storeData(),this.isLoad=!0,this.loadEventName&&this.emit(this.loadEventName)),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,this,[[2,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateOnlineStatus",value:function(t){var e=this.get(t);e&&(e.lastActivity=(new Date).valueOf()/1e3,e.isOnline=!0,this.add(e),this.storeData())}}]),i}(oe),pM=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(t){var s;return Object(Nt["a"])(this,i),s=e.call(this,t),s.localStorageKey="pliziDialogs",s.restoreEventName="DialogsIsRestored",s.loadEventName="DialogsIsLoaded",s.updateEventName="DialogsIsUpdated",s}return Object(At["a"])(i,[{key:"compare",value:function(t,e){return t.lastMessageUnix===e.lastMessageUnix?0:t.lastMessageUnix>e.lastMessageUnix?-1:1}},{key:"onAddNewDialog",value:function(t){this.add(t),this.storeData(),this.restore(),this.emit(this.updateEventName)}},{key:"onRemoveDialog",value:function(t){this.delete(t),this.storeData(),this.restore(),this.emit(this.updateEventName)}},{key:"new",value:function(t){return new Bs(t)}},{key:"get",value:function(t){return this.collection.get(t)}},{key:"getDialogByCompanion",value:function(t){var e=null;return this.collection.forEach((function(i){i.isPrivate&&i.companion.id===t&&(e=i.id)})),e?this.collection.get(e):void 0}},{key:"asArray",value:function(){var t=[];return this.collection.forEach((function(e){t.push(e)})),t.sort(this.compare),t}},{key:"load",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.api.$chat.dialogs();case 4:e=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),window.console.warn(t.t0.detailMessage);case 10:return e&&(this.clear(),e.map((function(t){i.add(t)})),this.storeData(),this.isLoad=!0,this.loadEventName&&this.emit(this.loadEventName)),t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"dialogStateUpdated",value:function(t,e){var i=this.get(t);if(i){i.lastMessageDT=Object(Us["a"])(e.lastMessageDT),i.lastMessageText=e.lastMessageText,i.isLastFromMe=e.isLastFromMe,i.isRead=e.isRead;var s=i.getAttendee(e.userId);s&&(s.lastActivity=(new Date).valueOf()/1e3,s.isOnline=!0),this.add(i),this.storeData(),this.emit(this.updateEventName,this.get(t))}}},{key:"updateDialog",value:function(t,e){var i=this.get(t);i&&(this.set(t,e),this.storeData(),this.emit(this.updateEventName,this.get(t)))}},{key:"addAttendeeToDialog",value:function(t,e){var i=this.get(t);i&&(i.addAttendee(e),this.add(i),this.storeData(),this.emit(this.updateEventName,this.get(t)))}},{key:"removeAttendeeFromDialog",value:function(t,e){var i=this.get(t);i&&(i.removeAttendee(e),this.add(i),this.storeData(),this.emit(this.updateEventName,this.get(t)))}},{key:"firstDialog",get:function(){return 0===this.collection.size?null:this.asArray()[0]}}]),i}(oe),hM=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){var t;Object(Nt["a"])(this,i);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a)),t.localStorageKey="pliziInvitations",t.restoreEventName="InvitationsIsRestored",t.loadEventName="InvitationsIsLoaded",t.updateEventName="InvitationsIsUpdated",t}return Object(At["a"])(i,[{key:"compare",value:function(t,e){return t.fullName===e.fullName?0:t.fullName>e.fullName?-1:1}},{key:"onAddNewInvitation",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(e){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.data.sender.id,s=null,t.prev=2,t.next=5,this.api.$users.getUser(i);case 5:s=t.sent,t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](2),window.console.warn(t.t0.detailMessage),t.t0;case 12:if(!s){t.next=18;break}return this.add(s.data),this.storeData(),this.restore(),this.emit(this.updateEventName,{invitationId:i}),t.abrupt("return",!0);case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t,this,[[2,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"removeInvitation",value:function(t){this.delete(t),this.storeData(),this.restore(),this.emit(this.updateEventName,{invitationId:t})}},{key:"new",value:function(t){return new Pf(t)}},{key:"get",value:function(t){return this.collection.get(t)}},{key:"asArray",value:function(){var t=[];return this.collection.forEach((function(e){t.push(e)})),t.sort(this.compare),t}},{key:"load",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.clear(),e=null,t.prev=2,t.next=5,this.api.$friend.invitationsList();case 5:e=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),window.console.warn(t.t0.detailMessage);case 11:return e&&(e.map((function(t){i.add(t)})),this.storeData(),this.isLoad=!0,this.loadEventName&&this.emit(this.loadEventName)),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,this,[[2,8]])})));function e(){return t.apply(this,arguments)}return e}()}]),i}(oe),fM=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(){var t;Object(Nt["a"])(this,i);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a)),t.localStorageKey="pliziNotifications",t.restoreEventName="NotificationsIsRestored",t.loadEventName="NotificationsIsLoaded",t.updateEventName="NotificationsIsUpdated",t}return Object(At["a"])(i,[{key:"compare",value:function(t,e){return t.createdAt.valueOf()===e.createdAt.valueOf()?0:t.createdAt.valueOf()>e.createdAt.valueOf()?-1:1}},{key:"onAddNewNotification",value:function(t){this.add(t),this.storeData(),this.emit(this.updateEventName)}},{key:"new",value:function(t){return new tv(t)}},{key:"get",value:function(t){return this.collection.get(t)}},{key:"asArray",value:function(){var t=[];return this.collection.forEach((function(e){t.push(e)})),t.sort(this.compare),t}},{key:"load",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.clear(),e=null,t.prev=2,t.next=5,this.api.$notifications.list();case 5:e=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),window.console.warn(t.t0.detailMessage);case 11:return e&&(e.map((function(t){i.add(t)})),this.storeData(),this.isLoad=!0,this.loadEventName&&this.emit(this.loadEventName)),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,this,[[2,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"notificationStateUpdated",value:function(t,e){window.console.log("notificationStateUpdated");var i=this.get(t);i&&this.storeData()}},{key:"idsList",get:function(){var t=[];return this.collection.forEach((function(e){t.push(e.id)})),t}}]),i}(oe),vM=function(t){Object(Ft["a"])(i,t);var e=Object(zt["a"])(i);function i(t){var s;return Object(Nt["a"])(this,i),s=e.call(this,t),s.localStorageKey="pliziCommunities",s.restoreEventName="CommunitiesIsRestored",s.loadEventName="CommunitiesIsLoaded",s.updateEventName="CommunitiesIsUpdated",s}return Object(At["a"])(i,[{key:"compare",value:function(t,e){return t.name.toUpperCase()===e.name.toUpperCase()?0:t.name.toUpperCase()>e.name.toUpperCase()?-1:1}},{key:"onAddToFavorites",value:function(t){this.add(t),this.storeData(),this.emit(this.updateEventName)}},{key:"removeFromFavorites",value:function(t){this.delete(t),this.storeData(),this.emit(this.updateEventName)}},{key:"new",value:function(t){return new rs(t)}},{key:"get",value:function(t){return this.collection.get(t)}},{key:"isCanAddToFavorites",value:function(t){return!this.collection.get(+t)}},{key:"asArray",value:function(){var t=[];return this.collection.forEach((function(e){t.push(e)})),t.sort(this.compare),t}},{key:"load",value:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.api.$communities.favorites();case 4:e=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),window.console.warn(t.t0.detailMessage);case 10:return e&&(this.clear(),e.map((function(t){i.add(t)})),this.storeData(),this.isLoad=!0,this.loadEventName&&this.emit(this.loadEventName)),t.abrupt("return",!0);case 12:case"end":return t.stop()}}),t,this,[[1,7]])})));function e(){return t.apply(this,arguments)}return e}()}]),i}(oe),gM=function(){function t(){Object(Nt["a"])(this,t),this.__localStorageKey="pliziUser",this._token="",this._channel="",this._user=null,this.__lastUserID=null,this._api=null,this._frm=null,this._fm=null,this._dm=null,this._im=null,this._nm=null,this._cm=null,this._isLoaded=!1,this.__isInit=!1,this.__restoreEventName="UserIsRestored",this.__loadEventName="UserIsLoaded",this.__updateEventName="UserIsUpdated"}return Object(At["a"])(t,[{key:"init",value:function(t){this.__isInit||(this._api=t,Vue.set(this,"_user",new rc(null)),this._frm=new dM(t),this._fm=new mM(t),this._dm=new pM(t),this._im=new hM(t),this._nm=new fM(t),this._cm=new vM(t),this.__isInit=!0)}},{key:"updateAuthUserData",value:function(t,e){this.token=e,this.channel=t.channel,this.user.updateAuthUser(t.data),this.__lastUserID=t.data.id,this._isLoaded=!0,this.storeUserData()}},{key:"storeUserData",value:function(){var t={data:this.user.toJSON(),channel:this.channel},e=JSON.stringify(t);return window.localStorage.setItem(this.__localStorageKey,e),this.emit(this.__updateEventName),e}},{key:"restoreData",value:function(){var t=localStorage.getItem(this.__localStorageKey);if("undefined"===typeof t||null===t||""===t)return null;var e=JSON.parse(t);return e&&e.data&&e.data.email&&e.channel?e:null}},{key:"cleanData",value:function(){window.console.warn(this.__lastUserID,"Auth: cleanData"),delete this._user,this._user=new rc(null),this._isLoaded=!1,localStorage.removeItem(this.__localStorageKey),localStorage.removeItem("pliziJWToken"),localStorage.removeItem("pliziChatChannel"),localStorage.removeItem(this.fm.localStorageKey),localStorage.removeItem(this.frm.localStorageKey),localStorage.removeItem(this.dm.localStorageKey),localStorage.removeItem(this.im.localStorageKey),localStorage.removeItem(this.nm.localStorageKey),localStorage.removeItem(this.cm.localStorageKey)}},{key:"friendsIncrease",value:function(){this.setFriendsNumber(this.user.stats.totalFriendsCount+1)}},{key:"friendsDecrease",value:function(){this.setFriendsNumber(this.user.stats.totalFriendsCount-1)}},{key:"setFriendsNumber",value:function(t){this.user.stats.totalFriendsCount=t>=0?t:0,this.storeUserData()}},{key:"videosIncrease",value:function(){this.setVideosNumber(this.user.stats.videosCount+1)}},{key:"videosDecrease",value:function(){this.setVideosNumber(this.user.stats.videosCount-1)}},{key:"setVideosNumber",value:function(t){this.user.stats.videosCount=t>=0?t:0,this.storeUserData()}},{key:"followersIncrease",value:function(){this.setFollowersNumber(this.user.stats.followCount+1)}},{key:"followersDecrease",value:function(){this.setFollowersNumber(this.user.stats.followCount-1)}},{key:"setFollowersNumber",value:function(t){this.user.stats.followCount=t>=0?t:0,this.storeUserData()}},{key:"emit",value:function(t,e){t&&this.api.emit(t,e||{})}},{key:"frm",get:function(){return this._frm}},{key:"fm",get:function(){return this._fm}},{key:"dm",get:function(){return this._dm}},{key:"im",get:function(){return this._im}},{key:"nm",get:function(){return this._nm}},{key:"cm",get:function(){return this._cm}},{key:"api",get:function(){return this._api}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"user",get:function(){return this._user}},{key:"token",get:function(){return this._token},set:function(t){this._token=(t+"").trim(),localStorage.setItem("pliziJWToken",this._token)}},{key:"channel",get:function(){return this._channel},set:function(t){this._channel=t,localStorage.setItem("pliziChatChannel",this._channel)}}]),t}(),bM=new gM,CM={name:"App",components:{GuestNavBar:$_,AuthNavBar:V$,AuthFooter:W$,GuestFooter:eM,AlertModal:IC,AppNotifications:oM},mixins:[uM],data:function(){return{containerID:"contentContainer",lastSearchText:"",notifyBlockIsVisible:!1,mainModalVisible:!1,mainModalTitle:"",mainModalMessage:"",mainModalClass:"",mainModalTimeOut:0}},methods:{afterSuccessLogin:function(t){if(t.token&&""!==(t.token+"").trim()){if(this.$root.$isAuth=!0,this.$root.$api.token=t.token,this.$root.$api.channel=t.chatChannel,t.redirect){var e=window.localStorage.getItem("pliziRedirectTo");e&&""!==e?(window.localStorage.removeItem("pliziRedirectTo"),this.$router.push({path:e})):this.$router.push({path:"/profile"})}}else this.$router.push({path:"/login"})},afterSuccessLogout:function(t){this.$root.$isAuth=!1,this.$root.$auth.cleanData(),this.$root.$api.token="",this.$root.$api.channel="",window.localStorage.removeItem("pliziJWToken"),window.localStorage.removeItem("pliziUser"),window.localStorage.removeItem("pliziChatChannel"),window.localStorage.removeItem("pliziLastSearch"),window.localStorage.removeItem("pliziFriends"),window.localStorage.removeItem("pliziFavorites"),window.localStorage.removeItem("pliziDialogs"),window.localStorage.removeItem("pliziInvitations"),window.localStorage.removeItem("pliziNotifications"),window.localStorage.removeItem("pliziCommunities"),t.redirect&&this.$router.push({path:"/login"})},afterUserLoad:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(""===t.token||!t.user){i.next=11;break}return e.restoreLastSearch(),e.$root.$api.token=t.token,e.$root.$api.channel=t.user.channel,e.$root.$auth.updateAuthUserData(t.user,t.token),e.$root.$api.connectToChannel(t.user.channel),e.$root.$isAuth=!0,s={id:t.user.data.id,email:t.user.data.email,firstName:t.user.data.profile.firstName,lastName:t.user.data.profile.lastName,userPic:t.user.data.profile.userPic,lastLoginAt:new Date},new de(null).addNewLastEntries(s),i.next=11,e.persistentCollectionsReload();case 11:case"end":return i.stop()}}),i)})))()},afterUserRestore:function(t){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(""===t.token||!t.user){i.next=9;break}return e.restoreLastSearch(),e.$root.$api.token=t.token,e.$root.$api.channel=t.user.channel,e.$root.$auth.updateAuthUserData(t.user,t.token),e.$root.$api.connectToChannel(t.user.channel),e.$root.$isAuth=!0,i.next=9,e.persistentCollectionsRestore();case 9:case"end":return i.stop()}}),i)})))()},onNewAppNotification:function(t){if(!(this.$root.$isXS()||this.$root.$isSM()||this.$root.$isMD())){if("app.notification"===t.type){var e=this.transformNotifyToNotification(t);this.addNotification(e)}if("user.notification"===t.type&&this.addNotification(t.notification),"chat.created"===t.type){var i=this.transformDialogToNotification(t);this.addNotification(i)}if("chat.removed"===t.type){var s=this.$root.$auth.dm.get(t.chatId),a=this.transformForChatRemovedToNotification(s,t.type);this.addNotification(a)}if("chat.attendee.removed"===t.type){var n=this.$root.$auth.dm.get(t.chatId),r=this.transformForChatRemovedToNotification(n,t.type);this.addNotification(r)}if("chat.attendee.appended"===t.type){var o=this.transformDialogToNotification(t);this.addNotification(o)}if("message.new"===t.type){var l=window.localStorage.getItem("pliziActiveDialog");if(l!==t.message.chatId&&!t.message.isMine){var c=this.transformMessageToNotification(t);this.addNotification(c)}}}},isAuthorized:function(){return this.$root.$isAuth},restoreLastSearch:function(){var t=localStorage.getItem("pliziLastSearch");this.$root.$lastSearch=t||""},persistentCollectionsReload:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$root.$auth.frm.load();case 2:return e.next=4,t.$root.$auth.fm.load();case 4:return e.next=6,t.$root.$auth.dm.load();case 6:return e.next=8,t.$root.$auth.im.load();case 8:return e.next=10,t.$root.$auth.nm.load();case 10:return e.next=12,t.$root.$auth.cm.load();case 12:case"end":return e.stop()}}),e)})))()},persistentCollectionsRestore:function(){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$root.$auth.frm.restore(),t.$root.$auth.fm.restore(),t.$root.$auth.dm.restore(),t.$root.$auth.im.restore(),t.$root.$auth.cm.restore();case 5:case"end":return e.stop()}}),e)})))()},keysUpdatersInitiator:function(){var t=this;this.$root.$on([this.$root.$auth.frm.loadEventName,this.$root.$auth.frm.restoreEventName,this.$root.$auth.frm.updateEventName],(function(){t.$root.$friendsKeyUpdater++})),this.$root.$on([this.$root.$auth.fm.loadEventName,this.$root.$auth.fm.restoreEventName,this.$root.$auth.fm.updateEventName],(function(){t.$root.$favoritesKeyUpdater++})),this.$root.$on([this.$root.$auth.dm.loadEventName,this.$root.$auth.dm.restoreEventName,this.$root.$auth.dm.updateEventName],(function(){t.$root.$dialogsKeyUpdater++})),this.$root.$on([this.$root.$auth.im.loadEventName,this.$root.$auth.im.restoreEventName,this.$root.$auth.im.updateEventName],(function(){t.$root.$invitationsKeyUpdater++})),this.$root.$on([this.$root.$auth.nm.loadEventName,this.$root.$auth.nm.restoreEventName,this.$root.$auth.nm.updateEventName],(function(){t.$root.$notificationsKeyUpdater++})),this.$root.$on([this.$root.$auth.cm.loadEventName,this.$root.$auth.cm.restoreEventName,this.$root.$auth.cm.updateEventName],(function(){t.$root.$communitiesKeyUpdater++}))}},created:function(){var t=this,e=["padding: 0.5rem;","background: rgb(0, 123, 255);","font-size: 1.4/3 Verdana;","font-weight: bold;","border-radius: 5px 0px 5px 0px;","color: white;"];this.$info("%c%s",e.join(""),"Plizi App created"),this.$root.$api=ne,this.$root.$api.init(this.$root),this.$root.$auth=bM,this.$root.$auth.init(this.$root.$api),this.keysUpdatersInitiator(),this.$root.$on("afterSuccessLogin",this.afterSuccessLogin),this.$root.$on("afterSuccessLogout",this.afterSuccessLogout),this.$root.$on("AfterUserLoad",this.afterUserLoad),this.$root.$on("AfterUserRestore",this.afterUserRestore),this.$root.$on("NewAppNotification",this.onNewAppNotification),this.$root.$on("searchStart",(function(e){t.lastSearchText=e.searchText})),this.$root.$on("api:Unauthorized",(function(e){t.$warn(e,"api:Unauthorized!"),t.afterSuccessLogout({redirect:!0})})),this.$root.$on("alertModal",(function(e){t.mainModalMessage=e.message,t.mainModalClass=e.clazz||"",t.mainModalTimeOut=e.timeOut?e.timeOut>>>0:0,t.mainModalVisible=!0})),this.$root.$on("hideAlertModal",(function(){t.mainModalVisible=!1})),this.$root.$on("NewChatDialog",(function(e){t.$root.$auth.dm.onAddNewDialog(e)})),this.$root.$on("UserNotification",(function(e){t.$root.$auth.nm.onAddNewNotification(e),"friendships.sent"===e.data.notificationType&&t.$root.$auth.im.onAddNewInvitation(e),"friendships.accepted"===e.data.notificationType&&t.$root.$auth.frm.onAddAcceptOurInvitation(e)}))},beforeDestroy:function(){this.$root.$off("afterSuccessLogin",(function(){})),this.$root.$off("afterSuccessLogout",(function(){})),this.$root.$off("AfterUserLoad",(function(){})),this.$root.$off("AfterUserRestore",(function(){})),this.$root.$off("searchStart",(function(){})),this.$root.$off("api:Unauthorized",(function(){})),this.$root.$off("alertModal",(function(){})),this.$root.$off("hideAlertModal",(function(){})),this.$root.$off("NewChatDialog",(function(){})),this.$root.$off("UserNotification",(function(){}))}},yM=CM,wM=(i("24f0"),Object(b["a"])(yM,m_,p_,!1,null,null,null)),xM=wM.exports;"development"==="production".toLowerCase()?(s["default"].config.productionTip=!1,s["default"].config.silent=!1,s["default"].config.devtools=!0):(s["default"].config.productionTip=!1,s["default"].config.silent=!0,s["default"].config.devtools=!1),s["default"].use(a["a"]),s["default"].use(r.a),s["default"].use(l.a,{baseUrl:"https://twemoji.maxcdn.com/",extension:".png",className:"twemoji",size:"16x16"}),s["default"].component("multiselect",u.a),s["default"].use(m.a),window.Vue=s["default"],delete window.app,self.parent&&self.parent!==self&&0!==self.parent.frames.length?self.parent.location=document.location:window.app=new s["default"]({router:c_,render:function(t){return t(xM)}}).$mount("#app")},"124d":function(t,e,i){"use strict";function s(t){return t instanceof Date?new Date(t.valueOf()):"number"===typeof t?new Date(1e3*t):new Date(t)}i.d(e,"a",(function(){return s}))},1568:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-gallery-description-header-body d-flex w-100 flex-column align-items-end"},[i("div",{staticClass:"plz-gallery-description--footer d-flex w-100 p-3 mt-auto"},[i("div",{staticClass:"plz-gallery-description--footer-pic mr-2"},[i("img",{staticClass:"plz-gallery-description--footer-img",attrs:{src:t.getUserData.userPic,alt:"avatar"}})]),i("TextEditor",{attrs:{clazz:"plz-text-editor h-auto  align-items-start flex-grow-1 ",editorPlaceholder:"Оставить комментарий...",dropToDown:!0,maximumCharacterLimit:500,workMode:"comment"},on:{editorPost:t.onTextPost}})],1)])},a=[],n=(i("a9e3"),i("ac1f"),i("5319"),i("498a"),i("96cf"),i("1da1")),r=i("59d0"),o=i("5b38"),l={name:"CommentTextField",components:{TextEditor:r["a"]},mixins:[o["a"]],props:{postId:{type:Number|String},imageId:{type:Number|String},type:{type:String}},computed:{getUserData:function(){return this.$root.$auth.user}},methods:{onTextPost:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:s=t.postText.trim(),""!==s?(a="<br/>",s=s.replace(/<p><\/p>/g,a),s=e.killBrTrail(s),""!==s?e.sendComment(s,t.attachments):t.attachments.length>0&&e.sendComment("",t.attachments)):t.attachments.length>0&&e.sendComment(" ",t.attachments);case 2:case"end":return i.stop()}}),i)})))()},sendComment:function(t,e){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:a=null,s.t0=i.type,s.next="gallery"===s.t0?4:"album"===s.t0?14:"post"===s.t0?24:34;break;case 4:return s.prev=4,s.next=7,i.$root.$api.$post.setGalleryComments(t,i.postId,i.imageId,e);case 7:a=s.sent,s.next=13;break;case 10:s.prev=10,s.t1=s["catch"](4),console.warn(s.t1.detailMessage);case 13:return s.abrupt("break",35);case 14:return s.prev=14,s.next=17,i.$root.$api.$post.sendCommentToAlbum(t,i.imageId,e);case 17:a=s.sent,s.next=23;break;case 20:s.prev=20,s.t2=s["catch"](14),console.warn(s.t2.detailMessage);case 23:return s.abrupt("break",35);case 24:return s.prev=24,s.next=27,i.$root.$api.$post.setPostComments(t,i.postId,e);case 27:a=s.sent,s.next=33;break;case 30:s.prev=30,s.t3=s["catch"](24),console.warn(s.t3.detailMessage);case 33:return s.abrupt("break",35);case 34:return s.abrupt("return");case 35:i.$emit("updateComments",a.data);case 36:case"end":return s.stop()}}),s,null,[[4,10],[14,20],[24,30]])})))()}}},c=l,u=i("2877"),d=Object(u["a"])(c,s,a,!1,null,null,null);e["a"]=d.exports},"212f":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("d4ec"),a=i("bee2"),n=function(){function t(e){Object(s["a"])(this,t),this._width=null,this._height=null,this._path=null,this._width=e.width,this._height=e.height,this._path=e.path}return Object(a["a"])(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"path",get:function(){return this._path}}]),Object(a["a"])(t,[{key:"toJSON",value:function(){return{width:this._width,height:this._height,path:this._path}}}]),t}()},"24f0":function(t,e,i){"use strict";var s=i("ab3d"),a=i.n(s);a.a},2585:function(t,e,i){"use strict";var s=i("07d8"),a=i.n(s);a.a},"37f2":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-heard icon-fill-heard",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M12 4.419c-2.826-5.695-11.999-4.064-11.999 3.27 0 7.27 9.903 10.938 11.999 15.311 2.096-4.373 12-8.041 12-15.311 0-7.327-9.17-8.972-12-3.27z"}})])},a=[],n={name:"IconFillHeard"},r=n,o=i("2877"),l=Object(o["a"])(r,s,a,!1,null,"61556186",null);e["a"]=l.exports},"382c":function(t,e,i){"use strict";var s=i("d4ec"),a=i("bee2"),n=function(){function t(e){Object(s["a"])(this,t),this._pageType=null,this._writeMessagesPermissions=null,this._postWallPermissions=null,this._viewWallPermissions=null,this._viewFriendsPermissions=null,this._twoFactorAuthEnabled=null,this._smsConfirm=null,e&&this.update(e)}return Object(a["a"])(t,[{key:"pageType",get:function(){return this._pageType}},{key:"writeMessagesPermissions",get:function(){return this._writeMessagesPermissions}},{key:"postWallPermissions",get:function(){return this._postWallPermissions}},{key:"viewWallPermissions",get:function(){return this._viewWallPermissions}},{key:"viewFriendsPermissions",get:function(){return this._viewFriendsPermissions}},{key:"twoFactorAuthEnabled",get:function(){return this._twoFactorAuthEnabled}},{key:"smsConfirm",get:function(){return this._smsConfirm}}]),Object(a["a"])(t,[{key:"update",value:function(t){this._pageType=t.pageType,this._writeMessagesPermissions=t.writeMessagesPermissions,this._postWallPermissions=t.postWallPermissions,this._viewWallPermissions=t.viewWallPermissions,this._viewFriendsPermissions=t.viewFriendsPermissions,this._twoFactorAuthEnabled=t.twoFactorAuthEnabled,this._smsConfirm=t.smsConfirm}},{key:"toJSON",value:function(){return{pageType:this.pageType,writeMessagesPermissions:this.writeMessagesPermissions,postWallPermissions:this.postWallPermissions,viewWallPermissions:this.viewWallPermissions,viewFriendsPermissions:this.viewFriendsPermissions,twoFactorAuthEnabled:this.twoFactorAuthEnabled,smsConfirm:this.smsConfirm}}}]),t}();e["a"]=n},"3b32":function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));i("caad"),i("b0c0"),i("ac1f"),i("2532"),i("1276");var s={jpg:["image/jpeg","image/pjpeg"],jpeg:["image/jpeg","image/pjpeg"],gif:["image/gif"],png:["image/png"],bmp:["image/bmp","image/x-windows-bmp"],doc:["application/msword"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"],odt:["application/vnd.oasis.opendocument.text"],pdf:["application/pdf"],xls:["application/excel","application/vnd.ms-excel","application/x-excel","application/x-msexcel"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],txt:["text/plain"],ppt:["application/vnd.ms-powerpoint"],pptx:["application/vnd.openxmlformats-officedocument.presentationml.presentation"],csv:["text/csv"],ods:["application/vnd.oasis.opendocument.spreadsheet"],rtf:["application/rtf"],tex:["application/x-tex"],wpd:["application/vnd.wordperfect"]};function a(t,e){var i=t.name.split(".").pop().toLowerCase();return e.includes(i)}function n(t){var e=t.name.split(".").pop().toLowerCase();return!!s[e]&&s[e].includes(t.type)}},"3e4b":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-comment-item"},[i("div",{staticClass:"plz-comment-item-wrapper"},[i("a",{staticClass:"plz-comment-item-data-pic",attrs:{href:"user-"+t.comment.author.id}},[i("img",{staticClass:"plz-comment-item-data-img",attrs:{src:t.checkAuthorAvatar,alt:t.comment.author.profile.firstName}})])]),i("div",{staticClass:"plz-comment-item-data"},[i("div",{staticClass:"plz-comment-item-holder"},[i("div",{staticClass:"plz-comment-item-data-info"},[i("h6",[i("a",{staticClass:"plz-comment-item-data-name",attrs:{href:"user-"+t.comment.author.id}},[i("b",[t._v(t._s(t.comment.author.fullName))])])]),t.isEdit?i("TextEditor",{attrs:{clazz:"plz-text-editor h-auto  align-items-start flex-grow-1 ",dropToDown:!0,maximumCharacterLimit:500,workMode:"comment","input-editor-text":t.comment.body,inputEditorAttachment:t.attachments},on:{editorPost:t.onTextPost}}):[i("p",{domProps:{innerHTML:t._s(t.livePreview)}},[t._v(t._s(t.comment.body))]),t.comment.imageList.length>0?i("Gallery",{attrs:{type:"comment",images:t.comment.imageList}}):t._e()]],2),i("div",{staticClass:"plz-comment-item-data-comment"},[i("div",{staticClass:"plz-comment-item-reply d-flex"},[i("span",{staticClass:"plz-comment-item-reply-date"},[t._v(t._s(t.getTimeComment))]),i("button",{staticClass:"plz-comment-item-reply-btn pl-2",on:{click:function(e){t.isAnswer=!t.isAnswer}}},[t._v(" Ответить ")]),!1===t.isEdit&&t.isAuthor?i("button",{staticClass:"plz-comment-item-reply-btn plz-comment-item-edit pl-2",on:{click:function(e){t.isEdit=!0}}},[t._v(" Изменить ")]):t._e(),!0===t.isEdit?i("button",{staticClass:"plz-comment-item-reply-btn plz-comment-item-edit",on:{click:function(e){t.isEdit=!1}}},[t._v(" Отменить ")]):t._e()]),i("div",{staticClass:"plz-comment-item-likes post-watched-counter",class:{"is-active":t.comment.alreadyLiked},on:{click:t.onLike}},[t.comment.alreadyLiked?i("IconFillHeard"):i("IconHeard"),i("span",[t._v(t._s(t._f("space1000")(t.comment.likes)))]),t.comment.usersLikes&&t.comment.usersLikes.length?i("div",{staticClass:"usersLikes p-3"},[i("p",{staticClass:"mb-1"},[i("b",{staticStyle:{cursor:"pointer"}},[t._v("Понравилось")]),t._v(" "+t._s(t.comment.likes)+" пользователям ")]),i("div",{staticClass:"d-flex mb-0"},t._l(t.shortUsersLikes,(function(t,e){return i("router-link",{key:e,staticClass:"usersLikes-user",attrs:{to:{name:"PersonalPage",params:{id:t.id}}}},[i("img",{staticClass:"rounded-circle",attrs:{src:t.profile.userPic,alt:t.profile.firstName+" "+t.profile.lastName,title:t.profile.firstName+" "+t.profile.lastName}})])})),1)]):t._e()],1)])]),t._l(t.comment.thread,(function(e){return i("div",{key:e.id,staticClass:"plz-comment-item__wrapper-answers"},[i("CommentItem",{key:e.id,attrs:{postId:t.postId,comment:e,attachments:e.attachments},on:{onDelete:t.comment.removeComment,update:t.comment.editComment}})],1)})),i("div",{staticClass:"plz-comment-item-wrapper-close",on:{click:t.deleteComment}},[t.isAuthor?i("button",{staticClass:"plz-comment-item-close-btn"}):t._e()]),t.isAnswer?i("CommentReply",{attrs:{commentId:t.comment.id,postId:t.postId,name:t.comment.author.profile.firstName},on:{addComment:t.addComment}}):t._e()],2)])},a=[],n=(i("c740"),i("fb6a"),i("a434"),i("a9e3"),i("d3b7"),i("ac1f"),i("5319"),i("498a"),i("96cf"),i("1da1")),r=i("c1df"),o=i.n(r),l=i("5e5e"),c=i("37f2"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isSending?i("div",{staticClass:"plz-comment-reply"},[i("div",{staticClass:"plz-comment-post"},[i("div",{staticClass:"plz-comment-item-data-pic mr-3"},[i("img",{staticClass:"plz-comment-item-data-img",attrs:{src:t.userData.userPic,alt:""}})]),i("TextEditor",{attrs:{clazz:"plz-text-editor h-auto plz-comment-post-text-field align-items-start flex-grow-1 ",dropToDown:!0,maximumCharacterLimit:500,workMode:"comment","input-editor-text":t.name+","},on:{editorPost:t.onTextPost}})],1)]):t._e()},d=[],m=i("59d0"),p=i("5b38"),h={name:"CommentReply",components:{TextEditor:m["a"]},mixins:[p["a"]],props:{commentId:{type:String|Number},postId:{type:String|Number},name:{type:String}},data:function(){return{newAnswer:[],isSending:!0}},computed:{userData:function(){var t=this.$root.$auth.user;return t.profile||window.console.warn(t,"profile is null"),t}},methods:{onTextPost:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:s=t.postText.trim(),""!==s?(a="<br/>",s=s.replace(/<p><\/p>/g,a),s=e.killBrTrail(s),""!==s?e.getAnswerToComment(s,t.attachments):t.attachments.length>0&&e.getAnswerToComment("",t.attachments)):t.attachments.length>0&&e.getAnswerToComment("",t.attachments),e.isAnswer=!e.isAnswer,e.isSending=!1;case 4:case"end":return i.stop()}}),i)})))()},getAnswerToComment:function(t,e){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,i.$root.$api.$post.getAnswerToComment(t,i.postId,e,i.commentId);case 3:a=s.sent,i.$emit("addComment",a.data),s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](0),console.warn(s.t0.detailMessage);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))()}}},f=h,v=i("2877"),g=Object(v["a"])(f,u,d,!1,null,null,null),b=g.exports,C=i("b99a"),y=i("66cf"),w={name:"CommentItem",components:{IconFillHeard:c["a"],Gallery:function(){return Promise.resolve().then(i.bind(null,"f195"))},TextEditor:m["a"],CommentReply:b,IconHeard:l["a"]},mixins:[C["a"],p["a"]],props:{comment:{type:y["a"]},postId:{type:String|Number},type:{type:String},attachments:{type:Array}},data:function(){return{isAnswer:!1,isEdit:!1}},computed:{livePreview:function(){var t=this.comment.body.replace(/<\/?[^>]+>/g,"").trim(),e=this.transformStrWithLinks(t);return t===e?this.comment.body:this.transformStrWithLinks(t)},checkAuthorAvatar:function(){return null===this.comment.author.profile.avatar.image?this.comment.defaultAvatarPath:this.comment.author.profile.avatar.image.medium.path},getTimeComment:function(){return o()(this.comment.createdAt).fromNow()},isAuthor:function(){return this.$root.$auth.user.id===this.comment.author.id},shortUsersLikes:function(){return this.comment._usersLikes&&this.comment._usersLikes.length?this.comment._usersLikes.slice(0,8):null}},methods:{addComment:function(t){this.comment.thread.push(new y["a"](t))},onTextPost:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s,a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:s=t.postText.trim(),""!==s?(a="<br/>",s=s.replace(/<p><\/p>/g,a),s=e.killBrTrail(s),""!==s?e.updateComment(s,t.attachments):t.attachments.length>0&&e.updateComment("",t.attachments)):t.attachments.length>0&&e.updateComment(" ",t.attachments),e.isEdit=!1;case 3:case"end":return i.stop()}}),i)})))()},deleteComment:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$post.deleteCommentById(t.comment.id);case 3:t.$emit("onDelete",t.comment.id),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},updateComment:function(t,e){var i=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,i.$root.$api.$post.editCommentById(i.comment.id,t,e);case 3:a=s.sent,i.$emit("update",a.data),s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](0),console.warn(s.t0.detailMessage);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))()},onLike:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$root.$api.$post.likeComment(t.comment.id);case 3:i=e.sent,null!==i&&(t.comment.alreadyLiked?(t.comment.alreadyLiked=!1,t.comment.likes--,s=t.comment.usersLikes.findIndex((function(e){return e.id===t.$root.$auth.user.id})),t.comment.usersLikes.splice(s,1)):(t.comment.alreadyLiked=!0,t.comment.likes++,t.comment.usersLikes.push(t.$root.$auth.user))),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.warn(e.t0.detailMessage);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}},x=w,k=Object(v["a"])(x,s,a,!1,null,null,null);e["a"]=k.exports},"3fa2":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return a}));i("d3b7"),i("ac1f"),i("25f0"),i("466d"),i("5319");function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8;return i.toString(16)}))}function a(t){var e=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,i=t.match(e);return i&&i.length>=1}},4534:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("4160"),i("a630"),i("d81d"),i("4ec9"),i("d3b7"),i("3ca3"),i("159b"),i("ddb0"),i("bf19");var s=i("d4ec"),a=i("bee2"),n=function(){function t(e,i){Object(s["a"])(this,t),this._collection=null,Vue.set(this,"_collection",new Map),e&&i&&this.receive(e,i)}return Object(a["a"])(t,[{key:"clear",value:function(){this._collection.clear()}},{key:"compare",value:function(t,e){return t.fullName>e.firstName?1:-1}},{key:"add",value:function(t){if(t.id){var e=this.new(t);return this._collection.set(e.id,e),t.id}return window.console.warn("PliziCollection: empty id for entity"),!1}},{key:"set",value:function(t,e){var i=this.new(e);this._collection.set(i.id,i)}},{key:"receive",value:function(t,e){var i=this;t&&t.map((function(t){i.add(new e(t))}))}},{key:"new",value:function(t){return t}},{key:"update",value:function(t){this.add(t)}},{key:"get",value:function(t){return this._collection.get(t)}},{key:"delete",value:function(t){this._collection.delete(t)}},{key:"filter",value:function(t){var e=[];return this._collection.forEach((function(i){t(i)&&e.push(i)})),e}},{key:"asArray",value:function(t){var e=[];return this._collection.forEach((function(t){e.push(t)})),t?e.sort(t):e.sort(this.compare),e}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){if(0===this.collection.size)return[];var t=[];return this.collection.forEach((function(e){t.push(e.toJSON())})),t}},{key:"keys",get:function(){return this._collection.keys()}},{key:"list",get:function(){return this._collection}},{key:"collection",get:function(){return this._collection}},{key:"size",get:function(){return this._collection.size}},{key:"length",get:function(){return this._collection.size}},{key:"first",get:function(){return Array.from(this._collection)[0][1]}},{key:"last",get:function(){return Array.from(this._collection)[this._collection.size-1][1]}}]),t}()},4678:function(t,e,i){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=n(t);return i(e)}function n(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}a.keys=function(){return Object.keys(s)},a.resolve=n,t.exports=a,a.id="4678"},4874:function(t,e,i){},"49bd":function(t,e,i){t.exports=i.p+"img/plizi-mobile-bg.74b360bb.png"},"4fb8":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("ac1f"),i("1276");var s=i("d4ec"),a=i("bee2"),n=function(){function t(e,i,a){Object(s["a"])(this,t),this._isBlob=!1,this._fileBlob=null,this._isImage=!1,this._attachment=null,this._originalName="",this._isBlob=e,this._isImage=i,this._originalName=a}return Object(a["a"])(t,[{key:"attachment",set:function(t){this._attachment=t},get:function(){return this._attachment}},{key:"isBlob",set:function(t){this._isBlob=t},get:function(){return this._isBlob}},{key:"isImage",get:function(){return this._isImage},set:function(t){this._isImage=t}},{key:"fileBlob",get:function(){return this._fileBlob},set:function(t){this._fileBlob=t}},{key:"originalName",get:function(){return this._originalName},set:function(t){this._originalName=t}},{key:"isArchive",get:function(){var t=this.originalName.split(".").pop().toLowerCase();return"zip"===t||"rar"===t}}]),t}()},"53a1":function(t,e,i){"use strict";var s=i("e7ae"),a=i.n(s);a.a},"57bd":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var s=i("d4ec"),a=i("bee2"),n=function(){function t(e){Object(s["a"])(this,t),this._notifications=0,this._unreadMessages=0,this._invitations=0,this._friends=0,this._isFollow=!0,this._isFriend=!1,this._followCount=0,this._isInBlacklist=!1,this._videosCount=0,this._imageCount=0,e&&this.update(e)}return Object(a["a"])(t,[{key:"notifications",get:function(){return this._notifications},set:function(t){this._notifications=t}},{key:"unreadMessages",get:function(){return this._unreadMessages},set:function(t){this._unreadMessages=t}},{key:"invitations",get:function(){return this._invitations},set:function(t){this._invitations=t}},{key:"friends",get:function(){return this._friends},set:function(t){this._friends=t}},{key:"totalFriendsCount",get:function(){return this._friends},set:function(t){this._friends=t}},{key:"isFollow",get:function(){return this._isFollow},set:function(t){this._isFollow=t}},{key:"isFriend",get:function(){return this._isFriend},set:function(t){this._isFriend=t}},{key:"followCount",get:function(){return this._followCount},set:function(t){this._followCount=t}},{key:"videosCount",get:function(){return this._videosCount},set:function(t){this._videosCount=t}},{key:"isInBlacklist",get:function(){return this._isInBlacklist},set:function(t){this._isInBlacklist=t}},{key:"imageCount",get:function(){return this._imageCount},set:function(t){this._imageCount=t}}]),Object(a["a"])(t,[{key:"update",value:function(t){this.notifications=t.notificationsCount,this.unreadMessages=t.unreadMessagesCount,this.invitations=t.pendingFriendshipRequestsCount,this.friends=t.totalFriendsCount,this.isFollow=t.isFollow,this.isFriend=t.isFriend,this.followCount=t.followCount,this.videosCount=t.videosCount,this.isInBlacklist=t.isInBlacklist,this.imageCount=t.imageCount}},{key:"toJSON",value:function(){return{notificationsCount:this.notifications,unreadMessagesCount:this.unreadMessages,pendingFriendshipRequestsCount:this.invitations,totalFriendsCount:this.friends,isFollow:this.isFollow,isFriend:this.isFriend,followCount:this.followCount,videosCount:this.videosCount,isInBlacklist:this.isInBlacklist,imageCount:this.imageCount}}}]),t}()},"59d0":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"editorContainer",class:t.blockClass,attrs:{id:t.fieldId}},[i("div",{staticClass:"flex-column w-100 position-relative"},[i("div",{staticClass:"row w-100 ml-0"},[t.showAvatar?i("div",{staticClass:"plz-editor-avatar col-1 align-items-center text-center pt-2"},[i("img",{staticClass:"chat-companion-user-pic rounded-circle my-0 mx-auto",attrs:{src:t.userPic,alt:t.userFullName}})]):t._e(),i("div",{staticClass:"plz-editor-body pl-0",class:{"plz-editor-body-wza":t.showAvatar,"forward-message-width":!t.showAvatar}},[i("div",{staticClass:"form pl-2"},[i("div",{staticClass:"form-row align-items-center"},[i("div",{staticClass:"col-12 d-flex justify-content-between p-0"},[i("Editor",{ref:"editor",staticClass:"plz-text-editor-form form-control px-2 py-1",attrs:{placeholder:t.editorPlaceholder,inputEditorText:t.inputEditorText,maximumCharacterLimit:t.maximumCharacterLimit,isError:t.isMaximumCharacterLimit},on:{editorPost:t.onEditorNewPost,editorKeyDown:t.onEditorKeyDown,onMaximumCharacterLimit:t.onMaximumCharacterLimit,onUpdate:t.onUpdate}}),i("button",{staticClass:"btn btn-link",attrs:{disabled:t.isLoading},on:{click:function(e){return e.stopPropagation(),t.onSendPostClick(e)}}},[i("IconSend",{staticStyle:{height:"20px"}})],1)],1),t.isMaximumCharacterLimit?i("div",{staticClass:"col-12"},[i("p",{staticClass:"text-danger"},[t._v("Превышено максимально допустимое количество символов.")])]):t._e(),t.bodyError?i("div",{staticClass:"col-12"},[i("p",{staticClass:"text-danger"},[t._v(t._s(t.bodyError[0]))])]):t._e()])])]),i("div",{staticClass:"plz-editor-btns d-flex flex-column flex-md-row justify-content-between"},[i("button",{staticClass:"attach-file btn-add-file w-100 d-flex align-items-center justify-content-center btn btn-link my-0 mx-0 mr-md-2 px-1 position-relative",class:{"attach-file--disallow cursor-non-drop":t.isDisallowUpload},attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.onAttachBtnClick(e)}}},[i("IconAddFile"),i("input",{ref:"editorFiler",staticClass:"plz-text-editor-file-picker",attrs:{type:"file",disabled:t.isDisallowUpload,multiple:""},on:{change:function(e){return t.onSelectFile()}}})],1),i("button",{staticClass:"btn btn-link w-100 mx-0 p-0 btn-add-smile position-relative",attrs:{type:"button"}},[i("EmojiPicker",{attrs:{transform:t.emojiTransform,refs:"emojiPicker"},on:{addEmoji:t.onAddEmoji}})],1)])]),t.attachFiles&&t.attachFiles.length>0?i("div",{staticClass:"row mt-3"},[i("div",{staticClass:"plz-attachment-images pl-4",class:{"offset-1 col-9 ":t.showAvatar,"col-10":!t.showAvatar}},[i("ul",{ref:"attachList",staticClass:"plz-attachment-images-list list-unstyled d-flex flex-row mb-0 flex-wrap"},t._l(t.attachFiles,(function(e){return i("AttachmentItem",{key:e.id,attrs:{attach:e},on:{RemoveAttachment:t.onRemoveAttachment,AttachmentLoaded:t.onAttachmentLoaded,ZipAttachmentDisplayed:t.onAttachmentLoaded}})})),1)])]):t._e()])])},a=[],n=(i("99af"),i("4de4"),i("7db0"),i("4160"),i("a15b"),i("d81d"),i("b0c0"),i("a9e3"),i("d3b7"),i("ac1f"),i("3ca3"),i("5319"),i("498a"),i("159b"),i("ddb0"),i("b85c")),r=(i("96cf"),i("1da1")),o=i("2909"),l=i("3fa2"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"18",height:"18",viewBox:"0 0 501 450",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M386.25 0.776009C362.667 3.95101 342.893 14.031 322.181 33.435C310.153 44.704 143.995 211.364 140.324 215.842C133.544 224.112 127.238 234.617 124.021 243C121.439 249.729 120.42 254.988 120.137 263.05C119.706 275.316 120.918 281.363 125.788 291.25C132.814 305.514 145.215 318.013 159.25 324.974C165.306 327.977 169.015 329.236 174.767 330.239C189.356 332.783 205.894 329.107 221.122 319.935C228.267 315.632 232.697 312.212 240.239 305.175C249.001 297 367.898 177.804 369.919 175.168C370.798 174.023 372.131 171.773 372.883 170.168C374.695 166.3 374.789 160.218 373.102 156C370.747 150.112 364.804 143.993 358.631 141.1C356.1 139.914 355.143 139.751 350.75 139.755C345.316 139.759 343.608 140.339 339.25 143.656C338.15 144.493 307.438 174.915 271 211.26C203.163 278.925 202.009 280.018 195.483 282.861C189.392 285.514 182.863 285.661 177.806 283.26C173.843 281.378 169.564 277.018 167.437 272.695C165.885 269.542 165.753 268.906 165.786 264.759C165.829 259.397 167.194 255.334 170.721 250.07C173.957 245.242 360.973 58.4705 365.5 55.547C386.322 42.0995 408.484 42.8975 428.306 57.8095C433.74 61.8975 443.799 72.62 446.921 77.652C455.694 91.795 457.663 105.718 452.938 120.195C451.019 126.073 447.778 132.533 444.17 137.667C441.973 140.794 413.829 169.258 324.026 259.179C251.052 332.248 204.861 378.132 201.75 380.641C185.566 393.692 168.716 401.327 151.236 403.527C145.162 404.292 131.68 403.864 126.5 402.743C116.859 400.656 104.399 395.346 95.75 389.638C72.076 374.016 53.001 348.174 48.283 325.333C45.355 311.156 46.2705 297.217 51.087 282.644C53.7495 274.588 58.3805 265.202 63.494 257.5C67.628 251.272 67.9695 250.923 158.238 160.5C222.34 96.2885 249.444 68.8175 250.921 66.561C255.099 60.1815 255.633 53.541 252.485 47.14C250.165 42.4245 243.99 36.276 239.242 33.9565C236.013 32.3785 235.392 32.25 230.99 32.25C226.607 32.25 225.961 32.382 222.853 33.912C220.549 35.0465 217.693 37.214 213.863 40.736C210.776 43.5745 170.653 83.5515 124.702 129.574C40.943 213.46 36.9695 217.586 28.5475 229.412C4.60204 263.034 -4.07845 300.413 3.81154 335.924C9.12604 359.843 23.584 384.11 45.6045 406.071C64.946 425.36 86.9315 439.19 107.796 445.192C136.41 453.423 163.645 451.021 194.491 437.545C208.507 431.422 225.62 419.851 238.76 407.613C250.4 396.77 472.102 174.546 475.511 170.303C483.596 160.24 492.229 145.082 495.913 134.482C499.889 123.039 501.248 113.795 500.856 100.843C500.552 90.795 499.637 85.767 496.289 75.7635C493.121 66.2965 486.288 54.365 478.475 44.662C474.126 39.26 460.641 25.9155 455.5 21.9255C433.654 4.97101 409.618 -2.36949 386.25 0.776009Z"}})])},u=[],d={name:"IconAddFile"},m=d,p=i("2877"),h=Object(p["a"])(m,c,u,!1,null,null,null),f=h.exports,v=i("a547"),g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-send",attrs:{"enable-background":"new 0 0 512 512",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"}},[i("g",[i("path",{attrs:{d:"m499.394 237.364-471.982-187.41c-16.306-6.474-32.489 9.83-25.907 26.149l56.465 139.955c2.051 5.083 6.09 9.102 11.175 11.121l72.581 28.82-72.581 28.82c-5.086 2.019-9.125 6.038-11.175 11.121l-56.466 139.955c-6.569 16.286 9.566 32.637 25.907 26.149l471.982-187.41c16.774-6.661 16.844-30.582.001-37.27zm-443.304 170.173 35.75-88.611 111.55-44.292c16.771-6.66 16.841-30.582 0-37.27l-111.55-44.293-35.75-88.611 381.641 151.538z"}})])])},b=[],C={name:"IconSend"},y=C,w=Object(p["a"])(y,g,b,!1,null,null,null),x=w.exports,k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"editor",class:{"border-danger":t.isError}},[i("editor-content",{ref:"editor",staticClass:"editor-content",attrs:{editor:t.editor},nativeOn:{keydown:function(e){return t.onEditorKeyDown(e)},keyup:function(e){return t.onEditorKeyUp(e)}}}),t.isShowPlaceHolder?i("span",{staticClass:"placeholder",on:{click:t.setFocusEditor}},[t._v(" "+t._s(t.placeholder)+" ")]):t._e(),i("span",{staticClass:"editor-counter"},[t._v(t._s(t.textLength)+" / "+t._s(t.maximumCharacterLimit))])],1)},_=[],M=(i("466d"),i("cd42")),I=i("f23d"),P={name:"Editor",components:{EditorContent:M["b"],EditorMenuBar:M["c"]},props:{emoji:{type:String,default:null},placeholder:{type:String,default:null},inputEditorText:String,maximumCharacterLimit:{type:Number,default:1e4},isError:{type:Boolean,default:!1}},data:function(){return{editor:new M["a"]({extensions:[new I["b"],new I["c"],new I["a"]],onFocus:this.onFocus,onBlur:this.onBlur,onUpdate:this.onUpdate,content:this.inputEditorText?this.inputEditorText:null}),isFocusedEditor:!1,cursorPosition:1,textLength:0}},computed:{calcEditorH:function(){return"height: "+this.height+"px"},isShowPlaceHolder:function(){return!(this.isFocusedEditor||"<p></p>"!==this.editor.getHTML())}},methods:{setFocusEditor:function(){this.$refs.editor.editor.focus()},addEmoji:function(t){var e=this.editor.getHTML();e="<p></p>"===e.toLowerCase()?"":e,""===e&&this.editor.setContent('<p class="big-emoji">'.concat(t,"</p>")),e=e.substr(0,e.length-4)+'<span class="emoji">'.concat(t,"</span>"),this.editor.setContent(e),this.editor.focus()},onEditorKeyDown:function(t){if(this.$emit("editorKeyDown",t),this.$parent.checkUpdatedChatContainerHeight(),13===t.keyCode&&!0===t.ctrlKey){var e=this.editor.getHTML(),i=e.replace(/<p>|<\/p>/g,"").trim();if(!i.replace(/(?:\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDEFF])/g,"").trim()){var s=i.match(/(?:\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDEFF])/g);s&&1===s.length&&(e='<p class="big-emoji">'.concat(i,"</p>"))}this.editor.setContent(""),this.$emit("editorPost",{postText:e}),this.clearTextLength()}},onEditorKeyUp:function(){this.$parent.checkUpdatedChatContainerHeight()},onFocus:function(t){this.isFocusedEditor=!0},onBlur:function(t){var e=this.editor.getHTML().replace(/<\/?[^>]+>/g,"").trim();this.cursorPosition=t.view.state.selection.$anchor.pos,e||(this.isFocusedEditor=!1)},clearTextLength:function(){this.textLength=0},onUpdate:function(t){var e=this.editor.getHTML().replace(/<\/?[^>]+>/g,"").trim();this.cursorPosition=t.state.selection.$anchor.pos,this.textLength=e.length,this.$emit("onMaximumCharacterLimit",e),this.$emit("onUpdate")},setContent:function(t){this.editor.setContent(t)},getContent:function(){return this.editor.getHTML()},focus:function(){this.editor.focus()}},beforeDestroy:function(){this.editor.destroy()}},S=P,L=Object(p["a"])(S,k,_,!1,null,null,null),R=L.exports,N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Picker",{on:{emoji:t.insert},scopedSlots:t._u([{key:"emoji-invoker",fn:function(t){var e=t.events.click;return i("div",{staticClass:"picker-btn  ",on:{click:function(t){return t.stopPropagation(),e(t)}}},[i("IconAddSmile")],1)}},{key:"emoji-picker",fn:function(e){var s=e.emojis,a=e.insert;e.display;return i("div",{},[t.isVisible?i("div",{staticClass:"picker",style:t.transform},t._l(s,(function(e,s){return i("div",{key:s},[i("div",t._l(e,(function(e,s){return i("span",{key:s,staticClass:"picker-emoji py-1",attrs:{title:s},domProps:{innerHTML:t._s(t.parseEmoji(e))},on:{click:function(t){return a({event:t,emoji:e})}}})})),0)])})),0):t._e()])}}])})},A=[],F=i("669f"),z=i.n(F),E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{viewBox:"0 0 384 384",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"m245.449219 235.894531c-14.777344 12.960938-33.753907 20.105469-53.449219 20.105469-19.703125 0-38.65625-7.113281-53.367188-20.023438l-12.023437-10.550781-21.113281 24.046875 12.023437 10.550782c20.550781 18.039062 47 27.976562 74.480469 27.976562 27.472656 0 53.945312-9.96875 74.550781-28.054688l12.023438-10.554687-21.109375-24.046875zm0 0"}}),i("path",{attrs:{d:"m192 0c-105.871094 0-192 86.128906-192 192s86.128906 192 192 192 192-86.128906 192-192-86.128906-192-192-192zm0 352c-88.222656 0-160-71.777344-160-160s71.777344-160 160-160 160 71.777344 160 160-71.777344 160-160 160zm0 0"}}),i("path",{attrs:{d:"m112 144h32v32h-32zm0 0"}}),i("path",{attrs:{d:"m240 144h32v32h-32zm0 0"}})])},j=[],D={name:"IconAddSmile"},O=D,T=Object(p["a"])(O,E,j,!1,null,null,null),H=T.exports,U={name:"EmojiPicker",components:{Picker:z.a,IconAddSmile:H},props:{transform:{type:String,default:null}},data:function(){return{isVisible:!0}},methods:{hidePicker:function(){this.isVisible=!1},insert:function(t){var e=this;this.$emit("addEmoji",{emoji:t.emoji,keys:{altKey:t.event.altKey,ctrlKey:t.event.ctrlKey,shiftKey:t.event.shiftKey}}),t.event.ctrlKey&&(this.isVisible=!1,setTimeout((function(){e.isVisible=!0}),100))},parseEmoji:function(t){return this.$twemoji.parse(t)}}},V=U,B=Object(p["a"])(V,N,A,!1,null,null,null),Y=B.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"media position-relative pt-1 pr-1 mr-3 mb-1"},[t.attach.isBlob?i("SmallSpinner",{attrs:{clazz:"media__spinner","hide-text":!0}}):t._e(),t.attach.isImage?i("img",{attrs:{src:t.imageSrc,alt:t.attach.originalName.originalName,title:t.attach.originalName.originalName},on:{load:t.onAttachmentLoaded}}):t.attach.isBlob?[i("AttachmentFile",{attrs:{attach:t.attach}})]:[i("AttachmentFile",{attrs:{attach:t.attach.attachment}})],i("button",{staticClass:"btn btn-close btn-link border-0 border-danger bg-danger text-white rounded-circle",attrs:{type:"button","aria-label":"delete"},on:{click:function(e){return e.preventDefault(),t.onRemoveBtnClick(e)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])],2)},K=[],G=i("df0c"),W=i("4fb8"),J=i("ca63"),Z={name:"AttachmentItem",components:{SmallSpinner:J["a"],AttachmentFile:G["a"]},props:{attach:W["a"]},methods:{onRemoveBtnClick:function(t){this.$emit("RemoveAttachment",{event:t,attach:this.attach.attachment})},onAttachmentLoaded:function(t){this.$emit("AttachmentLoaded",{event:t,attach:this.attach.attachment})},onZipDisplayed:function(){this.$emit("ZipAttachmentDisplayed",{event:ev,attach:this.attach.attachment})}},computed:{imageSrc:function(){return this.attach.isBlob?this.attach.fileBlob:this.attach.attachment.thumb.path}}},X=Z,Q=Object(p["a"])(X,q,K,!1,null,null,null),tt=Q.exports,et=i("b99a"),it=i("3b32"),st=i("d2aa"),at=i("8e20"),nt=i("4534"),rt={name:"TextEditor",components:{IconSend:x,IconAddCamera:v["a"],IconAddFile:f,Editor:R,EmojiPicker:Y,AttachmentItem:tt},props:{fieldId:String,showAvatar:Boolean,clazz:String,editorPlaceholder:String,dropToDown:Boolean,workMode:{type:String,required:!0},inputEditorText:String,inputEditorAttachment:Array,maxFilesCount:{type:Number,default:10},maximumCharacterLimit:{type:Number,default:1e4},errors:{type:Object,default:null}},mixins:[et["a"]],data:function(){var t=[];return this.inputEditorAttachment&&(t=this.inputEditorAttachment.map((function(t){var e=new W["a"](!1,t.isImage,t.originalName);return e.attachment=t,e}))),{isLoading:!1,attachFiles:t,attachmentsData:new nt["a"],defaultClasses:"bg-white w-100 border-top position-relative mt-auto",editorContainerHeight:32,isMaximumCharacterLimit:!1,valueToContainerHeight:0}},computed:{emojiTransform:function(){return this.dropToDown?"transform: translate(-40%, 40px)":"transform: translate(-84%, -100%)"},userPic:function(){return this.$root.$auth.user.userPic},userFullName:function(){return this.$root.$auth.user.fullName},blockClass:function(){return this.clazz||this.defaultClasses},isDisallowUpload:function(){return this.attachFiles.length>=this.maxFilesCount},bodyError:function(){return this.errors&&this.errors.body?this.errors.body:null}},methods:{focus:function(){this.$refs.emojiPicker&&this.$refs.emojiPicker.hidePicker(),this.$refs.editor&&this.$refs.editor.focus()},getContent:function(){return{postText:this.$refs.editor.getContent(),attachments:this.getAttachmentsIDs(),attachmentsData:this.attachmentsData.asArray(),videoLink:null,workMode:this.workMode}},getAttachmentsIDs:function(){return this.attachFiles&&this.attachFiles.length>0?this.attachFiles.map((function(t){return t.attachment.id})):[]},onRemoveAttachment:function(t){var e=this;this.attachFiles=this.attachFiles.filter((function(e){return e.attachment.id!==t.attach.id})),this.attachmentsData.delete(t.attach.id),setTimeout((function(){e.checkUpdatedChatContainerHeight()}),200),this.$emit("onRemoveAttachment",t.attach.id)},onAttachmentLoaded:function(){this.checkUpdatedChatContainerHeight()},onSendPostClick:function(){var t=this.$refs.editor.getContent(),e=t.replace(/<p>|<\/p>/g,"").trim(),i=this.getAttachmentsIDs();(e.length||i&&i.length)&&(this.$refs.editor.setContent(""),this.$refs.editor.focus(),this.checkUpdatedChatContainerHeight(),this.onEditorNewPost({postText:t}),this.$refs.editor.clearTextLength())},onEditorNewPost:function(t){var e=this;if(this.isMaximumCharacterLimit)this.isMaximumCharacterLimit=!1;else{var i=t.postText.replace(/<\/?[^>]+>/g," ").trim();if((1===i.length||2===i.length)&&Object(l["a"])(i)){var s='<p class="big-emoji">'.concat(i,"</p>");return this.emitPost(s,n,r,null),this.attachFiles=[],void this.attachmentsData.clear()}var a=this.detectYoutubeLinks(i),n=this.getAttachmentsIDs(),r=this.attachmentsData.asArray(),o=this.deleteYoutubeLinksFromStr(i);a&&a.length?a.forEach((function(t){e.emitPost(o,null,null,t),n.length>=1&&e.emitPost("<p></p>",n,r,null),o=""})):this.emitPost(o,n,r,null),this.attachFiles=[],this.attachmentsData.clear()}},emitPost:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.$emit("editorPost",{postText:t,attachments:e,attachmentsData:i,videoLink:s,workMode:this.workMode})},onEditorKeyDown:function(t){this.$emit("editorKeyDown",t)},onSelectFile:function(t){this.addUploadAttachment(Object(o["a"])(this.$refs.editorFiler.files))},onSelectImage:function(t){this.addUploadAttachment(Object(o["a"])(this.$refs.editorImager.files))},onAddEmoji:function(t){if(t.keys.ctrlKey){this.$refs.editor.focus();var e=this.$refs.editor.getContent();if("<p></p>"===e.toLowerCase()){var i='<p class="big-emoji">'.concat(t.emoji,"</p>");this.$emit("editorPost",{postText:i})}else this.$refs.editor.addEmoji(t.emoji)}else this.$refs.editor.addEmoji(t.emoji)},onEditorNewHeight:function(t){this.$emit("editorNewHeight",{newHeight:t})},getStartContainerHeight:function(){this.editorContainerHeight=this.$refs.editorContainer.offsetHeight},checkUpdatedChatContainerHeight:function(){var t=this.$refs.editorContainer.offsetHeight+this.valueToContainerHeight;this.editorContainerHeight!==t&&(this.editorContainerHeight=t),this.onEditorNewHeight(this.editorContainerHeight)},onMaximumCharacterLimit:function(t){this.isMaximumCharacterLimit=t.length>this.maximumCharacterLimit},onUpdate:function(){this.$emit("onUpdateEditor")},onAttachBtnClick:function(t){var e=null;e="BUTTON"===t.target.tagName.toUpperCase()?$(t.target):$(t.target).closest("button.attach-file");var i=e.find("input.plz-text-editor-file-picker");i.click()},addValueToContainerHeight:function(){var t=this.getContent().workMode;"chat"==t&&(this.valueToContainerHeight=20)},addUploadAttachment:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var s,a,r,l,c,u,d,m;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.$refs.editor.focus(),s=t.length+e.attachFiles.length,!(s>e.maxFilesCount)){i.next=5;break}return e.$alert('\n                <h4 class="text-white">Ошибка</h4>\n                <div class="alert alert-danger">\n                Превышен лимит загрузки файлов\n                <br />\n                Допустимый максимальный лимит файлов: <b class="text-success">'.concat(e.maxFilesCount,"</b>\n                </div>"),"bg-danger",30),i.abrupt("return");case 5:a=[].concat(Object(o["a"])(st["b"]),Object(o["a"])(st["a"])),r=Object(n["a"])(t);try{for(c=function(){var i=l.value;Object(it["a"])(i,a)&&Object(it["b"])(i)||(e.$alert('\n                    <h4 class="text-white">Ошибка</h4>\n                    <div class="alert alert-danger">\n                        Недопустимое расширение у файла <b>'.concat(i.name,'</b>\n                        <br />\n                        Допустимые расширения файлов: <b class="text-success">').concat(a.join(", "),"</b>\n                    </div>"),"bg-danger",30),t=t.filter((function(t){return t.name!==i.name})))},r.s();!(l=r.n()).done;)c()}catch(p){r.e(p)}finally{r.f()}if(0!==t.length){i.next=10;break}return i.abrupt("return");case 10:u=Object(n["a"])(t),i.prev=11,m=regeneratorRuntime.mark((function t(){var i,s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=d.value,s=new FileReader,s.onload=function(){var t=new W["a"](!0,Object(it["a"])(i,st["b"]),i.name);t.isBlob=!0,e.isLoading=t.isBlob,t.fileBlob=s.result,e.attachFiles.push(t)},s.readAsDataURL(i),a=[],n=function(t){return new Promise((function(e){return setTimeout(e,t)}))},t.next=8,n(50);case 8:t.t0=e.workMode,t.next="chat"===t.t0?11:"comment"===t.t0?15:"post"===t.t0?19:23;break;case 11:return t.next=13,e.$root.$api.$chat.attachment([i]);case 13:return a=t.sent,t.abrupt("break",24);case 15:return t.next=17,e.$root.$api.$post.addAttachmentsToComment([i]);case 17:return a=t.sent,t.abrupt("break",24);case 19:return t.next=21,e.$root.$api.$post.storePostAttachments([i]);case 21:return a=t.sent,t.abrupt("break",24);case 23:console.warn("TextEditor::addUploadAttachment - No matches in switch.");case 24:a.map((function(t){var i=new at["a"](t);e.attachFiles=e.attachFiles.map((function(t){return t.originalName===i.originalName&&(t.attachment=i,t.isBlob=!1,e.isLoading=t.isBlob,t.fileBlob=null),t})),e.attachmentsData.add(t),e.$emit("newAttach",{attach:i})}));case 25:case"end":return t.stop()}}),t)})),u.s();case 14:if((d=u.n()).done){i.next=18;break}return i.delegateYield(m(),"t0",16);case 16:i.next=14;break;case 18:i.next=23;break;case 20:i.prev=20,i.t1=i["catch"](11),u.e(i.t1);case 23:return i.prev=23,u.f(),i.finish(23);case 26:case"end":return i.stop()}}),i,null,[[11,20,23,26]])})))()}},mounted:function(){this.getStartContainerHeight(),this.addValueToContainerHeight()}},ot=rt,lt=Object(p["a"])(ot,s,a,!1,null,null,null);e["a"]=lt.exports},"5b38":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("d81d"),i("96cf");var s=i("1da1"),a={methods:{killBrTrail:function(t){var e="<br/>";while(1){var i=t.length-e.length,s=t.substr(i).toLowerCase();if(s!==e)break;t=t.substr(0,i)}return t},lazyLoadMessages:function(t,e,i){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a.isCanLoadMoreMessages){s.next=2;break}return s.abrupt("return");case 2:if(!a.isMessagesLazyLoad){s.next=4;break}return s.abrupt("return");case 4:return a.isMessagesLazyLoad=!0,n=null,s.prev=6,s.next=9,a.$root.$api.$chat.messages(t,e,i);case 9:n=s.sent,s.next=16;break;case 12:throw s.prev=12,s.t0=s["catch"](6),window.console.warn(s.t0.detailMessage),s.t0;case 16:a.isMessagesLazyLoad=!1,window.localStorage.setItem("pliziActiveDialog",t),n&&(n.length>0?(a.isCanLoadMoreMessages=!0,n.map((function(t){a.prependMessageToMessagesList(t)}))):a.isCanLoadMoreMessages=!1);case 19:case"end":return s.stop()}}),s,null,[[6,12]])})))()},prependMessageToMessagesList:function(t){this.messagesList.prepend(t)}}}},"5e5e":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-heard",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M17.516 3c2.382 0 4.487 1.564 4.487 4.712 0 4.963-6.528 8.297-10.003 11.935-3.475-3.638-10.002-6.971-10.002-11.934 0-3.055 2.008-4.713 4.487-4.713 3.18 0 4.846 3.644 5.515 5.312.667-1.666 2.333-5.312 5.516-5.312zm0-2c-2.174 0-4.346 1.062-5.516 3.419-1.17-2.357-3.342-3.419-5.515-3.419-3.403 0-6.484 2.39-6.484 6.689 0 7.27 9.903 10.938 11.999 15.311 2.096-4.373 12-8.041 12-15.311 0-4.586-3.414-6.689-6.484-6.689z"}})])},a=[],n={name:"IconHeard"},r=n,o=i("2877"),l=Object(o["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},"66cf":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));i("4de4"),i("d81d");var s=i("d4ec"),a=i("bee2"),n=i("fe31"),r=i("8e20"),o=function(){function t(e){Object(s["a"])(this,t),this.__defaultAvatarPath="/images/plizi-noPrimaryImage-256.png",this._id=null,this._body=null,this._likes=0,this._alreadyLiked=!1,this._usersLikes=[],this._author=null,this._createdAt=null,this._attachments=[],this._thread=[],this.update(e)}return Object(a["a"])(t,[{key:"editComment",value:function(t){return this._thread=this._thread.map((function(e){return e.id===t.id?e.update(t):e}))}},{key:"removeComment",value:function(t){return this._thread=this._thread.filter((function(e){return e.id!==t}))}},{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"body",get:function(){return this._body},set:function(t){this._body=t}},{key:"likes",get:function(){return this._likes},set:function(t){this._likes=t}},{key:"alreadyLiked",get:function(){return this._alreadyLiked},set:function(t){this._alreadyLiked=t}},{key:"usersLikes",get:function(){return this._usersLikes},set:function(t){this._usersLikes=t}},{key:"author",get:function(){return this._author},set:function(t){this._author=t}},{key:"createdAt",get:function(){return this._createdAt},set:function(t){this._createdAt=new Date(1e3*t)}},{key:"attachments",get:function(){return this._attachments},set:function(t){this._attachments=t}},{key:"thread",get:function(){return this._thread},set:function(t){this._thread=t}},{key:"imageList",get:function(){return this._attachments.filter((function(t){return t.isImage}))}},{key:"defaultAvatarPath",get:function(){return this.__defaultAvatarPath}}]),Object(a["a"])(t,[{key:"update",value:function(e){var i=this;return this.body=e.body,this.id=e.id,this.likes=e.likes||0,this.author=e.author,this.alreadyLiked=e.alreadyLiked||!1,this.usersLikes=e.usersLikes?e.usersLikes.list.map((function(t){return new n["a"](t)})):[],this.createdAt=e.createdAt,this.attachments=[],e.attachments&&e.attachments.list&&e.attachments.list.length>0&&e.attachments.list.map((function(t){i.attachments.push(new r["a"](t))})),e.thread&&e.thread.list&&e.thread.list.length>0&&e.thread.list.map((function(e){i.thread.push(new t(e))})),this.author=e.author?new n["a"](e.author):null,this}}]),t}()},"724e":function(t,e,i){},7669:function(t,e,i){"use strict";var s=i("06bf"),a=i.n(s);a.a},7881:function(t,e,i){"use strict";var s=i("b53a"),a=i.n(s);a.a},"7a8b":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-gallery-description d-flex flex-column justify-content-between"},[i("div",{staticClass:"plz-gallery-description-header px-4 pt-4 pb-0"},[i("div",{staticClass:"plz-gallery-description--holder d-flex"},[i("div",{staticClass:"plz-gallery-description--holder-avatar mr-3"},[i("img",{staticClass:"plz-gallery-description--holder-avatar-item",attrs:{src:t.userAvatar,alt:t.userName+" "+t.userSurname}})]),i("div",{staticClass:"plz-gallery-description--holder-data d-flex flex-column w-100 justify-content-center"},[i("p",{staticClass:"plz-gallery-description--holder-data-author d-flex mb-0"},[t._v(" "+t._s(t.userName+" "+t.userSurname)+" ")]),i("p",{staticClass:"plz-gallery-description--holder-data-time mb-0"},[t._v(" "+t._s(t.getTimePost)+" ")])]),i("div",{staticClass:"post-poster-actions my-auto ml-auto"},[i("button",{staticClass:"btn btn-link post-settings",attrs:{id:"postSettings"+t.getTimePost,type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[i("i",{staticClass:"dots-vertical"})]),i("div",{staticClass:"dropdown-menu dropdown-menu-right py-3 px-0",attrs:{"aria-labelledby":"postSettings"+t.getTimePost}},[t._m(0),t._m(1)])])]),i("div",{staticClass:"plz-gallery-description--post-data d-flex"},[i("div",{staticClass:"plz-gallery-description--post-data-option post-watched-counter",class:{"is-active":t.image.alreadyLiked},on:{click:t.onLike}},[t.image.alreadyLiked?i("IconFillHeard"):i("IconHeard"),i("span",[t._v(t._s(t._f("space1000")(t.image.likes)))])],1),i("div",{staticClass:"plz-gallery-description--post-data-option post-watched-counter ml-4"},[i("IconMessage"),i("span",[t._v(t._s(t.comments.length))])],1),i("div",{staticClass:"plz-gallery-description--post-data-option post-watched-counter ml-4"},[i("IconShare"),i("span",[t._v(t._s(t._f("space1000")(t.post.sharesCount)))])],1)]),i("div",{staticClass:"plz-gallery-description-comment-wrapper"},t._l(t.comments,(function(e){return i("div",{staticClass:"plz-gallery-description-comment-item"},[i("CommentItem",{key:e.id,attrs:{comment:e,"post-id":t.postIdForComment,attachments:e.attachments},on:{onDelete:t.removeComment,update:t.editComment}})],1)})),0)]),i("CommentTextField",{staticClass:"plz-gallery-description-write-comment",attrs:{"post-id":t.postIdForComment,imageId:t.image.id,type:t.type},on:{updateComments:t.addNewComment}})],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-item"},[i("button",{staticClass:"btn dropdown-item text-left px-3 py-1"},[t._v(" Редактировать ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-item"},[i("button",{staticClass:"btn dropdown-item text-left px-3 py-1"},[t._v(" Удалить ")])])}],n=(i("99af"),i("4de4"),i("c740"),i("d81d"),i("a434"),i("96cf"),i("1da1")),r=i("2909"),o=i("c1df"),l=i.n(o),c=i("1568"),u=i("3e4b"),d=i("59d0"),m=i("5e5e"),p=i("37f2"),h=i("00e9"),f=i("df9c"),v=i("8e20"),g=i("66cf"),b={name:"GalleryDescription",components:{CommentTextField:c["a"],CommentItem:u["a"],TextEditor:d["a"],IconShare:f["a"],IconMessage:h["a"],IconHeard:m["a"],IconFillHeard:p["a"]},props:{comments:{type:Array,required:!0},post:{type:Object},image:{type:v["a"],default:null},type:{type:String}},computed:{userAvatar:function(){return null===this.getUserData.profile.avatar?this.image.__defaultAvatarPath:this.getUserData.profile.avatar.image.thumb.path},postIdForComment:function(){var t,e;return(null===(t=this.post)||void 0===t||null===(e=t.sharedFrom)||void 0===e?void 0:e.id)||this.post.id},userName:function(){return this.getUserData.profile.firstName},userSurname:function(){return this.getUserData.profile.lastName},getTimePost:function(){return l()(this.post.createdAt).fromNow()},getUserData:function(){return this.$root.$auth.user}},methods:{addNewComment:function(t){this.updateComments([].concat(Object(r["a"])(this.comments),[new g["a"](t)]))},editComment:function(t){var e=this.comments.map((function(e){return e.id===t.id?e.update(t):e}));this.updateComments(e)},removeComment:function(t){var e=this.comments.filter((function(e){return e.id!==t}));this.updateComments(e)},updateComments:function(t){this.$emit("updateComments",{comments:t,id:this.image.id})},onLike:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.prev=1,e.next=4,t.$root.$api.$image.likePostImage(t.post.id,t.image.id);case 4:i=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.warn(e.t0.detailMessage);case 10:null!==i&&(t.image.alreadyLiked?(t.image.alreadyLiked=!1,t.image.likes--,s=t.image.usersLikes.findIndex((function(e){return e.id===t.$root.$auth.user.id})),t.image.usersLikes.splice(s,1)):(t.image.alreadyLiked=!0,t.image.likes++,t.image.usersLikes.push(t.$root.$auth.user)));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}},C=b,y=i("2877"),w=Object(y["a"])(C,s,a,!1,null,null,null);e["a"]=w.exports},"7be8":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-gallery-viewer"},[i("button",{staticClass:"plz-gallery-viewer-close",on:{click:t.close}}),i("div",{staticClass:"plz-gallery-viewer-overflow",style:{"background-image":"linear-gradient(to right, rgba(0, 0, 0, .85) 0%, rgba(0, 0, 0, .85) 100%),\n         url('"+t.activeImage.image.normal.path+"'),\n         linear-gradient(to right, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) 100%)"}}),i("div",{staticClass:"plz-gallery-viewer-nav"},[i("div",{staticClass:"plz-gallery-viewer-nav-desktop",on:{click:t.prevImage}},[t.images.length>1?i("div",{staticClass:"plz-gallery-viewer-nav-btn plz-gallery-viewer-nav-btn-prev"},[i("IconArrowLeft")],1):t._e()]),i("div",{staticClass:"plz-gallery-viewer-nav-desktop",on:{click:t.nextImage}},[t.images.length>1?i("div",{staticClass:"plz-gallery-viewer-nav-btn plz-gallery-viewer-nav-btn-next"},[i("IconArrowRight")],1):t._e()])]),i("div",{staticClass:"plz-gallery-viewer-current"},[i("img",{attrs:{src:t.activeImage.image.original.path,alt:t.activeImage.originalName}})])])},a=[],n=(i("c740"),i("fb6a"),i("2909")),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-arrow-right",staticStyle:{"enable-background":"new 0 0 492.004 492.004"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 492.004 492.004","xml:space":"preserve"}},[i("g",[i("path",{attrs:{d:"M382.678,226.804L163.73,7.86C158.666,2.792,151.906,0,144.698,0s-13.968,2.792-19.032,7.86l-16.124,16.12\n                        c-10.492,10.504-10.492,27.576,0,38.064L293.398,245.9l-184.06,184.06c-5.064,5.068-7.86,11.824-7.86,19.028\n                        c0,7.212,2.796,13.968,7.86,19.04l16.124,16.116c5.068,5.068,11.824,7.86,19.032,7.86s13.968-2.792,19.032-7.86L382.678,265\n                        c5.076-5.084,7.864-11.872,7.848-19.088C390.542,238.668,387.754,231.884,382.678,226.804z"}})])])},o=[],l={name:"IconArrowRight"},c=l,u=i("2877"),d=Object(u["a"])(c,r,o,!1,null,null,null),m=d.exports,p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-arrow-left",staticStyle:{"enable-background":"new 0 0 492 492"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 492 492","xml:space":"preserve"}},[i("g",[i("path",{attrs:{d:"M198.608,246.104L382.664,62.04c5.068-5.056,7.856-11.816,7.856-19.024c0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12\n                        C361.476,2.792,354.712,0,347.504,0s-13.964,2.792-19.028,7.864L109.328,227.008c-5.084,5.08-7.868,11.868-7.848,19.084\n                        c-0.02,7.248,2.76,14.028,7.848,19.112l218.944,218.932c5.064,5.072,11.82,7.864,19.032,7.864c7.208,0,13.964-2.792,19.032-7.864\n                        l16.124-16.12c10.492-10.492,10.492-27.572,0-38.06L198.608,246.104z"}})])])},h=[],f={name:"IconArrowLeft"},v=f,g=Object(u["a"])(v,p,h,!1,null,null,null),b=g.exports,C={name:"GalleryViewer",components:{IconArrowLeft:b,IconArrowRight:m},props:{images:{type:Array,required:!0},activeImage:null},created:function(){!this.activeImage&&this.images.length>0&&this.goToImage(this.images.slice(0,1).pop()),this.addBodyViewerOpen()},destroyed:function(){this.removeBodyViewerOpen()},computed:{currentImageIndex:function(){var t=this;return this.images.findIndex((function(e){return e.id===t.activeImage.id}))}},methods:{prevImage:function(){var t=this.currentImageIndex-1;t>=0&&this.images[t]?this.goToImage(this.images[t]):this.goToImage(Object(n["a"])(this.images).pop())},nextImage:function(){var t=this.currentImageIndex+1;t>=0&&this.images[t]?this.goToImage(this.images[t]):this.goToImage(Object(n["a"])(this.images).shift())},close:function(){this.$emit("close")},goToImage:function(t){this.$emit("showImage",t)},addBodyViewerOpen:function(){document.querySelector("body").classList.add("plz-gallery--open")},removeBodyViewerOpen:function(){document.querySelector("body").classList.remove("plz-gallery--open")}}},y=C,w=Object(u["a"])(y,s,a,!1,null,null,null);e["a"]=w.exports},"7e3f":function(t,e,i){"use strict";var s=i("efb2"),a=i.n(s);a.a},"8e20":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));i("d81d"),i("ac1f"),i("1276"),i("bf19");var s=i("d4ec"),a=i("bee2"),n=i("1066"),r=(i("212f"),i("fe31")),o=function(){function t(e){Object(s["a"])(this,t),this.__defaultAvatarPath="/images/plizi-noPrimaryImage-256.png",this._id=null,this._originalName=null,this._url=null,this._mimeType=null,this._size=null,this._image=null,this._likes=null,this._alreadyLiked=!1,this._usersLikes=[],this._id=e.id,this._originalName=e.originalName,this._url=e.url,this._mimeType=e.mimeType,this._size=e.size,this._image=e.image?new n["a"](e.image):null,this._likes=e.likes,this._alreadyLiked=e.alreadyLiked,this._usersLikes=e._usersLikes?e._usersLikes.list.map((function(t){return new r["a"](t)})):[]}return Object(a["a"])(t,[{key:"toJSON",value:function(){return{id:this._id,originalName:this._originalName,url:this._url,mimeType:this._mimeType,size:this._size,image:this._image?this._image.toJSON():null}}},{key:"id",get:function(){return this._id}},{key:"originalName",get:function(){return this._originalName}},{key:"url",get:function(){return this._url}},{key:"mimeType",get:function(){return this._mimeType}},{key:"size",get:function(){return this._size}},{key:"image",get:function(){return this._image}},{key:"isImage",get:function(){return!!this._image}},{key:"isArchive",get:function(){var t=this.originalName.split(".").pop().toLowerCase();return"zip"===t||"rar"===t}},{key:"original",get:function(){return this._image?this.image.original:null}},{key:"normal",get:function(){return this._image?this.image.normal:null}},{key:"medium",get:function(){return this._image?this.image.medium:null}},{key:"thumb",get:function(){return this._image?this.image.thumb:null}},{key:"likes",get:function(){return this._likes},set:function(t){this._likes=t}},{key:"alreadyLiked",get:function(){return this._alreadyLiked},set:function(t){this._alreadyLiked=t}},{key:"usersLikes",get:function(){return this._usersLikes},set:function(t){this._usersLikes=t}}]),t}()},a547:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{class:t.clazz,staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{version:"1.1",id:"add-camera",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"18px",height:"18",viewBox:"0 0 512 512","xml:space":"preserve"}},[i("g",[i("path",{attrs:{d:"M256,157c-68.925,0-125,56.075-125,125s56.075,125,125,125s125-56.075,125-125S324.925,157,256,157z M256,367\n            c-46.869,0-85-38.131-85-85c0-46.869,38.131-85,85-85s85,38.131,85,85C341,328.869,302.869,367,256,367z"}}),i("path",{attrs:{d:"M452,97h-73.575c-2.329,0-4.428-1.271-5.508-3.327L352.562,50.9c-0.056-0.117-0.112-0.233-0.171-0.349\n            C344.512,34.791,328.67,25,311.049,25H202.376c-17.621,0-33.463,9.791-41.342,25.552c-0.059,0.116-0.115,0.232-0.171,0.349\n            l-20.356,42.775C139.427,95.729,137.329,97,135,97H60c-33.084,0-60,26.916-60,60v270c0,33.084,26.916,60,60,60h392\n            c33.084,0,60-26.916,60-60V157C512,123.916,485.084,97,452,97z M472,426.999c0,11.028-8.972,20-20,20H60\n            c-11.028,0-20-8.972-20-20V157c0-11.028,8.972-20,20-20h75c17.62,0,33.462-9.79,41.342-25.55c0.059-0.116,0.115-0.233,0.172-0.35\n            l20.356-42.775c1.079-2.054,3.177-3.325,5.506-3.325h108.673c2.329,0,4.427,1.271,5.506,3.324l20.356,42.775\n            c0.057,0.117,0.113,0.234,0.172,0.35c7.88,15.76,23.722,25.55,41.342,25.55H452c11.028,0,20,8.972,20,20V426.999z"}}),i("rect",{attrs:{x:"392",y:"177",width:"40",height:"40"}})])])},a=[],n={name:"IconAddCamera",props:{clazz:String}},r=n,o=i("2877"),l=Object(o["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},aab6:function(t,e,i){"use strict";var s=i("af99"),a=i.n(s);a.a},ab3d:function(t,e,i){},af99:function(t,e,i){},afdf:function(t,e,i){},b436:function(t,e,i){"use strict";var s=i("f64b"),a=i.n(s);a.a},b53a:function(t,e,i){},b99a:function(t,e,i){"use strict";i("99af"),i("4160"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("5319"),i("159b");var s={data:function(){return{youtubeLinksRegExp:/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|www.youtube(?:-nocookie)?\.com\S*?[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,youtubeIdRegExp:/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,urlRegExp:/(https?:\/\/[^\s]+)/g}},methods:{detectYoutubeLinks:function(t){return t.match(this.youtubeLinksRegExp)},detectYoutubeIds:function(t){var e=t.match(this.youtubeIdRegExp);return!(!e||11!==e[7].length)&&e[7]},detectLink:function(t){return t.match(this.urlRegExp)},replaceLink:function(t){return t.replace(this.urlRegExp,(function(t){return'<a href="'+t+'" target="_blank">'+t+"</a>"}))},deleteYoutubeLinksFromStr:function(t){return t.replace(this.youtubeLinksRegExp,"")},transformStrWithLinks:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mqdefault",s=this.detectYoutubeLinks(t),a=this.detectLink(t);if("hqdefault"==i&&(i="mqdefault"),s&&s.length){var n=[];s.forEach((function(t){n.push(e.detectYoutubeIds(t))}));var r=t.replace(this.youtubeLinksRegExp,""),o=this.replaceLink(r);return{videoLinks:'<img src="//img.youtube.com/vi/'.concat(n[0],"/").concat(i,'.jpg"\n                             alt="" />'),text:"<p>".concat(o,"</p>")}}return a&&a.length?{text:this.replaceLink(t)}:t},getParameterByName:function(t,e){t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),s=i.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}}};e["a"]=s},c063:function(t,e,i){t.exports=i.p+"img/ErrorImage.fa0c9cbf.svg"},c6b1:function(t,e,i){"use strict";var s=i("724e"),a=i.n(s);a.a},ca63:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.spinnerClazz},[t._m(0),t.hideText?t._e():i("div",{staticClass:"pt-1 spinner-color text-center"},[i("h3",{domProps:{innerHTML:t._s(t.spinnerMessage)}})])])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-center pr-3"},[i("i",{staticClass:"fas fa-circle-notch fa-3x fa-spin spinner-color"})])}],n={name:"SmallSpinner",props:{clazz:String,message:String,hideText:{type:Boolean,default:!0}},data:function(){return{defaultClazz:"col-12 py-5 px-5 d-flex flex-column align-items-center",defaultMessage:"Данные загружаются"}},computed:{spinnerClazz:function(){return this.clazz||this.defaultClazz},spinnerMessage:function(){return this.message||this.defaultMessage}}},r=n,o=i("2877"),l=Object(o["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},d2aa:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return a}));var s=["jpg","jpeg","gif","png","bmp"],a=["doc","docx","odt","pdf","xls","xlsx","ods","txt","ppt","pptx","csv","ods","rtf","tex","wpd"]},da60:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));i("99af"),i("498a"),i("bf19");var s=i("d4ec"),a=i("bee2"),n=i("f804"),r=i("093c"),o=function(){function t(e){Object(s["a"])(this,t),this.__defaultAvatarPath="/images/noavatar-256.png",this._firstName="",this._lastName="",this._sex="n",this._birthday=null,this._location=null,this._relationshipId=null,this._relationshipUser=null,this._userPic="",this._avatar=null,this.__RELATIONSHIP_MARRIED=1,this.__RELATIONSHIP_NOT_MARRIED=2,this._firstName=e.firstName?(e.firstName+"").trim():null,this._lastName=e.lastName?(e.lastName+"").trim():null,this._sex=e.sex?(e.sex+"").trim():null,this._birthday=e.birthday,this._relationshipId=e.relationshipId,this._relationshipUser=e.relationshipUser?e.relationshipUser:null,this._location=e.location?new n["a"](e.location):null,e.userPic&&(this._userPic=(e.userPic+"").trim()),this._avatar=e.avatar?new r["a"](e.avatar):null}return Object(a["a"])(t,[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){return{firstName:this.firstName,lastName:this.lastName,sex:this.sex,birthday:this._birthday,location:this._location?this.location.toJSON():null,relationshipId:this.relationshipId,relationshipUser:this._relationshipUser?this.relationshipUser:null,userPic:this._userPic,avatar:this._avatar?this._avatar.toJSON():null}}},{key:"firstName",get:function(){return this._firstName.trim()}},{key:"lastName",get:function(){return this._lastName.trim()}},{key:"fullName",get:function(){return"".concat(this._firstName.trim()," ").concat(this._lastName.trim())}},{key:"sexShow",get:function(){switch(this._sex){case"m":return"мужской";case"f":return"женский";default:return"не указано"}}},{key:"sex",get:function(){return this._sex.trim()}},{key:"birthday",get:function(){return this._birthday?new Date(this._birthday):null}},{key:"location",get:function(){return this._location}},{key:"relationshipId",get:function(){return this._relationshipId}},{key:"relationshipUser",get:function(){return this._relationshipUser}},{key:"relationshipUserText",get:function(){if(1===this._relationshipId)switch(this._sex){case"m":return"на";case"f":return"за";case"n":return"с"}if(4===this._relationshipId||5===this._relationshipId)return"с"}},{key:"partnerFullname",get:function(){return this.relationshipUser.profile.firstName+" "+this.relationshipUser.profile.lastName}},{key:"family",get:function(){if(this.__RELATIONSHIP_MARRIED===this._relationshipId)switch(this._sex){case"m":return"Женат";case"f":return"Замужем";case"n":return"В браке"}if(this.__RELATIONSHIP_NOT_MARRIED===this._relationshipId)switch(this._sex){case"m":return"Не женат";case"f":return"Не замужем";case"n":return"Не в браке"}return 3===this.relationshipId?"В активном поиске":4===this.relationshipId?"Встречаюсь":5===this.relationshipId?"В отношениях":"Не указано"}},{key:"userPic",get:function(){return""!==this._userPic?this._userPic:this.__defaultAvatarPath},set:function(t){this._userPic=t}},{key:"avatar",get:function(){return this._avatar},set:function(t){this._avatar=t}}]),t}()},df0c:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.attach.isArchive?i("i",{staticClass:"fas fa-file-archive fa-3x d-inline-block",attrs:{alt:t.attach.originalName,title:t.attach.originalName}}):i("i",{staticClass:"fas fa-file-alt fa-3x d-inline-block",attrs:{alt:"attach.originalName",title:t.attach.originalName}})])},a=[],n=i("8e20"),r=i("4fb8"),o={name:"AttachmentFile",props:{attach:n["a"]|r["a"]}},l=o,c=i("2877"),u=Object(c["a"])(l,s,a,!1,null,"6d3e83b2",null);e["a"]=u.exports},df9c:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon icon-share",class:t.clazz,attrs:{viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"m495.917969 217.066406-203.714844-203.714844c-8.855469-8.859374-17.90625-13.351562-26.894531-13.351562-12.472656 0-27.039063 9.347656-27.039063 35.683594v125.605468c-62.179687 4.234376-120.03125 30.65625-164.234375 75.320313-47.742187 48.238281-74.035156 112.183594-74.035156 180.054687 0 29.234376 4.90625 57.945313 14.589844 85.335938 2.117187 5.992188 7.785156 10 14.140625 10 6.359375 0 12.023437-4.007812 14.144531-10 29.78125-84.257812 107.136719-142.988281 195.394531-149.960938v124.273438c0 26.335938 14.5625 35.683594 27.039063 35.683594 8.988281 0 18.035156-4.488282 26.890625-13.34375l203.722656-203.722656c10.367187-10.371094 16.078125-24.195313 16.078125-38.933594-.003906-14.734375-5.714844-28.5625-16.082031-38.929688zm-21.210938 56.652344-203.71875 203.722656c-.960937.957032-1.816406 1.722656-2.558593 2.328125-.101563-.953125-.164063-2.097656-.164063-3.453125v-139.960937c0-4.003907-1.601563-7.847657-4.453125-10.664063-2.808594-2.777344-6.597656-4.335937-10.546875-4.335937-.054687 0-.109375.003906-.164063.003906-53.421874.59375-104.4375 17.480469-147.53125 48.828125-30.1875 21.960938-54.878906 49.765625-72.832031 81.75-1.820312-11.613281-2.738281-23.390625-2.738281-35.273438 0-123.226562 100.230469-224.59375 223.433594-225.964843 8.21875-.089844 14.835937-6.777344 14.835937-15v-140.015625c0-1.355469.0625-2.496094.160157-3.453125.742187.605469 1.597656 1.371093 2.558593 2.332031l203.71875 203.71875c4.703125 4.703125 7.292969 10.992188 7.292969 17.71875-.003906 6.722656-2.59375 13.015625-7.292969 17.71875zm0 0"}})])},a=[],n={name:"IconShare",props:{clazz:String}},r=n,o=i("2877"),l=Object(o["a"])(r,s,a,!1,null,null,null);e["a"]=l.exports},e7ae:function(t,e,i){},ea90:function(t,e,i){"use strict";var s=i("4874"),a=i.n(s);a.a},efb2:function(t,e,i){},f195:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"plz-gallery",class:["plz-gallery-"+t.galleryType,{"plz-gallery-single":t.isSingleImage},{"plz-gallery-double":t.isDoubleImages},{"plz-gallery-triple":t.isTripleImages},{"plz-gallery-fourth":t.isFourthImages},{"plz-gallery-fifth":t.isFifthImages}]},["album"===t.galleryType?i("div",{staticClass:"plz-gallery-wrap plz-gallery-wrap-album"},[t._l(t.imagesWithClasses,(function(e){return[i("div",{staticClass:"plz-gallery-wrapper",class:{"plz-gallery-image-mores":e.isMore},attrs:{"data-more":t.countImage},on:{click:function(i){return t.showImage(e)}}},[i("img",{staticClass:"plz-gallery-image",class:e.classes,attrs:{src:e.path,alt:e.name},on:{click:function(i){return t.showImage(e)}}})])]}))],2):t._l(t.portraitBlocks,(function(e){return i("div",{class:e.classes},[t._l(e.images,(function(e){return[i("div",{staticClass:"plz-gallery-image-mores-div",class:{"plz-gallery-image-mores":e.isMore},attrs:{"data-more":t.countImage},on:{click:function(i){return t.showImage(e)}}},[i("img",{staticClass:"plz-gallery-image",class:e.classes,attrs:{src:e.path,alt:e.name},on:{click:function(i){return t.showImage(e)}}})])]}))],2)})),t.activeImage?i("div",{staticClass:"plz-gallery__show"},[i("GalleryViewer",{attrs:{images:t.images,"active-image":t.activeImage},on:{showImage:t.showImage,close:t.closeGalleryModal}}),t.post?i("GalleryDescription",{attrs:{post:t.post,comments:t.comments,image:t.activeImage,type:t.type},on:{updateComments:t.updateComments}}):t._e()],1):t._e()],2)},a=[],n=(i("99af"),i("7db0"),i("d81d"),i("fb6a"),i("d3b7"),i("25f0"),i("96cf"),i("1da1")),r=i("b85c"),o=i("7be8"),l=i("7a8b"),c=i("66cf"),u={name:"Gallery",components:{GalleryDescription:l["a"],GalleryViewer:o["a"]},props:{images:{type:Array,required:!0},post:{type:Object},type:{type:String}},data:function(){return{activeImage:null,comments:[]}},computed:{countImage:function(){return this.countImagesMore>0?"И ещё ".concat(this.countImagesMore):""},countImages:function(){return this.images.length},isSingleImage:function(){return 1===this.countImages},isDoubleImages:function(){return 2===this.countImages},isTripleImages:function(){return 3===this.countImages},isFourthImages:function(){return 4===this.countImages},isFifthImages:function(){return this.countImages>=5},countImagesMore:function(){return this.countImages-this.moreCount},viewImages:function(){return this.images.slice(0,this.moreCount)},firstImageView:function(){return this.images.slice(0,1).pop()},lastImageView:function(){return this.viewImages.slice(-1).pop()},isMore:function(){return this.countImages>this.moreCount},galleryType:function(){return this.imageType(this.firstImageView)},moreCount:function(){return"album"===this.galleryType?5:4},imagesWithClasses:function(){var t=this,e=0,i=this.viewImages.length;return this.viewImages.map((function(s){e++;var a=t.galleryType,n=["plz-gallery-image-".concat(a,"-wrap")],r=t.isMore&&t.lastImageView.id===s.id;return r&&n.push("plz-gallery-image-more"),"album"===t.galleryType?n.push(t.getAlbumImageClass(e,i)):n.push(t.getPortraitImageClass(e,i)),{path:s.original.path,name:s.originalName,classes:n,isMore:r,id:s.id}}))},portraitBlocks:function(){var t,e=this.viewImages.length,i=[],s=[],a=1,n=Object(r["a"])(this.imagesWithClasses);try{for(n.s();!(t=n.n()).done;){var o=t.value;switch(a){case 1:i.push(o);break;case 2:4===e?i.push(o):s.push(o);break;case 3:s.push(o);break;case 4:s.push(o);break;default:return null}a++}}catch(u){n.e(u)}finally{n.f()}var l=[],c=1;return i.length>0&&(l.push({images:i,classes:["plz-gallery-image-portrait","plz-gallery-image-portrait-block-".concat(c)]}),c++),s.length>0&&(l.push({images:s,classes:["plz-gallery-image-portrait","plz-gallery-image-portrait-block-".concat(c)]}),c++),l}},methods:{getCommentsOnGallery:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.$root.$api.$post.getCommentsByIdOnGallery(t);case 3:s=i.sent,e.comments=s.data.list.map((function(t){return new c["a"](t)})),i.next=10;break;case 7:i.prev=7,i.t0=i["catch"](0),console.warn(i.t0.detailMessage);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})))()},updateComments:function(t){var e=t.comments,i=t.id;this.activeImage.id===i&&(this.comments=e)},showImage:function(t){this.activeImage=this.images.find((function(e){return e.id===t.id})),this.getCommentsOnGallery(t.id);var e="".concat(this.$router.currentRoute.path,"?activeImageId=").concat(t.id,"&galleryType=").concat(this.type);history.pushState({url:e},"",e)},closeGalleryModal:function(){var t=this.$router.currentRoute.path;history.pushState({url:t},"",t),this.activeImage=null},isAlbum:function(t){return t.original.width/t.original.height>1.2},imageType:function(t){return t?this.isAlbum(t.image)?"album":"portrait":null},getAlbumImageClass:function(t,e){if(1===t){if(1===e)return"plz-gallery-image-album-full";if(2===e)return"plz-gallery-image-album-full";if(3===e)return"plz-gallery-image-album-full";if(4===e)return"plz-gallery-image-album-full";if(5===e)return"plz-gallery-image-album-half"}else if(2===t){if(2===e)return"plz-gallery-image-album-full";if(3===e)return"plz-gallery-image-album-half";if(4===e)return"plz-gallery-image-album-third";if(5===e)return"plz-gallery-image-album-half"}else if(3===t){if(3===e)return"plz-gallery-image-album-half";if(4===e)return"plz-gallery-image-album-third";if(5===e)return"plz-gallery-image-album-third"}else if(4===t){if(4===e)return"plz-gallery-image-album-third";if(5===e)return"plz-gallery-image-album-third"}else if(5===t)return"plz-gallery-image-album-third"},getPortraitImageClass:function(t,e){if(1===t)return 4===e?"plz-gallery-image-portrait-half":"plz-gallery-image-portrait-full";if(2===t){if(2===e)return"plz-gallery-image-portrait-full";if(3===e)return"plz-gallery-image-portrait-half";if(4===e)return"plz-gallery-image-portrait-half"}else if(3===t){if(3===e)return"plz-gallery-image-portrait-half";if(4===e)return"plz-gallery-image-portrait-half"}else if(4===t)return"plz-gallery-image-portrait-half"}},mounted:function(){var t=this.$router.history.current.query.activeImageId,e=this.$router.history.current.query.galleryType;if(e===this.type&&t){var i=this.images.find((function(e){return e.id.toString()===t}));i&&this.showImage(i)}}},d=u,m=i("2877"),p=Object(m["a"])(d,s,a,!1,null,null,null);e["default"]=p.exports},f64b:function(t,e,i){},f804:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("bf19");var s=i("d4ec"),a=i("bee2"),n=function(){function t(e){Object(s["a"])(this,t),this._id=null,this._title={ru:"",ua:"",en:""},this._id=e.id,this._title=e.title}return Object(a["a"])(t,[{key:"toJSON",value:function(){return{id:this.id,title:this.title}}},{key:"id",get:function(){return this._id}},{key:"title",get:function(){return this._title}}]),t}(),r=function(){function t(e){Object(s["a"])(this,t),this._id=null,this._title={ru:"",ua:"",en:""},this._region=null,this._country=null,this._id=e.id,this._title=e.title,this._region=e.region?new n(e.region):null,this._country=new n(e.country)}return Object(a["a"])(t,[{key:"id",get:function(){return this._id}},{key:"title",get:function(){return this._title}},{key:"region",get:function(){return this._region}},{key:"country",get:function(){return this._country}}]),Object(a["a"])(t,[{key:"toJSON",value:function(){return{id:this.id,title:this.title,region:this._region?this.region.toJSON():null,country:this.country.toJSON()}}}]),t}()},fe31:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));i("99af"),i("b64b"),i("bf19");var s=i("53ca"),a=i("d4ec"),n=i("bee2"),r=i("124d"),o=i("da60"),l=i("57bd"),c=i("382c"),u=function(){function t(e){Object(a["a"])(this,t),this._id="",this._isOnline=!1,this._isOwner=!1,this._lastActivity=null,this._profile=null,this._mutualFriendsCount=null,this._stats=null,this._privacySettings=null,e&&"object"===Object(s["a"])(e)&&Object.keys(e).length>0&&this.updateUserData(e)}return Object(n["a"])(t,[{key:"updateUserData",value:function(t){this._id=t.id?t.id:this.id,this._isOwner=!!t.isOwner,this._isOnline=t.isOnline?t.isOnline:this.isOnline,this._lastActivity=t.lastActivity?Object(r["a"])(t.lastActivity):this.lastActivity,this._profile=t.profile?new o["a"](t.profile):this.profile,this._mutualFriendsCount=t.mutualFriendsCount?t.mutualFriendsCount:this.mutualFriendsCount,this._stats=t.stats?new l["a"](t.stats):this.stats,this._privacySettings=t.privacySettings?new c["a"](t.privacySettings):this.privacySettings}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){return{id:this.id,isOwner:this.isOwner,isOnline:this.isOnline,lastActivity:this.lastActivity?this.lastActivity.valueOf()/1e3:this.lastActivity,profile:this.profile?this.profile.toJSON():null,stats:this.stats?this.stats.toJSON():null,privacySettings:this.privacySettings?this.privacySettings.toJSON():null,mutualFriendsCount:this.mutualFriendsCount}}},{key:"id",get:function(){return this._id}},{key:"isOnline",get:function(){return this._isOnline},set:function(t){this._isOnline=!!t}},{key:"isOwner",get:function(){return this._isOwner}},{key:"lastActivity",get:function(){return this._lastActivity},set:function(t){this._lastActivity=Object(r["a"])(t)}},{key:"lastActivityUnixTime",get:function(){return this._lastActivity.getTime()/1e3>>>0}},{key:"profile",get:function(){return this._profile}},{key:"mutualFriendsCount",get:function(){return this._mutualFriendsCount}},{key:"firstName",get:function(){return this.profile.firstName}},{key:"lastName",get:function(){return this.profile.lastName}},{key:"fullName",get:function(){return"".concat(this.profile.firstName," ").concat(this.profile.lastName)}},{key:"compareName",get:function(){return"".concat(this.profile.lastName.toLowerCase(),"-").concat(this.profile.firstName.toLowerCase())}},{key:"sex",get:function(){return this.profile.sex}},{key:"birthday",get:function(){return this.profile.birthday}},{key:"location",get:function(){return this.profile.location}},{key:"locationText",get:function(){return this.location&&this.city.title&&this.country.title?this.city.title.ru+", "+this.country.title.ru:"Не указано"}},{key:"city",get:function(){var t=this.profile.location;return t?{id:t.id,title:t.title}:null}},{key:"region",get:function(){var t=this.profile.location;return t||t.region?{id:t.region.id,title:t.region.title}:null}},{key:"country",get:function(){var t=this.profile.location;return t?{id:t.country.id,title:t.country.title}:null}},{key:"relationshipId",get:function(){return this.profile.relationshipId}},{key:"family",get:function(){return this.profile.family}},{key:"userPic",get:function(){return this.profile.userPic},set:function(t){this.profile.userPic=t}},{key:"avatar",get:function(){return this.profile.avatar},set:function(t){this.profile.avatar=t}},{key:"stats",get:function(){return this._stats}},{key:"privacySettings",get:function(){return this._privacySettings}}]),t}()}});