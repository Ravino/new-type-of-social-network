<template>
    <div id="profileWhatsNew" class="row bg-white-br20 mt-4 p-4">
        <div class="col-1 p-0">
            <div class="profilePhotos-userpic">
                <img :src="userData.userPic" :alt="userData.firstName"/>
            </div>
        </div>
        <div class="col-9 py-0 px-0">
            <label for="txtWhatsNew" class="d-none">Что у Вас нового?</label>
            <textarea class="form-control profileWhatsNew-textarea"
                      name="profileWhatsNew-textarea"
                      id="txtWhatsNew" cols="1" rows="1"
                      @input="textAreaAutoHeight"
                      placeholder="Что у Вас нового?">
            </textarea>
        </div>
        <div class="col-2 ml-auto py0 pr-0 d-flex align-items-center justify-content-end">
            <label class="attach-file btn btn-link my-0 ml-0 mr-2 px-1 btn-add-file position-relative">
                <IconAddFile />
                <input type="file">
            </label>
            <label class="attach-file btn btn-link my-0 ml-0 mr-2 px-1 btn-add-camera position-relative">
                <IconAddCamera />
                <input type="file">
            </label>

            <button class="btn btn-link mx-0 px-1 btn-add-smile" type="button">
                <IconAddSmile />
            </button>
        </div>
    </div>
</template>

<script>
    import IconAddFile from '../icons/IconAddFile.vue';
    import IconAddCamera from '../icons/IconAddCamera.vue';
    import IconAddSmile from '../icons/IconAddSmile.vue';

    export default {
        name: 'WhatsNewBlock',
        components: { IconAddCamera, IconAddSmile, IconAddFile },
        data() {
            return {}
        },
        computed: {
            userData() {
                return this.$root.$user;
            },
        },
        methods: {
            textAreaAutoHeight() {
                let textarea = document.querySelector('#txtWhatsNew');
                textarea.style.height = "";
                textarea.style.height = Math.min(textarea.scrollHeight, 300) + "px";
            },
        },
    }
</script>

